(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(l){if(l.ep)return;l.ep=!0;const d=n(l);fetch(l.href,d)}})();function _h(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function Ov(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var s=a.default;if(typeof s=="function"){var n=function o(){var l=!1;try{l=this instanceof o}catch{}return l?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};n.prototype=s.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(a).forEach(function(o){var l=Object.getOwnPropertyDescriptor(a,o);Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:function(){return a[o]}})}),n}var Eu={exports:{}},Wo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function Uv(){if(Rg)return Wo;Rg=1;var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function n(o,l,d){var u=null;if(d!==void 0&&(u=""+d),l.key!==void 0&&(u=""+l.key),"key"in l){d={};for(var m in l)m!=="key"&&(d[m]=l[m])}else d=l;return l=d.ref,{$$typeof:a,type:o,key:u,ref:l!==void 0?l:null,props:d}}return Wo.Fragment=s,Wo.jsx=n,Wo.jsxs=n,Wo}var Lg;function Mv(){return Lg||(Lg=1,Eu.exports=Uv()),Eu.exports}var t=Mv(),Au={exports:{}},ht={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function Bv(){if(Og)return ht;Og=1;var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.iterator;function v(A){return A===null||typeof A!="object"?null:(A=b&&A[b]||A["@@iterator"],typeof A=="function"?A:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function _(A,Q,ne){this.props=A,this.context=Q,this.refs=S,this.updater=ne||N}_.prototype.isReactComponent={},_.prototype.setState=function(A,Q){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,Q,"setState")},_.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function L(){}L.prototype=_.prototype;function D(A,Q,ne){this.props=A,this.context=Q,this.refs=S,this.updater=ne||N}var M=D.prototype=new L;M.constructor=D,w(M,_.prototype),M.isPureReactComponent=!0;var F=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function ee(A,Q,ne,ae,ge,ve){return ne=ve.ref,{$$typeof:a,type:A,key:Q,ref:ne!==void 0?ne:null,props:ve}}function le(A,Q){return ee(A.type,Q,void 0,void 0,void 0,A.props)}function he(A){return typeof A=="object"&&A!==null&&A.$$typeof===a}function be(A){var Q={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(ne){return Q[ne]})}var Te=/\/+/g;function we(A,Q){return typeof A=="object"&&A!==null&&A.key!=null?be(""+A.key):Q.toString(36)}function fe(){}function K(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(fe,fe):(A.status="pending",A.then(function(Q){A.status==="pending"&&(A.status="fulfilled",A.value=Q)},function(Q){A.status==="pending"&&(A.status="rejected",A.reason=Q)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function ye(A,Q,ne,ae,ge){var ve=typeof A;(ve==="undefined"||ve==="boolean")&&(A=null);var U=!1;if(A===null)U=!0;else switch(ve){case"bigint":case"string":case"number":U=!0;break;case"object":switch(A.$$typeof){case a:case s:U=!0;break;case y:return U=A._init,ye(U(A._payload),Q,ne,ae,ge)}}if(U)return ge=ge(A),U=ae===""?"."+we(A,0):ae,F(ge)?(ne="",U!=null&&(ne=U.replace(Te,"$&/")+"/"),ye(ge,Q,ne,"",function(Me){return Me})):ge!=null&&(he(ge)&&(ge=le(ge,ne+(ge.key==null||A&&A.key===ge.key?"":(""+ge.key).replace(Te,"$&/")+"/")+U)),Q.push(ge)),1;U=0;var Ee=ae===""?".":ae+":";if(F(A))for(var Ce=0;Ce<A.length;Ce++)ae=A[Ce],ve=Ee+we(ae,Ce),U+=ye(ae,Q,ne,ve,ge);else if(Ce=v(A),typeof Ce=="function")for(A=Ce.call(A),Ce=0;!(ae=A.next()).done;)ae=ae.value,ve=Ee+we(ae,Ce++),U+=ye(ae,Q,ne,ve,ge);else if(ve==="object"){if(typeof A.then=="function")return ye(K(A),Q,ne,ae,ge);throw Q=String(A),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return U}function O(A,Q,ne){if(A==null)return A;var ae=[],ge=0;return ye(A,ae,"","",function(ve){return Q.call(ne,ve,ge++)}),ae}function H(A){if(A._status===-1){var Q=A._result;Q=Q(),Q.then(function(ne){(A._status===0||A._status===-1)&&(A._status=1,A._result=ne)},function(ne){(A._status===0||A._status===-1)&&(A._status=2,A._result=ne)}),A._status===-1&&(A._status=0,A._result=Q)}if(A._status===1)return A._result.default;throw A._result}var se=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function W(){}return ht.Children={map:O,forEach:function(A,Q,ne){O(A,function(){Q.apply(this,arguments)},ne)},count:function(A){var Q=0;return O(A,function(){Q++}),Q},toArray:function(A){return O(A,function(Q){return Q})||[]},only:function(A){if(!he(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},ht.Component=_,ht.Fragment=n,ht.Profiler=l,ht.PureComponent=D,ht.StrictMode=o,ht.Suspense=g,ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,ht.__COMPILER_RUNTIME={__proto__:null,c:function(A){return B.H.useMemoCache(A)}},ht.cache=function(A){return function(){return A.apply(null,arguments)}},ht.cloneElement=function(A,Q,ne){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var ae=w({},A.props),ge=A.key,ve=void 0;if(Q!=null)for(U in Q.ref!==void 0&&(ve=void 0),Q.key!==void 0&&(ge=""+Q.key),Q)!q.call(Q,U)||U==="key"||U==="__self"||U==="__source"||U==="ref"&&Q.ref===void 0||(ae[U]=Q[U]);var U=arguments.length-2;if(U===1)ae.children=ne;else if(1<U){for(var Ee=Array(U),Ce=0;Ce<U;Ce++)Ee[Ce]=arguments[Ce+2];ae.children=Ee}return ee(A.type,ge,void 0,void 0,ve,ae)},ht.createContext=function(A){return A={$$typeof:u,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:d,_context:A},A},ht.createElement=function(A,Q,ne){var ae,ge={},ve=null;if(Q!=null)for(ae in Q.key!==void 0&&(ve=""+Q.key),Q)q.call(Q,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ge[ae]=Q[ae]);var U=arguments.length-2;if(U===1)ge.children=ne;else if(1<U){for(var Ee=Array(U),Ce=0;Ce<U;Ce++)Ee[Ce]=arguments[Ce+2];ge.children=Ee}if(A&&A.defaultProps)for(ae in U=A.defaultProps,U)ge[ae]===void 0&&(ge[ae]=U[ae]);return ee(A,ve,void 0,void 0,null,ge)},ht.createRef=function(){return{current:null}},ht.forwardRef=function(A){return{$$typeof:m,render:A}},ht.isValidElement=he,ht.lazy=function(A){return{$$typeof:y,_payload:{_status:-1,_result:A},_init:H}},ht.memo=function(A,Q){return{$$typeof:f,type:A,compare:Q===void 0?null:Q}},ht.startTransition=function(A){var Q=B.T,ne={};B.T=ne;try{var ae=A(),ge=B.S;ge!==null&&ge(ne,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(W,se)}catch(ve){se(ve)}finally{B.T=Q}},ht.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},ht.use=function(A){return B.H.use(A)},ht.useActionState=function(A,Q,ne){return B.H.useActionState(A,Q,ne)},ht.useCallback=function(A,Q){return B.H.useCallback(A,Q)},ht.useContext=function(A){return B.H.useContext(A)},ht.useDebugValue=function(){},ht.useDeferredValue=function(A,Q){return B.H.useDeferredValue(A,Q)},ht.useEffect=function(A,Q,ne){var ae=B.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(A,Q)},ht.useId=function(){return B.H.useId()},ht.useImperativeHandle=function(A,Q,ne){return B.H.useImperativeHandle(A,Q,ne)},ht.useInsertionEffect=function(A,Q){return B.H.useInsertionEffect(A,Q)},ht.useLayoutEffect=function(A,Q){return B.H.useLayoutEffect(A,Q)},ht.useMemo=function(A,Q){return B.H.useMemo(A,Q)},ht.useOptimistic=function(A,Q){return B.H.useOptimistic(A,Q)},ht.useReducer=function(A,Q,ne){return B.H.useReducer(A,Q,ne)},ht.useRef=function(A){return B.H.useRef(A)},ht.useState=function(A){return B.H.useState(A)},ht.useSyncExternalStore=function(A,Q,ne){return B.H.useSyncExternalStore(A,Q,ne)},ht.useTransition=function(){return B.H.useTransition()},ht.version="19.1.1",ht}var Ug;function Eh(){return Ug||(Ug=1,Au.exports=Bv()),Au.exports}var x=Eh();const $e=_h(x);var Du={exports:{}},Ko={},Tu={exports:{}},Ru={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function $v(){return Mg||(Mg=1,(function(a){function s(O,H){var se=O.length;O.push(H);e:for(;0<se;){var W=se-1>>>1,A=O[W];if(0<l(A,H))O[W]=H,O[se]=A,se=W;else break e}}function n(O){return O.length===0?null:O[0]}function o(O){if(O.length===0)return null;var H=O[0],se=O.pop();if(se!==H){O[0]=se;e:for(var W=0,A=O.length,Q=A>>>1;W<Q;){var ne=2*(W+1)-1,ae=O[ne],ge=ne+1,ve=O[ge];if(0>l(ae,se))ge<A&&0>l(ve,ae)?(O[W]=ve,O[ge]=se,W=ge):(O[W]=ae,O[ne]=se,W=ne);else if(ge<A&&0>l(ve,se))O[W]=ve,O[ge]=se,W=ge;else break e}}return H}function l(O,H){var se=O.sortIndex-H.sortIndex;return se!==0?se:O.id-H.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var u=Date,m=u.now();a.unstable_now=function(){return u.now()-m}}var g=[],f=[],y=1,b=null,v=3,N=!1,w=!1,S=!1,_=!1,L=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function F(O){for(var H=n(f);H!==null;){if(H.callback===null)o(f);else if(H.startTime<=O)o(f),H.sortIndex=H.expirationTime,s(g,H);else break;H=n(f)}}function B(O){if(S=!1,F(O),!w)if(n(g)!==null)w=!0,q||(q=!0,we());else{var H=n(f);H!==null&&ye(B,H.startTime-O)}}var q=!1,ee=-1,le=5,he=-1;function be(){return _?!0:!(a.unstable_now()-he<le)}function Te(){if(_=!1,q){var O=a.unstable_now();he=O;var H=!0;try{e:{w=!1,S&&(S=!1,D(ee),ee=-1),N=!0;var se=v;try{t:{for(F(O),b=n(g);b!==null&&!(b.expirationTime>O&&be());){var W=b.callback;if(typeof W=="function"){b.callback=null,v=b.priorityLevel;var A=W(b.expirationTime<=O);if(O=a.unstable_now(),typeof A=="function"){b.callback=A,F(O),H=!0;break t}b===n(g)&&o(g),F(O)}else o(g);b=n(g)}if(b!==null)H=!0;else{var Q=n(f);Q!==null&&ye(B,Q.startTime-O),H=!1}}break e}finally{b=null,v=se,N=!1}H=void 0}}finally{H?we():q=!1}}}var we;if(typeof M=="function")we=function(){M(Te)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,K=fe.port2;fe.port1.onmessage=Te,we=function(){K.postMessage(null)}}else we=function(){L(Te,0)};function ye(O,H){ee=L(function(){O(a.unstable_now())},H)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(O){O.callback=null},a.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<O?Math.floor(1e3/O):5},a.unstable_getCurrentPriorityLevel=function(){return v},a.unstable_next=function(O){switch(v){case 1:case 2:case 3:var H=3;break;default:H=v}var se=v;v=H;try{return O()}finally{v=se}},a.unstable_requestPaint=function(){_=!0},a.unstable_runWithPriority=function(O,H){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var se=v;v=O;try{return H()}finally{v=se}},a.unstable_scheduleCallback=function(O,H,se){var W=a.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?W+se:W):se=W,O){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=se+A,O={id:y++,callback:H,priorityLevel:O,startTime:se,expirationTime:A,sortIndex:-1},se>W?(O.sortIndex=se,s(f,O),n(g)===null&&O===n(f)&&(S?(D(ee),ee=-1):S=!0,ye(B,se-W))):(O.sortIndex=A,s(g,O),w||N||(w=!0,q||(q=!0,we()))),O},a.unstable_shouldYield=be,a.unstable_wrapCallback=function(O){var H=v;return function(){var se=v;v=H;try{return O.apply(this,arguments)}finally{v=se}}}})(Ru)),Ru}var Bg;function Iv(){return Bg||(Bg=1,Tu.exports=$v()),Tu.exports}var Lu={exports:{}},bs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function zv(){if($g)return bs;$g=1;var a=Eh();function s(g){var f="https://react.dev/errors/"+g;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(s(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(g,f,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:g,containerInfo:f,implementation:y}}var u=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,f){if(g==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return bs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,bs.createPortal=function(g,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(s(299));return d(g,f,null,y)},bs.flushSync=function(g){var f=u.T,y=o.p;try{if(u.T=null,o.p=2,g)return g()}finally{u.T=f,o.p=y,o.d.f()}},bs.preconnect=function(g,f){typeof g=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,o.d.C(g,f))},bs.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},bs.preinit=function(g,f){if(typeof g=="string"&&f&&typeof f.as=="string"){var y=f.as,b=m(y,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,N=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?o.d.S(g,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:N}):y==="script"&&o.d.X(g,{crossOrigin:b,integrity:v,fetchPriority:N,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},bs.preinitModule=function(g,f){if(typeof g=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=m(f.as,f.crossOrigin);o.d.M(g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&o.d.M(g)},bs.preload=function(g,f){if(typeof g=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,b=m(y,f.crossOrigin);o.d.L(g,y,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},bs.preloadModule=function(g,f){if(typeof g=="string")if(f){var y=m(f.as,f.crossOrigin);o.d.m(g,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else o.d.m(g)},bs.requestFormReset=function(g){o.d.r(g)},bs.unstable_batchedUpdates=function(g,f){return g(f)},bs.useFormState=function(g,f,y){return u.H.useFormState(g,f,y)},bs.useFormStatus=function(){return u.H.useHostTransitionStatus()},bs.version="19.1.1",bs}var Ig;function Vp(){if(Ig)return Lu.exports;Ig=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(s){console.error(s)}}return a(),Lu.exports=zv(),Lu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function Fv(){if(zg)return Ko;zg=1;var a=Iv(),s=Eh(),n=Vp();function o(e){var r="https://react.dev/errors/"+e;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var r=e,i=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(i=r.return),e=r.return;while(e)}return r.tag===3?i:null}function u(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function m(e){if(d(e)!==e)throw Error(o(188))}function g(e){var r=e.alternate;if(!r){if(r=d(e),r===null)throw Error(o(188));return r!==e?null:e}for(var i=e,c=r;;){var h=i.return;if(h===null)break;var p=h.alternate;if(p===null){if(c=h.return,c!==null){i=c;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===i)return m(h),e;if(p===c)return m(h),r;p=p.sibling}throw Error(o(188))}if(i.return!==c.return)i=h,c=p;else{for(var j=!1,E=h.child;E;){if(E===i){j=!0,i=h,c=p;break}if(E===c){j=!0,c=h,i=p;break}E=E.sibling}if(!j){for(E=p.child;E;){if(E===i){j=!0,i=p,c=h;break}if(E===c){j=!0,c=p,i=h;break}E=E.sibling}if(!j)throw Error(o(189))}}if(i.alternate!==c)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:r}function f(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e;for(e=e.child;e!==null;){if(r=f(e),r!==null)return r;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),M=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),he=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),Te=Symbol.iterator;function we(e){return e===null||typeof e!="object"?null:(e=Te&&e[Te]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Symbol.for("react.client.reference");function K(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===fe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case B:return"Suspense";case q:return"SuspenseList";case he:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case M:return(e.displayName||"Context")+".Provider";case D:return(e._context.displayName||"Context")+".Consumer";case F:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ee:return r=e.displayName||null,r!==null?r:K(e.type)||"Memo";case le:r=e._payload,e=e._init;try{return K(e(r))}catch{}}return null}var ye=Array.isArray,O=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},W=[],A=-1;function Q(e){return{current:e}}function ne(e){0>A||(e.current=W[A],W[A]=null,A--)}function ae(e,r){A++,W[A]=e.current,e.current=r}var ge=Q(null),ve=Q(null),U=Q(null),Ee=Q(null);function Ce(e,r){switch(ae(U,r),ae(ve,e),ae(ge,null),r.nodeType){case 9:case 11:e=(e=r.documentElement)&&(e=e.namespaceURI)?og(e):0;break;default:if(e=r.tagName,r=r.namespaceURI)r=og(r),e=ig(r,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ne(ge),ae(ge,e)}function Me(){ne(ge),ne(ve),ne(U)}function me(e){e.memoizedState!==null&&ae(Ee,e);var r=ge.current,i=ig(r,e.type);r!==i&&(ae(ve,e),ae(ge,i))}function _e(e){ve.current===e&&(ne(ge),ne(ve)),Ee.current===e&&(ne(Ee),Ho._currentValue=se)}var Ye=Object.prototype.hasOwnProperty,st=a.unstable_scheduleCallback,re=a.unstable_cancelCallback,Se=a.unstable_shouldYield,Ie=a.unstable_requestPaint,Fe=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,T=a.unstable_ImmediatePriority,je=a.unstable_UserBlockingPriority,te=a.unstable_NormalPriority,X=a.unstable_LowPriority,Le=a.unstable_IdlePriority,$=a.log,De=a.unstable_setDisableYieldValue,Be=null,Pe=null;function P(e){if(typeof $=="function"&&De(e),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(Be,e)}catch{}}var C=Math.clz32?Math.clz32:xe,Y=Math.log,Ne=Math.LN2;function xe(e){return e>>>=0,e===0?32:31-(Y(e)/Ne|0)|0}var Ve=256,V=4194304;function I(e){var r=e&42;if(r!==0)return r;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function R(e,r,i){var c=e.pendingLanes;if(c===0)return 0;var h=0,p=e.suspendedLanes,j=e.pingedLanes;e=e.warmLanes;var E=c&134217727;return E!==0?(c=E&~p,c!==0?h=I(c):(j&=E,j!==0?h=I(j):i||(i=E&~e,i!==0&&(h=I(i))))):(E=c&~p,E!==0?h=I(E):j!==0?h=I(j):i||(i=c&~e,i!==0&&(h=I(i)))),h===0?0:r!==0&&r!==h&&(r&p)===0&&(p=h&-h,i=r&-r,p>=i||p===32&&(i&4194048)!==0)?r:h}function ie(e,r){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&r)===0}function J(e,r){switch(e){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ue(){var e=Ve;return Ve<<=1,(Ve&4194048)===0&&(Ve=256),e}function He(){var e=V;return V<<=1,(V&62914560)===0&&(V=4194304),e}function ot(e){for(var r=[],i=0;31>i;i++)r.push(e);return r}function Ze(e,r){e.pendingLanes|=r,r!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function pt(e,r,i,c,h,p){var j=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var E=e.entanglements,z=e.expirationTimes,ce=e.hiddenUpdates;for(i=j&~i;0<i;){var ke=31-C(i),Re=1<<ke;E[ke]=0,z[ke]=-1;var de=ce[ke];if(de!==null)for(ce[ke]=null,ke=0;ke<de.length;ke++){var ue=de[ke];ue!==null&&(ue.lane&=-536870913)}i&=~Re}c!==0&&Ge(e,c,0),p!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=p&~(j&~r))}function Ge(e,r,i){e.pendingLanes|=r,e.suspendedLanes&=~r;var c=31-C(r);e.entangledLanes|=r,e.entanglements[c]=e.entanglements[c]|1073741824|i&4194090}function ft(e,r){var i=e.entangledLanes|=r;for(e=e.entanglements;i;){var c=31-C(i),h=1<<c;h&r|e[c]&r&&(e[c]|=r),i&=~h}}function vt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ut(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Is(){var e=H.p;return e!==0?e:(e=window.event,e===void 0?32:kg(e.type))}function Ht(e,r){var i=H.p;try{return H.p=e,r()}finally{H.p=i}}var It=Math.random().toString(36).slice(2),et="__reactFiber$"+It,We="__reactProps$"+It,qe="__reactContainer$"+It,Vt="__reactEvents$"+It,Js="__reactListeners$"+It,ji="__reactHandles$"+It,Ni="__reactResources$"+It,va="__reactMarker$"+It;function eo(e){delete e[et],delete e[We],delete e[Vt],delete e[Js],delete e[ji]}function Pr(e){var r=e[et];if(r)return r;for(var i=e.parentNode;i;){if(r=i[qe]||i[et]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(e=ug(e);e!==null;){if(i=e[et])return i;e=ug(e)}return r}e=i,i=e.parentNode}return null}function Hr(e){if(e=e[et]||e[qe]){var r=e.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return e}return null}function wa(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e.stateNode;throw Error(o(33))}function cr(e){var r=e[Ni];return r||(r=e[Ni]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Xt(e){e[va]=!0}var Si=new Set,Qe={};function ze(e,r){Ke(e,r),Ke(e+"Capture",r)}function Ke(e,r){for(Qe[e]=r,e=0;e<r.length;e++)Si.add(r[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mt={},ns={};function Nt(e){return Ye.call(ns,e)?!0:Ye.call(Mt,e)?!1:it.test(e)?ns[e]=!0:(Mt[e]=!0,!1)}function lt(e,r,i){if(Nt(r))if(i===null)e.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(r);return}}e.setAttribute(r,""+i)}}function os(e,r,i){if(i===null)e.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttribute(r,""+i)}}function ct(e,r,i,c){if(c===null)e.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(r,i,""+c)}}var Ds,jc;function qr(e){if(Ds===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);Ds=r&&r[1]||"",jc=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ds+e+jc}var Nc=!1;function Sc(e,r){if(!e||Nc)return"";Nc=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(ue){var de=ue}Reflect.construct(e,[],Re)}else{try{Re.call()}catch(ue){de=ue}e.call(Re.prototype)}}else{try{throw Error()}catch(ue){de=ue}(Re=e())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(ue){if(ue&&de&&typeof ue.stack=="string")return[ue.stack,de.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),j=p[0],E=p[1];if(j&&E){var z=j.split(`
`),ce=E.split(`
`);for(h=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;h<ce.length&&!ce[h].includes("DetermineComponentFrameRoot");)h++;if(c===z.length||h===ce.length)for(c=z.length-1,h=ce.length-1;1<=c&&0<=h&&z[c]!==ce[h];)h--;for(;1<=c&&0<=h;c--,h--)if(z[c]!==ce[h]){if(c!==1||h!==1)do if(c--,h--,0>h||z[c]!==ce[h]){var ke=`
`+z[c].replace(" at new "," at ");return e.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",e.displayName)),ke}while(1<=c&&0<=h);break}}}finally{Nc=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?qr(i):""}function Ey(e){switch(e.tag){case 26:case 27:case 5:return qr(e.type);case 16:return qr("Lazy");case 13:return qr("Suspense");case 19:return qr("SuspenseList");case 0:case 15:return Sc(e.type,!1);case 11:return Sc(e.type.render,!1);case 1:return Sc(e.type,!0);case 31:return qr("Activity");default:return""}}function Zh(e){try{var r="";do r+=Ey(e),e=e.return;while(e);return r}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function zs(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ef(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ay(e){var r=ef(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),c=""+e[r];if(!e.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var h=i.get,p=i.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return h.call(this)},set:function(j){c=""+j,p.call(this,j)}}),Object.defineProperty(e,r,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(j){c=""+j},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function Ci(e){e._valueTracker||(e._valueTracker=Ay(e))}function tf(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var i=r.getValue(),c="";return e&&(c=ef(e)?e.checked?"true":"false":e.value),e=c,e!==i?(r.setValue(e),!0):!1}function ki(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Dy=/[\n"\\]/g;function Fs(e){return e.replace(Dy,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Cc(e,r,i,c,h,p,j,E){e.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.type=j:e.removeAttribute("type"),r!=null?j==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+zs(r)):e.value!==""+zs(r)&&(e.value=""+zs(r)):j!=="submit"&&j!=="reset"||e.removeAttribute("value"),r!=null?kc(e,j,zs(r)):i!=null?kc(e,j,zs(i)):c!=null&&e.removeAttribute("value"),h==null&&p!=null&&(e.defaultChecked=!!p),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+zs(E):e.removeAttribute("name")}function sf(e,r,i,c,h,p,j,E){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),r!=null||i!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;i=i!=null?""+zs(i):"",r=r!=null?""+zs(r):i,E||r===e.value||(e.value=r),e.defaultValue=r}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=E?e.checked:!!c,e.defaultChecked=!!c,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(e.name=j)}function kc(e,r,i){r==="number"&&ki(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Wa(e,r,i,c){if(e=e.options,r){r={};for(var h=0;h<i.length;h++)r["$"+i[h]]=!0;for(i=0;i<e.length;i++)h=r.hasOwnProperty("$"+e[i].value),e[i].selected!==h&&(e[i].selected=h),h&&c&&(e[i].defaultSelected=!0)}else{for(i=""+zs(i),r=null,h=0;h<e.length;h++){if(e[h].value===i){e[h].selected=!0,c&&(e[h].defaultSelected=!0);return}r!==null||e[h].disabled||(r=e[h])}r!==null&&(r.selected=!0)}}function rf(e,r,i){if(r!=null&&(r=""+zs(r),r!==e.value&&(e.value=r),i==null)){e.defaultValue!==r&&(e.defaultValue=r);return}e.defaultValue=i!=null?""+zs(i):""}function af(e,r,i,c){if(r==null){if(c!=null){if(i!=null)throw Error(o(92));if(ye(c)){if(1<c.length)throw Error(o(93));c=c[0]}i=c}i==null&&(i=""),r=i}i=zs(r),e.defaultValue=i,c=e.textContent,c===i&&c!==""&&c!==null&&(e.value=c)}function Ka(e,r){if(r){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=r;return}}e.textContent=r}var Ty=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nf(e,r,i){var c=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="":c?e.setProperty(r,i):typeof i!="number"||i===0||Ty.has(r)?r==="float"?e.cssFloat=i:e[r]=(""+i).trim():e[r]=i+"px"}function of(e,r,i){if(r!=null&&typeof r!="object")throw Error(o(62));if(e=e.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var h in r)c=r[h],r.hasOwnProperty(h)&&i[h]!==c&&nf(e,h,c)}else for(var p in r)r.hasOwnProperty(p)&&nf(e,p,r[p])}function _c(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ry=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ly=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _i(e){return Ly.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ec=null;function Ac(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qa=null,Xa=null;function lf(e){var r=Hr(e);if(r&&(e=r.stateNode)){var i=e[We]||null;e:switch(e=r.stateNode,r.type){case"input":if(Cc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Fs(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var c=i[r];if(c!==e&&c.form===e.form){var h=c[We]||null;if(!h)throw Error(o(90));Cc(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<i.length;r++)c=i[r],c.form===e.form&&tf(c)}break e;case"textarea":rf(e,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&Wa(e,!!i.multiple,r,!1)}}}var Dc=!1;function cf(e,r,i){if(Dc)return e(r,i);Dc=!0;try{var c=e(r);return c}finally{if(Dc=!1,(Qa!==null||Xa!==null)&&(hl(),Qa&&(r=Qa,e=Xa,Xa=Qa=null,lf(r),e)))for(r=0;r<e.length;r++)lf(e[r])}}function to(e,r){var i=e.stateNode;if(i===null)return null;var c=i[We]||null;if(c===null)return null;i=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,r,typeof i));return i}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tc=!1;if(jr)try{var so={};Object.defineProperty(so,"passive",{get:function(){Tc=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{Tc=!1}var Vr=null,Rc=null,Ei=null;function df(){if(Ei)return Ei;var e,r=Rc,i=r.length,c,h="value"in Vr?Vr.value:Vr.textContent,p=h.length;for(e=0;e<i&&r[e]===h[e];e++);var j=i-e;for(c=1;c<=j&&r[i-c]===h[p-c];c++);return Ei=h.slice(e,1<c?1-c:void 0)}function Ai(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Di(){return!0}function uf(){return!1}function Ns(e){function r(i,c,h,p,j){this._reactName=i,this._targetInst=h,this.type=c,this.nativeEvent=p,this.target=j,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(i=e[E],this[E]=i?i(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Di:uf,this.isPropagationStopped=uf,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),r}var ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=Ns(ja),ro=y({},ja,{view:0,detail:0}),Oy=Ns(ro),Lc,Oc,ao,Ri=y({},ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ao&&(ao&&e.type==="mousemove"?(Lc=e.screenX-ao.screenX,Oc=e.screenY-ao.screenY):Oc=Lc=0,ao=e),Lc)},movementY:function(e){return"movementY"in e?e.movementY:Oc}}),hf=Ns(Ri),Uy=y({},Ri,{dataTransfer:0}),My=Ns(Uy),By=y({},ro,{relatedTarget:0}),Uc=Ns(By),$y=y({},ja,{animationName:0,elapsedTime:0,pseudoElement:0}),Iy=Ns($y),zy=y({},ja,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fy=Ns(zy),Py=y({},ja,{data:0}),ff=Ns(Py),Hy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yy(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=Vy[e])?!!r[e]:!1}function Mc(){return Yy}var Gy=y({},ro,{key:function(e){if(e.key){var r=Hy[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Ai(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mc,charCode:function(e){return e.type==="keypress"?Ai(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ai(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wy=Ns(Gy),Ky=y({},Ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mf=Ns(Ky),Qy=y({},ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mc}),Xy=Ns(Qy),Jy=y({},ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zy=Ns(Jy),eb=y({},Ri,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tb=Ns(eb),sb=y({},ja,{newState:0,oldState:0}),rb=Ns(sb),ab=[9,13,27,32],Bc=jr&&"CompositionEvent"in window,no=null;jr&&"documentMode"in document&&(no=document.documentMode);var nb=jr&&"TextEvent"in window&&!no,gf=jr&&(!Bc||no&&8<no&&11>=no),pf=" ",xf=!1;function yf(e,r){switch(e){case"keyup":return ab.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ja=!1;function ob(e,r){switch(e){case"compositionend":return bf(r);case"keypress":return r.which!==32?null:(xf=!0,pf);case"textInput":return e=r.data,e===pf&&xf?null:e;default:return null}}function ib(e,r){if(Ja)return e==="compositionend"||!Bc&&yf(e,r)?(e=df(),Ei=Rc=Vr=null,Ja=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return gf&&r.locale!=="ko"?null:r.data;default:return null}}var lb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vf(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!lb[e.type]:r==="textarea"}function wf(e,r,i,c){Qa?Xa?Xa.push(c):Xa=[c]:Qa=c,r=yl(r,"onChange"),0<r.length&&(i=new Ti("onChange","change",null,i,c),e.push({event:i,listeners:r}))}var oo=null,io=null;function cb(e){tg(e,0)}function Li(e){var r=wa(e);if(tf(r))return e}function jf(e,r){if(e==="change")return r}var Nf=!1;if(jr){var $c;if(jr){var Ic="oninput"in document;if(!Ic){var Sf=document.createElement("div");Sf.setAttribute("oninput","return;"),Ic=typeof Sf.oninput=="function"}$c=Ic}else $c=!1;Nf=$c&&(!document.documentMode||9<document.documentMode)}function Cf(){oo&&(oo.detachEvent("onpropertychange",kf),io=oo=null)}function kf(e){if(e.propertyName==="value"&&Li(io)){var r=[];wf(r,io,e,Ac(e)),cf(cb,r)}}function db(e,r,i){e==="focusin"?(Cf(),oo=r,io=i,oo.attachEvent("onpropertychange",kf)):e==="focusout"&&Cf()}function ub(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Li(io)}function hb(e,r){if(e==="click")return Li(r)}function fb(e,r){if(e==="input"||e==="change")return Li(r)}function mb(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Ts=typeof Object.is=="function"?Object.is:mb;function lo(e,r){if(Ts(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var i=Object.keys(e),c=Object.keys(r);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var h=i[c];if(!Ye.call(r,h)||!Ts(e[h],r[h]))return!1}return!0}function _f(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ef(e,r){var i=_f(e);e=0;for(var c;i;){if(i.nodeType===3){if(c=e+i.textContent.length,e<=r&&c>=r)return{node:i,offset:r-e};e=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=_f(i)}}function Af(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Af(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Df(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var r=ki(e.document);r instanceof e.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)e=r.contentWindow;else break;r=ki(e.document)}return r}function zc(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}var gb=jr&&"documentMode"in document&&11>=document.documentMode,Za=null,Fc=null,co=null,Pc=!1;function Tf(e,r,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Pc||Za==null||Za!==ki(c)||(c=Za,"selectionStart"in c&&zc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),co&&lo(co,c)||(co=c,c=yl(Fc,"onSelect"),0<c.length&&(r=new Ti("onSelect","select",null,r,i),e.push({event:r,listeners:c}),r.target=Za)))}function Na(e,r){var i={};return i[e.toLowerCase()]=r.toLowerCase(),i["Webkit"+e]="webkit"+r,i["Moz"+e]="moz"+r,i}var en={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionrun:Na("Transition","TransitionRun"),transitionstart:Na("Transition","TransitionStart"),transitioncancel:Na("Transition","TransitionCancel"),transitionend:Na("Transition","TransitionEnd")},Hc={},Rf={};jr&&(Rf=document.createElement("div").style,"AnimationEvent"in window||(delete en.animationend.animation,delete en.animationiteration.animation,delete en.animationstart.animation),"TransitionEvent"in window||delete en.transitionend.transition);function Sa(e){if(Hc[e])return Hc[e];if(!en[e])return e;var r=en[e],i;for(i in r)if(r.hasOwnProperty(i)&&i in Rf)return Hc[e]=r[i];return e}var Lf=Sa("animationend"),Of=Sa("animationiteration"),Uf=Sa("animationstart"),pb=Sa("transitionrun"),xb=Sa("transitionstart"),yb=Sa("transitioncancel"),Mf=Sa("transitionend"),Bf=new Map,qc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qc.push("scrollEnd");function Zs(e,r){Bf.set(e,r),ze(r,[e])}var $f=new WeakMap;function Ps(e,r){if(typeof e=="object"&&e!==null){var i=$f.get(e);return i!==void 0?i:(r={value:e,source:r,stack:Zh(r)},$f.set(e,r),r)}return{value:e,source:r,stack:Zh(r)}}var Hs=[],tn=0,Vc=0;function Oi(){for(var e=tn,r=Vc=tn=0;r<e;){var i=Hs[r];Hs[r++]=null;var c=Hs[r];Hs[r++]=null;var h=Hs[r];Hs[r++]=null;var p=Hs[r];if(Hs[r++]=null,c!==null&&h!==null){var j=c.pending;j===null?h.next=h:(h.next=j.next,j.next=h),c.pending=h}p!==0&&If(i,h,p)}}function Ui(e,r,i,c){Hs[tn++]=e,Hs[tn++]=r,Hs[tn++]=i,Hs[tn++]=c,Vc|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Yc(e,r,i,c){return Ui(e,r,i,c),Mi(e)}function sn(e,r){return Ui(e,null,null,r),Mi(e)}function If(e,r,i){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i);for(var h=!1,p=e.return;p!==null;)p.childLanes|=i,c=p.alternate,c!==null&&(c.childLanes|=i),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(h=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,h&&r!==null&&(h=31-C(i),e=p.hiddenUpdates,c=e[h],c===null?e[h]=[r]:c.push(r),r.lane=i|536870912),p):null}function Mi(e){if(50<Uo)throw Uo=0,Jd=null,Error(o(185));for(var r=e.return;r!==null;)e=r,r=e.return;return e.tag===3?e.stateNode:null}var rn={};function bb(e,r,i,c){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(e,r,i,c){return new bb(e,r,i,c)}function Gc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nr(e,r){var i=e.alternate;return i===null?(i=Rs(e.tag,r,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=r,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,r=e.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function zf(e,r){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=r,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,r=i.dependencies,e.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e}function Bi(e,r,i,c,h,p){var j=0;if(c=e,typeof e=="function")Gc(e)&&(j=1);else if(typeof e=="string")j=wv(e,i,ge.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case he:return e=Rs(31,i,r,h),e.elementType=he,e.lanes=p,e;case w:return Ca(i.children,h,p,r);case S:j=8,h|=24;break;case _:return e=Rs(12,i,r,h|2),e.elementType=_,e.lanes=p,e;case B:return e=Rs(13,i,r,h),e.elementType=B,e.lanes=p,e;case q:return e=Rs(19,i,r,h),e.elementType=q,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:case M:j=10;break e;case D:j=9;break e;case F:j=11;break e;case ee:j=14;break e;case le:j=16,c=null;break e}j=29,i=Error(o(130,e===null?"null":typeof e,"")),c=null}return r=Rs(j,i,r,h),r.elementType=e,r.type=c,r.lanes=p,r}function Ca(e,r,i,c){return e=Rs(7,e,c,r),e.lanes=i,e}function Wc(e,r,i){return e=Rs(6,e,null,r),e.lanes=i,e}function Kc(e,r,i){return r=Rs(4,e.children!==null?e.children:[],e.key,r),r.lanes=i,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}var an=[],nn=0,$i=null,Ii=0,qs=[],Vs=0,ka=null,Sr=1,Cr="";function _a(e,r){an[nn++]=Ii,an[nn++]=$i,$i=e,Ii=r}function Ff(e,r,i){qs[Vs++]=Sr,qs[Vs++]=Cr,qs[Vs++]=ka,ka=e;var c=Sr;e=Cr;var h=32-C(c)-1;c&=~(1<<h),i+=1;var p=32-C(r)+h;if(30<p){var j=h-h%5;p=(c&(1<<j)-1).toString(32),c>>=j,h-=j,Sr=1<<32-C(r)+h|i<<h|c,Cr=p+e}else Sr=1<<p|i<<h|c,Cr=e}function Qc(e){e.return!==null&&(_a(e,1),Ff(e,1,0))}function Xc(e){for(;e===$i;)$i=an[--nn],an[nn]=null,Ii=an[--nn],an[nn]=null;for(;e===ka;)ka=qs[--Vs],qs[Vs]=null,Cr=qs[--Vs],qs[Vs]=null,Sr=qs[--Vs],qs[Vs]=null}var ws=null,Yt=null,kt=!1,Ea=null,dr=!1,Jc=Error(o(519));function Aa(e){var r=Error(o(418,""));throw fo(Ps(r,e)),Jc}function Pf(e){var r=e.stateNode,i=e.type,c=e.memoizedProps;switch(r[et]=e,r[We]=c,i){case"dialog":yt("cancel",r),yt("close",r);break;case"iframe":case"object":case"embed":yt("load",r);break;case"video":case"audio":for(i=0;i<Bo.length;i++)yt(Bo[i],r);break;case"source":yt("error",r);break;case"img":case"image":case"link":yt("error",r),yt("load",r);break;case"details":yt("toggle",r);break;case"input":yt("invalid",r),sf(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ci(r);break;case"select":yt("invalid",r);break;case"textarea":yt("invalid",r),af(r,c.value,c.defaultValue,c.children),Ci(r)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||c.suppressHydrationWarning===!0||ng(r.textContent,i)?(c.popover!=null&&(yt("beforetoggle",r),yt("toggle",r)),c.onScroll!=null&&yt("scroll",r),c.onScrollEnd!=null&&yt("scrollend",r),c.onClick!=null&&(r.onclick=bl),r=!0):r=!1,r||Aa(e)}function Hf(e){for(ws=e.return;ws;)switch(ws.tag){case 5:case 13:dr=!1;return;case 27:case 3:dr=!0;return;default:ws=ws.return}}function uo(e){if(e!==ws)return!1;if(!kt)return Hf(e),kt=!0,!1;var r=e.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||mu(e.type,e.memoizedProps)),i=!i),i&&Yt&&Aa(e),Hf(e),r===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(r===0){Yt=tr(e.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++;e=e.nextSibling}Yt=null}}else r===27?(r=Yt,ia(e.type)?(e=yu,yu=null,Yt=e):Yt=r):Yt=ws?tr(e.stateNode.nextSibling):null;return!0}function ho(){Yt=ws=null,kt=!1}function qf(){var e=Ea;return e!==null&&(ks===null?ks=e:ks.push.apply(ks,e),Ea=null),e}function fo(e){Ea===null?Ea=[e]:Ea.push(e)}var Zc=Q(null),Da=null,kr=null;function Yr(e,r,i){ae(Zc,r._currentValue),r._currentValue=i}function _r(e){e._currentValue=Zc.current,ne(Zc)}function ed(e,r,i){for(;e!==null;){var c=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),e===i)break;e=e.return}}function td(e,r,i,c){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var p=h.dependencies;if(p!==null){var j=h.child;p=p.firstContext;e:for(;p!==null;){var E=p;p=h;for(var z=0;z<r.length;z++)if(E.context===r[z]){p.lanes|=i,E=p.alternate,E!==null&&(E.lanes|=i),ed(p.return,i,e),c||(j=null);break e}p=E.next}}else if(h.tag===18){if(j=h.return,j===null)throw Error(o(341));j.lanes|=i,p=j.alternate,p!==null&&(p.lanes|=i),ed(j,i,e),j=null}else j=h.child;if(j!==null)j.return=h;else for(j=h;j!==null;){if(j===e){j=null;break}if(h=j.sibling,h!==null){h.return=j.return,j=h;break}j=j.return}h=j}}function mo(e,r,i,c){e=null;for(var h=r,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var j=h.alternate;if(j===null)throw Error(o(387));if(j=j.memoizedProps,j!==null){var E=h.type;Ts(h.pendingProps.value,j.value)||(e!==null?e.push(E):e=[E])}}else if(h===Ee.current){if(j=h.alternate,j===null)throw Error(o(387));j.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Ho):e=[Ho])}h=h.return}e!==null&&td(r,e,i,c),r.flags|=262144}function zi(e){for(e=e.firstContext;e!==null;){if(!Ts(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ta(e){Da=e,kr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ys(e){return Vf(Da,e)}function Fi(e,r){return Da===null&&Ta(e),Vf(e,r)}function Vf(e,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},kr===null){if(e===null)throw Error(o(308));kr=r,e.dependencies={lanes:0,firstContext:r},e.flags|=524288}else kr=kr.next=r;return i}var vb=typeof AbortController<"u"?AbortController:function(){var e=[],r=this.signal={aborted:!1,addEventListener:function(i,c){e.push(c)}};this.abort=function(){r.aborted=!0,e.forEach(function(i){return i()})}},wb=a.unstable_scheduleCallback,jb=a.unstable_NormalPriority,ts={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sd(){return{controller:new vb,data:new Map,refCount:0}}function go(e){e.refCount--,e.refCount===0&&wb(jb,function(){e.controller.abort()})}var po=null,rd=0,on=0,ln=null;function Nb(e,r){if(po===null){var i=po=[];rd=0,on=nu(),ln={status:"pending",value:void 0,then:function(c){i.push(c)}}}return rd++,r.then(Yf,Yf),r}function Yf(){if(--rd===0&&po!==null){ln!==null&&(ln.status="fulfilled");var e=po;po=null,on=0,ln=null;for(var r=0;r<e.length;r++)(0,e[r])()}}function Sb(e,r){var i=[],c={status:"pending",value:null,reason:null,then:function(h){i.push(h)}};return e.then(function(){c.status="fulfilled",c.value=r;for(var h=0;h<i.length;h++)(0,i[h])(r)},function(h){for(c.status="rejected",c.reason=h,h=0;h<i.length;h++)(0,i[h])(void 0)}),c}var Gf=O.S;O.S=function(e,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Nb(e,r),Gf!==null&&Gf(e,r)};var Ra=Q(null);function ad(){var e=Ra.current;return e!==null?e:Bt.pooledCache}function Pi(e,r){r===null?ae(Ra,Ra.current):ae(Ra,r.pool)}function Wf(){var e=ad();return e===null?null:{parent:ts._currentValue,pool:e}}var xo=Error(o(460)),Kf=Error(o(474)),Hi=Error(o(542)),nd={then:function(){}};function Qf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function qi(){}function Xf(e,r,i){switch(i=e[i],i===void 0?e.push(r):i!==r&&(r.then(qi,qi),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,Zf(e),e;default:if(typeof r.status=="string")r.then(qi,qi);else{if(e=Bt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=r,e.status="pending",e.then(function(c){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=c}},function(c){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,Zf(e),e}throw yo=r,xo}}var yo=null;function Jf(){if(yo===null)throw Error(o(459));var e=yo;return yo=null,e}function Zf(e){if(e===xo||e===Hi)throw Error(o(483))}var Gr=!1;function od(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function id(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Wr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Kr(e,r,i){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Et&2)!==0){var h=c.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),c.pending=r,r=Mi(e),If(e,null,i),r}return Ui(e,c,r,i),Mi(e)}function bo(e,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var c=r.lanes;c&=e.pendingLanes,i|=c,r.lanes=i,ft(e,i)}}function ld(e,r){var i=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var h=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var j={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};p===null?h=p=j:p=p.next=j,i=i.next}while(i!==null);p===null?h=p=r:p=p.next=r}else h=p=r;i={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=r:e.next=r,i.lastBaseUpdate=r}var cd=!1;function vo(){if(cd){var e=ln;if(e!==null)throw e}}function wo(e,r,i,c){cd=!1;var h=e.updateQueue;Gr=!1;var p=h.firstBaseUpdate,j=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var z=E,ce=z.next;z.next=null,j===null?p=ce:j.next=ce,j=z;var ke=e.alternate;ke!==null&&(ke=ke.updateQueue,E=ke.lastBaseUpdate,E!==j&&(E===null?ke.firstBaseUpdate=ce:E.next=ce,ke.lastBaseUpdate=z))}if(p!==null){var Re=h.baseState;j=0,ke=ce=z=null,E=p;do{var de=E.lane&-536870913,ue=de!==E.lane;if(ue?(jt&de)===de:(c&de)===de){de!==0&&de===on&&(cd=!0),ke!==null&&(ke=ke.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var nt=e,rt=E;de=r;var Rt=i;switch(rt.tag){case 1:if(nt=rt.payload,typeof nt=="function"){Re=nt.call(Rt,Re,de);break e}Re=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=rt.payload,de=typeof nt=="function"?nt.call(Rt,Re,de):nt,de==null)break e;Re=y({},Re,de);break e;case 2:Gr=!0}}de=E.callback,de!==null&&(e.flags|=64,ue&&(e.flags|=8192),ue=h.callbacks,ue===null?h.callbacks=[de]:ue.push(de))}else ue={lane:de,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ke===null?(ce=ke=ue,z=Re):ke=ke.next=ue,j|=de;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;ue=E,E=ue.next,ue.next=null,h.lastBaseUpdate=ue,h.shared.pending=null}}while(!0);ke===null&&(z=Re),h.baseState=z,h.firstBaseUpdate=ce,h.lastBaseUpdate=ke,p===null&&(h.shared.lanes=0),ra|=j,e.lanes=j,e.memoizedState=Re}}function em(e,r){if(typeof e!="function")throw Error(o(191,e));e.call(r)}function tm(e,r){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)em(i[e],r)}var cn=Q(null),Vi=Q(0);function sm(e,r){e=Or,ae(Vi,e),ae(cn,r),Or=e|r.baseLanes}function dd(){ae(Vi,Or),ae(cn,cn.current)}function ud(){Or=Vi.current,ne(cn),ne(Vi)}var Qr=0,mt=null,Dt=null,Jt=null,Yi=!1,dn=!1,La=!1,Gi=0,jo=0,un=null,Cb=0;function Kt(){throw Error(o(321))}function hd(e,r){if(r===null)return!1;for(var i=0;i<r.length&&i<e.length;i++)if(!Ts(e[i],r[i]))return!1;return!0}function fd(e,r,i,c,h,p){return Qr=p,mt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,O.H=e===null||e.memoizedState===null?Im:zm,La=!1,p=i(c,h),La=!1,dn&&(p=am(r,i,c,h)),rm(e),p}function rm(e){O.H=Zi;var r=Dt!==null&&Dt.next!==null;if(Qr=0,Jt=Dt=mt=null,Yi=!1,jo=0,un=null,r)throw Error(o(300));e===null||is||(e=e.dependencies,e!==null&&zi(e)&&(is=!0))}function am(e,r,i,c){mt=e;var h=0;do{if(dn&&(un=null),jo=0,dn=!1,25<=h)throw Error(o(301));if(h+=1,Jt=Dt=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}O.H=Rb,p=r(i,c)}while(dn);return p}function kb(){var e=O.H,r=e.useState()[0];return r=typeof r.then=="function"?No(r):r,e=e.useState()[0],(Dt!==null?Dt.memoizedState:null)!==e&&(mt.flags|=1024),r}function md(){var e=Gi!==0;return Gi=0,e}function gd(e,r,i){r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~i}function pd(e){if(Yi){for(e=e.memoizedState;e!==null;){var r=e.queue;r!==null&&(r.pending=null),e=e.next}Yi=!1}Qr=0,Jt=Dt=mt=null,dn=!1,jo=Gi=0,un=null}function Ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?mt.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function Zt(){if(Dt===null){var e=mt.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var r=Jt===null?mt.memoizedState:Jt.next;if(r!==null)Jt=r,Dt=e;else{if(e===null)throw mt.alternate===null?Error(o(467)):Error(o(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Jt===null?mt.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function No(e){var r=jo;return jo+=1,un===null&&(un=[]),e=Xf(un,e,r),r=mt,(Jt===null?r.memoizedState:Jt.next)===null&&(r=r.alternate,O.H=r===null||r.memoizedState===null?Im:zm),e}function Wi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return No(e);if(e.$$typeof===M)return ys(e)}throw Error(o(438,String(e)))}function yd(e){var r=null,i=mt.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var c=mt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=xd(),mt.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(e),c=0;c<e;c++)i[c]=be;return r.index++,i}function Er(e,r){return typeof r=="function"?r(e):r}function Ki(e){var r=Zt();return bd(r,Dt,e)}function bd(e,r,i){var c=e.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=i;var h=e.baseQueue,p=c.pending;if(p!==null){if(h!==null){var j=h.next;h.next=p.next,p.next=j}r.baseQueue=h=p,c.pending=null}if(p=e.baseState,h===null)e.memoizedState=p;else{r=h.next;var E=j=null,z=null,ce=r,ke=!1;do{var Re=ce.lane&-536870913;if(Re!==ce.lane?(jt&Re)===Re:(Qr&Re)===Re){var de=ce.revertLane;if(de===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),Re===on&&(ke=!0);else if((Qr&de)===de){ce=ce.next,de===on&&(ke=!0);continue}else Re={lane:0,revertLane:ce.revertLane,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},z===null?(E=z=Re,j=p):z=z.next=Re,mt.lanes|=de,ra|=de;Re=ce.action,La&&i(p,Re),p=ce.hasEagerState?ce.eagerState:i(p,Re)}else de={lane:Re,revertLane:ce.revertLane,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},z===null?(E=z=de,j=p):z=z.next=de,mt.lanes|=Re,ra|=Re;ce=ce.next}while(ce!==null&&ce!==r);if(z===null?j=p:z.next=E,!Ts(p,e.memoizedState)&&(is=!0,ke&&(i=ln,i!==null)))throw i;e.memoizedState=p,e.baseState=j,e.baseQueue=z,c.lastRenderedState=p}return h===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function vd(e){var r=Zt(),i=r.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var c=i.dispatch,h=i.pending,p=r.memoizedState;if(h!==null){i.pending=null;var j=h=h.next;do p=e(p,j.action),j=j.next;while(j!==h);Ts(p,r.memoizedState)||(is=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),i.lastRenderedState=p}return[p,c]}function nm(e,r,i){var c=mt,h=Zt(),p=kt;if(p){if(i===void 0)throw Error(o(407));i=i()}else i=r();var j=!Ts((Dt||h).memoizedState,i);j&&(h.memoizedState=i,is=!0),h=h.queue;var E=lm.bind(null,c,h,e);if(So(2048,8,E,[e]),h.getSnapshot!==r||j||Jt!==null&&Jt.memoizedState.tag&1){if(c.flags|=2048,hn(9,Qi(),im.bind(null,c,h,i,r),null),Bt===null)throw Error(o(349));p||(Qr&124)!==0||om(c,r,i)}return i}function om(e,r,i){e.flags|=16384,e={getSnapshot:r,value:i},r=mt.updateQueue,r===null?(r=xd(),mt.updateQueue=r,r.stores=[e]):(i=r.stores,i===null?r.stores=[e]:i.push(e))}function im(e,r,i,c){r.value=i,r.getSnapshot=c,cm(r)&&dm(e)}function lm(e,r,i){return i(function(){cm(r)&&dm(e)})}function cm(e){var r=e.getSnapshot;e=e.value;try{var i=r();return!Ts(e,i)}catch{return!0}}function dm(e){var r=sn(e,2);r!==null&&Bs(r,e,2)}function wd(e){var r=Ss();if(typeof e=="function"){var i=e;if(e=i(),La){P(!0);try{i()}finally{P(!1)}}}return r.memoizedState=r.baseState=e,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:e},r}function um(e,r,i,c){return e.baseState=i,bd(e,Dt,typeof c=="function"?c:Er)}function _b(e,r,i,c,h){if(Ji(e))throw Error(o(485));if(e=r.action,e!==null){var p={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){p.listeners.push(j)}};O.T!==null?i(!0):p.isTransition=!1,c(p),i=r.pending,i===null?(p.next=r.pending=p,hm(r,p)):(p.next=i.next,r.pending=i.next=p)}}function hm(e,r){var i=r.action,c=r.payload,h=e.state;if(r.isTransition){var p=O.T,j={};O.T=j;try{var E=i(h,c),z=O.S;z!==null&&z(j,E),fm(e,r,E)}catch(ce){jd(e,r,ce)}finally{O.T=p}}else try{p=i(h,c),fm(e,r,p)}catch(ce){jd(e,r,ce)}}function fm(e,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){mm(e,r,c)},function(c){return jd(e,r,c)}):mm(e,r,i)}function mm(e,r,i){r.status="fulfilled",r.value=i,gm(r),e.state=i,r=e.pending,r!==null&&(i=r.next,i===r?e.pending=null:(i=i.next,r.next=i,hm(e,i)))}function jd(e,r,i){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=i,gm(r),r=r.next;while(r!==c)}e.action=null}function gm(e){e=e.listeners;for(var r=0;r<e.length;r++)(0,e[r])()}function pm(e,r){return r}function xm(e,r){if(kt){var i=Bt.formState;if(i!==null){e:{var c=mt;if(kt){if(Yt){t:{for(var h=Yt,p=dr;h.nodeType!==8;){if(!p){h=null;break t}if(h=tr(h.nextSibling),h===null){h=null;break t}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Yt=tr(h.nextSibling),c=h.data==="F!";break e}}Aa(c)}c=!1}c&&(r=i[0])}}return i=Ss(),i.memoizedState=i.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pm,lastRenderedState:r},i.queue=c,i=Mm.bind(null,mt,c),c.dispatch=i,c=wd(!1),p=_d.bind(null,mt,!1,c.queue),c=Ss(),h={state:r,dispatch:null,action:e,pending:null},c.queue=h,i=_b.bind(null,mt,h,p,i),h.dispatch=i,c.memoizedState=e,[r,i,!1]}function ym(e){var r=Zt();return bm(r,Dt,e)}function bm(e,r,i){if(r=bd(e,r,pm)[0],e=Ki(Er)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=No(r)}catch(j){throw j===xo?Hi:j}else c=r;r=Zt();var h=r.queue,p=h.dispatch;return i!==r.memoizedState&&(mt.flags|=2048,hn(9,Qi(),Eb.bind(null,h,i),null)),[c,p,e]}function Eb(e,r){e.action=r}function vm(e){var r=Zt(),i=Dt;if(i!==null)return bm(r,i,e);Zt(),r=r.memoizedState,i=Zt();var c=i.queue.dispatch;return i.memoizedState=e,[r,c,!1]}function hn(e,r,i,c){return e={tag:e,create:i,deps:c,inst:r,next:null},r=mt.updateQueue,r===null&&(r=xd(),mt.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=e.next=e:(c=i.next,i.next=e,e.next=c,r.lastEffect=e),e}function Qi(){return{destroy:void 0,resource:void 0}}function wm(){return Zt().memoizedState}function Xi(e,r,i,c){var h=Ss();c=c===void 0?null:c,mt.flags|=e,h.memoizedState=hn(1|r,Qi(),i,c)}function So(e,r,i,c){var h=Zt();c=c===void 0?null:c;var p=h.memoizedState.inst;Dt!==null&&c!==null&&hd(c,Dt.memoizedState.deps)?h.memoizedState=hn(r,p,i,c):(mt.flags|=e,h.memoizedState=hn(1|r,p,i,c))}function jm(e,r){Xi(8390656,8,e,r)}function Nm(e,r){So(2048,8,e,r)}function Sm(e,r){return So(4,2,e,r)}function Cm(e,r){return So(4,4,e,r)}function km(e,r){if(typeof r=="function"){e=e();var i=r(e);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function _m(e,r,i){i=i!=null?i.concat([e]):null,So(4,4,km.bind(null,r,e),i)}function Nd(){}function Em(e,r){var i=Zt();r=r===void 0?null:r;var c=i.memoizedState;return r!==null&&hd(r,c[1])?c[0]:(i.memoizedState=[e,r],e)}function Am(e,r){var i=Zt();r=r===void 0?null:r;var c=i.memoizedState;if(r!==null&&hd(r,c[1]))return c[0];if(c=e(),La){P(!0);try{e()}finally{P(!1)}}return i.memoizedState=[c,r],c}function Sd(e,r,i){return i===void 0||(Qr&1073741824)!==0?e.memoizedState=r:(e.memoizedState=i,e=R0(),mt.lanes|=e,ra|=e,i)}function Dm(e,r,i,c){return Ts(i,r)?i:cn.current!==null?(e=Sd(e,i,c),Ts(e,r)||(is=!0),e):(Qr&42)===0?(is=!0,e.memoizedState=i):(e=R0(),mt.lanes|=e,ra|=e,r)}function Tm(e,r,i,c,h){var p=H.p;H.p=p!==0&&8>p?p:8;var j=O.T,E={};O.T=E,_d(e,!1,r,i);try{var z=h(),ce=O.S;if(ce!==null&&ce(E,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ke=Sb(z,c);Co(e,r,ke,Ms(e))}else Co(e,r,c,Ms(e))}catch(Re){Co(e,r,{then:function(){},status:"rejected",reason:Re},Ms())}finally{H.p=p,O.T=j}}function Ab(){}function Cd(e,r,i,c){if(e.tag!==5)throw Error(o(476));var h=Rm(e).queue;Tm(e,h,r,se,i===null?Ab:function(){return Lm(e),i(c)})}function Rm(e){var r=e.memoizedState;if(r!==null)return r;r={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:se},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:i},next:null},e.memoizedState=r,e=e.alternate,e!==null&&(e.memoizedState=r),r}function Lm(e){var r=Rm(e).next.queue;Co(e,r,{},Ms())}function kd(){return ys(Ho)}function Om(){return Zt().memoizedState}function Um(){return Zt().memoizedState}function Db(e){for(var r=e.return;r!==null;){switch(r.tag){case 24:case 3:var i=Ms();e=Wr(i);var c=Kr(r,e,i);c!==null&&(Bs(c,r,i),bo(c,r,i)),r={cache:sd()},e.payload=r;return}r=r.return}}function Tb(e,r,i){var c=Ms();i={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Ji(e)?Bm(r,i):(i=Yc(e,r,i,c),i!==null&&(Bs(i,e,c),$m(i,r,c)))}function Mm(e,r,i){var c=Ms();Co(e,r,i,c)}function Co(e,r,i,c){var h={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ji(e))Bm(r,h);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var j=r.lastRenderedState,E=p(j,i);if(h.hasEagerState=!0,h.eagerState=E,Ts(E,j))return Ui(e,r,h,0),Bt===null&&Oi(),!1}catch{}finally{}if(i=Yc(e,r,h,c),i!==null)return Bs(i,e,c),$m(i,r,c),!0}return!1}function _d(e,r,i,c){if(c={lane:2,revertLane:nu(),action:c,hasEagerState:!1,eagerState:null,next:null},Ji(e)){if(r)throw Error(o(479))}else r=Yc(e,i,c,2),r!==null&&Bs(r,e,2)}function Ji(e){var r=e.alternate;return e===mt||r!==null&&r===mt}function Bm(e,r){dn=Yi=!0;var i=e.pending;i===null?r.next=r:(r.next=i.next,i.next=r),e.pending=r}function $m(e,r,i){if((i&4194048)!==0){var c=r.lanes;c&=e.pendingLanes,i|=c,r.lanes=i,ft(e,i)}}var Zi={readContext:ys,use:Wi,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt,useHostTransitionStatus:Kt,useFormState:Kt,useActionState:Kt,useOptimistic:Kt,useMemoCache:Kt,useCacheRefresh:Kt},Im={readContext:ys,use:Wi,useCallback:function(e,r){return Ss().memoizedState=[e,r===void 0?null:r],e},useContext:ys,useEffect:jm,useImperativeHandle:function(e,r,i){i=i!=null?i.concat([e]):null,Xi(4194308,4,km.bind(null,r,e),i)},useLayoutEffect:function(e,r){return Xi(4194308,4,e,r)},useInsertionEffect:function(e,r){Xi(4,2,e,r)},useMemo:function(e,r){var i=Ss();r=r===void 0?null:r;var c=e();if(La){P(!0);try{e()}finally{P(!1)}}return i.memoizedState=[c,r],c},useReducer:function(e,r,i){var c=Ss();if(i!==void 0){var h=i(r);if(La){P(!0);try{i(r)}finally{P(!1)}}}else h=r;return c.memoizedState=c.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},c.queue=e,e=e.dispatch=Tb.bind(null,mt,e),[c.memoizedState,e]},useRef:function(e){var r=Ss();return e={current:e},r.memoizedState=e},useState:function(e){e=wd(e);var r=e.queue,i=Mm.bind(null,mt,r);return r.dispatch=i,[e.memoizedState,i]},useDebugValue:Nd,useDeferredValue:function(e,r){var i=Ss();return Sd(i,e,r)},useTransition:function(){var e=wd(!1);return e=Tm.bind(null,mt,e.queue,!0,!1),Ss().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,r,i){var c=mt,h=Ss();if(kt){if(i===void 0)throw Error(o(407));i=i()}else{if(i=r(),Bt===null)throw Error(o(349));(jt&124)!==0||om(c,r,i)}h.memoizedState=i;var p={value:i,getSnapshot:r};return h.queue=p,jm(lm.bind(null,c,p,e),[e]),c.flags|=2048,hn(9,Qi(),im.bind(null,c,p,i,r),null),i},useId:function(){var e=Ss(),r=Bt.identifierPrefix;if(kt){var i=Cr,c=Sr;i=(c&~(1<<32-C(c)-1)).toString(32)+i,r="«"+r+"R"+i,i=Gi++,0<i&&(r+="H"+i.toString(32)),r+="»"}else i=Cb++,r="«"+r+"r"+i.toString(32)+"»";return e.memoizedState=r},useHostTransitionStatus:kd,useFormState:xm,useActionState:xm,useOptimistic:function(e){var r=Ss();r.memoizedState=r.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=_d.bind(null,mt,!0,i),i.dispatch=r,[e,r]},useMemoCache:yd,useCacheRefresh:function(){return Ss().memoizedState=Db.bind(null,mt)}},zm={readContext:ys,use:Wi,useCallback:Em,useContext:ys,useEffect:Nm,useImperativeHandle:_m,useInsertionEffect:Sm,useLayoutEffect:Cm,useMemo:Am,useReducer:Ki,useRef:wm,useState:function(){return Ki(Er)},useDebugValue:Nd,useDeferredValue:function(e,r){var i=Zt();return Dm(i,Dt.memoizedState,e,r)},useTransition:function(){var e=Ki(Er)[0],r=Zt().memoizedState;return[typeof e=="boolean"?e:No(e),r]},useSyncExternalStore:nm,useId:Om,useHostTransitionStatus:kd,useFormState:ym,useActionState:ym,useOptimistic:function(e,r){var i=Zt();return um(i,Dt,e,r)},useMemoCache:yd,useCacheRefresh:Um},Rb={readContext:ys,use:Wi,useCallback:Em,useContext:ys,useEffect:Nm,useImperativeHandle:_m,useInsertionEffect:Sm,useLayoutEffect:Cm,useMemo:Am,useReducer:vd,useRef:wm,useState:function(){return vd(Er)},useDebugValue:Nd,useDeferredValue:function(e,r){var i=Zt();return Dt===null?Sd(i,e,r):Dm(i,Dt.memoizedState,e,r)},useTransition:function(){var e=vd(Er)[0],r=Zt().memoizedState;return[typeof e=="boolean"?e:No(e),r]},useSyncExternalStore:nm,useId:Om,useHostTransitionStatus:kd,useFormState:vm,useActionState:vm,useOptimistic:function(e,r){var i=Zt();return Dt!==null?um(i,Dt,e,r):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:yd,useCacheRefresh:Um},fn=null,ko=0;function el(e){var r=ko;return ko+=1,fn===null&&(fn=[]),Xf(fn,e,r)}function _o(e,r){r=r.props.ref,e.ref=r!==void 0?r:null}function tl(e,r){throw r.$$typeof===b?Error(o(525)):(e=Object.prototype.toString.call(r),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)))}function Fm(e){var r=e._init;return r(e._payload)}function Pm(e){function r(Z,G){if(e){var oe=Z.deletions;oe===null?(Z.deletions=[G],Z.flags|=16):oe.push(G)}}function i(Z,G){if(!e)return null;for(;G!==null;)r(Z,G),G=G.sibling;return null}function c(Z){for(var G=new Map;Z!==null;)Z.key!==null?G.set(Z.key,Z):G.set(Z.index,Z),Z=Z.sibling;return G}function h(Z,G){return Z=Nr(Z,G),Z.index=0,Z.sibling=null,Z}function p(Z,G,oe){return Z.index=oe,e?(oe=Z.alternate,oe!==null?(oe=oe.index,oe<G?(Z.flags|=67108866,G):oe):(Z.flags|=67108866,G)):(Z.flags|=1048576,G)}function j(Z){return e&&Z.alternate===null&&(Z.flags|=67108866),Z}function E(Z,G,oe,Ae){return G===null||G.tag!==6?(G=Wc(oe,Z.mode,Ae),G.return=Z,G):(G=h(G,oe),G.return=Z,G)}function z(Z,G,oe,Ae){var Xe=oe.type;return Xe===w?ke(Z,G,oe.props.children,Ae,oe.key):G!==null&&(G.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===le&&Fm(Xe)===G.type)?(G=h(G,oe.props),_o(G,oe),G.return=Z,G):(G=Bi(oe.type,oe.key,oe.props,null,Z.mode,Ae),_o(G,oe),G.return=Z,G)}function ce(Z,G,oe,Ae){return G===null||G.tag!==4||G.stateNode.containerInfo!==oe.containerInfo||G.stateNode.implementation!==oe.implementation?(G=Kc(oe,Z.mode,Ae),G.return=Z,G):(G=h(G,oe.children||[]),G.return=Z,G)}function ke(Z,G,oe,Ae,Xe){return G===null||G.tag!==7?(G=Ca(oe,Z.mode,Ae,Xe),G.return=Z,G):(G=h(G,oe),G.return=Z,G)}function Re(Z,G,oe){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Wc(""+G,Z.mode,oe),G.return=Z,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case v:return oe=Bi(G.type,G.key,G.props,null,Z.mode,oe),_o(oe,G),oe.return=Z,oe;case N:return G=Kc(G,Z.mode,oe),G.return=Z,G;case le:var Ae=G._init;return G=Ae(G._payload),Re(Z,G,oe)}if(ye(G)||we(G))return G=Ca(G,Z.mode,oe,null),G.return=Z,G;if(typeof G.then=="function")return Re(Z,el(G),oe);if(G.$$typeof===M)return Re(Z,Fi(Z,G),oe);tl(Z,G)}return null}function de(Z,G,oe,Ae){var Xe=G!==null?G.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Xe!==null?null:E(Z,G,""+oe,Ae);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case v:return oe.key===Xe?z(Z,G,oe,Ae):null;case N:return oe.key===Xe?ce(Z,G,oe,Ae):null;case le:return Xe=oe._init,oe=Xe(oe._payload),de(Z,G,oe,Ae)}if(ye(oe)||we(oe))return Xe!==null?null:ke(Z,G,oe,Ae,null);if(typeof oe.then=="function")return de(Z,G,el(oe),Ae);if(oe.$$typeof===M)return de(Z,G,Fi(Z,oe),Ae);tl(Z,oe)}return null}function ue(Z,G,oe,Ae,Xe){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return Z=Z.get(oe)||null,E(G,Z,""+Ae,Xe);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case v:return Z=Z.get(Ae.key===null?oe:Ae.key)||null,z(G,Z,Ae,Xe);case N:return Z=Z.get(Ae.key===null?oe:Ae.key)||null,ce(G,Z,Ae,Xe);case le:var gt=Ae._init;return Ae=gt(Ae._payload),ue(Z,G,oe,Ae,Xe)}if(ye(Ae)||we(Ae))return Z=Z.get(oe)||null,ke(G,Z,Ae,Xe,null);if(typeof Ae.then=="function")return ue(Z,G,oe,el(Ae),Xe);if(Ae.$$typeof===M)return ue(Z,G,oe,Fi(G,Ae),Xe);tl(G,Ae)}return null}function nt(Z,G,oe,Ae){for(var Xe=null,gt=null,tt=G,at=G=0,cs=null;tt!==null&&at<oe.length;at++){tt.index>at?(cs=tt,tt=null):cs=tt.sibling;var St=de(Z,tt,oe[at],Ae);if(St===null){tt===null&&(tt=cs);break}e&&tt&&St.alternate===null&&r(Z,tt),G=p(St,G,at),gt===null?Xe=St:gt.sibling=St,gt=St,tt=cs}if(at===oe.length)return i(Z,tt),kt&&_a(Z,at),Xe;if(tt===null){for(;at<oe.length;at++)tt=Re(Z,oe[at],Ae),tt!==null&&(G=p(tt,G,at),gt===null?Xe=tt:gt.sibling=tt,gt=tt);return kt&&_a(Z,at),Xe}for(tt=c(tt);at<oe.length;at++)cs=ue(tt,Z,at,oe[at],Ae),cs!==null&&(e&&cs.alternate!==null&&tt.delete(cs.key===null?at:cs.key),G=p(cs,G,at),gt===null?Xe=cs:gt.sibling=cs,gt=cs);return e&&tt.forEach(function(ha){return r(Z,ha)}),kt&&_a(Z,at),Xe}function rt(Z,G,oe,Ae){if(oe==null)throw Error(o(151));for(var Xe=null,gt=null,tt=G,at=G=0,cs=null,St=oe.next();tt!==null&&!St.done;at++,St=oe.next()){tt.index>at?(cs=tt,tt=null):cs=tt.sibling;var ha=de(Z,tt,St.value,Ae);if(ha===null){tt===null&&(tt=cs);break}e&&tt&&ha.alternate===null&&r(Z,tt),G=p(ha,G,at),gt===null?Xe=ha:gt.sibling=ha,gt=ha,tt=cs}if(St.done)return i(Z,tt),kt&&_a(Z,at),Xe;if(tt===null){for(;!St.done;at++,St=oe.next())St=Re(Z,St.value,Ae),St!==null&&(G=p(St,G,at),gt===null?Xe=St:gt.sibling=St,gt=St);return kt&&_a(Z,at),Xe}for(tt=c(tt);!St.done;at++,St=oe.next())St=ue(tt,Z,at,St.value,Ae),St!==null&&(e&&St.alternate!==null&&tt.delete(St.key===null?at:St.key),G=p(St,G,at),gt===null?Xe=St:gt.sibling=St,gt=St);return e&&tt.forEach(function(Lv){return r(Z,Lv)}),kt&&_a(Z,at),Xe}function Rt(Z,G,oe,Ae){if(typeof oe=="object"&&oe!==null&&oe.type===w&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case v:e:{for(var Xe=oe.key;G!==null;){if(G.key===Xe){if(Xe=oe.type,Xe===w){if(G.tag===7){i(Z,G.sibling),Ae=h(G,oe.props.children),Ae.return=Z,Z=Ae;break e}}else if(G.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===le&&Fm(Xe)===G.type){i(Z,G.sibling),Ae=h(G,oe.props),_o(Ae,oe),Ae.return=Z,Z=Ae;break e}i(Z,G);break}else r(Z,G);G=G.sibling}oe.type===w?(Ae=Ca(oe.props.children,Z.mode,Ae,oe.key),Ae.return=Z,Z=Ae):(Ae=Bi(oe.type,oe.key,oe.props,null,Z.mode,Ae),_o(Ae,oe),Ae.return=Z,Z=Ae)}return j(Z);case N:e:{for(Xe=oe.key;G!==null;){if(G.key===Xe)if(G.tag===4&&G.stateNode.containerInfo===oe.containerInfo&&G.stateNode.implementation===oe.implementation){i(Z,G.sibling),Ae=h(G,oe.children||[]),Ae.return=Z,Z=Ae;break e}else{i(Z,G);break}else r(Z,G);G=G.sibling}Ae=Kc(oe,Z.mode,Ae),Ae.return=Z,Z=Ae}return j(Z);case le:return Xe=oe._init,oe=Xe(oe._payload),Rt(Z,G,oe,Ae)}if(ye(oe))return nt(Z,G,oe,Ae);if(we(oe)){if(Xe=we(oe),typeof Xe!="function")throw Error(o(150));return oe=Xe.call(oe),rt(Z,G,oe,Ae)}if(typeof oe.then=="function")return Rt(Z,G,el(oe),Ae);if(oe.$$typeof===M)return Rt(Z,G,Fi(Z,oe),Ae);tl(Z,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,G!==null&&G.tag===6?(i(Z,G.sibling),Ae=h(G,oe),Ae.return=Z,Z=Ae):(i(Z,G),Ae=Wc(oe,Z.mode,Ae),Ae.return=Z,Z=Ae),j(Z)):i(Z,G)}return function(Z,G,oe,Ae){try{ko=0;var Xe=Rt(Z,G,oe,Ae);return fn=null,Xe}catch(tt){if(tt===xo||tt===Hi)throw tt;var gt=Rs(29,tt,null,Z.mode);return gt.lanes=Ae,gt.return=Z,gt}finally{}}}var mn=Pm(!0),Hm=Pm(!1),Ys=Q(null),ur=null;function Xr(e){var r=e.alternate;ae(ss,ss.current&1),ae(Ys,e),ur===null&&(r===null||cn.current!==null||r.memoizedState!==null)&&(ur=e)}function qm(e){if(e.tag===22){if(ae(ss,ss.current),ae(Ys,e),ur===null){var r=e.alternate;r!==null&&r.memoizedState!==null&&(ur=e)}}else Jr()}function Jr(){ae(ss,ss.current),ae(Ys,Ys.current)}function Ar(e){ne(Ys),ur===e&&(ur=null),ne(ss)}var ss=Q(0);function sl(e){for(var r=e;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||xu(i)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Ed(e,r,i,c){r=e.memoizedState,i=i(c,r),i=i==null?r:y({},r,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ad={enqueueSetState:function(e,r,i){e=e._reactInternals;var c=Ms(),h=Wr(c);h.payload=r,i!=null&&(h.callback=i),r=Kr(e,h,c),r!==null&&(Bs(r,e,c),bo(r,e,c))},enqueueReplaceState:function(e,r,i){e=e._reactInternals;var c=Ms(),h=Wr(c);h.tag=1,h.payload=r,i!=null&&(h.callback=i),r=Kr(e,h,c),r!==null&&(Bs(r,e,c),bo(r,e,c))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var i=Ms(),c=Wr(i);c.tag=2,r!=null&&(c.callback=r),r=Kr(e,c,i),r!==null&&(Bs(r,e,i),bo(r,e,i))}};function Vm(e,r,i,c,h,p,j){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,p,j):r.prototype&&r.prototype.isPureReactComponent?!lo(i,c)||!lo(h,p):!0}function Ym(e,r,i,c){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,c),r.state!==e&&Ad.enqueueReplaceState(r,r.state,null)}function Oa(e,r){var i=r;if("ref"in r){i={};for(var c in r)c!=="ref"&&(i[c]=r[c])}if(e=e.defaultProps){i===r&&(i=y({},i));for(var h in e)i[h]===void 0&&(i[h]=e[h])}return i}var rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Gm(e){rl(e)}function Wm(e){console.error(e)}function Km(e){rl(e)}function al(e,r){try{var i=e.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Qm(e,r,i){try{var c=e.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Dd(e,r,i){return i=Wr(i),i.tag=3,i.payload={element:null},i.callback=function(){al(e,r)},i}function Xm(e){return e=Wr(e),e.tag=3,e}function Jm(e,r,i,c){var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=c.value;e.payload=function(){return h(p)},e.callback=function(){Qm(r,i,c)}}var j=i.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(e.callback=function(){Qm(r,i,c),typeof h!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function Lb(e,r,i,c,h){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=i.alternate,r!==null&&mo(r,i,h,!0),i=Ys.current,i!==null){switch(i.tag){case 13:return ur===null?eu():i.alternate===null&&Gt===0&&(Gt=3),i.flags&=-257,i.flags|=65536,i.lanes=h,c===nd?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([c]):r.add(c),su(e,c,h)),!1;case 22:return i.flags|=65536,c===nd?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([c]):i.add(c)),su(e,c,h)),!1}throw Error(o(435,i.tag))}return su(e,c,h),eu(),!1}if(kt)return r=Ys.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,c!==Jc&&(e=Error(o(422),{cause:c}),fo(Ps(e,i)))):(c!==Jc&&(r=Error(o(423),{cause:c}),fo(Ps(r,i))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,c=Ps(c,i),h=Dd(e.stateNode,c,h),ld(e,h),Gt!==4&&(Gt=2)),!1;var p=Error(o(520),{cause:c});if(p=Ps(p,i),Oo===null?Oo=[p]:Oo.push(p),Gt!==4&&(Gt=2),r===null)return!0;c=Ps(c,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,e=h&-h,i.lanes|=e,e=Dd(i.stateNode,c,e),ld(i,e),!1;case 1:if(r=i.type,p=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(aa===null||!aa.has(p))))return i.flags|=65536,h&=-h,i.lanes|=h,h=Xm(h),Jm(h,e,i,c),ld(i,h),!1}i=i.return}while(i!==null);return!1}var Zm=Error(o(461)),is=!1;function hs(e,r,i,c){r.child=e===null?Hm(r,null,i,c):mn(r,e.child,i,c)}function e0(e,r,i,c,h){i=i.render;var p=r.ref;if("ref"in c){var j={};for(var E in c)E!=="ref"&&(j[E]=c[E])}else j=c;return Ta(r),c=fd(e,r,i,j,p,h),E=md(),e!==null&&!is?(gd(e,r,h),Dr(e,r,h)):(kt&&E&&Qc(r),r.flags|=1,hs(e,r,c,h),r.child)}function t0(e,r,i,c,h){if(e===null){var p=i.type;return typeof p=="function"&&!Gc(p)&&p.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=p,s0(e,r,p,c,h)):(e=Bi(i.type,null,c,r,r.mode,h),e.ref=r.ref,e.return=r,r.child=e)}if(p=e.child,!$d(e,h)){var j=p.memoizedProps;if(i=i.compare,i=i!==null?i:lo,i(j,c)&&e.ref===r.ref)return Dr(e,r,h)}return r.flags|=1,e=Nr(p,c),e.ref=r.ref,e.return=r,r.child=e}function s0(e,r,i,c,h){if(e!==null){var p=e.memoizedProps;if(lo(p,c)&&e.ref===r.ref)if(is=!1,r.pendingProps=c=p,$d(e,h))(e.flags&131072)!==0&&(is=!0);else return r.lanes=e.lanes,Dr(e,r,h)}return Td(e,r,i,c,h)}function r0(e,r,i){var c=r.pendingProps,h=c.children,p=e!==null?e.memoizedState:null;if(c.mode==="hidden"){if((r.flags&128)!==0){if(c=p!==null?p.baseLanes|i:i,e!==null){for(h=r.child=e.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;r.childLanes=p&~c}else r.childLanes=0,r.child=null;return a0(e,r,c,i)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},e!==null&&Pi(r,p!==null?p.cachePool:null),p!==null?sm(r,p):dd(),qm(r);else return r.lanes=r.childLanes=536870912,a0(e,r,p!==null?p.baseLanes|i:i,i)}else p!==null?(Pi(r,p.cachePool),sm(r,p),Jr(),r.memoizedState=null):(e!==null&&Pi(r,null),dd(),Jr());return hs(e,r,h,i),r.child}function a0(e,r,i,c){var h=ad();return h=h===null?null:{parent:ts._currentValue,pool:h},r.memoizedState={baseLanes:i,cachePool:h},e!==null&&Pi(r,null),dd(),qm(r),e!==null&&mo(e,r,c,!0),null}function nl(e,r){var i=r.ref;if(i===null)e!==null&&e.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(r.flags|=4194816)}}function Td(e,r,i,c,h){return Ta(r),i=fd(e,r,i,c,void 0,h),c=md(),e!==null&&!is?(gd(e,r,h),Dr(e,r,h)):(kt&&c&&Qc(r),r.flags|=1,hs(e,r,i,h),r.child)}function n0(e,r,i,c,h,p){return Ta(r),r.updateQueue=null,i=am(r,c,i,h),rm(e),c=md(),e!==null&&!is?(gd(e,r,p),Dr(e,r,p)):(kt&&c&&Qc(r),r.flags|=1,hs(e,r,i,p),r.child)}function o0(e,r,i,c,h){if(Ta(r),r.stateNode===null){var p=rn,j=i.contextType;typeof j=="object"&&j!==null&&(p=ys(j)),p=new i(c,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Ad,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=c,p.state=r.memoizedState,p.refs={},od(r),j=i.contextType,p.context=typeof j=="object"&&j!==null?ys(j):rn,p.state=r.memoizedState,j=i.getDerivedStateFromProps,typeof j=="function"&&(Ed(r,i,j,c),p.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(j=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),j!==p.state&&Ad.enqueueReplaceState(p,p.state,null),wo(r,c,p,h),vo(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(e===null){p=r.stateNode;var E=r.memoizedProps,z=Oa(i,E);p.props=z;var ce=p.context,ke=i.contextType;j=rn,typeof ke=="object"&&ke!==null&&(j=ys(ke));var Re=i.getDerivedStateFromProps;ke=typeof Re=="function"||typeof p.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,ke||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E||ce!==j)&&Ym(r,p,c,j),Gr=!1;var de=r.memoizedState;p.state=de,wo(r,c,p,h),vo(),ce=r.memoizedState,E||de!==ce||Gr?(typeof Re=="function"&&(Ed(r,i,Re,c),ce=r.memoizedState),(z=Gr||Vm(r,i,z,c,de,ce,j))?(ke||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=ce),p.props=c,p.state=ce,p.context=j,c=z):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{p=r.stateNode,id(e,r),j=r.memoizedProps,ke=Oa(i,j),p.props=ke,Re=r.pendingProps,de=p.context,ce=i.contextType,z=rn,typeof ce=="object"&&ce!==null&&(z=ys(ce)),E=i.getDerivedStateFromProps,(ce=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(j!==Re||de!==z)&&Ym(r,p,c,z),Gr=!1,de=r.memoizedState,p.state=de,wo(r,c,p,h),vo();var ue=r.memoizedState;j!==Re||de!==ue||Gr||e!==null&&e.dependencies!==null&&zi(e.dependencies)?(typeof E=="function"&&(Ed(r,i,E,c),ue=r.memoizedState),(ke=Gr||Vm(r,i,ke,c,de,ue,z)||e!==null&&e.dependencies!==null&&zi(e.dependencies))?(ce||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,ue,z),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,ue,z)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||j===e.memoizedProps&&de===e.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&de===e.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ue),p.props=c,p.state=ue,p.context=z,c=ke):(typeof p.componentDidUpdate!="function"||j===e.memoizedProps&&de===e.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&de===e.memoizedState||(r.flags|=1024),c=!1)}return p=c,nl(e,r),c=(r.flags&128)!==0,p||c?(p=r.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,e!==null&&c?(r.child=mn(r,e.child,null,h),r.child=mn(r,null,i,h)):hs(e,r,i,h),r.memoizedState=p.state,e=r.child):e=Dr(e,r,h),e}function i0(e,r,i,c){return ho(),r.flags|=256,hs(e,r,i,c),r.child}var Rd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ld(e){return{baseLanes:e,cachePool:Wf()}}function Od(e,r,i){return e=e!==null?e.childLanes&~i:0,r&&(e|=Gs),e}function l0(e,r,i){var c=r.pendingProps,h=!1,p=(r.flags&128)!==0,j;if((j=p)||(j=e!==null&&e.memoizedState===null?!1:(ss.current&2)!==0),j&&(h=!0,r.flags&=-129),j=(r.flags&32)!==0,r.flags&=-33,e===null){if(kt){if(h?Xr(r):Jr(),kt){var E=Yt,z;if(z=E){e:{for(z=E,E=dr;z.nodeType!==8;){if(!E){E=null;break e}if(z=tr(z.nextSibling),z===null){E=null;break e}}E=z}E!==null?(r.memoizedState={dehydrated:E,treeContext:ka!==null?{id:Sr,overflow:Cr}:null,retryLane:536870912,hydrationErrors:null},z=Rs(18,null,null,0),z.stateNode=E,z.return=r,r.child=z,ws=r,Yt=null,z=!0):z=!1}z||Aa(r)}if(E=r.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return xu(E)?r.lanes=32:r.lanes=536870912,null;Ar(r)}return E=c.children,c=c.fallback,h?(Jr(),h=r.mode,E=ol({mode:"hidden",children:E},h),c=Ca(c,h,i,null),E.return=r,c.return=r,E.sibling=c,r.child=E,h=r.child,h.memoizedState=Ld(i),h.childLanes=Od(e,j,i),r.memoizedState=Rd,c):(Xr(r),Ud(r,E))}if(z=e.memoizedState,z!==null&&(E=z.dehydrated,E!==null)){if(p)r.flags&256?(Xr(r),r.flags&=-257,r=Md(e,r,i)):r.memoizedState!==null?(Jr(),r.child=e.child,r.flags|=128,r=null):(Jr(),h=c.fallback,E=r.mode,c=ol({mode:"visible",children:c.children},E),h=Ca(h,E,i,null),h.flags|=2,c.return=r,h.return=r,c.sibling=h,r.child=c,mn(r,e.child,null,i),c=r.child,c.memoizedState=Ld(i),c.childLanes=Od(e,j,i),r.memoizedState=Rd,r=h);else if(Xr(r),xu(E)){if(j=E.nextSibling&&E.nextSibling.dataset,j)var ce=j.dgst;j=ce,c=Error(o(419)),c.stack="",c.digest=j,fo({value:c,source:null,stack:null}),r=Md(e,r,i)}else if(is||mo(e,r,i,!1),j=(i&e.childLanes)!==0,is||j){if(j=Bt,j!==null&&(c=i&-i,c=(c&42)!==0?1:vt(c),c=(c&(j.suspendedLanes|i))!==0?0:c,c!==0&&c!==z.retryLane))throw z.retryLane=c,sn(e,c),Bs(j,e,c),Zm;E.data==="$?"||eu(),r=Md(e,r,i)}else E.data==="$?"?(r.flags|=192,r.child=e.child,r=null):(e=z.treeContext,Yt=tr(E.nextSibling),ws=r,kt=!0,Ea=null,dr=!1,e!==null&&(qs[Vs++]=Sr,qs[Vs++]=Cr,qs[Vs++]=ka,Sr=e.id,Cr=e.overflow,ka=r),r=Ud(r,c.children),r.flags|=4096);return r}return h?(Jr(),h=c.fallback,E=r.mode,z=e.child,ce=z.sibling,c=Nr(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&65011712,ce!==null?h=Nr(ce,h):(h=Ca(h,E,i,null),h.flags|=2),h.return=r,c.return=r,c.sibling=h,r.child=c,c=h,h=r.child,E=e.child.memoizedState,E===null?E=Ld(i):(z=E.cachePool,z!==null?(ce=ts._currentValue,z=z.parent!==ce?{parent:ce,pool:ce}:z):z=Wf(),E={baseLanes:E.baseLanes|i,cachePool:z}),h.memoizedState=E,h.childLanes=Od(e,j,i),r.memoizedState=Rd,c):(Xr(r),i=e.child,e=i.sibling,i=Nr(i,{mode:"visible",children:c.children}),i.return=r,i.sibling=null,e!==null&&(j=r.deletions,j===null?(r.deletions=[e],r.flags|=16):j.push(e)),r.child=i,r.memoizedState=null,i)}function Ud(e,r){return r=ol({mode:"visible",children:r},e.mode),r.return=e,e.child=r}function ol(e,r){return e=Rs(22,e,null,r),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Md(e,r,i){return mn(r,e.child,null,i),e=Ud(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function c0(e,r,i){e.lanes|=r;var c=e.alternate;c!==null&&(c.lanes|=r),ed(e.return,r,i)}function Bd(e,r,i,c,h){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=i,p.tailMode=h)}function d0(e,r,i){var c=r.pendingProps,h=c.revealOrder,p=c.tail;if(hs(e,r,c.children,i),c=ss.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&c0(e,i,r);else if(e.tag===19)c0(e,i,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}switch(ae(ss,c),h){case"forwards":for(i=r.child,h=null;i!==null;)e=i.alternate,e!==null&&sl(e)===null&&(h=i),i=i.sibling;i=h,i===null?(h=r.child,r.child=null):(h=i.sibling,i.sibling=null),Bd(r,!1,h,i,p);break;case"backwards":for(i=null,h=r.child,r.child=null;h!==null;){if(e=h.alternate,e!==null&&sl(e)===null){r.child=h;break}e=h.sibling,h.sibling=i,i=h,h=e}Bd(r,!0,i,null,p);break;case"together":Bd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Dr(e,r,i){if(e!==null&&(r.dependencies=e.dependencies),ra|=r.lanes,(i&r.childLanes)===0)if(e!==null){if(mo(e,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(e!==null&&r.child!==e.child)throw Error(o(153));if(r.child!==null){for(e=r.child,i=Nr(e,e.pendingProps),r.child=i,i.return=r;e.sibling!==null;)e=e.sibling,i=i.sibling=Nr(e,e.pendingProps),i.return=r;i.sibling=null}return r.child}function $d(e,r){return(e.lanes&r)!==0?!0:(e=e.dependencies,!!(e!==null&&zi(e)))}function Ob(e,r,i){switch(r.tag){case 3:Ce(r,r.stateNode.containerInfo),Yr(r,ts,e.memoizedState.cache),ho();break;case 27:case 5:me(r);break;case 4:Ce(r,r.stateNode.containerInfo);break;case 10:Yr(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Xr(r),r.flags|=128,null):(i&r.child.childLanes)!==0?l0(e,r,i):(Xr(r),e=Dr(e,r,i),e!==null?e.sibling:null);Xr(r);break;case 19:var h=(e.flags&128)!==0;if(c=(i&r.childLanes)!==0,c||(mo(e,r,i,!1),c=(i&r.childLanes)!==0),h){if(c)return d0(e,r,i);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ae(ss,ss.current),c)break;return null;case 22:case 23:return r.lanes=0,r0(e,r,i);case 24:Yr(r,ts,e.memoizedState.cache)}return Dr(e,r,i)}function u0(e,r,i){if(e!==null)if(e.memoizedProps!==r.pendingProps)is=!0;else{if(!$d(e,i)&&(r.flags&128)===0)return is=!1,Ob(e,r,i);is=(e.flags&131072)!==0}else is=!1,kt&&(r.flags&1048576)!==0&&Ff(r,Ii,r.index);switch(r.lanes=0,r.tag){case 16:e:{e=r.pendingProps;var c=r.elementType,h=c._init;if(c=h(c._payload),r.type=c,typeof c=="function")Gc(c)?(e=Oa(c,e),r.tag=1,r=o0(null,r,c,e,i)):(r.tag=0,r=Td(null,r,c,e,i));else{if(c!=null){if(h=c.$$typeof,h===F){r.tag=11,r=e0(null,r,c,e,i);break e}else if(h===ee){r.tag=14,r=t0(null,r,c,e,i);break e}}throw r=K(c)||c,Error(o(306,r,""))}}return r;case 0:return Td(e,r,r.type,r.pendingProps,i);case 1:return c=r.type,h=Oa(c,r.pendingProps),o0(e,r,c,h,i);case 3:e:{if(Ce(r,r.stateNode.containerInfo),e===null)throw Error(o(387));c=r.pendingProps;var p=r.memoizedState;h=p.element,id(e,r),wo(r,c,null,i);var j=r.memoizedState;if(c=j.cache,Yr(r,ts,c),c!==p.cache&&td(r,[ts],i,!0),vo(),c=j.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:j.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=i0(e,r,c,i);break e}else if(c!==h){h=Ps(Error(o(424)),r),fo(h),r=i0(e,r,c,i);break e}else{switch(e=r.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Yt=tr(e.firstChild),ws=r,kt=!0,Ea=null,dr=!0,i=Hm(r,null,c,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ho(),c===h){r=Dr(e,r,i);break e}hs(e,r,c,i)}r=r.child}return r;case 26:return nl(e,r),e===null?(i=gg(r.type,null,r.pendingProps,null))?r.memoizedState=i:kt||(i=r.type,e=r.pendingProps,c=vl(U.current).createElement(i),c[et]=r,c[We]=e,ms(c,i,e),Xt(c),r.stateNode=c):r.memoizedState=gg(r.type,e.memoizedProps,r.pendingProps,e.memoizedState),null;case 27:return me(r),e===null&&kt&&(c=r.stateNode=hg(r.type,r.pendingProps,U.current),ws=r,dr=!0,h=Yt,ia(r.type)?(yu=h,Yt=tr(c.firstChild)):Yt=h),hs(e,r,r.pendingProps.children,i),nl(e,r),e===null&&(r.flags|=4194304),r.child;case 5:return e===null&&kt&&((h=c=Yt)&&(c=lv(c,r.type,r.pendingProps,dr),c!==null?(r.stateNode=c,ws=r,Yt=tr(c.firstChild),dr=!1,h=!0):h=!1),h||Aa(r)),me(r),h=r.type,p=r.pendingProps,j=e!==null?e.memoizedProps:null,c=p.children,mu(h,p)?c=null:j!==null&&mu(h,j)&&(r.flags|=32),r.memoizedState!==null&&(h=fd(e,r,kb,null,null,i),Ho._currentValue=h),nl(e,r),hs(e,r,c,i),r.child;case 6:return e===null&&kt&&((e=i=Yt)&&(i=cv(i,r.pendingProps,dr),i!==null?(r.stateNode=i,ws=r,Yt=null,e=!0):e=!1),e||Aa(r)),null;case 13:return l0(e,r,i);case 4:return Ce(r,r.stateNode.containerInfo),c=r.pendingProps,e===null?r.child=mn(r,null,c,i):hs(e,r,c,i),r.child;case 11:return e0(e,r,r.type,r.pendingProps,i);case 7:return hs(e,r,r.pendingProps,i),r.child;case 8:return hs(e,r,r.pendingProps.children,i),r.child;case 12:return hs(e,r,r.pendingProps.children,i),r.child;case 10:return c=r.pendingProps,Yr(r,r.type,c.value),hs(e,r,c.children,i),r.child;case 9:return h=r.type._context,c=r.pendingProps.children,Ta(r),h=ys(h),c=c(h),r.flags|=1,hs(e,r,c,i),r.child;case 14:return t0(e,r,r.type,r.pendingProps,i);case 15:return s0(e,r,r.type,r.pendingProps,i);case 19:return d0(e,r,i);case 31:return c=r.pendingProps,i=r.mode,c={mode:c.mode,children:c.children},e===null?(i=ol(c,i),i.ref=r.ref,r.child=i,i.return=r,r=i):(i=Nr(e.child,c),i.ref=r.ref,r.child=i,i.return=r,r=i),r;case 22:return r0(e,r,i);case 24:return Ta(r),c=ys(ts),e===null?(h=ad(),h===null&&(h=Bt,p=sd(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=i),h=p),r.memoizedState={parent:c,cache:h},od(r),Yr(r,ts,h)):((e.lanes&i)!==0&&(id(e,r),wo(r,null,null,i),vo()),h=e.memoizedState,p=r.memoizedState,h.parent!==c?(h={parent:c,cache:c},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Yr(r,ts,c)):(c=p.cache,Yr(r,ts,c),c!==h.cache&&td(r,[ts],i,!0))),hs(e,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function Tr(e){e.flags|=4}function h0(e,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!vg(r)){if(r=Ys.current,r!==null&&((jt&4194048)===jt?ur!==null:(jt&62914560)!==jt&&(jt&536870912)===0||r!==ur))throw yo=nd,Kf;e.flags|=8192}}function il(e,r){r!==null&&(e.flags|=4),e.flags&16384&&(r=e.tag!==22?He():536870912,e.lanes|=r,yn|=r)}function Eo(e,r){if(!kt)switch(e.tailMode){case"hidden":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function qt(e){var r=e.alternate!==null&&e.alternate.child===e.child,i=0,c=0;if(r)for(var h=e.child;h!==null;)i|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)i|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=c,e.childLanes=i,r}function Ub(e,r,i){var c=r.pendingProps;switch(Xc(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(r),null;case 1:return qt(r),null;case 3:return i=r.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),_r(ts),Me(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(uo(r)?Tr(r):e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,qf())),qt(r),null;case 26:return i=r.memoizedState,e===null?(Tr(r),i!==null?(qt(r),h0(r,i)):(qt(r),r.flags&=-16777217)):i?i!==e.memoizedState?(Tr(r),qt(r),h0(r,i)):(qt(r),r.flags&=-16777217):(e.memoizedProps!==c&&Tr(r),qt(r),r.flags&=-16777217),null;case 27:_e(r),i=U.current;var h=r.type;if(e!==null&&r.stateNode!=null)e.memoizedProps!==c&&Tr(r);else{if(!c){if(r.stateNode===null)throw Error(o(166));return qt(r),null}e=ge.current,uo(r)?Pf(r):(e=hg(h,c,i),r.stateNode=e,Tr(r))}return qt(r),null;case 5:if(_e(r),i=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==c&&Tr(r);else{if(!c){if(r.stateNode===null)throw Error(o(166));return qt(r),null}if(e=ge.current,uo(r))Pf(r);else{switch(h=vl(U.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof c.is=="string"?h.createElement("select",{is:c.is}):h.createElement("select"),c.multiple?e.multiple=!0:c.size&&(e.size=c.size);break;default:e=typeof c.is=="string"?h.createElement(i,{is:c.is}):h.createElement(i)}}e[et]=r,e[We]=c;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=e;e:switch(ms(e,i,c),i){case"button":case"input":case"select":case"textarea":e=!!c.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Tr(r)}}return qt(r),r.flags&=-16777217,null;case 6:if(e&&r.stateNode!=null)e.memoizedProps!==c&&Tr(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(o(166));if(e=U.current,uo(r)){if(e=r.stateNode,i=r.memoizedProps,c=null,h=ws,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}e[et]=r,e=!!(e.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||ng(e.nodeValue,i)),e||Aa(r)}else e=vl(e).createTextNode(c),e[et]=r,r.stateNode=e}return qt(r),null;case 13:if(c=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=uo(r),c!==null&&c.dehydrated!==null){if(e===null){if(!h)throw Error(o(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));h[et]=r}else ho(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;qt(r),h=!1}else h=qf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(Ar(r),r):(Ar(r),null)}if(Ar(r),(r.flags&128)!==0)return r.lanes=i,r;if(i=c!==null,e=e!==null&&e.memoizedState!==null,i){c=r.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool);var p=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==h&&(c.flags|=2048)}return i!==e&&i&&(r.child.flags|=8192),il(r,r.updateQueue),qt(r),null;case 4:return Me(),e===null&&cu(r.stateNode.containerInfo),qt(r),null;case 10:return _r(r.type),qt(r),null;case 19:if(ne(ss),h=r.memoizedState,h===null)return qt(r),null;if(c=(r.flags&128)!==0,p=h.rendering,p===null)if(c)Eo(h,!1);else{if(Gt!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(p=sl(e),p!==null){for(r.flags|=128,Eo(h,!1),e=p.updateQueue,r.updateQueue=e,il(r,e),r.subtreeFlags=0,e=i,i=r.child;i!==null;)zf(i,e),i=i.sibling;return ae(ss,ss.current&1|2),r.child}e=e.sibling}h.tail!==null&&Fe()>dl&&(r.flags|=128,c=!0,Eo(h,!1),r.lanes=4194304)}else{if(!c)if(e=sl(p),e!==null){if(r.flags|=128,c=!0,e=e.updateQueue,r.updateQueue=e,il(r,e),Eo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!kt)return qt(r),null}else 2*Fe()-h.renderingStartTime>dl&&i!==536870912&&(r.flags|=128,c=!0,Eo(h,!1),r.lanes=4194304);h.isBackwards?(p.sibling=r.child,r.child=p):(e=h.last,e!==null?e.sibling=p:r.child=p,h.last=p)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=Fe(),r.sibling=null,e=ss.current,ae(ss,c?e&1|2:e&1),r):(qt(r),null);case 22:case 23:return Ar(r),ud(),c=r.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(i&536870912)!==0&&(r.flags&128)===0&&(qt(r),r.subtreeFlags&6&&(r.flags|=8192)):qt(r),i=r.updateQueue,i!==null&&il(r,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==i&&(r.flags|=2048),e!==null&&ne(Ra),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),_r(ts),qt(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function Mb(e,r){switch(Xc(r),r.tag){case 1:return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return _r(ts),Me(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 26:case 27:case 5:return _e(r),null;case 13:if(Ar(r),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(o(340));ho()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return ne(ss),null;case 4:return Me(),null;case 10:return _r(r.type),null;case 22:case 23:return Ar(r),ud(),e!==null&&ne(Ra),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 24:return _r(ts),null;case 25:return null;default:return null}}function f0(e,r){switch(Xc(r),r.tag){case 3:_r(ts),Me();break;case 26:case 27:case 5:_e(r);break;case 4:Me();break;case 13:Ar(r);break;case 19:ne(ss);break;case 10:_r(r.type);break;case 22:case 23:Ar(r),ud(),e!==null&&ne(Ra);break;case 24:_r(ts)}}function Ao(e,r){try{var i=r.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var h=c.next;i=h;do{if((i.tag&e)===e){c=void 0;var p=i.create,j=i.inst;c=p(),j.destroy=c}i=i.next}while(i!==h)}}catch(E){Lt(r,r.return,E)}}function Zr(e,r,i){try{var c=r.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var p=h.next;c=p;do{if((c.tag&e)===e){var j=c.inst,E=j.destroy;if(E!==void 0){j.destroy=void 0,h=r;var z=i,ce=E;try{ce()}catch(ke){Lt(h,z,ke)}}}c=c.next}while(c!==p)}}catch(ke){Lt(r,r.return,ke)}}function m0(e){var r=e.updateQueue;if(r!==null){var i=e.stateNode;try{tm(r,i)}catch(c){Lt(e,e.return,c)}}}function g0(e,r,i){i.props=Oa(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(c){Lt(e,r,c)}}function Do(e,r){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof i=="function"?e.refCleanup=i(c):i.current=c}}catch(h){Lt(e,r,h)}}function hr(e,r){var i=e.ref,c=e.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(h){Lt(e,r,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(h){Lt(e,r,h)}else i.current=null}function p0(e){var r=e.type,i=e.memoizedProps,c=e.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(h){Lt(e,e.return,h)}}function Id(e,r,i){try{var c=e.stateNode;rv(c,e.type,i,r),c[We]=r}catch(h){Lt(e,e.return,h)}}function x0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ia(e.type)||e.tag===4}function zd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||x0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ia(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fd(e,r,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(e),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=bl));else if(c!==4&&(c===27&&ia(e.type)&&(i=e.stateNode,r=null),e=e.child,e!==null))for(Fd(e,r,i),e=e.sibling;e!==null;)Fd(e,r,i),e=e.sibling}function ll(e,r,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,r?i.insertBefore(e,r):i.appendChild(e);else if(c!==4&&(c===27&&ia(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(ll(e,r,i),e=e.sibling;e!==null;)ll(e,r,i),e=e.sibling}function y0(e){var r=e.stateNode,i=e.memoizedProps;try{for(var c=e.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);ms(r,c,i),r[et]=e,r[We]=i}catch(p){Lt(e,e.return,p)}}var Rr=!1,Qt=!1,Pd=!1,b0=typeof WeakSet=="function"?WeakSet:Set,ls=null;function Bb(e,r){if(e=e.containerInfo,hu=kl,e=Df(e),zc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var h=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var j=0,E=-1,z=-1,ce=0,ke=0,Re=e,de=null;t:for(;;){for(var ue;Re!==i||h!==0&&Re.nodeType!==3||(E=j+h),Re!==p||c!==0&&Re.nodeType!==3||(z=j+c),Re.nodeType===3&&(j+=Re.nodeValue.length),(ue=Re.firstChild)!==null;)de=Re,Re=ue;for(;;){if(Re===e)break t;if(de===i&&++ce===h&&(E=j),de===p&&++ke===c&&(z=j),(ue=Re.nextSibling)!==null)break;Re=de,de=Re.parentNode}Re=ue}i=E===-1||z===-1?null:{start:E,end:z}}else i=null}i=i||{start:0,end:0}}else i=null;for(fu={focusedElem:e,selectionRange:i},kl=!1,ls=r;ls!==null;)if(r=ls,e=r.child,(r.subtreeFlags&1024)!==0&&e!==null)e.return=r,ls=e;else for(;ls!==null;){switch(r=ls,p=r.alternate,e=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,i=r,h=p.memoizedProps,p=p.memoizedState,c=i.stateNode;try{var nt=Oa(i.type,h,i.elementType===i.type);e=c.getSnapshotBeforeUpdate(nt,p),c.__reactInternalSnapshotBeforeUpdate=e}catch(rt){Lt(i,i.return,rt)}}break;case 3:if((e&1024)!==0){if(e=r.stateNode.containerInfo,i=e.nodeType,i===9)pu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=r.sibling,e!==null){e.return=r.return,ls=e;break}ls=r.return}}function v0(e,r,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:ea(e,i),c&4&&Ao(5,i);break;case 1:if(ea(e,i),c&4)if(e=i.stateNode,r===null)try{e.componentDidMount()}catch(j){Lt(i,i.return,j)}else{var h=Oa(i.type,r.memoizedProps);r=r.memoizedState;try{e.componentDidUpdate(h,r,e.__reactInternalSnapshotBeforeUpdate)}catch(j){Lt(i,i.return,j)}}c&64&&m0(i),c&512&&Do(i,i.return);break;case 3:if(ea(e,i),c&64&&(e=i.updateQueue,e!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{tm(e,r)}catch(j){Lt(i,i.return,j)}}break;case 27:r===null&&c&4&&y0(i);case 26:case 5:ea(e,i),r===null&&c&4&&p0(i),c&512&&Do(i,i.return);break;case 12:ea(e,i);break;case 13:ea(e,i),c&4&&N0(e,i),c&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Yb.bind(null,i),dv(e,i))));break;case 22:if(c=i.memoizedState!==null||Rr,!c){r=r!==null&&r.memoizedState!==null||Qt,h=Rr;var p=Qt;Rr=c,(Qt=r)&&!p?ta(e,i,(i.subtreeFlags&8772)!==0):ea(e,i),Rr=h,Qt=p}break;case 30:break;default:ea(e,i)}}function w0(e){var r=e.alternate;r!==null&&(e.alternate=null,w0(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&eo(r)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var zt=null,Cs=!1;function Lr(e,r,i){for(i=i.child;i!==null;)j0(e,r,i),i=i.sibling}function j0(e,r,i){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(Be,i)}catch{}switch(i.tag){case 26:Qt||hr(i,r),Lr(e,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Qt||hr(i,r);var c=zt,h=Cs;ia(i.type)&&(zt=i.stateNode,Cs=!1),Lr(e,r,i),Io(i.stateNode),zt=c,Cs=h;break;case 5:Qt||hr(i,r);case 6:if(c=zt,h=Cs,zt=null,Lr(e,r,i),zt=c,Cs=h,zt!==null)if(Cs)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(i.stateNode)}catch(p){Lt(i,r,p)}else try{zt.removeChild(i.stateNode)}catch(p){Lt(i,r,p)}break;case 18:zt!==null&&(Cs?(e=zt,dg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Go(e)):dg(zt,i.stateNode));break;case 4:c=zt,h=Cs,zt=i.stateNode.containerInfo,Cs=!0,Lr(e,r,i),zt=c,Cs=h;break;case 0:case 11:case 14:case 15:Qt||Zr(2,i,r),Qt||Zr(4,i,r),Lr(e,r,i);break;case 1:Qt||(hr(i,r),c=i.stateNode,typeof c.componentWillUnmount=="function"&&g0(i,r,c)),Lr(e,r,i);break;case 21:Lr(e,r,i);break;case 22:Qt=(c=Qt)||i.memoizedState!==null,Lr(e,r,i),Qt=c;break;default:Lr(e,r,i)}}function N0(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Go(e)}catch(i){Lt(r,r.return,i)}}function $b(e){switch(e.tag){case 13:case 19:var r=e.stateNode;return r===null&&(r=e.stateNode=new b0),r;case 22:return e=e.stateNode,r=e._retryCache,r===null&&(r=e._retryCache=new b0),r;default:throw Error(o(435,e.tag))}}function Hd(e,r){var i=$b(e);r.forEach(function(c){var h=Gb.bind(null,e,c);i.has(c)||(i.add(c),c.then(h,h))})}function Ls(e,r){var i=r.deletions;if(i!==null)for(var c=0;c<i.length;c++){var h=i[c],p=e,j=r,E=j;e:for(;E!==null;){switch(E.tag){case 27:if(ia(E.type)){zt=E.stateNode,Cs=!1;break e}break;case 5:zt=E.stateNode,Cs=!1;break e;case 3:case 4:zt=E.stateNode.containerInfo,Cs=!0;break e}E=E.return}if(zt===null)throw Error(o(160));j0(p,j,h),zt=null,Cs=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)S0(r,e),r=r.sibling}var er=null;function S0(e,r){var i=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ls(r,e),Os(e),c&4&&(Zr(3,e,e.return),Ao(3,e),Zr(5,e,e.return));break;case 1:Ls(r,e),Os(e),c&512&&(Qt||i===null||hr(i,i.return)),c&64&&Rr&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var h=er;if(Ls(r,e),Os(e),c&512&&(Qt||i===null||hr(i,i.return)),c&4){var p=i!==null?i.memoizedState:null;if(c=e.memoizedState,i===null)if(c===null)if(e.stateNode===null){e:{c=e.type,i=e.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":p=h.getElementsByTagName("title")[0],(!p||p[va]||p[et]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(c),h.head.insertBefore(p,h.querySelector("head > title"))),ms(p,c,i),p[et]=e,Xt(p),c=p;break e;case"link":var j=yg("link","href",h).get(c+(i.href||""));if(j){for(var E=0;E<j.length;E++)if(p=j[E],p.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&p.getAttribute("rel")===(i.rel==null?null:i.rel)&&p.getAttribute("title")===(i.title==null?null:i.title)&&p.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){j.splice(E,1);break t}}p=h.createElement(c),ms(p,c,i),h.head.appendChild(p);break;case"meta":if(j=yg("meta","content",h).get(c+(i.content||""))){for(E=0;E<j.length;E++)if(p=j[E],p.getAttribute("content")===(i.content==null?null:""+i.content)&&p.getAttribute("name")===(i.name==null?null:i.name)&&p.getAttribute("property")===(i.property==null?null:i.property)&&p.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&p.getAttribute("charset")===(i.charSet==null?null:i.charSet)){j.splice(E,1);break t}}p=h.createElement(c),ms(p,c,i),h.head.appendChild(p);break;default:throw Error(o(468,c))}p[et]=e,Xt(p),c=p}e.stateNode=c}else bg(h,e.type,e.stateNode);else e.stateNode=xg(h,c,e.memoizedProps);else p!==c?(p===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):p.count--,c===null?bg(h,e.type,e.stateNode):xg(h,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Id(e,e.memoizedProps,i.memoizedProps)}break;case 27:Ls(r,e),Os(e),c&512&&(Qt||i===null||hr(i,i.return)),i!==null&&c&4&&Id(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Ls(r,e),Os(e),c&512&&(Qt||i===null||hr(i,i.return)),e.flags&32){h=e.stateNode;try{Ka(h,"")}catch(ue){Lt(e,e.return,ue)}}c&4&&e.stateNode!=null&&(h=e.memoizedProps,Id(e,h,i!==null?i.memoizedProps:h)),c&1024&&(Pd=!0);break;case 6:if(Ls(r,e),Os(e),c&4){if(e.stateNode===null)throw Error(o(162));c=e.memoizedProps,i=e.stateNode;try{i.nodeValue=c}catch(ue){Lt(e,e.return,ue)}}break;case 3:if(Nl=null,h=er,er=wl(r.containerInfo),Ls(r,e),er=h,Os(e),c&4&&i!==null&&i.memoizedState.isDehydrated)try{Go(r.containerInfo)}catch(ue){Lt(e,e.return,ue)}Pd&&(Pd=!1,C0(e));break;case 4:c=er,er=wl(e.stateNode.containerInfo),Ls(r,e),Os(e),er=c;break;case 12:Ls(r,e),Os(e);break;case 13:Ls(r,e),Os(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Kd=Fe()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Hd(e,c)));break;case 22:h=e.memoizedState!==null;var z=i!==null&&i.memoizedState!==null,ce=Rr,ke=Qt;if(Rr=ce||h,Qt=ke||z,Ls(r,e),Qt=ke,Rr=ce,Os(e),c&8192)e:for(r=e.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(i===null||z||Rr||Qt||Ua(e)),i=null,r=e;;){if(r.tag===5||r.tag===26){if(i===null){z=i=r;try{if(p=z.stateNode,h)j=p.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{E=z.stateNode;var Re=z.memoizedProps.style,de=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;E.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(ue){Lt(z,z.return,ue)}}}else if(r.tag===6){if(i===null){z=r;try{z.stateNode.nodeValue=h?"":z.memoizedProps}catch(ue){Lt(z,z.return,ue)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=e.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Hd(e,i))));break;case 19:Ls(r,e),Os(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Hd(e,c)));break;case 30:break;case 21:break;default:Ls(r,e),Os(e)}}function Os(e){var r=e.flags;if(r&2){try{for(var i,c=e.return;c!==null;){if(x0(c)){i=c;break}c=c.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var h=i.stateNode,p=zd(e);ll(e,p,h);break;case 5:var j=i.stateNode;i.flags&32&&(Ka(j,""),i.flags&=-33);var E=zd(e);ll(e,E,j);break;case 3:case 4:var z=i.stateNode.containerInfo,ce=zd(e);Fd(e,ce,z);break;default:throw Error(o(161))}}catch(ke){Lt(e,e.return,ke)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function C0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var r=e;C0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),e=e.sibling}}function ea(e,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)v0(e,r.alternate,r),r=r.sibling}function Ua(e){for(e=e.child;e!==null;){var r=e;switch(r.tag){case 0:case 11:case 14:case 15:Zr(4,r,r.return),Ua(r);break;case 1:hr(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&g0(r,r.return,i),Ua(r);break;case 27:Io(r.stateNode);case 26:case 5:hr(r,r.return),Ua(r);break;case 22:r.memoizedState===null&&Ua(r);break;case 30:Ua(r);break;default:Ua(r)}e=e.sibling}}function ta(e,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,h=e,p=r,j=p.flags;switch(p.tag){case 0:case 11:case 15:ta(h,p,i),Ao(4,p);break;case 1:if(ta(h,p,i),c=p,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(ce){Lt(c,c.return,ce)}if(c=p,h=c.updateQueue,h!==null){var E=c.stateNode;try{var z=h.shared.hiddenCallbacks;if(z!==null)for(h.shared.hiddenCallbacks=null,h=0;h<z.length;h++)em(z[h],E)}catch(ce){Lt(c,c.return,ce)}}i&&j&64&&m0(p),Do(p,p.return);break;case 27:y0(p);case 26:case 5:ta(h,p,i),i&&c===null&&j&4&&p0(p),Do(p,p.return);break;case 12:ta(h,p,i);break;case 13:ta(h,p,i),i&&j&4&&N0(h,p);break;case 22:p.memoizedState===null&&ta(h,p,i),Do(p,p.return);break;case 30:break;default:ta(h,p,i)}r=r.sibling}}function qd(e,r){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(e=r.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&go(i))}function Vd(e,r){e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&go(e))}function fr(e,r,i,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)k0(e,r,i,c),r=r.sibling}function k0(e,r,i,c){var h=r.flags;switch(r.tag){case 0:case 11:case 15:fr(e,r,i,c),h&2048&&Ao(9,r);break;case 1:fr(e,r,i,c);break;case 3:fr(e,r,i,c),h&2048&&(e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&go(e)));break;case 12:if(h&2048){fr(e,r,i,c),e=r.stateNode;try{var p=r.memoizedProps,j=p.id,E=p.onPostCommit;typeof E=="function"&&E(j,r.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){Lt(r,r.return,z)}}else fr(e,r,i,c);break;case 13:fr(e,r,i,c);break;case 23:break;case 22:p=r.stateNode,j=r.alternate,r.memoizedState!==null?p._visibility&2?fr(e,r,i,c):To(e,r):p._visibility&2?fr(e,r,i,c):(p._visibility|=2,gn(e,r,i,c,(r.subtreeFlags&10256)!==0)),h&2048&&qd(j,r);break;case 24:fr(e,r,i,c),h&2048&&Vd(r.alternate,r);break;default:fr(e,r,i,c)}}function gn(e,r,i,c,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=e,j=r,E=i,z=c,ce=j.flags;switch(j.tag){case 0:case 11:case 15:gn(p,j,E,z,h),Ao(8,j);break;case 23:break;case 22:var ke=j.stateNode;j.memoizedState!==null?ke._visibility&2?gn(p,j,E,z,h):To(p,j):(ke._visibility|=2,gn(p,j,E,z,h)),h&&ce&2048&&qd(j.alternate,j);break;case 24:gn(p,j,E,z,h),h&&ce&2048&&Vd(j.alternate,j);break;default:gn(p,j,E,z,h)}r=r.sibling}}function To(e,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=e,c=r,h=c.flags;switch(c.tag){case 22:To(i,c),h&2048&&qd(c.alternate,c);break;case 24:To(i,c),h&2048&&Vd(c.alternate,c);break;default:To(i,c)}r=r.sibling}}var Ro=8192;function pn(e){if(e.subtreeFlags&Ro)for(e=e.child;e!==null;)_0(e),e=e.sibling}function _0(e){switch(e.tag){case 26:pn(e),e.flags&Ro&&e.memoizedState!==null&&Nv(er,e.memoizedState,e.memoizedProps);break;case 5:pn(e);break;case 3:case 4:var r=er;er=wl(e.stateNode.containerInfo),pn(e),er=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Ro,Ro=16777216,pn(e),Ro=r):pn(e));break;default:pn(e)}}function E0(e){var r=e.alternate;if(r!==null&&(e=r.child,e!==null)){r.child=null;do r=e.sibling,e.sibling=null,e=r;while(e!==null)}}function Lo(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];ls=c,D0(c,e)}E0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)A0(e),e=e.sibling}function A0(e){switch(e.tag){case 0:case 11:case 15:Lo(e),e.flags&2048&&Zr(9,e,e.return);break;case 3:Lo(e);break;case 12:Lo(e);break;case 22:var r=e.stateNode;e.memoizedState!==null&&r._visibility&2&&(e.return===null||e.return.tag!==13)?(r._visibility&=-3,cl(e)):Lo(e);break;default:Lo(e)}}function cl(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];ls=c,D0(c,e)}E0(e)}for(e=e.child;e!==null;){switch(r=e,r.tag){case 0:case 11:case 15:Zr(8,r,r.return),cl(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,cl(r));break;default:cl(r)}e=e.sibling}}function D0(e,r){for(;ls!==null;){var i=ls;switch(i.tag){case 0:case 11:case 15:Zr(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:go(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,ls=c;else e:for(i=e;ls!==null;){c=ls;var h=c.sibling,p=c.return;if(w0(c),c===i){ls=null;break e}if(h!==null){h.return=p,ls=h;break e}ls=p}}}var Ib={getCacheForType:function(e){var r=ys(ts),i=r.data.get(e);return i===void 0&&(i=e(),r.data.set(e,i)),i}},zb=typeof WeakMap=="function"?WeakMap:Map,Et=0,Bt=null,xt=null,jt=0,At=0,Us=null,sa=!1,xn=!1,Yd=!1,Or=0,Gt=0,ra=0,Ma=0,Gd=0,Gs=0,yn=0,Oo=null,ks=null,Wd=!1,Kd=0,dl=1/0,ul=null,aa=null,fs=0,na=null,bn=null,vn=0,Qd=0,Xd=null,T0=null,Uo=0,Jd=null;function Ms(){if((Et&2)!==0&&jt!==0)return jt&-jt;if(O.T!==null){var e=on;return e!==0?e:nu()}return Is()}function R0(){Gs===0&&(Gs=(jt&536870912)===0||kt?Ue():536870912);var e=Ys.current;return e!==null&&(e.flags|=32),Gs}function Bs(e,r,i){(e===Bt&&(At===2||At===9)||e.cancelPendingCommit!==null)&&(wn(e,0),oa(e,jt,Gs,!1)),Ze(e,i),((Et&2)===0||e!==Bt)&&(e===Bt&&((Et&2)===0&&(Ma|=i),Gt===4&&oa(e,jt,Gs,!1)),mr(e))}function L0(e,r,i){if((Et&6)!==0)throw Error(o(327));var c=!i&&(r&124)===0&&(r&e.expiredLanes)===0||ie(e,r),h=c?Hb(e,r):tu(e,r,!0),p=c;do{if(h===0){xn&&!c&&oa(e,r,0,!1);break}else{if(i=e.current.alternate,p&&!Fb(i)){h=tu(e,r,!1),p=!1;continue}if(h===2){if(p=r,e.errorRecoveryDisabledLanes&p)var j=0;else j=e.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){r=j;e:{var E=e;h=Oo;var z=E.current.memoizedState.isDehydrated;if(z&&(wn(E,j).flags|=256),j=tu(E,j,!1),j!==2){if(Yd&&!z){E.errorRecoveryDisabledLanes|=p,Ma|=p,h=4;break e}p=ks,ks=h,p!==null&&(ks===null?ks=p:ks.push.apply(ks,p))}h=j}if(p=!1,h!==2)continue}}if(h===1){wn(e,0),oa(e,r,0,!0);break}e:{switch(c=e,p=h,p){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:oa(c,r,Gs,!sa);break e;case 2:ks=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(h=Kd+300-Fe(),10<h)){if(oa(c,r,Gs,!sa),R(c,0,!0)!==0)break e;c.timeoutHandle=lg(O0.bind(null,c,i,ks,ul,Wd,r,Gs,Ma,yn,sa,p,2,-0,0),h);break e}O0(c,i,ks,ul,Wd,r,Gs,Ma,yn,sa,p,0,-0,0)}}break}while(!0);mr(e)}function O0(e,r,i,c,h,p,j,E,z,ce,ke,Re,de,ue){if(e.timeoutHandle=-1,Re=r.subtreeFlags,(Re&8192||(Re&16785408)===16785408)&&(Po={stylesheets:null,count:0,unsuspend:jv},_0(r),Re=Sv(),Re!==null)){e.cancelPendingCommit=Re(F0.bind(null,e,r,p,i,c,h,j,E,z,ke,1,de,ue)),oa(e,p,j,!ce);return}F0(e,r,p,i,c,h,j,E,z)}function Fb(e){for(var r=e;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var h=i[c],p=h.getSnapshot;h=h.value;try{if(!Ts(p(),h))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function oa(e,r,i,c){r&=~Gd,r&=~Ma,e.suspendedLanes|=r,e.pingedLanes&=~r,c&&(e.warmLanes|=r),c=e.expirationTimes;for(var h=r;0<h;){var p=31-C(h),j=1<<p;c[p]=-1,h&=~j}i!==0&&Ge(e,i,r)}function hl(){return(Et&6)===0?(Mo(0),!1):!0}function Zd(){if(xt!==null){if(At===0)var e=xt.return;else e=xt,kr=Da=null,pd(e),fn=null,ko=0,e=xt;for(;e!==null;)f0(e.alternate,e),e=e.return;xt=null}}function wn(e,r){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,nv(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Zd(),Bt=e,xt=i=Nr(e.current,null),jt=r,At=0,Us=null,sa=!1,xn=ie(e,r),Yd=!1,yn=Gs=Gd=Ma=ra=Gt=0,ks=Oo=null,Wd=!1,(r&8)!==0&&(r|=r&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=r;0<c;){var h=31-C(c),p=1<<h;r|=e[h],c&=~p}return Or=r,Oi(),i}function U0(e,r){mt=null,O.H=Zi,r===xo||r===Hi?(r=Jf(),At=3):r===Kf?(r=Jf(),At=4):At=r===Zm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Us=r,xt===null&&(Gt=1,al(e,Ps(r,e.current)))}function M0(){var e=O.H;return O.H=Zi,e===null?Zi:e}function B0(){var e=O.A;return O.A=Ib,e}function eu(){Gt=4,sa||(jt&4194048)!==jt&&Ys.current!==null||(xn=!0),(ra&134217727)===0&&(Ma&134217727)===0||Bt===null||oa(Bt,jt,Gs,!1)}function tu(e,r,i){var c=Et;Et|=2;var h=M0(),p=B0();(Bt!==e||jt!==r)&&(ul=null,wn(e,r)),r=!1;var j=Gt;e:do try{if(At!==0&&xt!==null){var E=xt,z=Us;switch(At){case 8:Zd(),j=6;break e;case 3:case 2:case 9:case 6:Ys.current===null&&(r=!0);var ce=At;if(At=0,Us=null,jn(e,E,z,ce),i&&xn){j=0;break e}break;default:ce=At,At=0,Us=null,jn(e,E,z,ce)}}Pb(),j=Gt;break}catch(ke){U0(e,ke)}while(!0);return r&&e.shellSuspendCounter++,kr=Da=null,Et=c,O.H=h,O.A=p,xt===null&&(Bt=null,jt=0,Oi()),j}function Pb(){for(;xt!==null;)$0(xt)}function Hb(e,r){var i=Et;Et|=2;var c=M0(),h=B0();Bt!==e||jt!==r?(ul=null,dl=Fe()+500,wn(e,r)):xn=ie(e,r);e:do try{if(At!==0&&xt!==null){r=xt;var p=Us;t:switch(At){case 1:At=0,Us=null,jn(e,r,p,1);break;case 2:case 9:if(Qf(p)){At=0,Us=null,I0(r);break}r=function(){At!==2&&At!==9||Bt!==e||(At=7),mr(e)},p.then(r,r);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:Qf(p)?(At=0,Us=null,I0(r)):(At=0,Us=null,jn(e,r,p,7));break;case 5:var j=null;switch(xt.tag){case 26:j=xt.memoizedState;case 5:case 27:var E=xt;if(!j||vg(j)){At=0,Us=null;var z=E.sibling;if(z!==null)xt=z;else{var ce=E.return;ce!==null?(xt=ce,fl(ce)):xt=null}break t}}At=0,Us=null,jn(e,r,p,5);break;case 6:At=0,Us=null,jn(e,r,p,6);break;case 8:Zd(),Gt=6;break e;default:throw Error(o(462))}}qb();break}catch(ke){U0(e,ke)}while(!0);return kr=Da=null,O.H=c,O.A=h,Et=i,xt!==null?0:(Bt=null,jt=0,Oi(),Gt)}function qb(){for(;xt!==null&&!Se();)$0(xt)}function $0(e){var r=u0(e.alternate,e,Or);e.memoizedProps=e.pendingProps,r===null?fl(e):xt=r}function I0(e){var r=e,i=r.alternate;switch(r.tag){case 15:case 0:r=n0(i,r,r.pendingProps,r.type,void 0,jt);break;case 11:r=n0(i,r,r.pendingProps,r.type.render,r.ref,jt);break;case 5:pd(r);default:f0(i,r),r=xt=zf(r,Or),r=u0(i,r,Or)}e.memoizedProps=e.pendingProps,r===null?fl(e):xt=r}function jn(e,r,i,c){kr=Da=null,pd(r),fn=null,ko=0;var h=r.return;try{if(Lb(e,h,r,i,jt)){Gt=1,al(e,Ps(i,e.current)),xt=null;return}}catch(p){if(h!==null)throw xt=h,p;Gt=1,al(e,Ps(i,e.current)),xt=null;return}r.flags&32768?(kt||c===1?e=!0:xn||(jt&536870912)!==0?e=!1:(sa=e=!0,(c===2||c===9||c===3||c===6)&&(c=Ys.current,c!==null&&c.tag===13&&(c.flags|=16384))),z0(r,e)):fl(r)}function fl(e){var r=e;do{if((r.flags&32768)!==0){z0(r,sa);return}e=r.return;var i=Ub(r.alternate,r,Or);if(i!==null){xt=i;return}if(r=r.sibling,r!==null){xt=r;return}xt=r=e}while(r!==null);Gt===0&&(Gt=5)}function z0(e,r){do{var i=Mb(e.alternate,e);if(i!==null){i.flags&=32767,xt=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(e=e.sibling,e!==null)){xt=e;return}xt=e=i}while(e!==null);Gt=6,xt=null}function F0(e,r,i,c,h,p,j,E,z){e.cancelPendingCommit=null;do ml();while(fs!==0);if((Et&6)!==0)throw Error(o(327));if(r!==null){if(r===e.current)throw Error(o(177));if(p=r.lanes|r.childLanes,p|=Vc,pt(e,i,p,j,E,z),e===Bt&&(xt=Bt=null,jt=0),bn=r,na=e,vn=i,Qd=p,Xd=h,T0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Wb(te,function(){return Y0(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=O.T,O.T=null,h=H.p,H.p=2,j=Et,Et|=4;try{Bb(e,r,i)}finally{Et=j,H.p=h,O.T=c}}fs=1,P0(),H0(),q0()}}function P0(){if(fs===1){fs=0;var e=na,r=bn,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=O.T,O.T=null;var c=H.p;H.p=2;var h=Et;Et|=4;try{S0(r,e);var p=fu,j=Df(e.containerInfo),E=p.focusedElem,z=p.selectionRange;if(j!==E&&E&&E.ownerDocument&&Af(E.ownerDocument.documentElement,E)){if(z!==null&&zc(E)){var ce=z.start,ke=z.end;if(ke===void 0&&(ke=ce),"selectionStart"in E)E.selectionStart=ce,E.selectionEnd=Math.min(ke,E.value.length);else{var Re=E.ownerDocument||document,de=Re&&Re.defaultView||window;if(de.getSelection){var ue=de.getSelection(),nt=E.textContent.length,rt=Math.min(z.start,nt),Rt=z.end===void 0?rt:Math.min(z.end,nt);!ue.extend&&rt>Rt&&(j=Rt,Rt=rt,rt=j);var Z=Ef(E,rt),G=Ef(E,Rt);if(Z&&G&&(ue.rangeCount!==1||ue.anchorNode!==Z.node||ue.anchorOffset!==Z.offset||ue.focusNode!==G.node||ue.focusOffset!==G.offset)){var oe=Re.createRange();oe.setStart(Z.node,Z.offset),ue.removeAllRanges(),rt>Rt?(ue.addRange(oe),ue.extend(G.node,G.offset)):(oe.setEnd(G.node,G.offset),ue.addRange(oe))}}}}for(Re=[],ue=E;ue=ue.parentNode;)ue.nodeType===1&&Re.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Re.length;E++){var Ae=Re[E];Ae.element.scrollLeft=Ae.left,Ae.element.scrollTop=Ae.top}}kl=!!hu,fu=hu=null}finally{Et=h,H.p=c,O.T=i}}e.current=r,fs=2}}function H0(){if(fs===2){fs=0;var e=na,r=bn,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=O.T,O.T=null;var c=H.p;H.p=2;var h=Et;Et|=4;try{v0(e,r.alternate,r)}finally{Et=h,H.p=c,O.T=i}}fs=3}}function q0(){if(fs===4||fs===3){fs=0,Ie();var e=na,r=bn,i=vn,c=T0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?fs=5:(fs=0,bn=na=null,V0(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(aa=null),Ut(i),r=r.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(Be,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=O.T,h=H.p,H.p=2,O.T=null;try{for(var p=e.onRecoverableError,j=0;j<c.length;j++){var E=c[j];p(E.value,{componentStack:E.stack})}}finally{O.T=r,H.p=h}}(vn&3)!==0&&ml(),mr(e),h=e.pendingLanes,(i&4194090)!==0&&(h&42)!==0?e===Jd?Uo++:(Uo=0,Jd=e):Uo=0,Mo(0)}}function V0(e,r){(e.pooledCacheLanes&=r)===0&&(r=e.pooledCache,r!=null&&(e.pooledCache=null,go(r)))}function ml(e){return P0(),H0(),q0(),Y0()}function Y0(){if(fs!==5)return!1;var e=na,r=Qd;Qd=0;var i=Ut(vn),c=O.T,h=H.p;try{H.p=32>i?32:i,O.T=null,i=Xd,Xd=null;var p=na,j=vn;if(fs=0,bn=na=null,vn=0,(Et&6)!==0)throw Error(o(331));var E=Et;if(Et|=4,A0(p.current),k0(p,p.current,j,i),Et=E,Mo(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(Be,p)}catch{}return!0}finally{H.p=h,O.T=c,V0(e,r)}}function G0(e,r,i){r=Ps(i,r),r=Dd(e.stateNode,r,2),e=Kr(e,r,2),e!==null&&(Ze(e,2),mr(e))}function Lt(e,r,i){if(e.tag===3)G0(e,e,i);else for(;r!==null;){if(r.tag===3){G0(r,e,i);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(aa===null||!aa.has(c))){e=Ps(i,e),i=Xm(2),c=Kr(r,i,2),c!==null&&(Jm(i,c,r,e),Ze(c,2),mr(c));break}}r=r.return}}function su(e,r,i){var c=e.pingCache;if(c===null){c=e.pingCache=new zb;var h=new Set;c.set(r,h)}else h=c.get(r),h===void 0&&(h=new Set,c.set(r,h));h.has(i)||(Yd=!0,h.add(i),e=Vb.bind(null,e,r,i),r.then(e,e))}function Vb(e,r,i){var c=e.pingCache;c!==null&&c.delete(r),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Bt===e&&(jt&i)===i&&(Gt===4||Gt===3&&(jt&62914560)===jt&&300>Fe()-Kd?(Et&2)===0&&wn(e,0):Gd|=i,yn===jt&&(yn=0)),mr(e)}function W0(e,r){r===0&&(r=He()),e=sn(e,r),e!==null&&(Ze(e,r),mr(e))}function Yb(e){var r=e.memoizedState,i=0;r!==null&&(i=r.retryLane),W0(e,i)}function Gb(e,r){var i=0;switch(e.tag){case 13:var c=e.stateNode,h=e.memoizedState;h!==null&&(i=h.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(r),W0(e,i)}function Wb(e,r){return st(e,r)}var gl=null,Nn=null,ru=!1,pl=!1,au=!1,Ba=0;function mr(e){e!==Nn&&e.next===null&&(Nn===null?gl=Nn=e:Nn=Nn.next=e),pl=!0,ru||(ru=!0,Qb())}function Mo(e,r){if(!au&&pl){au=!0;do for(var i=!1,c=gl;c!==null;){if(e!==0){var h=c.pendingLanes;if(h===0)var p=0;else{var j=c.suspendedLanes,E=c.pingedLanes;p=(1<<31-C(42|e)+1)-1,p&=h&~(j&~E),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(i=!0,J0(c,p))}else p=jt,p=R(c,c===Bt?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||ie(c,p)||(i=!0,J0(c,p));c=c.next}while(i);au=!1}}function Kb(){K0()}function K0(){pl=ru=!1;var e=0;Ba!==0&&(av()&&(e=Ba),Ba=0);for(var r=Fe(),i=null,c=gl;c!==null;){var h=c.next,p=Q0(c,r);p===0?(c.next=null,i===null?gl=h:i.next=h,h===null&&(Nn=i)):(i=c,(e!==0||(p&3)!==0)&&(pl=!0)),c=h}Mo(e)}function Q0(e,r){for(var i=e.suspendedLanes,c=e.pingedLanes,h=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var j=31-C(p),E=1<<j,z=h[j];z===-1?((E&i)===0||(E&c)!==0)&&(h[j]=J(E,r)):z<=r&&(e.expiredLanes|=E),p&=~E}if(r=Bt,i=jt,i=R(e,e===r?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,i===0||e===r&&(At===2||At===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&re(c),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||ie(e,i)){if(r=i&-i,r===e.callbackPriority)return r;switch(c!==null&&re(c),Ut(i)){case 2:case 8:i=je;break;case 32:i=te;break;case 268435456:i=Le;break;default:i=te}return c=X0.bind(null,e),i=st(i,c),e.callbackPriority=r,e.callbackNode=i,r}return c!==null&&c!==null&&re(c),e.callbackPriority=2,e.callbackNode=null,2}function X0(e,r){if(fs!==0&&fs!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(ml()&&e.callbackNode!==i)return null;var c=jt;return c=R(e,e===Bt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(L0(e,c,r),Q0(e,Fe()),e.callbackNode!=null&&e.callbackNode===i?X0.bind(null,e):null)}function J0(e,r){if(ml())return null;L0(e,r,!0)}function Qb(){ov(function(){(Et&6)!==0?st(T,Kb):K0()})}function nu(){return Ba===0&&(Ba=Ue()),Ba}function Z0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:_i(""+e)}function eg(e,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,e.id&&i.setAttribute("form",e.id),r.parentNode.insertBefore(i,r),e=new FormData(e),i.parentNode.removeChild(i),e}function Xb(e,r,i,c,h){if(r==="submit"&&i&&i.stateNode===h){var p=Z0((h[We]||null).action),j=c.submitter;j&&(r=(r=j[We]||null)?Z0(r.formAction):j.getAttribute("formAction"),r!==null&&(p=r,j=null));var E=new Ti("action","action",null,c,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ba!==0){var z=j?eg(h,j):new FormData(h);Cd(i,{pending:!0,data:z,method:h.method,action:p},null,z)}}else typeof p=="function"&&(E.preventDefault(),z=j?eg(h,j):new FormData(h),Cd(i,{pending:!0,data:z,method:h.method,action:p},p,z))},currentTarget:h}]})}}for(var ou=0;ou<qc.length;ou++){var iu=qc[ou],Jb=iu.toLowerCase(),Zb=iu[0].toUpperCase()+iu.slice(1);Zs(Jb,"on"+Zb)}Zs(Lf,"onAnimationEnd"),Zs(Of,"onAnimationIteration"),Zs(Uf,"onAnimationStart"),Zs("dblclick","onDoubleClick"),Zs("focusin","onFocus"),Zs("focusout","onBlur"),Zs(pb,"onTransitionRun"),Zs(xb,"onTransitionStart"),Zs(yb,"onTransitionCancel"),Zs(Mf,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),ze("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ze("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ze("onBeforeInput",["compositionend","keypress","textInput","paste"]),ze("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ze("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ze("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ev=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bo));function tg(e,r){r=(r&4)!==0;for(var i=0;i<e.length;i++){var c=e[i],h=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var j=c.length-1;0<=j;j--){var E=c[j],z=E.instance,ce=E.currentTarget;if(E=E.listener,z!==p&&h.isPropagationStopped())break e;p=E,h.currentTarget=ce;try{p(h)}catch(ke){rl(ke)}h.currentTarget=null,p=z}else for(j=0;j<c.length;j++){if(E=c[j],z=E.instance,ce=E.currentTarget,E=E.listener,z!==p&&h.isPropagationStopped())break e;p=E,h.currentTarget=ce;try{p(h)}catch(ke){rl(ke)}h.currentTarget=null,p=z}}}}function yt(e,r){var i=r[Vt];i===void 0&&(i=r[Vt]=new Set);var c=e+"__bubble";i.has(c)||(sg(r,e,2,!1),i.add(c))}function lu(e,r,i){var c=0;r&&(c|=4),sg(i,e,c,r)}var xl="_reactListening"+Math.random().toString(36).slice(2);function cu(e){if(!e[xl]){e[xl]=!0,Si.forEach(function(i){i!=="selectionchange"&&(ev.has(i)||lu(i,!1,e),lu(i,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[xl]||(r[xl]=!0,lu("selectionchange",!1,r))}}function sg(e,r,i,c){switch(kg(r)){case 2:var h=_v;break;case 8:h=Ev;break;default:h=Nu}i=h.bind(null,r,i,e),h=void 0,!Tc||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),c?h!==void 0?e.addEventListener(r,i,{capture:!0,passive:h}):e.addEventListener(r,i,!0):h!==void 0?e.addEventListener(r,i,{passive:h}):e.addEventListener(r,i,!1)}function du(e,r,i,c,h){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var j=c.tag;if(j===3||j===4){var E=c.stateNode.containerInfo;if(E===h)break;if(j===4)for(j=c.return;j!==null;){var z=j.tag;if((z===3||z===4)&&j.stateNode.containerInfo===h)return;j=j.return}for(;E!==null;){if(j=Pr(E),j===null)return;if(z=j.tag,z===5||z===6||z===26||z===27){c=p=j;continue e}E=E.parentNode}}c=c.return}cf(function(){var ce=p,ke=Ac(i),Re=[];e:{var de=Bf.get(e);if(de!==void 0){var ue=Ti,nt=e;switch(e){case"keypress":if(Ai(i)===0)break e;case"keydown":case"keyup":ue=Wy;break;case"focusin":nt="focus",ue=Uc;break;case"focusout":nt="blur",ue=Uc;break;case"beforeblur":case"afterblur":ue=Uc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=My;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Xy;break;case Lf:case Of:case Uf:ue=Iy;break;case Mf:ue=Zy;break;case"scroll":case"scrollend":ue=Oy;break;case"wheel":ue=tb;break;case"copy":case"cut":case"paste":ue=Fy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=mf;break;case"toggle":case"beforetoggle":ue=rb}var rt=(r&4)!==0,Rt=!rt&&(e==="scroll"||e==="scrollend"),Z=rt?de!==null?de+"Capture":null:de;rt=[];for(var G=ce,oe;G!==null;){var Ae=G;if(oe=Ae.stateNode,Ae=Ae.tag,Ae!==5&&Ae!==26&&Ae!==27||oe===null||Z===null||(Ae=to(G,Z),Ae!=null&&rt.push($o(G,Ae,oe))),Rt)break;G=G.return}0<rt.length&&(de=new ue(de,nt,null,i,ke),Re.push({event:de,listeners:rt}))}}if((r&7)===0){e:{if(de=e==="mouseover"||e==="pointerover",ue=e==="mouseout"||e==="pointerout",de&&i!==Ec&&(nt=i.relatedTarget||i.fromElement)&&(Pr(nt)||nt[qe]))break e;if((ue||de)&&(de=ke.window===ke?ke:(de=ke.ownerDocument)?de.defaultView||de.parentWindow:window,ue?(nt=i.relatedTarget||i.toElement,ue=ce,nt=nt?Pr(nt):null,nt!==null&&(Rt=d(nt),rt=nt.tag,nt!==Rt||rt!==5&&rt!==27&&rt!==6)&&(nt=null)):(ue=null,nt=ce),ue!==nt)){if(rt=hf,Ae="onMouseLeave",Z="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(rt=mf,Ae="onPointerLeave",Z="onPointerEnter",G="pointer"),Rt=ue==null?de:wa(ue),oe=nt==null?de:wa(nt),de=new rt(Ae,G+"leave",ue,i,ke),de.target=Rt,de.relatedTarget=oe,Ae=null,Pr(ke)===ce&&(rt=new rt(Z,G+"enter",nt,i,ke),rt.target=oe,rt.relatedTarget=Rt,Ae=rt),Rt=Ae,ue&&nt)t:{for(rt=ue,Z=nt,G=0,oe=rt;oe;oe=Sn(oe))G++;for(oe=0,Ae=Z;Ae;Ae=Sn(Ae))oe++;for(;0<G-oe;)rt=Sn(rt),G--;for(;0<oe-G;)Z=Sn(Z),oe--;for(;G--;){if(rt===Z||Z!==null&&rt===Z.alternate)break t;rt=Sn(rt),Z=Sn(Z)}rt=null}else rt=null;ue!==null&&rg(Re,de,ue,rt,!1),nt!==null&&Rt!==null&&rg(Re,Rt,nt,rt,!0)}}e:{if(de=ce?wa(ce):window,ue=de.nodeName&&de.nodeName.toLowerCase(),ue==="select"||ue==="input"&&de.type==="file")var Xe=jf;else if(vf(de))if(Nf)Xe=fb;else{Xe=ub;var gt=db}else ue=de.nodeName,!ue||ue.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?ce&&_c(ce.elementType)&&(Xe=jf):Xe=hb;if(Xe&&(Xe=Xe(e,ce))){wf(Re,Xe,i,ke);break e}gt&&gt(e,de,ce),e==="focusout"&&ce&&de.type==="number"&&ce.memoizedProps.value!=null&&kc(de,"number",de.value)}switch(gt=ce?wa(ce):window,e){case"focusin":(vf(gt)||gt.contentEditable==="true")&&(Za=gt,Fc=ce,co=null);break;case"focusout":co=Fc=Za=null;break;case"mousedown":Pc=!0;break;case"contextmenu":case"mouseup":case"dragend":Pc=!1,Tf(Re,i,ke);break;case"selectionchange":if(gb)break;case"keydown":case"keyup":Tf(Re,i,ke)}var tt;if(Bc)e:{switch(e){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Ja?yf(e,i)&&(at="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(at="onCompositionStart");at&&(gf&&i.locale!=="ko"&&(Ja||at!=="onCompositionStart"?at==="onCompositionEnd"&&Ja&&(tt=df()):(Vr=ke,Rc="value"in Vr?Vr.value:Vr.textContent,Ja=!0)),gt=yl(ce,at),0<gt.length&&(at=new ff(at,e,null,i,ke),Re.push({event:at,listeners:gt}),tt?at.data=tt:(tt=bf(i),tt!==null&&(at.data=tt)))),(tt=nb?ob(e,i):ib(e,i))&&(at=yl(ce,"onBeforeInput"),0<at.length&&(gt=new ff("onBeforeInput","beforeinput",null,i,ke),Re.push({event:gt,listeners:at}),gt.data=tt)),Xb(Re,e,ce,i,ke)}tg(Re,r)})}function $o(e,r,i){return{instance:e,listener:r,currentTarget:i}}function yl(e,r){for(var i=r+"Capture",c=[];e!==null;){var h=e,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=to(e,i),h!=null&&c.unshift($o(e,h,p)),h=to(e,r),h!=null&&c.push($o(e,h,p))),e.tag===3)return c;e=e.return}return[]}function Sn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function rg(e,r,i,c,h){for(var p=r._reactName,j=[];i!==null&&i!==c;){var E=i,z=E.alternate,ce=E.stateNode;if(E=E.tag,z!==null&&z===c)break;E!==5&&E!==26&&E!==27||ce===null||(z=ce,h?(ce=to(i,p),ce!=null&&j.unshift($o(i,ce,z))):h||(ce=to(i,p),ce!=null&&j.push($o(i,ce,z)))),i=i.return}j.length!==0&&e.push({event:r,listeners:j})}var tv=/\r\n?/g,sv=/\u0000|\uFFFD/g;function ag(e){return(typeof e=="string"?e:""+e).replace(tv,`
`).replace(sv,"")}function ng(e,r){return r=ag(r),ag(e)===r}function bl(){}function Tt(e,r,i,c,h,p){switch(i){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Ka(e,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Ka(e,""+c);break;case"className":os(e,"class",c);break;case"tabIndex":os(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":os(e,i,c);break;case"style":of(e,c,p);break;case"data":if(r!=="object"){os(e,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||i!=="href")){e.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=_i(""+c),e.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(i==="formAction"?(r!=="input"&&Tt(e,r,"name",h.name,h,null),Tt(e,r,"formEncType",h.formEncType,h,null),Tt(e,r,"formMethod",h.formMethod,h,null),Tt(e,r,"formTarget",h.formTarget,h,null)):(Tt(e,r,"encType",h.encType,h,null),Tt(e,r,"method",h.method,h,null),Tt(e,r,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=_i(""+c),e.setAttribute(i,c);break;case"onClick":c!=null&&(e.onclick=bl);break;case"onScroll":c!=null&&yt("scroll",e);break;case"onScrollEnd":c!=null&&yt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(i=c.__html,i!=null){if(h.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}i=_i(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""+c):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":c===!0?e.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,c):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(i,c):e.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(i):e.setAttribute(i,c);break;case"popover":yt("beforetoggle",e),yt("toggle",e),lt(e,"popover",c);break;case"xlinkActuate":ct(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ct(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ct(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ct(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ct(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ct(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ct(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ct(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ct(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":lt(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Ry.get(i)||i,lt(e,i,c))}}function uu(e,r,i,c,h,p){switch(i){case"style":of(e,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(i=c.__html,i!=null){if(h.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof c=="string"?Ka(e,c):(typeof c=="number"||typeof c=="bigint")&&Ka(e,""+c);break;case"onScroll":c!=null&&yt("scroll",e);break;case"onScrollEnd":c!=null&&yt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=bl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qe.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(h=i.endsWith("Capture"),r=i.slice(2,h?i.length-7:void 0),p=e[We]||null,p=p!=null?p[i]:null,typeof p=="function"&&e.removeEventListener(r,p,h),typeof c=="function")){typeof p!="function"&&p!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(r,c,h);break e}i in e?e[i]=c:c===!0?e.setAttribute(i,""):lt(e,i,c)}}}function ms(e,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",e),yt("load",e);var c=!1,h=!1,p;for(p in i)if(i.hasOwnProperty(p)){var j=i[p];if(j!=null)switch(p){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:Tt(e,r,p,j,i,null)}}h&&Tt(e,r,"srcSet",i.srcSet,i,null),c&&Tt(e,r,"src",i.src,i,null);return;case"input":yt("invalid",e);var E=p=j=h=null,z=null,ce=null;for(c in i)if(i.hasOwnProperty(c)){var ke=i[c];if(ke!=null)switch(c){case"name":h=ke;break;case"type":j=ke;break;case"checked":z=ke;break;case"defaultChecked":ce=ke;break;case"value":p=ke;break;case"defaultValue":E=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(o(137,r));break;default:Tt(e,r,c,ke,i,null)}}sf(e,p,E,z,ce,j,h,!1),Ci(e);return;case"select":yt("invalid",e),c=j=p=null;for(h in i)if(i.hasOwnProperty(h)&&(E=i[h],E!=null))switch(h){case"value":p=E;break;case"defaultValue":j=E;break;case"multiple":c=E;default:Tt(e,r,h,E,i,null)}r=p,i=j,e.multiple=!!c,r!=null?Wa(e,!!c,r,!1):i!=null&&Wa(e,!!c,i,!0);return;case"textarea":yt("invalid",e),p=h=c=null;for(j in i)if(i.hasOwnProperty(j)&&(E=i[j],E!=null))switch(j){case"value":c=E;break;case"defaultValue":h=E;break;case"children":p=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:Tt(e,r,j,E,i,null)}af(e,c,h,p),Ci(e);return;case"option":for(z in i)if(i.hasOwnProperty(z)&&(c=i[z],c!=null))switch(z){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Tt(e,r,z,c,i,null)}return;case"dialog":yt("beforetoggle",e),yt("toggle",e),yt("cancel",e),yt("close",e);break;case"iframe":case"object":yt("load",e);break;case"video":case"audio":for(c=0;c<Bo.length;c++)yt(Bo[c],e);break;case"image":yt("error",e),yt("load",e);break;case"details":yt("toggle",e);break;case"embed":case"source":case"link":yt("error",e),yt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in i)if(i.hasOwnProperty(ce)&&(c=i[ce],c!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:Tt(e,r,ce,c,i,null)}return;default:if(_c(r)){for(ke in i)i.hasOwnProperty(ke)&&(c=i[ke],c!==void 0&&uu(e,r,ke,c,i,void 0));return}}for(E in i)i.hasOwnProperty(E)&&(c=i[E],c!=null&&Tt(e,r,E,c,i,null))}function rv(e,r,i,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,j=null,E=null,z=null,ce=null,ke=null;for(ue in i){var Re=i[ue];if(i.hasOwnProperty(ue)&&Re!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":z=Re;default:c.hasOwnProperty(ue)||Tt(e,r,ue,null,c,Re)}}for(var de in c){var ue=c[de];if(Re=i[de],c.hasOwnProperty(de)&&(ue!=null||Re!=null))switch(de){case"type":p=ue;break;case"name":h=ue;break;case"checked":ce=ue;break;case"defaultChecked":ke=ue;break;case"value":j=ue;break;case"defaultValue":E=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(o(137,r));break;default:ue!==Re&&Tt(e,r,de,ue,c,Re)}}Cc(e,j,E,z,ce,ke,p,h);return;case"select":ue=j=E=de=null;for(p in i)if(z=i[p],i.hasOwnProperty(p)&&z!=null)switch(p){case"value":break;case"multiple":ue=z;default:c.hasOwnProperty(p)||Tt(e,r,p,null,c,z)}for(h in c)if(p=c[h],z=i[h],c.hasOwnProperty(h)&&(p!=null||z!=null))switch(h){case"value":de=p;break;case"defaultValue":E=p;break;case"multiple":j=p;default:p!==z&&Tt(e,r,h,p,c,z)}r=E,i=j,c=ue,de!=null?Wa(e,!!i,de,!1):!!c!=!!i&&(r!=null?Wa(e,!!i,r,!0):Wa(e,!!i,i?[]:"",!1));return;case"textarea":ue=de=null;for(E in i)if(h=i[E],i.hasOwnProperty(E)&&h!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Tt(e,r,E,null,c,h)}for(j in c)if(h=c[j],p=i[j],c.hasOwnProperty(j)&&(h!=null||p!=null))switch(j){case"value":de=h;break;case"defaultValue":ue=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(o(91));break;default:h!==p&&Tt(e,r,j,h,c,p)}rf(e,de,ue);return;case"option":for(var nt in i)if(de=i[nt],i.hasOwnProperty(nt)&&de!=null&&!c.hasOwnProperty(nt))switch(nt){case"selected":e.selected=!1;break;default:Tt(e,r,nt,null,c,de)}for(z in c)if(de=c[z],ue=i[z],c.hasOwnProperty(z)&&de!==ue&&(de!=null||ue!=null))switch(z){case"selected":e.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:Tt(e,r,z,de,c,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in i)de=i[rt],i.hasOwnProperty(rt)&&de!=null&&!c.hasOwnProperty(rt)&&Tt(e,r,rt,null,c,de);for(ce in c)if(de=c[ce],ue=i[ce],c.hasOwnProperty(ce)&&de!==ue&&(de!=null||ue!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(o(137,r));break;default:Tt(e,r,ce,de,c,ue)}return;default:if(_c(r)){for(var Rt in i)de=i[Rt],i.hasOwnProperty(Rt)&&de!==void 0&&!c.hasOwnProperty(Rt)&&uu(e,r,Rt,void 0,c,de);for(ke in c)de=c[ke],ue=i[ke],!c.hasOwnProperty(ke)||de===ue||de===void 0&&ue===void 0||uu(e,r,ke,de,c,ue);return}}for(var Z in i)de=i[Z],i.hasOwnProperty(Z)&&de!=null&&!c.hasOwnProperty(Z)&&Tt(e,r,Z,null,c,de);for(Re in c)de=c[Re],ue=i[Re],!c.hasOwnProperty(Re)||de===ue||de==null&&ue==null||Tt(e,r,Re,de,c,ue)}var hu=null,fu=null;function vl(e){return e.nodeType===9?e:e.ownerDocument}function og(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ig(e,r){if(e===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&r==="foreignObject"?0:e}function mu(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var gu=null;function av(){var e=window.event;return e&&e.type==="popstate"?e===gu?!1:(gu=e,!0):(gu=null,!1)}var lg=typeof setTimeout=="function"?setTimeout:void 0,nv=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,ov=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(e){return cg.resolve(null).then(e).catch(iv)}:lg;function iv(e){setTimeout(function(){throw e})}function ia(e){return e==="head"}function dg(e,r){var i=r,c=0,h=0;do{var p=i.nextSibling;if(e.removeChild(i),p&&p.nodeType===8)if(i=p.data,i==="/$"){if(0<c&&8>c){i=c;var j=e.ownerDocument;if(i&1&&Io(j.documentElement),i&2&&Io(j.body),i&4)for(i=j.head,Io(i),j=i.firstChild;j;){var E=j.nextSibling,z=j.nodeName;j[va]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&j.rel.toLowerCase()==="stylesheet"||i.removeChild(j),j=E}}if(h===0){e.removeChild(p),Go(r);return}h--}else i==="$"||i==="$?"||i==="$!"?h++:c=i.charCodeAt(0)-48;else c=0;i=p}while(i);Go(r)}function pu(e){var r=e.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":pu(i),eo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function lv(e,r,i,c){for(;e.nodeType===1;){var h=i;if(e.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[va])switch(r){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(r==="input"&&e.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=tr(e.nextSibling),e===null)break}return null}function cv(e,r,i){if(r==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=tr(e.nextSibling),e===null))return null;return e}function xu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function dv(e,r){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")r();else{var c=function(){r(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function tr(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return e}var yu=null;function ug(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return e;r--}else i==="/$"&&r++}e=e.previousSibling}return null}function hg(e,r,i){switch(r=vl(i),e){case"html":if(e=r.documentElement,!e)throw Error(o(452));return e;case"head":if(e=r.head,!e)throw Error(o(453));return e;case"body":if(e=r.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Io(e){for(var r=e.attributes;r.length;)e.removeAttributeNode(r[0]);eo(e)}var Ws=new Map,fg=new Set;function wl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ur=H.d;H.d={f:uv,r:hv,D:fv,C:mv,L:gv,m:pv,X:yv,S:xv,M:bv};function uv(){var e=Ur.f(),r=hl();return e||r}function hv(e){var r=Hr(e);r!==null&&r.tag===5&&r.type==="form"?Lm(r):Ur.r(e)}var Cn=typeof document>"u"?null:document;function mg(e,r,i){var c=Cn;if(c&&typeof r=="string"&&r){var h=Fs(r);h='link[rel="'+e+'"][href="'+h+'"]',typeof i=="string"&&(h+='[crossorigin="'+i+'"]'),fg.has(h)||(fg.add(h),e={rel:e,crossOrigin:i,href:r},c.querySelector(h)===null&&(r=c.createElement("link"),ms(r,"link",e),Xt(r),c.head.appendChild(r)))}}function fv(e){Ur.D(e),mg("dns-prefetch",e,null)}function mv(e,r){Ur.C(e,r),mg("preconnect",e,r)}function gv(e,r,i){Ur.L(e,r,i);var c=Cn;if(c&&e&&r){var h='link[rel="preload"][as="'+Fs(r)+'"]';r==="image"&&i&&i.imageSrcSet?(h+='[imagesrcset="'+Fs(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(h+='[imagesizes="'+Fs(i.imageSizes)+'"]')):h+='[href="'+Fs(e)+'"]';var p=h;switch(r){case"style":p=kn(e);break;case"script":p=_n(e)}Ws.has(p)||(e=y({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:e,as:r},i),Ws.set(p,e),c.querySelector(h)!==null||r==="style"&&c.querySelector(zo(p))||r==="script"&&c.querySelector(Fo(p))||(r=c.createElement("link"),ms(r,"link",e),Xt(r),c.head.appendChild(r)))}}function pv(e,r){Ur.m(e,r);var i=Cn;if(i&&e){var c=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Fs(c)+'"][href="'+Fs(e)+'"]',p=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=_n(e)}if(!Ws.has(p)&&(e=y({rel:"modulepreload",href:e},r),Ws.set(p,e),i.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Fo(p)))return}c=i.createElement("link"),ms(c,"link",e),Xt(c),i.head.appendChild(c)}}}function xv(e,r,i){Ur.S(e,r,i);var c=Cn;if(c&&e){var h=cr(c).hoistableStyles,p=kn(e);r=r||"default";var j=h.get(p);if(!j){var E={loading:0,preload:null};if(j=c.querySelector(zo(p)))E.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":r},i),(i=Ws.get(p))&&bu(e,i);var z=j=c.createElement("link");Xt(z),ms(z,"link",e),z._p=new Promise(function(ce,ke){z.onload=ce,z.onerror=ke}),z.addEventListener("load",function(){E.loading|=1}),z.addEventListener("error",function(){E.loading|=2}),E.loading|=4,jl(j,r,c)}j={type:"stylesheet",instance:j,count:1,state:E},h.set(p,j)}}}function yv(e,r){Ur.X(e,r);var i=Cn;if(i&&e){var c=cr(i).hoistableScripts,h=_n(e),p=c.get(h);p||(p=i.querySelector(Fo(h)),p||(e=y({src:e,async:!0},r),(r=Ws.get(h))&&vu(e,r),p=i.createElement("script"),Xt(p),ms(p,"link",e),i.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(h,p))}}function bv(e,r){Ur.M(e,r);var i=Cn;if(i&&e){var c=cr(i).hoistableScripts,h=_n(e),p=c.get(h);p||(p=i.querySelector(Fo(h)),p||(e=y({src:e,async:!0,type:"module"},r),(r=Ws.get(h))&&vu(e,r),p=i.createElement("script"),Xt(p),ms(p,"link",e),i.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(h,p))}}function gg(e,r,i,c){var h=(h=U.current)?wl(h):null;if(!h)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=kn(i.href),i=cr(h).hoistableStyles,c=i.get(r),c||(c={type:"style",instance:null,count:0,state:null},i.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=kn(i.href);var p=cr(h).hoistableStyles,j=p.get(e);if(j||(h=h.ownerDocument||h,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,j),(p=h.querySelector(zo(e)))&&!p._p&&(j.instance=p,j.state.loading=5),Ws.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ws.set(e,i),p||vv(h,e,i,j.state))),r&&c===null)throw Error(o(528,""));return j}if(r&&c!==null)throw Error(o(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=_n(i),i=cr(h).hoistableScripts,c=i.get(r),c||(c={type:"script",instance:null,count:0,state:null},i.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function kn(e){return'href="'+Fs(e)+'"'}function zo(e){return'link[rel="stylesheet"]['+e+"]"}function pg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function vv(e,r,i,c){e.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=e.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),ms(r,"link",i),Xt(r),e.head.appendChild(r))}function _n(e){return'[src="'+Fs(e)+'"]'}function Fo(e){return"script[async]"+e}function xg(e,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var c=e.querySelector('style[data-href~="'+Fs(i.href)+'"]');if(c)return r.instance=c,Xt(c),c;var h=y({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Xt(c),ms(c,"style",h),jl(c,i.precedence,e),r.instance=c;case"stylesheet":h=kn(i.href);var p=e.querySelector(zo(h));if(p)return r.state.loading|=4,r.instance=p,Xt(p),p;c=pg(i),(h=Ws.get(h))&&bu(c,h),p=(e.ownerDocument||e).createElement("link"),Xt(p);var j=p;return j._p=new Promise(function(E,z){j.onload=E,j.onerror=z}),ms(p,"link",c),r.state.loading|=4,jl(p,i.precedence,e),r.instance=p;case"script":return p=_n(i.src),(h=e.querySelector(Fo(p)))?(r.instance=h,Xt(h),h):(c=i,(h=Ws.get(p))&&(c=y({},i),vu(c,h)),e=e.ownerDocument||e,h=e.createElement("script"),Xt(h),ms(h,"link",c),e.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,jl(c,i.precedence,e));return r.instance}function jl(e,r,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,p=h,j=0;j<c.length;j++){var E=c[j];if(E.dataset.precedence===r)p=E;else if(p!==h)break}p?p.parentNode.insertBefore(e,p.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(e,r.firstChild))}function bu(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.title==null&&(e.title=r.title)}function vu(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.integrity==null&&(e.integrity=r.integrity)}var Nl=null;function yg(e,r,i){if(Nl===null){var c=new Map,h=Nl=new Map;h.set(i,c)}else h=Nl,c=h.get(i),c||(c=new Map,h.set(i,c));if(c.has(e))return c;for(c.set(e,null),i=i.getElementsByTagName(e),h=0;h<i.length;h++){var p=i[h];if(!(p[va]||p[et]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var j=p.getAttribute(r)||"";j=e+j;var E=c.get(j);E?E.push(p):c.set(j,[p])}}return c}function bg(e,r,i){e=e.ownerDocument||e,e.head.insertBefore(i,r==="title"?e.querySelector("head > title"):null)}function wv(e,r,i){if(i===1||r.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return e=r.disabled,typeof r.precedence=="string"&&e==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function vg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Po=null;function jv(){}function Nv(e,r,i){if(Po===null)throw Error(o(475));var c=Po;if(r.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=kn(i.href),p=e.querySelector(zo(h));if(p){e=p._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(c.count++,c=Sl.bind(c),e.then(c,c)),r.state.loading|=4,r.instance=p,Xt(p);return}p=e.ownerDocument||e,i=pg(i),(h=Ws.get(h))&&bu(i,h),p=p.createElement("link"),Xt(p);var j=p;j._p=new Promise(function(E,z){j.onload=E,j.onerror=z}),ms(p,"link",i),r.instance=p}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,e),(e=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=Sl.bind(c),e.addEventListener("load",r),e.addEventListener("error",r))}}function Sv(){if(Po===null)throw Error(o(475));var e=Po;return e.stylesheets&&e.count===0&&wu(e,e.stylesheets),0<e.count?function(r){var i=setTimeout(function(){if(e.stylesheets&&wu(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(i)}}:null}function Sl(){if(this.count--,this.count===0){if(this.stylesheets)wu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Cl=null;function wu(e,r){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Cl=new Map,r.forEach(Cv,e),Cl=null,Sl.call(e))}function Cv(e,r){if(!(r.state.loading&4)){var i=Cl.get(e);if(i)var c=i.get(null);else{i=new Map,Cl.set(e,i);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var j=h[p];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(i.set(j.dataset.precedence,j),c=j)}c&&i.set(null,c)}h=r.instance,j=h.getAttribute("data-precedence"),p=i.get(j)||c,p===c&&i.set(null,h),i.set(j,h),this.count++,c=Sl.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),p?p.parentNode.insertBefore(h,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),r.state.loading|=4}}var Ho={$$typeof:M,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function kv(e,r,i,c,h,p,j,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ot(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ot(0),this.hiddenUpdates=ot(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function wg(e,r,i,c,h,p,j,E,z,ce,ke,Re){return e=new kv(e,r,i,j,E,z,ce,Re),r=1,p===!0&&(r|=24),p=Rs(3,null,null,r),e.current=p,p.stateNode=e,r=sd(),r.refCount++,e.pooledCache=r,r.refCount++,p.memoizedState={element:c,isDehydrated:i,cache:r},od(p),e}function jg(e){return e?(e=rn,e):rn}function Ng(e,r,i,c,h,p){h=jg(h),c.context===null?c.context=h:c.pendingContext=h,c=Wr(r),c.payload={element:i},p=p===void 0?null:p,p!==null&&(c.callback=p),i=Kr(e,c,r),i!==null&&(Bs(i,e,r),bo(i,e,r))}function Sg(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<r?i:r}}function ju(e,r){Sg(e,r),(e=e.alternate)&&Sg(e,r)}function Cg(e){if(e.tag===13){var r=sn(e,67108864);r!==null&&Bs(r,e,67108864),ju(e,67108864)}}var kl=!0;function _v(e,r,i,c){var h=O.T;O.T=null;var p=H.p;try{H.p=2,Nu(e,r,i,c)}finally{H.p=p,O.T=h}}function Ev(e,r,i,c){var h=O.T;O.T=null;var p=H.p;try{H.p=8,Nu(e,r,i,c)}finally{H.p=p,O.T=h}}function Nu(e,r,i,c){if(kl){var h=Su(c);if(h===null)du(e,r,c,_l,i),_g(e,c);else if(Dv(h,e,r,i,c))c.stopPropagation();else if(_g(e,c),r&4&&-1<Av.indexOf(e)){for(;h!==null;){var p=Hr(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var j=I(p.pendingLanes);if(j!==0){var E=p;for(E.pendingLanes|=2,E.entangledLanes|=2;j;){var z=1<<31-C(j);E.entanglements[1]|=z,j&=~z}mr(p),(Et&6)===0&&(dl=Fe()+500,Mo(0))}}break;case 13:E=sn(p,2),E!==null&&Bs(E,p,2),hl(),ju(p,2)}if(p=Su(c),p===null&&du(e,r,c,_l,i),p===h)break;h=p}h!==null&&c.stopPropagation()}else du(e,r,c,null,i)}}function Su(e){return e=Ac(e),Cu(e)}var _l=null;function Cu(e){if(_l=null,e=Pr(e),e!==null){var r=d(e);if(r===null)e=null;else{var i=r.tag;if(i===13){if(e=u(r),e!==null)return e;e=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null)}}return _l=e,null}function kg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Je()){case T:return 2;case je:return 8;case te:case X:return 32;case Le:return 268435456;default:return 32}default:return 32}}var ku=!1,la=null,ca=null,da=null,qo=new Map,Vo=new Map,ua=[],Av="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _g(e,r){switch(e){case"focusin":case"focusout":la=null;break;case"dragenter":case"dragleave":ca=null;break;case"mouseover":case"mouseout":da=null;break;case"pointerover":case"pointerout":qo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(r.pointerId)}}function Yo(e,r,i,c,h,p){return e===null||e.nativeEvent!==p?(e={blockedOn:r,domEventName:i,eventSystemFlags:c,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Hr(r),r!==null&&Cg(r)),e):(e.eventSystemFlags|=c,r=e.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),e)}function Dv(e,r,i,c,h){switch(r){case"focusin":return la=Yo(la,e,r,i,c,h),!0;case"dragenter":return ca=Yo(ca,e,r,i,c,h),!0;case"mouseover":return da=Yo(da,e,r,i,c,h),!0;case"pointerover":var p=h.pointerId;return qo.set(p,Yo(qo.get(p)||null,e,r,i,c,h)),!0;case"gotpointercapture":return p=h.pointerId,Vo.set(p,Yo(Vo.get(p)||null,e,r,i,c,h)),!0}return!1}function Eg(e){var r=Pr(e.target);if(r!==null){var i=d(r);if(i!==null){if(r=i.tag,r===13){if(r=u(i),r!==null){e.blockedOn=r,Ht(e.priority,function(){if(i.tag===13){var c=Ms();c=vt(c);var h=sn(i,c);h!==null&&Bs(h,i,c),ju(i,c)}});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function El(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var i=Su(e.nativeEvent);if(i===null){i=e.nativeEvent;var c=new i.constructor(i.type,i);Ec=c,i.target.dispatchEvent(c),Ec=null}else return r=Hr(i),r!==null&&Cg(r),e.blockedOn=i,!1;r.shift()}return!0}function Ag(e,r,i){El(e)&&i.delete(r)}function Tv(){ku=!1,la!==null&&El(la)&&(la=null),ca!==null&&El(ca)&&(ca=null),da!==null&&El(da)&&(da=null),qo.forEach(Ag),Vo.forEach(Ag)}function Al(e,r){e.blockedOn===r&&(e.blockedOn=null,ku||(ku=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Tv)))}var Dl=null;function Dg(e){Dl!==e&&(Dl=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Dl===e&&(Dl=null);for(var r=0;r<e.length;r+=3){var i=e[r],c=e[r+1],h=e[r+2];if(typeof c!="function"){if(Cu(c||i)===null)continue;break}var p=Hr(i);p!==null&&(e.splice(r,3),r-=3,Cd(p,{pending:!0,data:h,method:i.method,action:c},c,h))}}))}function Go(e){function r(z){return Al(z,e)}la!==null&&Al(la,e),ca!==null&&Al(ca,e),da!==null&&Al(da,e),qo.forEach(r),Vo.forEach(r);for(var i=0;i<ua.length;i++){var c=ua[i];c.blockedOn===e&&(c.blockedOn=null)}for(;0<ua.length&&(i=ua[0],i.blockedOn===null);)Eg(i),i.blockedOn===null&&ua.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var h=i[c],p=i[c+1],j=h[We]||null;if(typeof p=="function")j||Dg(i);else if(j){var E=null;if(p&&p.hasAttribute("formAction")){if(h=p,j=p[We]||null)E=j.formAction;else if(Cu(h)!==null)continue}else E=j.action;typeof E=="function"?i[c+1]=E:(i.splice(c,3),c-=3),Dg(i)}}}function _u(e){this._internalRoot=e}Tl.prototype.render=_u.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(o(409));var i=r.current,c=Ms();Ng(i,c,e,r,null,null)},Tl.prototype.unmount=_u.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Ng(e.current,2,null,e,null,null),hl(),r[qe]=null}};function Tl(e){this._internalRoot=e}Tl.prototype.unstable_scheduleHydration=function(e){if(e){var r=Is();e={blockedOn:null,target:e,priority:r};for(var i=0;i<ua.length&&r!==0&&r<ua[i].priority;i++);ua.splice(i,0,e),i===0&&Eg(e)}};var Tg=s.version;if(Tg!=="19.1.1")throw Error(o(527,Tg,"19.1.1"));H.findDOMNode=function(e){var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(r),e=e!==null?f(e):null,e=e===null?null:e.stateNode,e};var Rv={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{Be=Rl.inject(Rv),Pe=Rl}catch{}}return Ko.createRoot=function(e,r){if(!l(e))throw Error(o(299));var i=!1,c="",h=Gm,p=Wm,j=Km,E=null;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(j=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(E=r.unstable_transitionCallbacks)),r=wg(e,1,!1,null,null,i,c,h,p,j,E,null),e[qe]=r.current,cu(e),new _u(r)},Ko.hydrateRoot=function(e,r,i){if(!l(e))throw Error(o(299));var c=!1,h="",p=Gm,j=Wm,E=Km,z=null,ce=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(j=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(z=i.unstable_transitionCallbacks),i.formState!==void 0&&(ce=i.formState)),r=wg(e,1,!0,r,i??null,c,h,p,j,E,z,ce),r.context=jg(null),i=r.current,c=Ms(),c=vt(c),h=Wr(c),h.callback=null,Kr(i,h,c),i=c,r.current.lanes=i,Ze(r,i),mr(r),e[qe]=r.current,cu(e),new Tl(r)},Ko.version="19.1.1",Ko}var Fg;function Pv(){if(Fg)return Du.exports;Fg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(s){console.error(s)}}return a(),Du.exports=Fv(),Du.exports}var Hv=Pv();/**
 * react-router v7.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Pg="popstate";function qv(a={}){function s(o,l){let{pathname:d,search:u,hash:m}=o.location;return Zu("",{pathname:d,search:u,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(o,l){return typeof l=="string"?l:li(l)}return Yv(s,n,null,a)}function Pt(a,s){if(a===!1||a===null||typeof a>"u")throw new Error(s)}function Xs(a,s){if(!a){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Vv(){return Math.random().toString(36).substring(2,10)}function Hg(a,s){return{usr:a.state,key:a.key,idx:s}}function Zu(a,s,n=null,o){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof s=="string"?qn(s):s,state:n,key:s&&s.key||o||Vv()}}function li({pathname:a="/",search:s="",hash:n=""}){return s&&s!=="?"&&(a+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(a+=n.charAt(0)==="#"?n:"#"+n),a}function qn(a){let s={};if(a){let n=a.indexOf("#");n>=0&&(s.hash=a.substring(n),a=a.substring(0,n));let o=a.indexOf("?");o>=0&&(s.search=a.substring(o),a=a.substring(0,o)),a&&(s.pathname=a)}return s}function Yv(a,s,n,o={}){let{window:l=document.defaultView,v5Compat:d=!1}=o,u=l.history,m="POP",g=null,f=y();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function y(){return(u.state||{idx:null}).idx}function b(){m="POP";let _=y(),L=_==null?null:_-f;f=_,g&&g({action:m,location:S.location,delta:L})}function v(_,L){m="PUSH";let D=Zu(S.location,_,L);f=y()+1;let M=Hg(D,f),F=S.createHref(D);try{u.pushState(M,"",F)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;l.location.assign(F)}d&&g&&g({action:m,location:S.location,delta:1})}function N(_,L){m="REPLACE";let D=Zu(S.location,_,L);f=y();let M=Hg(D,f),F=S.createHref(D);u.replaceState(M,"",F),d&&g&&g({action:m,location:S.location,delta:0})}function w(_){return Gv(_)}let S={get action(){return m},get location(){return a(l,u)},listen(_){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Pg,b),g=_,()=>{l.removeEventListener(Pg,b),g=null}},createHref(_){return s(l,_)},createURL:w,encodeLocation(_){let L=w(_);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:v,replace:N,go(_){return u.go(_)}};return S}function Gv(a,s=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Pt(n,"No window.location.(origin|href) available to create URL");let o=typeof a=="string"?a:li(a);return o=o.replace(/ $/,"%20"),!s&&o.startsWith("//")&&(o=n+o),new URL(o,n)}function Yp(a,s,n="/"){return Wv(a,s,n,!1)}function Wv(a,s,n,o){let l=typeof s=="string"?qn(s):s,d=zr(l.pathname||"/",n);if(d==null)return null;let u=Gp(a);Kv(u);let m=null;for(let g=0;m==null&&g<u.length;++g){let f=o2(d);m=a2(u[g],f,o)}return m}function Gp(a,s=[],n=[],o="",l=!1){let d=(u,m,g=l,f)=>{let y={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:m,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&g)return;Pt(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let b=$r([o,y.relativePath]),v=n.concat(y);u.children&&u.children.length>0&&(Pt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Gp(u.children,s,v,b,g)),!(u.path==null&&!u.index)&&s.push({path:b,score:s2(b,u.index),routesMeta:v})};return a.forEach((u,m)=>{if(u.path===""||!u.path?.includes("?"))d(u,m);else for(let g of Wp(u.path))d(u,m,!0,g)}),s}function Wp(a){let s=a.split("/");if(s.length===0)return[];let[n,...o]=s,l=n.endsWith("?"),d=n.replace(/\?$/,"");if(o.length===0)return l?[d,""]:[d];let u=Wp(o.join("/")),m=[];return m.push(...u.map(g=>g===""?d:[d,g].join("/"))),l&&m.push(...u),m.map(g=>a.startsWith("/")&&g===""?"/":g)}function Kv(a){a.sort((s,n)=>s.score!==n.score?n.score-s.score:r2(s.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}var Qv=/^:[\w-]+$/,Xv=3,Jv=2,Zv=1,e2=10,t2=-2,qg=a=>a==="*";function s2(a,s){let n=a.split("/"),o=n.length;return n.some(qg)&&(o+=t2),s&&(o+=Jv),n.filter(l=>!qg(l)).reduce((l,d)=>l+(Qv.test(d)?Xv:d===""?Zv:e2),o)}function r2(a,s){return a.length===s.length&&a.slice(0,-1).every((o,l)=>o===s[l])?a[a.length-1]-s[s.length-1]:0}function a2(a,s,n=!1){let{routesMeta:o}=a,l={},d="/",u=[];for(let m=0;m<o.length;++m){let g=o[m],f=m===o.length-1,y=d==="/"?s:s.slice(d.length)||"/",b=tc({path:g.relativePath,caseSensitive:g.caseSensitive,end:f},y),v=g.route;if(!b&&f&&n&&!o[o.length-1].route.index&&(b=tc({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},y)),!b)return null;Object.assign(l,b.params),u.push({params:l,pathname:$r([d,b.pathname]),pathnameBase:d2($r([d,b.pathnameBase])),route:v}),b.pathnameBase!=="/"&&(d=$r([d,b.pathnameBase]))}return u}function tc(a,s){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[n,o]=n2(a.path,a.caseSensitive,a.end),l=s.match(n);if(!l)return null;let d=l[0],u=d.replace(/(.)\/+$/,"$1"),m=l.slice(1);return{params:o.reduce((f,{paramName:y,isOptional:b},v)=>{if(y==="*"){let w=m[v]||"";u=d.slice(0,d.length-w.length).replace(/(.)\/+$/,"$1")}const N=m[v];return b&&!N?f[y]=void 0:f[y]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:d,pathnameBase:u,pattern:a}}function n2(a,s=!1,n=!0){Xs(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let o=[],l="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,m,g)=>(o.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(o.push({paramName:"*"}),l+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":a!==""&&a!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,s?void 0:"i"),o]}function o2(a){try{return a.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Xs(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),a}}function zr(a,s){if(s==="/")return a;if(!a.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,o=a.charAt(n);return o&&o!=="/"?null:a.slice(n)||"/"}function i2(a,s="/"){let{pathname:n,search:o="",hash:l=""}=typeof a=="string"?qn(a):a;return{pathname:n?n.startsWith("/")?n:l2(n,s):s,search:u2(o),hash:h2(l)}}function l2(a,s){let n=s.replace(/\/+$/,"").split("/");return a.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function Ou(a,s,n,o){return`Cannot include a '${a}' character in a manually specified \`to.${s}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function c2(a){return a.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function Ah(a){let s=c2(a);return s.map((n,o)=>o===s.length-1?n.pathname:n.pathnameBase)}function Dh(a,s,n,o=!1){let l;typeof a=="string"?l=qn(a):(l={...a},Pt(!l.pathname||!l.pathname.includes("?"),Ou("?","pathname","search",l)),Pt(!l.pathname||!l.pathname.includes("#"),Ou("#","pathname","hash",l)),Pt(!l.search||!l.search.includes("#"),Ou("#","search","hash",l)));let d=a===""||l.pathname==="",u=d?"/":l.pathname,m;if(u==null)m=n;else{let b=s.length-1;if(!o&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),b-=1;l.pathname=v.join("/")}m=b>=0?s[b]:"/"}let g=i2(l,m),f=u&&u!=="/"&&u.endsWith("/"),y=(d||u===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(f||y)&&(g.pathname+="/"),g}var $r=a=>a.join("/").replace(/\/\/+/g,"/"),d2=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),u2=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,h2=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function f2(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var Kp=["POST","PUT","PATCH","DELETE"];new Set(Kp);var m2=["GET",...Kp];new Set(m2);var Vn=x.createContext(null);Vn.displayName="DataRouter";var cc=x.createContext(null);cc.displayName="DataRouterState";x.createContext(!1);var Qp=x.createContext({isTransitioning:!1});Qp.displayName="ViewTransition";var g2=x.createContext(new Map);g2.displayName="Fetchers";var p2=x.createContext(null);p2.displayName="Await";var nr=x.createContext(null);nr.displayName="Navigation";var ui=x.createContext(null);ui.displayName="Location";var or=x.createContext({outlet:null,matches:[],isDataRoute:!1});or.displayName="Route";var Th=x.createContext(null);Th.displayName="RouteError";function x2(a,{relative:s}={}){Pt(Yn(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=x.useContext(nr),{hash:l,pathname:d,search:u}=hi(a,{relative:s}),m=d;return n!=="/"&&(m=d==="/"?n:$r([n,d])),o.createHref({pathname:m,search:u,hash:l})}function Yn(){return x.useContext(ui)!=null}function ir(){return Pt(Yn(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(ui).location}var Xp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Jp(a){x.useContext(nr).static||x.useLayoutEffect(a)}function Ct(){let{isDataRoute:a}=x.useContext(or);return a?D2():y2()}function y2(){Pt(Yn(),"useNavigate() may be used only in the context of a <Router> component.");let a=x.useContext(Vn),{basename:s,navigator:n}=x.useContext(nr),{matches:o}=x.useContext(or),{pathname:l}=ir(),d=JSON.stringify(Ah(o)),u=x.useRef(!1);return Jp(()=>{u.current=!0}),x.useCallback((g,f={})=>{if(Xs(u.current,Xp),!u.current)return;if(typeof g=="number"){n.go(g);return}let y=Dh(g,JSON.parse(d),l,f.relative==="path");a==null&&s!=="/"&&(y.pathname=y.pathname==="/"?s:$r([s,y.pathname])),(f.replace?n.replace:n.push)(y,f.state,f)},[s,n,d,l,a])}x.createContext(null);function ps(){let{matches:a}=x.useContext(or),s=a[a.length-1];return s?s.params:{}}function hi(a,{relative:s}={}){let{matches:n}=x.useContext(or),{pathname:o}=ir(),l=JSON.stringify(Ah(n));return x.useMemo(()=>Dh(a,JSON.parse(l),o,s==="path"),[a,l,o,s])}function b2(a,s){return Zp(a,s)}function Zp(a,s,n,o,l){Pt(Yn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=x.useContext(nr),{matches:u}=x.useContext(or),m=u[u.length-1],g=m?m.params:{},f=m?m.pathname:"/",y=m?m.pathnameBase:"/",b=m&&m.route;{let D=b&&b.path||"";ex(f,!b||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let v=ir(),N;if(s){let D=typeof s=="string"?qn(s):s;Pt(y==="/"||D.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${D.pathname}" was given in the \`location\` prop.`),N=D}else N=v;let w=N.pathname||"/",S=w;if(y!=="/"){let D=y.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(D.length).join("/")}let _=Yp(a,{pathname:S});Xs(b||_!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Xs(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=S2(_&&_.map(D=>Object.assign({},D,{params:Object.assign({},g,D.params),pathname:$r([y,d.encodeLocation?d.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?y:$r([y,d.encodeLocation?d.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),u,n,o,l);return s&&L?x.createElement(ui.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},L):L}function v2(){let a=A2(),s=f2(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),n=a instanceof Error?a.stack:null,o="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},u=null;return console.error("Error handled by React Router default ErrorBoundary:",a),u=x.createElement(x.Fragment,null,x.createElement("p",null,"💿 Hey developer 👋"),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:d},"ErrorBoundary")," or"," ",x.createElement("code",{style:d},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},s),n?x.createElement("pre",{style:l},n):null,u)}var w2=x.createElement(v2,null),j2=class extends x.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,s){return s.location!==a.location||s.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:s.error,location:s.location,revalidation:a.revalidation||s.revalidation}}componentDidCatch(a,s){this.props.unstable_onError?this.props.unstable_onError(a,s):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?x.createElement(or.Provider,{value:this.props.routeContext},x.createElement(Th.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function N2({routeContext:a,match:s,children:n}){let o=x.useContext(Vn);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),x.createElement(or.Provider,{value:a},n)}function S2(a,s=[],n=null,o=null,l=null){if(a==null){if(!n)return null;if(n.errors)a=n.matches;else if(s.length===0&&!n.initialized&&n.matches.length>0)a=n.matches;else return null}let d=a,u=n?.errors;if(u!=null){let f=d.findIndex(y=>y.route.id&&u?.[y.route.id]!==void 0);Pt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),d=d.slice(0,Math.min(d.length,f+1))}let m=!1,g=-1;if(n)for(let f=0;f<d.length;f++){let y=d[f];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(g=f),y.route.id){let{loaderData:b,errors:v}=n,N=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!v||v[y.route.id]===void 0);if(y.route.lazy||N){m=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((f,y,b)=>{let v,N=!1,w=null,S=null;n&&(v=u&&y.route.id?u[y.route.id]:void 0,w=y.route.errorElement||w2,m&&(g<0&&b===0?(ex("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,S=null):g===b&&(N=!0,S=y.route.hydrateFallbackElement||null)));let _=s.concat(d.slice(0,b+1)),L=()=>{let D;return v?D=w:N?D=S:y.route.Component?D=x.createElement(y.route.Component,null):y.route.element?D=y.route.element:D=f,x.createElement(N2,{match:y,routeContext:{outlet:f,matches:_,isDataRoute:n!=null},children:D})};return n&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?x.createElement(j2,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:L(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:o}):L()},null)}function Rh(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C2(a){let s=x.useContext(Vn);return Pt(s,Rh(a)),s}function k2(a){let s=x.useContext(cc);return Pt(s,Rh(a)),s}function _2(a){let s=x.useContext(or);return Pt(s,Rh(a)),s}function Lh(a){let s=_2(a),n=s.matches[s.matches.length-1];return Pt(n.route.id,`${a} can only be used on routes that contain a unique "id"`),n.route.id}function E2(){return Lh("useRouteId")}function A2(){let a=x.useContext(Th),s=k2("useRouteError"),n=Lh("useRouteError");return a!==void 0?a:s.errors?.[n]}function D2(){let{router:a}=C2("useNavigate"),s=Lh("useNavigate"),n=x.useRef(!1);return Jp(()=>{n.current=!0}),x.useCallback(async(l,d={})=>{Xs(n.current,Xp),n.current&&(typeof l=="number"?a.navigate(l):await a.navigate(l,{fromRouteId:s,...d}))},[a,s])}var Vg={};function ex(a,s,n){!s&&!Vg[a]&&(Vg[a]=!0,Xs(!1,n))}x.memo(T2);function T2({routes:a,future:s,state:n,unstable_onError:o}){return Zp(a,void 0,n,o,s)}function Qo({to:a,replace:s,state:n,relative:o}){Pt(Yn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=x.useContext(nr);Xs(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=x.useContext(or),{pathname:u}=ir(),m=Ct(),g=Dh(a,Ah(d),u,o==="path"),f=JSON.stringify(g);return x.useEffect(()=>{m(JSON.parse(f),{replace:s,state:n,relative:o})},[m,f,o,s,n]),null}function _t(a){Pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function R2({basename:a="/",children:s=null,location:n,navigationType:o="POP",navigator:l,static:d=!1}){Pt(!Yn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=a.replace(/^\/*/,"/"),m=x.useMemo(()=>({basename:u,navigator:l,static:d,future:{}}),[u,l,d]);typeof n=="string"&&(n=qn(n));let{pathname:g="/",search:f="",hash:y="",state:b=null,key:v="default"}=n,N=x.useMemo(()=>{let w=zr(g,u);return w==null?null:{location:{pathname:w,search:f,hash:y,state:b,key:v},navigationType:o}},[u,g,f,y,b,v,o]);return Xs(N!=null,`<Router basename="${u}"> is not able to match the URL "${g}${f}${y}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:x.createElement(nr.Provider,{value:m},x.createElement(ui.Provider,{children:s,value:N}))}function L2({children:a,location:s}){return b2(eh(a),s)}function eh(a,s=[]){let n=[];return x.Children.forEach(a,(o,l)=>{if(!x.isValidElement(o))return;let d=[...s,l];if(o.type===x.Fragment){n.push.apply(n,eh(o.props.children,d));return}Pt(o.type===_t,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pt(!o.props.index||!o.props.children,"An index route cannot have child routes.");let u={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(u.children=eh(o.props.children,d)),n.push(u)}),n}var Yl="get",Gl="application/x-www-form-urlencoded";function dc(a){return a!=null&&typeof a.tagName=="string"}function O2(a){return dc(a)&&a.tagName.toLowerCase()==="button"}function U2(a){return dc(a)&&a.tagName.toLowerCase()==="form"}function M2(a){return dc(a)&&a.tagName.toLowerCase()==="input"}function B2(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function $2(a,s){return a.button===0&&(!s||s==="_self")&&!B2(a)}function th(a=""){return new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((s,n)=>{let o=a[n];return s.concat(Array.isArray(o)?o.map(l=>[n,l]):[[n,o]])},[]))}function I2(a,s){let n=th(a);return s&&s.forEach((o,l)=>{n.has(l)||s.getAll(l).forEach(d=>{n.append(l,d)})}),n}var Ll=null;function z2(){if(Ll===null)try{new FormData(document.createElement("form"),0),Ll=!1}catch{Ll=!0}return Ll}var F2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Uu(a){return a!=null&&!F2.has(a)?(Xs(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gl}"`),null):a}function P2(a,s){let n,o,l,d,u;if(U2(a)){let m=a.getAttribute("action");o=m?zr(m,s):null,n=a.getAttribute("method")||Yl,l=Uu(a.getAttribute("enctype"))||Gl,d=new FormData(a)}else if(O2(a)||M2(a)&&(a.type==="submit"||a.type==="image")){let m=a.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=a.getAttribute("formaction")||m.getAttribute("action");if(o=g?zr(g,s):null,n=a.getAttribute("formmethod")||m.getAttribute("method")||Yl,l=Uu(a.getAttribute("formenctype"))||Uu(m.getAttribute("enctype"))||Gl,d=new FormData(m,a),!z2()){let{name:f,type:y,value:b}=a;if(y==="image"){let v=f?`${f}.`:"";d.append(`${v}x`,"0"),d.append(`${v}y`,"0")}else f&&d.append(f,b)}}else{if(dc(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yl,o=null,l=Gl,u=a}return d&&l==="text/plain"&&(u=d,d=void 0),{action:o,method:n.toLowerCase(),encType:l,formData:d,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Oh(a,s){if(a===!1||a===null||typeof a>"u")throw new Error(s)}function H2(a,s,n){let o=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return o.pathname==="/"?o.pathname=`_root.${n}`:s&&zr(o.pathname,s)==="/"?o.pathname=`${s.replace(/\/$/,"")}/_root.${n}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${n}`,o}async function q2(a,s){if(a.id in s)return s[a.id];try{let n=await import(a.module);return s[a.id]=n,n}catch(n){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function V2(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function Y2(a,s,n){let o=await Promise.all(a.map(async l=>{let d=s.routes[l.route.id];if(d){let u=await q2(d,n);return u.links?u.links():[]}return[]}));return Q2(o.flat(1).filter(V2).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Yg(a,s,n,o,l,d){let u=(g,f)=>n[f]?g.route.id!==n[f].route.id:!0,m=(g,f)=>n[f].pathname!==g.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==g.params["*"];return d==="assets"?s.filter((g,f)=>u(g,f)||m(g,f)):d==="data"?s.filter((g,f)=>{let y=o.routes[g.route.id];if(!y||!y.hasLoader)return!1;if(u(g,f)||m(g,f))return!0;if(g.route.shouldRevalidate){let b=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function G2(a,s,{includeHydrateFallback:n}={}){return W2(a.map(o=>{let l=s.routes[o.route.id];if(!l)return[];let d=[l.module];return l.clientActionModule&&(d=d.concat(l.clientActionModule)),l.clientLoaderModule&&(d=d.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(d=d.concat(l.hydrateFallbackModule)),l.imports&&(d=d.concat(l.imports)),d}).flat(1))}function W2(a){return[...new Set(a)]}function K2(a){let s={},n=Object.keys(a).sort();for(let o of n)s[o]=a[o];return s}function Q2(a,s){let n=new Set;return new Set(s),a.reduce((o,l)=>{let d=JSON.stringify(K2(l));return n.has(d)||(n.add(d),o.push({key:d,link:l})),o},[])}function tx(){let a=x.useContext(Vn);return Oh(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function X2(){let a=x.useContext(cc);return Oh(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Uh=x.createContext(void 0);Uh.displayName="FrameworkContext";function sx(){let a=x.useContext(Uh);return Oh(a,"You must render this element inside a <HydratedRouter> element"),a}function J2(a,s){let n=x.useContext(Uh),[o,l]=x.useState(!1),[d,u]=x.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:f,onMouseLeave:y,onTouchStart:b}=s,v=x.useRef(null);x.useEffect(()=>{if(a==="render"&&u(!0),a==="viewport"){let S=L=>{L.forEach(D=>{u(D.isIntersecting)})},_=new IntersectionObserver(S,{threshold:.5});return v.current&&_.observe(v.current),()=>{_.disconnect()}}},[a]),x.useEffect(()=>{if(o){let S=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(S)}}},[o]);let N=()=>{l(!0)},w=()=>{l(!1),u(!1)};return n?a!=="intent"?[d,v,{}]:[d,v,{onFocus:Xo(m,N),onBlur:Xo(g,w),onMouseEnter:Xo(f,N),onMouseLeave:Xo(y,w),onTouchStart:Xo(b,N)}]:[!1,v,{}]}function Xo(a,s){return n=>{a&&a(n),n.defaultPrevented||s(n)}}function Z2({page:a,...s}){let{router:n}=tx(),o=x.useMemo(()=>Yp(n.routes,a,n.basename),[n.routes,a,n.basename]);return o?x.createElement(tw,{page:a,matches:o,...s}):null}function ew(a){let{manifest:s,routeModules:n}=sx(),[o,l]=x.useState([]);return x.useEffect(()=>{let d=!1;return Y2(a,s,n).then(u=>{d||l(u)}),()=>{d=!0}},[a,s,n]),o}function tw({page:a,matches:s,...n}){let o=ir(),{manifest:l,routeModules:d}=sx(),{basename:u}=tx(),{loaderData:m,matches:g}=X2(),f=x.useMemo(()=>Yg(a,s,g,l,o,"data"),[a,s,g,l,o]),y=x.useMemo(()=>Yg(a,s,g,l,o,"assets"),[a,s,g,l,o]),b=x.useMemo(()=>{if(a===o.pathname+o.search+o.hash)return[];let w=new Set,S=!1;if(s.forEach(L=>{let D=l.routes[L.route.id];!D||!D.hasLoader||(!f.some(M=>M.route.id===L.route.id)&&L.route.id in m&&d[L.route.id]?.shouldRevalidate||D.hasClientLoader?S=!0:w.add(L.route.id))}),w.size===0)return[];let _=H2(a,u,"data");return S&&w.size>0&&_.searchParams.set("_routes",s.filter(L=>w.has(L.route.id)).map(L=>L.route.id).join(",")),[_.pathname+_.search]},[u,m,o,l,f,s,a,d]),v=x.useMemo(()=>G2(y,l),[y,l]),N=ew(y);return x.createElement(x.Fragment,null,b.map(w=>x.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),v.map(w=>x.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),N.map(({key:w,link:S})=>x.createElement("link",{key:w,nonce:n.nonce,...S})))}function sw(...a){return s=>{a.forEach(n=>{typeof n=="function"?n(s):n!=null&&(n.current=s)})}}var rx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rx&&(window.__reactRouterVersion="7.9.0")}catch{}function rw({basename:a,children:s,window:n}){let o=x.useRef();o.current==null&&(o.current=qv({window:n,v5Compat:!0}));let l=o.current,[d,u]=x.useState({action:l.action,location:l.location}),m=x.useCallback(g=>{x.startTransition(()=>u(g))},[u]);return x.useLayoutEffect(()=>l.listen(m),[l,m]),x.createElement(R2,{basename:a,children:s,location:d.location,navigationType:d.action,navigator:l})}var ax=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fi=x.forwardRef(function({onClick:s,discover:n="render",prefetch:o="none",relative:l,reloadDocument:d,replace:u,state:m,target:g,to:f,preventScrollReset:y,viewTransition:b,...v},N){let{basename:w}=x.useContext(nr),S=typeof f=="string"&&ax.test(f),_,L=!1;if(typeof f=="string"&&S&&(_=f,rx))try{let he=new URL(window.location.href),be=f.startsWith("//")?new URL(he.protocol+f):new URL(f),Te=zr(be.pathname,w);be.origin===he.origin&&Te!=null?f=Te+be.search+be.hash:L=!0}catch{Xs(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=x2(f,{relative:l}),[M,F,B]=J2(o,v),q=iw(f,{replace:u,state:m,target:g,preventScrollReset:y,relative:l,viewTransition:b});function ee(he){s&&s(he),he.defaultPrevented||q(he)}let le=x.createElement("a",{...v,...B,href:_||D,onClick:L||d?s:ee,ref:sw(N,F),target:g,"data-discover":!S&&n==="render"?"true":void 0});return M&&!S?x.createElement(x.Fragment,null,le,x.createElement(Z2,{page:D})):le});fi.displayName="Link";var aw=x.forwardRef(function({"aria-current":s="page",caseSensitive:n=!1,className:o="",end:l=!1,style:d,to:u,viewTransition:m,children:g,...f},y){let b=hi(u,{relative:f.relative}),v=ir(),N=x.useContext(cc),{navigator:w,basename:S}=x.useContext(nr),_=N!=null&&fw(b)&&m===!0,L=w.encodeLocation?w.encodeLocation(b).pathname:b.pathname,D=v.pathname,M=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||(D=D.toLowerCase(),M=M?M.toLowerCase():null,L=L.toLowerCase()),M&&S&&(M=zr(M,S)||M);const F=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let B=D===L||!l&&D.startsWith(L)&&D.charAt(F)==="/",q=M!=null&&(M===L||!l&&M.startsWith(L)&&M.charAt(L.length)==="/"),ee={isActive:B,isPending:q,isTransitioning:_},le=B?s:void 0,he;typeof o=="function"?he=o(ee):he=[o,B?"active":null,q?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let be=typeof d=="function"?d(ee):d;return x.createElement(fi,{...f,"aria-current":le,className:he,ref:y,style:be,to:u,viewTransition:m},typeof g=="function"?g(ee):g)});aw.displayName="NavLink";var nw=x.forwardRef(({discover:a="render",fetcherKey:s,navigate:n,reloadDocument:o,replace:l,state:d,method:u=Yl,action:m,onSubmit:g,relative:f,preventScrollReset:y,viewTransition:b,...v},N)=>{let w=uw(),S=hw(m,{relative:f}),_=u.toLowerCase()==="get"?"get":"post",L=typeof m=="string"&&ax.test(m),D=M=>{if(g&&g(M),M.defaultPrevented)return;M.preventDefault();let F=M.nativeEvent.submitter,B=F?.getAttribute("formmethod")||u;w(F||M.currentTarget,{fetcherKey:s,method:B,navigate:n,replace:l,state:d,relative:f,preventScrollReset:y,viewTransition:b})};return x.createElement("form",{ref:N,method:_,action:S,onSubmit:o?g:D,...v,"data-discover":!L&&a==="render"?"true":void 0})});nw.displayName="Form";function ow(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nx(a){let s=x.useContext(Vn);return Pt(s,ow(a)),s}function iw(a,{target:s,replace:n,state:o,preventScrollReset:l,relative:d,viewTransition:u}={}){let m=Ct(),g=ir(),f=hi(a,{relative:d});return x.useCallback(y=>{if($2(y,s)){y.preventDefault();let b=n!==void 0?n:li(g)===li(f);m(a,{replace:b,state:o,preventScrollReset:l,relative:d,viewTransition:u})}},[g,m,f,n,o,s,a,l,d,u])}function lw(a){Xs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let s=x.useRef(th(a)),n=x.useRef(!1),o=ir(),l=x.useMemo(()=>I2(o.search,n.current?null:s.current),[o.search]),d=Ct(),u=x.useCallback((m,g)=>{const f=th(typeof m=="function"?m(new URLSearchParams(l)):m);n.current=!0,d("?"+f,g)},[d,l]);return[l,u]}var cw=0,dw=()=>`__${String(++cw)}__`;function uw(){let{router:a}=nx("useSubmit"),{basename:s}=x.useContext(nr),n=E2();return x.useCallback(async(o,l={})=>{let{action:d,method:u,encType:m,formData:g,body:f}=P2(o,s);if(l.navigate===!1){let y=l.fetcherKey||dw();await a.fetch(y,n,l.action||d,{preventScrollReset:l.preventScrollReset,formData:g,body:f,formMethod:l.method||u,formEncType:l.encType||m,flushSync:l.flushSync})}else await a.navigate(l.action||d,{preventScrollReset:l.preventScrollReset,formData:g,body:f,formMethod:l.method||u,formEncType:l.encType||m,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[a,s,n])}function hw(a,{relative:s}={}){let{basename:n}=x.useContext(nr),o=x.useContext(or);Pt(o,"useFormAction must be used inside a RouteContext");let[l]=o.matches.slice(-1),d={...hi(a||".",{relative:s})},u=ir();if(a==null){d.search=u.search;let m=new URLSearchParams(d.search),g=m.getAll("index");if(g.some(y=>y==="")){m.delete("index"),g.filter(b=>b).forEach(b=>m.append("index",b));let y=m.toString();d.search=y?`?${y}`:""}}return(!a||a===".")&&l.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:$r([n,d.pathname])),li(d)}function fw(a,{relative:s}={}){let n=x.useContext(Qp);Pt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=nx("useViewTransitionState"),l=hi(a,{relative:s});if(!n.isTransitioning)return!1;let d=zr(n.currentLocation.pathname,o)||n.currentLocation.pathname,u=zr(n.nextLocation.pathname,o)||n.nextLocation.pathname;return tc(l.pathname,u)!=null||tc(l.pathname,d)!=null}var mw=Vp();const gw=_h(mw);function pw(a){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",s.appendChild(n),n.styleSheet?n.styleSheet.cssText=a:n.appendChild(document.createTextNode(a))}const xw=a=>{switch(a){case"success":return vw;case"info":return jw;case"warning":return ww;case"error":return Nw;default:return null}},yw=Array(12).fill(0),bw=({visible:a,className:s})=>$e.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":a},$e.createElement("div",{className:"sonner-spinner"},yw.map((n,o)=>$e.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${o}`})))),vw=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ww=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),jw=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Nw=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Sw=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Cw=()=>{const[a,s]=$e.useState(document.hidden);return $e.useEffect(()=>{const n=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),a};let sh=1;class kw{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const n=this.subscribers.indexOf(s);this.subscribers.splice(n,1)}),this.publish=s=>{this.subscribers.forEach(n=>n(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var n;const{message:o,...l}=s,d=typeof s?.id=="number"||((n=s.id)==null?void 0:n.length)>0?s.id:sh++,u=this.toasts.find(g=>g.id===d),m=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(d)&&this.dismissedToasts.delete(d),u?this.toasts=this.toasts.map(g=>g.id===d?(this.publish({...g,...s,id:d,title:o}),{...g,...s,id:d,dismissible:m,title:o}):g):this.addToast({title:o,...l,dismissible:m,id:d}),d},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:s,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(o=>o({id:n.id,dismiss:!0}))}),s),this.message=(s,n)=>this.create({...n,message:s}),this.error=(s,n)=>this.create({...n,message:s,type:"error"}),this.success=(s,n)=>this.create({...n,type:"success",message:s}),this.info=(s,n)=>this.create({...n,type:"info",message:s}),this.warning=(s,n)=>this.create({...n,type:"warning",message:s}),this.loading=(s,n)=>this.create({...n,type:"loading",message:s}),this.promise=(s,n)=>{if(!n)return;let o;n.loading!==void 0&&(o=this.create({...n,promise:s,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const l=Promise.resolve(s instanceof Function?s():s);let d=o!==void 0,u;const m=l.then(async f=>{if(u=["resolve",f],$e.isValidElement(f))d=!1,this.create({id:o,type:"default",message:f});else if(Ew(f)&&!f.ok){d=!1;const b=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,v=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,w=typeof b=="object"&&!$e.isValidElement(b)?b:{message:b};this.create({id:o,type:"error",description:v,...w})}else if(f instanceof Error){d=!1;const b=typeof n.error=="function"?await n.error(f):n.error,v=typeof n.description=="function"?await n.description(f):n.description,w=typeof b=="object"&&!$e.isValidElement(b)?b:{message:b};this.create({id:o,type:"error",description:v,...w})}else if(n.success!==void 0){d=!1;const b=typeof n.success=="function"?await n.success(f):n.success,v=typeof n.description=="function"?await n.description(f):n.description,w=typeof b=="object"&&!$e.isValidElement(b)?b:{message:b};this.create({id:o,type:"success",description:v,...w})}}).catch(async f=>{if(u=["reject",f],n.error!==void 0){d=!1;const y=typeof n.error=="function"?await n.error(f):n.error,b=typeof n.description=="function"?await n.description(f):n.description,N=typeof y=="object"&&!$e.isValidElement(y)?y:{message:y};this.create({id:o,type:"error",description:b,...N})}}).finally(()=>{d&&(this.dismiss(o),o=void 0),n.finally==null||n.finally.call(n)}),g=()=>new Promise((f,y)=>m.then(()=>u[0]==="reject"?y(u[1]):f(u[1])).catch(y));return typeof o!="string"&&typeof o!="number"?{unwrap:g}:Object.assign(o,{unwrap:g})},this.custom=(s,n)=>{const o=n?.id||sh++;return this.create({jsx:s(o),id:o,...n}),o},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const _s=new kw,_w=(a,s)=>{const n=s?.id||sh++;return _s.addToast({title:a,...s,id:n}),n},Ew=a=>a&&typeof a=="object"&&"ok"in a&&typeof a.ok=="boolean"&&"status"in a&&typeof a.status=="number",Aw=_w,Dw=()=>_s.toasts,Tw=()=>_s.getActiveToasts(),k=Object.assign(Aw,{success:_s.success,info:_s.info,warning:_s.warning,error:_s.error,custom:_s.custom,message:_s.message,promise:_s.promise,dismiss:_s.dismiss,loading:_s.loading},{getHistory:Dw,getToasts:Tw});pw("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Ol(a){return a.label!==void 0}const Rw=3,Lw="24px",Ow="16px",Gg=4e3,Uw=356,Mw=14,Bw=45,$w=200;function gr(...a){return a.filter(Boolean).join(" ")}function Iw(a){const[s,n]=a.split("-"),o=[];return s&&o.push(s),n&&o.push(n),o}const zw=a=>{var s,n,o,l,d,u,m,g,f;const{invert:y,toast:b,unstyled:v,interacting:N,setHeights:w,visibleToasts:S,heights:_,index:L,toasts:D,expanded:M,removeToast:F,defaultRichColors:B,closeButton:q,style:ee,cancelButtonStyle:le,actionButtonStyle:he,className:be="",descriptionClassName:Te="",duration:we,position:fe,gap:K,expandByDefault:ye,classNames:O,icons:H,closeButtonAriaLabel:se="Close toast"}=a,[W,A]=$e.useState(null),[Q,ne]=$e.useState(null),[ae,ge]=$e.useState(!1),[ve,U]=$e.useState(!1),[Ee,Ce]=$e.useState(!1),[Me,me]=$e.useState(!1),[_e,Ye]=$e.useState(!1),[st,re]=$e.useState(0),[Se,Ie]=$e.useState(0),Fe=$e.useRef(b.duration||we||Gg),Je=$e.useRef(null),T=$e.useRef(null),je=L===0,te=L+1<=S,X=b.type,Le=b.dismissible!==!1,$=b.className||"",De=b.descriptionClassName||"",Be=$e.useMemo(()=>_.findIndex(Ge=>Ge.toastId===b.id)||0,[_,b.id]),Pe=$e.useMemo(()=>{var Ge;return(Ge=b.closeButton)!=null?Ge:q},[b.closeButton,q]),P=$e.useMemo(()=>b.duration||we||Gg,[b.duration,we]),C=$e.useRef(0),Y=$e.useRef(0),Ne=$e.useRef(0),xe=$e.useRef(null),[Ve,V]=fe.split("-"),I=$e.useMemo(()=>_.reduce((Ge,ft,vt)=>vt>=Be?Ge:Ge+ft.height,0),[_,Be]),R=Cw(),ie=b.invert||y,J=X==="loading";Y.current=$e.useMemo(()=>Be*K+I,[Be,I]),$e.useEffect(()=>{Fe.current=P},[P]),$e.useEffect(()=>{ge(!0)},[]),$e.useEffect(()=>{const Ge=T.current;if(Ge){const ft=Ge.getBoundingClientRect().height;return Ie(ft),w(vt=>[{toastId:b.id,height:ft,position:b.position},...vt]),()=>w(vt=>vt.filter(Ut=>Ut.toastId!==b.id))}},[w,b.id]),$e.useLayoutEffect(()=>{if(!ae)return;const Ge=T.current,ft=Ge.style.height;Ge.style.height="auto";const vt=Ge.getBoundingClientRect().height;Ge.style.height=ft,Ie(vt),w(Ut=>Ut.find(Ht=>Ht.toastId===b.id)?Ut.map(Ht=>Ht.toastId===b.id?{...Ht,height:vt}:Ht):[{toastId:b.id,height:vt,position:b.position},...Ut])},[ae,b.title,b.description,w,b.id,b.jsx,b.action,b.cancel]);const Ue=$e.useCallback(()=>{U(!0),re(Y.current),w(Ge=>Ge.filter(ft=>ft.toastId!==b.id)),setTimeout(()=>{F(b)},$w)},[b,F,w,Y]);$e.useEffect(()=>{if(b.promise&&X==="loading"||b.duration===1/0||b.type==="loading")return;let Ge;return M||N||R?(()=>{if(Ne.current<C.current){const Ut=new Date().getTime()-C.current;Fe.current=Fe.current-Ut}Ne.current=new Date().getTime()})():(()=>{Fe.current!==1/0&&(C.current=new Date().getTime(),Ge=setTimeout(()=>{b.onAutoClose==null||b.onAutoClose.call(b,b),Ue()},Fe.current))})(),()=>clearTimeout(Ge)},[M,N,b,X,R,Ue]),$e.useEffect(()=>{b.delete&&(Ue(),b.onDismiss==null||b.onDismiss.call(b,b))},[Ue,b.delete]);function He(){var Ge;if(H?.loading){var ft;return $e.createElement("div",{className:gr(O?.loader,b==null||(ft=b.classNames)==null?void 0:ft.loader,"sonner-loader"),"data-visible":X==="loading"},H.loading)}return $e.createElement(bw,{className:gr(O?.loader,b==null||(Ge=b.classNames)==null?void 0:Ge.loader),visible:X==="loading"})}const ot=b.icon||H?.[X]||xw(X);var Ze,pt;return $e.createElement("li",{tabIndex:0,ref:T,className:gr(be,$,O?.toast,b==null||(s=b.classNames)==null?void 0:s.toast,O?.default,O?.[X],b==null||(n=b.classNames)==null?void 0:n[X]),"data-sonner-toast":"","data-rich-colors":(Ze=b.richColors)!=null?Ze:B,"data-styled":!(b.jsx||b.unstyled||v),"data-mounted":ae,"data-promise":!!b.promise,"data-swiped":_e,"data-removed":ve,"data-visible":te,"data-y-position":Ve,"data-x-position":V,"data-index":L,"data-front":je,"data-swiping":Ee,"data-dismissible":Le,"data-type":X,"data-invert":ie,"data-swipe-out":Me,"data-swipe-direction":Q,"data-expanded":!!(M||ye&&ae),"data-testid":b.testId,style:{"--index":L,"--toasts-before":L,"--z-index":D.length-L,"--offset":`${ve?st:Y.current}px`,"--initial-height":ye?"auto":`${Se}px`,...ee,...b.style},onDragEnd:()=>{Ce(!1),A(null),xe.current=null},onPointerDown:Ge=>{Ge.button!==2&&(J||!Le||(Je.current=new Date,re(Y.current),Ge.target.setPointerCapture(Ge.pointerId),Ge.target.tagName!=="BUTTON"&&(Ce(!0),xe.current={x:Ge.clientX,y:Ge.clientY})))},onPointerUp:()=>{var Ge,ft,vt;if(Me||!Le)return;xe.current=null;const Ut=Number(((Ge=T.current)==null?void 0:Ge.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Is=Number(((ft=T.current)==null?void 0:ft.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ht=new Date().getTime()-((vt=Je.current)==null?void 0:vt.getTime()),It=W==="x"?Ut:Is,et=Math.abs(It)/Ht;if(Math.abs(It)>=Bw||et>.11){re(Y.current),b.onDismiss==null||b.onDismiss.call(b,b),ne(W==="x"?Ut>0?"right":"left":Is>0?"down":"up"),Ue(),me(!0);return}else{var We,qe;(We=T.current)==null||We.style.setProperty("--swipe-amount-x","0px"),(qe=T.current)==null||qe.style.setProperty("--swipe-amount-y","0px")}Ye(!1),Ce(!1),A(null)},onPointerMove:Ge=>{var ft,vt,Ut;if(!xe.current||!Le||((ft=window.getSelection())==null?void 0:ft.toString().length)>0)return;const Ht=Ge.clientY-xe.current.y,It=Ge.clientX-xe.current.x;var et;const We=(et=a.swipeDirections)!=null?et:Iw(fe);!W&&(Math.abs(It)>1||Math.abs(Ht)>1)&&A(Math.abs(It)>Math.abs(Ht)?"x":"y");let qe={x:0,y:0};const Vt=Js=>1/(1.5+Math.abs(Js)/20);if(W==="y"){if(We.includes("top")||We.includes("bottom"))if(We.includes("top")&&Ht<0||We.includes("bottom")&&Ht>0)qe.y=Ht;else{const Js=Ht*Vt(Ht);qe.y=Math.abs(Js)<Math.abs(Ht)?Js:Ht}}else if(W==="x"&&(We.includes("left")||We.includes("right")))if(We.includes("left")&&It<0||We.includes("right")&&It>0)qe.x=It;else{const Js=It*Vt(It);qe.x=Math.abs(Js)<Math.abs(It)?Js:It}(Math.abs(qe.x)>0||Math.abs(qe.y)>0)&&Ye(!0),(vt=T.current)==null||vt.style.setProperty("--swipe-amount-x",`${qe.x}px`),(Ut=T.current)==null||Ut.style.setProperty("--swipe-amount-y",`${qe.y}px`)}},Pe&&!b.jsx&&X!=="loading"?$e.createElement("button",{"aria-label":se,"data-disabled":J,"data-close-button":!0,onClick:J||!Le?()=>{}:()=>{Ue(),b.onDismiss==null||b.onDismiss.call(b,b)},className:gr(O?.closeButton,b==null||(o=b.classNames)==null?void 0:o.closeButton)},(pt=H?.close)!=null?pt:Sw):null,(X||b.icon||b.promise)&&b.icon!==null&&(H?.[X]!==null||b.icon)?$e.createElement("div",{"data-icon":"",className:gr(O?.icon,b==null||(l=b.classNames)==null?void 0:l.icon)},b.promise||b.type==="loading"&&!b.icon?b.icon||He():null,b.type!=="loading"?ot:null):null,$e.createElement("div",{"data-content":"",className:gr(O?.content,b==null||(d=b.classNames)==null?void 0:d.content)},$e.createElement("div",{"data-title":"",className:gr(O?.title,b==null||(u=b.classNames)==null?void 0:u.title)},b.jsx?b.jsx:typeof b.title=="function"?b.title():b.title),b.description?$e.createElement("div",{"data-description":"",className:gr(Te,De,O?.description,b==null||(m=b.classNames)==null?void 0:m.description)},typeof b.description=="function"?b.description():b.description):null),$e.isValidElement(b.cancel)?b.cancel:b.cancel&&Ol(b.cancel)?$e.createElement("button",{"data-button":!0,"data-cancel":!0,style:b.cancelButtonStyle||le,onClick:Ge=>{Ol(b.cancel)&&Le&&(b.cancel.onClick==null||b.cancel.onClick.call(b.cancel,Ge),Ue())},className:gr(O?.cancelButton,b==null||(g=b.classNames)==null?void 0:g.cancelButton)},b.cancel.label):null,$e.isValidElement(b.action)?b.action:b.action&&Ol(b.action)?$e.createElement("button",{"data-button":!0,"data-action":!0,style:b.actionButtonStyle||he,onClick:Ge=>{Ol(b.action)&&(b.action.onClick==null||b.action.onClick.call(b.action,Ge),!Ge.defaultPrevented&&Ue())},className:gr(O?.actionButton,b==null||(f=b.classNames)==null?void 0:f.actionButton)},b.action.label):null)};function Wg(){if(typeof window>"u"||typeof document>"u")return"ltr";const a=document.documentElement.getAttribute("dir");return a==="auto"||!a?window.getComputedStyle(document.documentElement).direction:a}function Fw(a,s){const n={};return[a,s].forEach((o,l)=>{const d=l===1,u=d?"--mobile-offset":"--offset",m=d?Ow:Lw;function g(f){["top","right","bottom","left"].forEach(y=>{n[`${u}-${y}`]=typeof f=="number"?`${f}px`:f})}typeof o=="number"||typeof o=="string"?g(o):typeof o=="object"?["top","right","bottom","left"].forEach(f=>{o[f]===void 0?n[`${u}-${f}`]=m:n[`${u}-${f}`]=typeof o[f]=="number"?`${o[f]}px`:o[f]}):g(m)}),n}const Pw=$e.forwardRef(function(s,n){const{id:o,invert:l,position:d="bottom-right",hotkey:u=["altKey","KeyT"],expand:m,closeButton:g,className:f,offset:y,mobileOffset:b,theme:v="light",richColors:N,duration:w,style:S,visibleToasts:_=Rw,toastOptions:L,dir:D=Wg(),gap:M=Mw,icons:F,containerAriaLabel:B="Notifications"}=s,[q,ee]=$e.useState([]),le=$e.useMemo(()=>o?q.filter(ae=>ae.toasterId===o):q.filter(ae=>!ae.toasterId),[q,o]),he=$e.useMemo(()=>Array.from(new Set([d].concat(le.filter(ae=>ae.position).map(ae=>ae.position)))),[le,d]),[be,Te]=$e.useState([]),[we,fe]=$e.useState(!1),[K,ye]=$e.useState(!1),[O,H]=$e.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),se=$e.useRef(null),W=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=$e.useRef(null),Q=$e.useRef(!1),ne=$e.useCallback(ae=>{ee(ge=>{var ve;return(ve=ge.find(U=>U.id===ae.id))!=null&&ve.delete||_s.dismiss(ae.id),ge.filter(({id:U})=>U!==ae.id)})},[]);return $e.useEffect(()=>_s.subscribe(ae=>{if(ae.dismiss){requestAnimationFrame(()=>{ee(ge=>ge.map(ve=>ve.id===ae.id?{...ve,delete:!0}:ve))});return}setTimeout(()=>{gw.flushSync(()=>{ee(ge=>{const ve=ge.findIndex(U=>U.id===ae.id);return ve!==-1?[...ge.slice(0,ve),{...ge[ve],...ae},...ge.slice(ve+1)]:[ae,...ge]})})})}),[q]),$e.useEffect(()=>{if(v!=="system"){H(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;const ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:ge})=>{H(ge?"dark":"light")})}catch{ae.addListener(({matches:ve})=>{try{H(ve?"dark":"light")}catch(U){console.error(U)}})}},[v]),$e.useEffect(()=>{q.length<=1&&fe(!1)},[q]),$e.useEffect(()=>{const ae=ge=>{var ve;if(u.every(Ce=>ge[Ce]||ge.code===Ce)){var Ee;fe(!0),(Ee=se.current)==null||Ee.focus()}ge.code==="Escape"&&(document.activeElement===se.current||(ve=se.current)!=null&&ve.contains(document.activeElement))&&fe(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[u]),$e.useEffect(()=>{if(se.current)return()=>{A.current&&(A.current.focus({preventScroll:!0}),A.current=null,Q.current=!1)}},[se.current]),$e.createElement("section",{ref:n,"aria-label":`${B} ${W}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},he.map((ae,ge)=>{var ve;const[U,Ee]=ae.split("-");return le.length?$e.createElement("ol",{key:ae,dir:D==="auto"?Wg():D,tabIndex:-1,ref:se,className:f,"data-sonner-toaster":!0,"data-sonner-theme":O,"data-y-position":U,"data-x-position":Ee,style:{"--front-toast-height":`${((ve=be[0])==null?void 0:ve.height)||0}px`,"--width":`${Uw}px`,"--gap":`${M}px`,...S,...Fw(y,b)},onBlur:Ce=>{Q.current&&!Ce.currentTarget.contains(Ce.relatedTarget)&&(Q.current=!1,A.current&&(A.current.focus({preventScroll:!0}),A.current=null))},onFocus:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||Q.current||(Q.current=!0,A.current=Ce.relatedTarget)},onMouseEnter:()=>fe(!0),onMouseMove:()=>fe(!0),onMouseLeave:()=>{K||fe(!1)},onDragEnd:()=>fe(!1),onPointerDown:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||ye(!0)},onPointerUp:()=>ye(!1)},le.filter(Ce=>!Ce.position&&ge===0||Ce.position===ae).map((Ce,Me)=>{var me,_e;return $e.createElement(zw,{key:Ce.id,icons:F,index:Me,toast:Ce,defaultRichColors:N,duration:(me=L?.duration)!=null?me:w,className:L?.className,descriptionClassName:L?.descriptionClassName,invert:l,visibleToasts:_,closeButton:(_e=L?.closeButton)!=null?_e:g,interacting:K,position:ae,style:L?.style,unstyled:L?.unstyled,classNames:L?.classNames,cancelButtonStyle:L?.cancelButtonStyle,actionButtonStyle:L?.actionButtonStyle,closeButtonAriaLabel:L?.closeButtonAriaLabel,removeToast:ne,toasts:le.filter(Ye=>Ye.position==Ce.position),heights:be.filter(Ye=>Ye.position==Ce.position),setHeights:Te,expandByDefault:m,gap:M,expanded:we,swipeDirections:s.swipeDirections})})):null}))}),Ft=({children:a})=>{const s=ir();if(!localStorage.getItem("token"))return t.jsx(Qo,{to:"/login",state:{from:s},replace:!0});const o=s.pathname||"",l=localStorage.getItem("organiserId"),d=(localStorage.getItem("userRole")||"").toLowerCase(),u=(localStorage.getItem("global_role")||"").toLowerCase(),m=v=>v==="student"||v==="teacher"?"/home":v==="organizer"?"/organiser":"/home",g=o.startsWith("/student"),f=o.startsWith("/teacher"),y=o.startsWith("/organiser")||o.startsWith("/event-dashboard")||o.startsWith("/upload-delegates");return o.startsWith("/super-user")&&u!=="superuser"?t.jsx(Qo,{to:m(d),replace:!0}):g&&d!=="student"?t.jsx(Qo,{to:m(d),replace:!0}):f&&d!=="teacher"?t.jsx(Qo,{to:m(d),replace:!0}):y&&!l?t.jsx(Qo,{to:m(d),replace:!0}):t.jsx(t.Fragment,{children:a})};function ox(a,s){return function(){return a.apply(s,arguments)}}const{toString:Hw}=Object.prototype,{getPrototypeOf:Mh}=Object,{iterator:uc,toStringTag:ix}=Symbol,hc=(a=>s=>{const n=Hw.call(s);return a[n]||(a[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),lr=a=>(a=a.toLowerCase(),s=>hc(s)===a),fc=a=>s=>typeof s===a,{isArray:Gn}=Array,zn=fc("undefined");function mi(a){return a!==null&&!zn(a)&&a.constructor!==null&&!zn(a.constructor)&&Es(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const lx=lr("ArrayBuffer");function qw(a){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(a):s=a&&a.buffer&&lx(a.buffer),s}const Vw=fc("string"),Es=fc("function"),cx=fc("number"),gi=a=>a!==null&&typeof a=="object",Yw=a=>a===!0||a===!1,Wl=a=>{if(hc(a)!=="object")return!1;const s=Mh(a);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(ix in a)&&!(uc in a)},Gw=a=>{if(!gi(a)||mi(a))return!1;try{return Object.keys(a).length===0&&Object.getPrototypeOf(a)===Object.prototype}catch{return!1}},Ww=lr("Date"),Kw=lr("File"),Qw=lr("Blob"),Xw=lr("FileList"),Jw=a=>gi(a)&&Es(a.pipe),Zw=a=>{let s;return a&&(typeof FormData=="function"&&a instanceof FormData||Es(a.append)&&((s=hc(a))==="formdata"||s==="object"&&Es(a.toString)&&a.toString()==="[object FormData]"))},e1=lr("URLSearchParams"),[t1,s1,r1,a1]=["ReadableStream","Request","Response","Headers"].map(lr),n1=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pi(a,s,{allOwnKeys:n=!1}={}){if(a===null||typeof a>"u")return;let o,l;if(typeof a!="object"&&(a=[a]),Gn(a))for(o=0,l=a.length;o<l;o++)s.call(null,a[o],o,a);else{if(mi(a))return;const d=n?Object.getOwnPropertyNames(a):Object.keys(a),u=d.length;let m;for(o=0;o<u;o++)m=d[o],s.call(null,a[m],m,a)}}function dx(a,s){if(mi(a))return null;s=s.toLowerCase();const n=Object.keys(a);let o=n.length,l;for(;o-- >0;)if(l=n[o],s===l.toLowerCase())return l;return null}const Ha=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ux=a=>!zn(a)&&a!==Ha;function rh(){const{caseless:a,skipUndefined:s}=ux(this)&&this||{},n={},o=(l,d)=>{const u=a&&dx(n,d)||d;Wl(n[u])&&Wl(l)?n[u]=rh(n[u],l):Wl(l)?n[u]=rh({},l):Gn(l)?n[u]=l.slice():(!s||!zn(l))&&(n[u]=l)};for(let l=0,d=arguments.length;l<d;l++)arguments[l]&&pi(arguments[l],o);return n}const o1=(a,s,n,{allOwnKeys:o}={})=>(pi(s,(l,d)=>{n&&Es(l)?a[d]=ox(l,n):a[d]=l},{allOwnKeys:o}),a),i1=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),l1=(a,s,n,o)=>{a.prototype=Object.create(s.prototype,o),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:s.prototype}),n&&Object.assign(a.prototype,n)},c1=(a,s,n,o)=>{let l,d,u;const m={};if(s=s||{},a==null)return s;do{for(l=Object.getOwnPropertyNames(a),d=l.length;d-- >0;)u=l[d],(!o||o(u,a,s))&&!m[u]&&(s[u]=a[u],m[u]=!0);a=n!==!1&&Mh(a)}while(a&&(!n||n(a,s))&&a!==Object.prototype);return s},d1=(a,s,n)=>{a=String(a),(n===void 0||n>a.length)&&(n=a.length),n-=s.length;const o=a.indexOf(s,n);return o!==-1&&o===n},u1=a=>{if(!a)return null;if(Gn(a))return a;let s=a.length;if(!cx(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=a[s];return n},h1=(a=>s=>a&&s instanceof a)(typeof Uint8Array<"u"&&Mh(Uint8Array)),f1=(a,s)=>{const o=(a&&a[uc]).call(a);let l;for(;(l=o.next())&&!l.done;){const d=l.value;s.call(a,d[0],d[1])}},m1=(a,s)=>{let n;const o=[];for(;(n=a.exec(s))!==null;)o.push(n);return o},g1=lr("HTMLFormElement"),p1=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,l){return o.toUpperCase()+l}),Kg=(({hasOwnProperty:a})=>(s,n)=>a.call(s,n))(Object.prototype),x1=lr("RegExp"),hx=(a,s)=>{const n=Object.getOwnPropertyDescriptors(a),o={};pi(n,(l,d)=>{let u;(u=s(l,d,a))!==!1&&(o[d]=u||l)}),Object.defineProperties(a,o)},y1=a=>{hx(a,(s,n)=>{if(Es(a)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=a[n];if(Es(o)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},b1=(a,s)=>{const n={},o=l=>{l.forEach(d=>{n[d]=!0})};return Gn(a)?o(a):o(String(a).split(s)),n},v1=()=>{},w1=(a,s)=>a!=null&&Number.isFinite(a=+a)?a:s;function j1(a){return!!(a&&Es(a.append)&&a[ix]==="FormData"&&a[uc])}const N1=a=>{const s=new Array(10),n=(o,l)=>{if(gi(o)){if(s.indexOf(o)>=0)return;if(mi(o))return o;if(!("toJSON"in o)){s[l]=o;const d=Gn(o)?[]:{};return pi(o,(u,m)=>{const g=n(u,l+1);!zn(g)&&(d[m]=g)}),s[l]=void 0,d}}return o};return n(a,0)},S1=lr("AsyncFunction"),C1=a=>a&&(gi(a)||Es(a))&&Es(a.then)&&Es(a.catch),fx=((a,s)=>a?setImmediate:s?((n,o)=>(Ha.addEventListener("message",({source:l,data:d})=>{l===Ha&&d===n&&o.length&&o.shift()()},!1),l=>{o.push(l),Ha.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Es(Ha.postMessage)),k1=typeof queueMicrotask<"u"?queueMicrotask.bind(Ha):typeof process<"u"&&process.nextTick||fx,_1=a=>a!=null&&Es(a[uc]),pe={isArray:Gn,isArrayBuffer:lx,isBuffer:mi,isFormData:Zw,isArrayBufferView:qw,isString:Vw,isNumber:cx,isBoolean:Yw,isObject:gi,isPlainObject:Wl,isEmptyObject:Gw,isReadableStream:t1,isRequest:s1,isResponse:r1,isHeaders:a1,isUndefined:zn,isDate:Ww,isFile:Kw,isBlob:Qw,isRegExp:x1,isFunction:Es,isStream:Jw,isURLSearchParams:e1,isTypedArray:h1,isFileList:Xw,forEach:pi,merge:rh,extend:o1,trim:n1,stripBOM:i1,inherits:l1,toFlatObject:c1,kindOf:hc,kindOfTest:lr,endsWith:d1,toArray:u1,forEachEntry:f1,matchAll:m1,isHTMLForm:g1,hasOwnProperty:Kg,hasOwnProp:Kg,reduceDescriptors:hx,freezeMethods:y1,toObjectSet:b1,toCamelCase:p1,noop:v1,toFiniteNumber:w1,findKey:dx,global:Ha,isContextDefined:ux,isSpecCompliantForm:j1,toJSONObject:N1,isAsyncFn:S1,isThenable:C1,setImmediate:fx,asap:k1,isIterable:_1};function ut(a,s,n,o,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),o&&(this.request=o),l&&(this.response=l,this.status=l.status?l.status:null)}pe.inherits(ut,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:pe.toJSONObject(this.config),code:this.code,status:this.status}}});const mx=ut.prototype,gx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{gx[a]={value:a}});Object.defineProperties(ut,gx);Object.defineProperty(mx,"isAxiosError",{value:!0});ut.from=(a,s,n,o,l,d)=>{const u=Object.create(mx);pe.toFlatObject(a,u,function(y){return y!==Error.prototype},f=>f!=="isAxiosError");const m=a&&a.message?a.message:"Error",g=s==null&&a?a.code:s;return ut.call(u,m,g,n,o,l),a&&u.cause==null&&Object.defineProperty(u,"cause",{value:a,configurable:!0}),u.name=a&&a.name||"Error",d&&Object.assign(u,d),u};const E1=null;function ah(a){return pe.isPlainObject(a)||pe.isArray(a)}function px(a){return pe.endsWith(a,"[]")?a.slice(0,-2):a}function Qg(a,s,n){return a?a.concat(s).map(function(l,d){return l=px(l),!n&&d?"["+l+"]":l}).join(n?".":""):s}function A1(a){return pe.isArray(a)&&!a.some(ah)}const D1=pe.toFlatObject(pe,{},null,function(s){return/^is[A-Z]/.test(s)});function mc(a,s,n){if(!pe.isObject(a))throw new TypeError("target must be an object");s=s||new FormData,n=pe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,_){return!pe.isUndefined(_[S])});const o=n.metaTokens,l=n.visitor||y,d=n.dots,u=n.indexes,g=(n.Blob||typeof Blob<"u"&&Blob)&&pe.isSpecCompliantForm(s);if(!pe.isFunction(l))throw new TypeError("visitor must be a function");function f(w){if(w===null)return"";if(pe.isDate(w))return w.toISOString();if(pe.isBoolean(w))return w.toString();if(!g&&pe.isBlob(w))throw new ut("Blob is not supported. Use a Buffer instead.");return pe.isArrayBuffer(w)||pe.isTypedArray(w)?g&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function y(w,S,_){let L=w;if(w&&!_&&typeof w=="object"){if(pe.endsWith(S,"{}"))S=o?S:S.slice(0,-2),w=JSON.stringify(w);else if(pe.isArray(w)&&A1(w)||(pe.isFileList(w)||pe.endsWith(S,"[]"))&&(L=pe.toArray(w)))return S=px(S),L.forEach(function(M,F){!(pe.isUndefined(M)||M===null)&&s.append(u===!0?Qg([S],F,d):u===null?S:S+"[]",f(M))}),!1}return ah(w)?!0:(s.append(Qg(_,S,d),f(w)),!1)}const b=[],v=Object.assign(D1,{defaultVisitor:y,convertValue:f,isVisitable:ah});function N(w,S){if(!pe.isUndefined(w)){if(b.indexOf(w)!==-1)throw Error("Circular reference detected in "+S.join("."));b.push(w),pe.forEach(w,function(L,D){(!(pe.isUndefined(L)||L===null)&&l.call(s,L,pe.isString(D)?D.trim():D,S,v))===!0&&N(L,S?S.concat(D):[D])}),b.pop()}}if(!pe.isObject(a))throw new TypeError("data must be an object");return N(a),s}function Xg(a){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(o){return s[o]})}function Bh(a,s){this._pairs=[],a&&mc(a,this,s)}const xx=Bh.prototype;xx.append=function(s,n){this._pairs.push([s,n])};xx.toString=function(s){const n=s?function(o){return s.call(this,o,Xg)}:Xg;return this._pairs.map(function(l){return n(l[0])+"="+n(l[1])},"").join("&")};function T1(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function yx(a,s,n){if(!s)return a;const o=n&&n.encode||T1;pe.isFunction(n)&&(n={serialize:n});const l=n&&n.serialize;let d;if(l?d=l(s,n):d=pe.isURLSearchParams(s)?s.toString():new Bh(s,n).toString(o),d){const u=a.indexOf("#");u!==-1&&(a=a.slice(0,u)),a+=(a.indexOf("?")===-1?"?":"&")+d}return a}class Jg{constructor(){this.handlers=[]}use(s,n,o){return this.handlers.push({fulfilled:s,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){pe.forEach(this.handlers,function(o){o!==null&&s(o)})}}const bx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},R1=typeof URLSearchParams<"u"?URLSearchParams:Bh,L1=typeof FormData<"u"?FormData:null,O1=typeof Blob<"u"?Blob:null,U1={isBrowser:!0,classes:{URLSearchParams:R1,FormData:L1,Blob:O1},protocols:["http","https","file","blob","url","data"]},$h=typeof window<"u"&&typeof document<"u",nh=typeof navigator=="object"&&navigator||void 0,M1=$h&&(!nh||["ReactNative","NativeScript","NS"].indexOf(nh.product)<0),B1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$1=$h&&window.location.href||"http://localhost",I1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$h,hasStandardBrowserEnv:M1,hasStandardBrowserWebWorkerEnv:B1,navigator:nh,origin:$1},Symbol.toStringTag,{value:"Module"})),vs={...I1,...U1};function z1(a,s){return mc(a,new vs.classes.URLSearchParams,{visitor:function(n,o,l,d){return vs.isNode&&pe.isBuffer(n)?(this.append(o,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...s})}function F1(a){return pe.matchAll(/\w+|\[(\w*)]/g,a).map(s=>s[0]==="[]"?"":s[1]||s[0])}function P1(a){const s={},n=Object.keys(a);let o;const l=n.length;let d;for(o=0;o<l;o++)d=n[o],s[d]=a[d];return s}function vx(a){function s(n,o,l,d){let u=n[d++];if(u==="__proto__")return!0;const m=Number.isFinite(+u),g=d>=n.length;return u=!u&&pe.isArray(l)?l.length:u,g?(pe.hasOwnProp(l,u)?l[u]=[l[u],o]:l[u]=o,!m):((!l[u]||!pe.isObject(l[u]))&&(l[u]=[]),s(n,o,l[u],d)&&pe.isArray(l[u])&&(l[u]=P1(l[u])),!m)}if(pe.isFormData(a)&&pe.isFunction(a.entries)){const n={};return pe.forEachEntry(a,(o,l)=>{s(F1(o),l,n,0)}),n}return null}function H1(a,s,n){if(pe.isString(a))try{return(s||JSON.parse)(a),pe.trim(a)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(a)}const xi={transitional:bx,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const o=n.getContentType()||"",l=o.indexOf("application/json")>-1,d=pe.isObject(s);if(d&&pe.isHTMLForm(s)&&(s=new FormData(s)),pe.isFormData(s))return l?JSON.stringify(vx(s)):s;if(pe.isArrayBuffer(s)||pe.isBuffer(s)||pe.isStream(s)||pe.isFile(s)||pe.isBlob(s)||pe.isReadableStream(s))return s;if(pe.isArrayBufferView(s))return s.buffer;if(pe.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let m;if(d){if(o.indexOf("application/x-www-form-urlencoded")>-1)return z1(s,this.formSerializer).toString();if((m=pe.isFileList(s))||o.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return mc(m?{"files[]":s}:s,g&&new g,this.formSerializer)}}return d||l?(n.setContentType("application/json",!1),H1(s)):s}],transformResponse:[function(s){const n=this.transitional||xi.transitional,o=n&&n.forcedJSONParsing,l=this.responseType==="json";if(pe.isResponse(s)||pe.isReadableStream(s))return s;if(s&&pe.isString(s)&&(o&&!this.responseType||l)){const u=!(n&&n.silentJSONParsing)&&l;try{return JSON.parse(s,this.parseReviver)}catch(m){if(u)throw m.name==="SyntaxError"?ut.from(m,ut.ERR_BAD_RESPONSE,this,null,this.response):m}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vs.classes.FormData,Blob:vs.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};pe.forEach(["delete","get","head","post","put","patch"],a=>{xi.headers[a]={}});const q1=pe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),V1=a=>{const s={};let n,o,l;return a&&a.split(`
`).forEach(function(u){l=u.indexOf(":"),n=u.substring(0,l).trim().toLowerCase(),o=u.substring(l+1).trim(),!(!n||s[n]&&q1[n])&&(n==="set-cookie"?s[n]?s[n].push(o):s[n]=[o]:s[n]=s[n]?s[n]+", "+o:o)}),s},Zg=Symbol("internals");function Jo(a){return a&&String(a).trim().toLowerCase()}function Kl(a){return a===!1||a==null?a:pe.isArray(a)?a.map(Kl):String(a)}function Y1(a){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(a);)s[o[1]]=o[2];return s}const G1=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function Mu(a,s,n,o,l){if(pe.isFunction(o))return o.call(this,s,n);if(l&&(s=n),!!pe.isString(s)){if(pe.isString(o))return s.indexOf(o)!==-1;if(pe.isRegExp(o))return o.test(s)}}function W1(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,o)=>n.toUpperCase()+o)}function K1(a,s){const n=pe.toCamelCase(" "+s);["get","set","has"].forEach(o=>{Object.defineProperty(a,o+n,{value:function(l,d,u){return this[o].call(this,s,l,d,u)},configurable:!0})})}let As=class{constructor(s){s&&this.set(s)}set(s,n,o){const l=this;function d(m,g,f){const y=Jo(g);if(!y)throw new Error("header name must be a non-empty string");const b=pe.findKey(l,y);(!b||l[b]===void 0||f===!0||f===void 0&&l[b]!==!1)&&(l[b||g]=Kl(m))}const u=(m,g)=>pe.forEach(m,(f,y)=>d(f,y,g));if(pe.isPlainObject(s)||s instanceof this.constructor)u(s,n);else if(pe.isString(s)&&(s=s.trim())&&!G1(s))u(V1(s),n);else if(pe.isObject(s)&&pe.isIterable(s)){let m={},g,f;for(const y of s){if(!pe.isArray(y))throw TypeError("Object iterator must return a key-value pair");m[f=y[0]]=(g=m[f])?pe.isArray(g)?[...g,y[1]]:[g,y[1]]:y[1]}u(m,n)}else s!=null&&d(n,s,o);return this}get(s,n){if(s=Jo(s),s){const o=pe.findKey(this,s);if(o){const l=this[o];if(!n)return l;if(n===!0)return Y1(l);if(pe.isFunction(n))return n.call(this,l,o);if(pe.isRegExp(n))return n.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=Jo(s),s){const o=pe.findKey(this,s);return!!(o&&this[o]!==void 0&&(!n||Mu(this,this[o],o,n)))}return!1}delete(s,n){const o=this;let l=!1;function d(u){if(u=Jo(u),u){const m=pe.findKey(o,u);m&&(!n||Mu(o,o[m],m,n))&&(delete o[m],l=!0)}}return pe.isArray(s)?s.forEach(d):d(s),l}clear(s){const n=Object.keys(this);let o=n.length,l=!1;for(;o--;){const d=n[o];(!s||Mu(this,this[d],d,s,!0))&&(delete this[d],l=!0)}return l}normalize(s){const n=this,o={};return pe.forEach(this,(l,d)=>{const u=pe.findKey(o,d);if(u){n[u]=Kl(l),delete n[d];return}const m=s?W1(d):String(d).trim();m!==d&&delete n[d],n[m]=Kl(l),o[m]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return pe.forEach(this,(o,l)=>{o!=null&&o!==!1&&(n[l]=s&&pe.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const o=new this(s);return n.forEach(l=>o.set(l)),o}static accessor(s){const o=(this[Zg]=this[Zg]={accessors:{}}).accessors,l=this.prototype;function d(u){const m=Jo(u);o[m]||(K1(l,u),o[m]=!0)}return pe.isArray(s)?s.forEach(d):d(s),this}};As.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);pe.reduceDescriptors(As.prototype,({value:a},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>a,set(o){this[n]=o}}});pe.freezeMethods(As);function Bu(a,s){const n=this||xi,o=s||n,l=As.from(o.headers);let d=o.data;return pe.forEach(a,function(m){d=m.call(n,d,l.normalize(),s?s.status:void 0)}),l.normalize(),d}function wx(a){return!!(a&&a.__CANCEL__)}function Wn(a,s,n){ut.call(this,a??"canceled",ut.ERR_CANCELED,s,n),this.name="CanceledError"}pe.inherits(Wn,ut,{__CANCEL__:!0});function jx(a,s,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?a(n):s(new ut("Request failed with status code "+n.status,[ut.ERR_BAD_REQUEST,ut.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Q1(a){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return s&&s[1]||""}function X1(a,s){a=a||10;const n=new Array(a),o=new Array(a);let l=0,d=0,u;return s=s!==void 0?s:1e3,function(g){const f=Date.now(),y=o[d];u||(u=f),n[l]=g,o[l]=f;let b=d,v=0;for(;b!==l;)v+=n[b++],b=b%a;if(l=(l+1)%a,l===d&&(d=(d+1)%a),f-u<s)return;const N=y&&f-y;return N?Math.round(v*1e3/N):void 0}}function J1(a,s){let n=0,o=1e3/s,l,d;const u=(f,y=Date.now())=>{n=y,l=null,d&&(clearTimeout(d),d=null),a(...f)};return[(...f)=>{const y=Date.now(),b=y-n;b>=o?u(f,y):(l=f,d||(d=setTimeout(()=>{d=null,u(l)},o-b)))},()=>l&&u(l)]}const sc=(a,s,n=3)=>{let o=0;const l=X1(50,250);return J1(d=>{const u=d.loaded,m=d.lengthComputable?d.total:void 0,g=u-o,f=l(g),y=u<=m;o=u;const b={loaded:u,total:m,progress:m?u/m:void 0,bytes:g,rate:f||void 0,estimated:f&&m&&y?(m-u)/f:void 0,event:d,lengthComputable:m!=null,[s?"download":"upload"]:!0};a(b)},n)},ep=(a,s)=>{const n=a!=null;return[o=>s[0]({lengthComputable:n,total:a,loaded:o}),s[1]]},tp=a=>(...s)=>pe.asap(()=>a(...s)),Z1=vs.hasStandardBrowserEnv?((a,s)=>n=>(n=new URL(n,vs.origin),a.protocol===n.protocol&&a.host===n.host&&(s||a.port===n.port)))(new URL(vs.origin),vs.navigator&&/(msie|trident)/i.test(vs.navigator.userAgent)):()=>!0,ej=vs.hasStandardBrowserEnv?{write(a,s,n,o,l,d){const u=[a+"="+encodeURIComponent(s)];pe.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),pe.isString(o)&&u.push("path="+o),pe.isString(l)&&u.push("domain="+l),d===!0&&u.push("secure"),document.cookie=u.join("; ")},read(a){const s=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(a){this.write(a,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function tj(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function sj(a,s){return s?a.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):a}function Nx(a,s,n){let o=!tj(s);return a&&(o||n==!1)?sj(a,s):s}const sp=a=>a instanceof As?{...a}:a;function Va(a,s){s=s||{};const n={};function o(f,y,b,v){return pe.isPlainObject(f)&&pe.isPlainObject(y)?pe.merge.call({caseless:v},f,y):pe.isPlainObject(y)?pe.merge({},y):pe.isArray(y)?y.slice():y}function l(f,y,b,v){if(pe.isUndefined(y)){if(!pe.isUndefined(f))return o(void 0,f,b,v)}else return o(f,y,b,v)}function d(f,y){if(!pe.isUndefined(y))return o(void 0,y)}function u(f,y){if(pe.isUndefined(y)){if(!pe.isUndefined(f))return o(void 0,f)}else return o(void 0,y)}function m(f,y,b){if(b in s)return o(f,y);if(b in a)return o(void 0,f)}const g={url:d,method:d,data:d,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:m,headers:(f,y,b)=>l(sp(f),sp(y),b,!0)};return pe.forEach(Object.keys({...a,...s}),function(y){const b=g[y]||l,v=b(a[y],s[y],y);pe.isUndefined(v)&&b!==m||(n[y]=v)}),n}const Sx=a=>{const s=Va({},a);let{data:n,withXSRFToken:o,xsrfHeaderName:l,xsrfCookieName:d,headers:u,auth:m}=s;if(s.headers=u=As.from(u),s.url=yx(Nx(s.baseURL,s.url,s.allowAbsoluteUrls),a.params,a.paramsSerializer),m&&u.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),pe.isFormData(n)){if(vs.hasStandardBrowserEnv||vs.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(pe.isFunction(n.getHeaders)){const g=n.getHeaders(),f=["content-type","content-length"];Object.entries(g).forEach(([y,b])=>{f.includes(y.toLowerCase())&&u.set(y,b)})}}if(vs.hasStandardBrowserEnv&&(o&&pe.isFunction(o)&&(o=o(s)),o||o!==!1&&Z1(s.url))){const g=l&&d&&ej.read(d);g&&u.set(l,g)}return s},rj=typeof XMLHttpRequest<"u",aj=rj&&function(a){return new Promise(function(n,o){const l=Sx(a);let d=l.data;const u=As.from(l.headers).normalize();let{responseType:m,onUploadProgress:g,onDownloadProgress:f}=l,y,b,v,N,w;function S(){N&&N(),w&&w(),l.cancelToken&&l.cancelToken.unsubscribe(y),l.signal&&l.signal.removeEventListener("abort",y)}let _=new XMLHttpRequest;_.open(l.method.toUpperCase(),l.url,!0),_.timeout=l.timeout;function L(){if(!_)return;const M=As.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),B={data:!m||m==="text"||m==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:M,config:a,request:_};jx(function(ee){n(ee),S()},function(ee){o(ee),S()},B),_=null}"onloadend"in _?_.onloadend=L:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(L)},_.onabort=function(){_&&(o(new ut("Request aborted",ut.ECONNABORTED,a,_)),_=null)},_.onerror=function(F){const B=F&&F.message?F.message:"Network Error",q=new ut(B,ut.ERR_NETWORK,a,_);q.event=F||null,o(q),_=null},_.ontimeout=function(){let F=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const B=l.transitional||bx;l.timeoutErrorMessage&&(F=l.timeoutErrorMessage),o(new ut(F,B.clarifyTimeoutError?ut.ETIMEDOUT:ut.ECONNABORTED,a,_)),_=null},d===void 0&&u.setContentType(null),"setRequestHeader"in _&&pe.forEach(u.toJSON(),function(F,B){_.setRequestHeader(B,F)}),pe.isUndefined(l.withCredentials)||(_.withCredentials=!!l.withCredentials),m&&m!=="json"&&(_.responseType=l.responseType),f&&([v,w]=sc(f,!0),_.addEventListener("progress",v)),g&&_.upload&&([b,N]=sc(g),_.upload.addEventListener("progress",b),_.upload.addEventListener("loadend",N)),(l.cancelToken||l.signal)&&(y=M=>{_&&(o(!M||M.type?new Wn(null,a,_):M),_.abort(),_=null)},l.cancelToken&&l.cancelToken.subscribe(y),l.signal&&(l.signal.aborted?y():l.signal.addEventListener("abort",y)));const D=Q1(l.url);if(D&&vs.protocols.indexOf(D)===-1){o(new ut("Unsupported protocol "+D+":",ut.ERR_BAD_REQUEST,a));return}_.send(d||null)})},nj=(a,s)=>{const{length:n}=a=a?a.filter(Boolean):[];if(s||n){let o=new AbortController,l;const d=function(f){if(!l){l=!0,m();const y=f instanceof Error?f:this.reason;o.abort(y instanceof ut?y:new Wn(y instanceof Error?y.message:y))}};let u=s&&setTimeout(()=>{u=null,d(new ut(`timeout ${s} of ms exceeded`,ut.ETIMEDOUT))},s);const m=()=>{a&&(u&&clearTimeout(u),u=null,a.forEach(f=>{f.unsubscribe?f.unsubscribe(d):f.removeEventListener("abort",d)}),a=null)};a.forEach(f=>f.addEventListener("abort",d));const{signal:g}=o;return g.unsubscribe=()=>pe.asap(m),g}},oj=function*(a,s){let n=a.byteLength;if(n<s){yield a;return}let o=0,l;for(;o<n;)l=o+s,yield a.slice(o,l),o=l},ij=async function*(a,s){for await(const n of lj(a))yield*oj(n,s)},lj=async function*(a){if(a[Symbol.asyncIterator]){yield*a;return}const s=a.getReader();try{for(;;){const{done:n,value:o}=await s.read();if(n)break;yield o}}finally{await s.cancel()}},rp=(a,s,n,o)=>{const l=ij(a,s);let d=0,u,m=g=>{u||(u=!0,o&&o(g))};return new ReadableStream({async pull(g){try{const{done:f,value:y}=await l.next();if(f){m(),g.close();return}let b=y.byteLength;if(n){let v=d+=b;n(v)}g.enqueue(new Uint8Array(y))}catch(f){throw m(f),f}},cancel(g){return m(g),l.return()}},{highWaterMark:2})},ap=64*1024,{isFunction:Ul}=pe,Cx=(({fetch:a,Request:s,Response:n})=>({fetch:a,Request:s,Response:n}))(pe.global),{ReadableStream:np,TextEncoder:op}=pe.global,ip=(a,...s)=>{try{return!!a(...s)}catch{return!1}},cj=a=>{const{fetch:s,Request:n,Response:o}=Object.assign({},Cx,a),l=Ul(s),d=Ul(n),u=Ul(o);if(!l)return!1;const m=l&&Ul(np),g=l&&(typeof op=="function"?(w=>S=>w.encode(S))(new op):async w=>new Uint8Array(await new n(w).arrayBuffer())),f=d&&m&&ip(()=>{let w=!1;const S=new n(vs.origin,{body:new np,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!S}),y=u&&m&&ip(()=>pe.isReadableStream(new o("").body)),b={stream:y&&(w=>w.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!b[w]&&(b[w]=(S,_)=>{let L=S&&S[w];if(L)return L.call(S);throw new ut(`Response type '${w}' is not supported`,ut.ERR_NOT_SUPPORT,_)})});const v=async w=>{if(w==null)return 0;if(pe.isBlob(w))return w.size;if(pe.isSpecCompliantForm(w))return(await new n(vs.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(pe.isArrayBufferView(w)||pe.isArrayBuffer(w))return w.byteLength;if(pe.isURLSearchParams(w)&&(w=w+""),pe.isString(w))return(await g(w)).byteLength},N=async(w,S)=>{const _=pe.toFiniteNumber(w.getContentLength());return _??v(S)};return async w=>{let{url:S,method:_,data:L,signal:D,cancelToken:M,timeout:F,onDownloadProgress:B,onUploadProgress:q,responseType:ee,headers:le,withCredentials:he="same-origin",fetchOptions:be}=Sx(w);ee=ee?(ee+"").toLowerCase():"text";let Te=nj([D,M&&M.toAbortSignal()],F),we=null;const fe=Te&&Te.unsubscribe&&(()=>{Te.unsubscribe()});let K;try{if(q&&f&&_!=="get"&&_!=="head"&&(K=await N(le,L))!==0){let A=new n(S,{method:"POST",body:L,duplex:"half"}),Q;if(pe.isFormData(L)&&(Q=A.headers.get("content-type"))&&le.setContentType(Q),A.body){const[ne,ae]=ep(K,sc(tp(q)));L=rp(A.body,ap,ne,ae)}}pe.isString(he)||(he=he?"include":"omit");const ye=d&&"credentials"in n.prototype,O={...be,signal:Te,method:_.toUpperCase(),headers:le.normalize().toJSON(),body:L,duplex:"half",credentials:ye?he:void 0};we=d&&new n(S,O);let H=await(d?s(we,be):s(S,O));const se=y&&(ee==="stream"||ee==="response");if(y&&(B||se&&fe)){const A={};["status","statusText","headers"].forEach(ge=>{A[ge]=H[ge]});const Q=pe.toFiniteNumber(H.headers.get("content-length")),[ne,ae]=B&&ep(Q,sc(tp(B),!0))||[];H=new o(rp(H.body,ap,ne,()=>{ae&&ae(),fe&&fe()}),A)}ee=ee||"text";let W=await b[pe.findKey(b,ee)||"text"](H,w);return!se&&fe&&fe(),await new Promise((A,Q)=>{jx(A,Q,{data:W,headers:As.from(H.headers),status:H.status,statusText:H.statusText,config:w,request:we})})}catch(ye){throw fe&&fe(),ye&&ye.name==="TypeError"&&/Load failed|fetch/i.test(ye.message)?Object.assign(new ut("Network Error",ut.ERR_NETWORK,w,we),{cause:ye.cause||ye}):ut.from(ye,ye&&ye.code,w,we)}}},dj=new Map,kx=a=>{let s=pe.merge.call({skipUndefined:!0},Cx,a?a.env:null);const{fetch:n,Request:o,Response:l}=s,d=[o,l,n];let u=d.length,m=u,g,f,y=dj;for(;m--;)g=d[m],f=y.get(g),f===void 0&&y.set(g,f=m?new Map:cj(s)),y=f;return f};kx();const oh={http:E1,xhr:aj,fetch:{get:kx}};pe.forEach(oh,(a,s)=>{if(a){try{Object.defineProperty(a,"name",{value:s})}catch{}Object.defineProperty(a,"adapterName",{value:s})}});const lp=a=>`- ${a}`,uj=a=>pe.isFunction(a)||a===null||a===!1,_x={getAdapter:(a,s)=>{a=pe.isArray(a)?a:[a];const{length:n}=a;let o,l;const d={};for(let u=0;u<n;u++){o=a[u];let m;if(l=o,!uj(o)&&(l=oh[(m=String(o)).toLowerCase()],l===void 0))throw new ut(`Unknown adapter '${m}'`);if(l&&(pe.isFunction(l)||(l=l.get(s))))break;d[m||"#"+u]=l}if(!l){const u=Object.entries(d).map(([g,f])=>`adapter ${g} `+(f===!1?"is not supported by the environment":"is not available in the build"));let m=n?u.length>1?`since :
`+u.map(lp).join(`
`):" "+lp(u[0]):"as no adapter specified";throw new ut("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return l},adapters:oh};function $u(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new Wn(null,a)}function cp(a){return $u(a),a.headers=As.from(a.headers),a.data=Bu.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),_x.getAdapter(a.adapter||xi.adapter,a)(a).then(function(o){return $u(a),o.data=Bu.call(a,a.transformResponse,o),o.headers=As.from(o.headers),o},function(o){return wx(o)||($u(a),o&&o.response&&(o.response.data=Bu.call(a,a.transformResponse,o.response),o.response.headers=As.from(o.response.headers))),Promise.reject(o)})}const Ex="1.12.1",gc={};["object","boolean","number","function","string","symbol"].forEach((a,s)=>{gc[a]=function(o){return typeof o===a||"a"+(s<1?"n ":" ")+a}});const dp={};gc.transitional=function(s,n,o){function l(d,u){return"[Axios v"+Ex+"] Transitional option '"+d+"'"+u+(o?". "+o:"")}return(d,u,m)=>{if(s===!1)throw new ut(l(u," has been removed"+(n?" in "+n:"")),ut.ERR_DEPRECATED);return n&&!dp[u]&&(dp[u]=!0,console.warn(l(u," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(d,u,m):!0}};gc.spelling=function(s){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${s}`),!0)};function hj(a,s,n){if(typeof a!="object")throw new ut("options must be an object",ut.ERR_BAD_OPTION_VALUE);const o=Object.keys(a);let l=o.length;for(;l-- >0;){const d=o[l],u=s[d];if(u){const m=a[d],g=m===void 0||u(m,d,a);if(g!==!0)throw new ut("option "+d+" must be "+g,ut.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ut("Unknown option "+d,ut.ERR_BAD_OPTION)}}const Ql={assertOptions:hj,validators:gc},pr=Ql.validators;let qa=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Jg,response:new Jg}}async request(s,n){try{return await this._request(s,n)}catch(o){if(o instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const d=l.stack?l.stack.replace(/^.+\n/,""):"";try{o.stack?d&&!String(o.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+d):o.stack=d}catch{}}throw o}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=Va(this.defaults,n);const{transitional:o,paramsSerializer:l,headers:d}=n;o!==void 0&&Ql.assertOptions(o,{silentJSONParsing:pr.transitional(pr.boolean),forcedJSONParsing:pr.transitional(pr.boolean),clarifyTimeoutError:pr.transitional(pr.boolean)},!1),l!=null&&(pe.isFunction(l)?n.paramsSerializer={serialize:l}:Ql.assertOptions(l,{encode:pr.function,serialize:pr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ql.assertOptions(n,{baseUrl:pr.spelling("baseURL"),withXsrfToken:pr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=d&&pe.merge(d.common,d[n.method]);d&&pe.forEach(["delete","get","head","post","put","patch","common"],w=>{delete d[w]}),n.headers=As.concat(u,d);const m=[];let g=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(g=g&&S.synchronous,m.unshift(S.fulfilled,S.rejected))});const f=[];this.interceptors.response.forEach(function(S){f.push(S.fulfilled,S.rejected)});let y,b=0,v;if(!g){const w=[cp.bind(this),void 0];for(w.unshift(...m),w.push(...f),v=w.length,y=Promise.resolve(n);b<v;)y=y.then(w[b++],w[b++]);return y}v=m.length;let N=n;for(b=0;b<v;){const w=m[b++],S=m[b++];try{N=w(N)}catch(_){S.call(this,_);break}}try{y=cp.call(this,N)}catch(w){return Promise.reject(w)}for(b=0,v=f.length;b<v;)y=y.then(f[b++],f[b++]);return y}getUri(s){s=Va(this.defaults,s);const n=Nx(s.baseURL,s.url,s.allowAbsoluteUrls);return yx(n,s.params,s.paramsSerializer)}};pe.forEach(["delete","get","head","options"],function(s){qa.prototype[s]=function(n,o){return this.request(Va(o||{},{method:s,url:n,data:(o||{}).data}))}});pe.forEach(["post","put","patch"],function(s){function n(o){return function(d,u,m){return this.request(Va(m||{},{method:s,headers:o?{"Content-Type":"multipart/form-data"}:{},url:d,data:u}))}}qa.prototype[s]=n(),qa.prototype[s+"Form"]=n(!0)});let fj=class Ax{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const o=this;this.promise.then(l=>{if(!o._listeners)return;let d=o._listeners.length;for(;d-- >0;)o._listeners[d](l);o._listeners=null}),this.promise.then=l=>{let d;const u=new Promise(m=>{o.subscribe(m),d=m}).then(l);return u.cancel=function(){o.unsubscribe(d)},u},s(function(d,u,m){o.reason||(o.reason=new Wn(d,u,m),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=o=>{s.abort(o)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new Ax(function(l){s=l}),cancel:s}}};function mj(a){return function(n){return a.apply(null,n)}}function gj(a){return pe.isObject(a)&&a.isAxiosError===!0}const ih={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ih).forEach(([a,s])=>{ih[s]=a});function Dx(a){const s=new qa(a),n=ox(qa.prototype.request,s);return pe.extend(n,qa.prototype,s,{allOwnKeys:!0}),pe.extend(n,s,null,{allOwnKeys:!0}),n.create=function(l){return Dx(Va(a,l))},n}const Oe=Dx(xi);Oe.Axios=qa;Oe.CanceledError=Wn;Oe.CancelToken=fj;Oe.isCancel=wx;Oe.VERSION=Ex;Oe.toFormData=mc;Oe.AxiosError=ut;Oe.Cancel=Oe.CanceledError;Oe.all=function(s){return Promise.all(s)};Oe.spread=mj;Oe.isAxiosError=gj;Oe.mergeConfig=Va;Oe.AxiosHeaders=As;Oe.formToJSON=a=>vx(pe.isHTMLForm(a)?new FormData(a):a);Oe.getAdapter=_x.getAdapter;Oe.HttpStatusCode=ih;Oe.default=Oe;const{Axios:o_,AxiosError:i_,CanceledError:l_,isCancel:c_,CancelToken:d_,VERSION:u_,all:h_,Cancel:f_,isAxiosError:m_,spread:g_,toFormData:p_,AxiosHeaders:x_,HttpStatusCode:y_,formToJSON:b_,getAdapter:v_,mergeConfig:w_}=Oe,pj=()=>"http://localhost:1000",us=pj(),xj=async(a,s,n)=>{try{return(await Oe.post(`${us}/api/v1/users/register`,{email:a,role:s,auth_id:n})).data}catch(o){throw new Error(o.response.data.message)}},yj=async(a,s)=>{try{return(await Oe.post(`${us}/api/v1/users/login`,{email:a,password:s})).data}catch(n){throw new Error(n.response.data.message)}},lh=async a=>{try{return(await Oe.post(`${us}/api/v1/users/get-userid-by-email`,{email:a})).data}catch(s){throw new Error(s.response.data.message)}},bj=async()=>{try{const a=localStorage.getItem("token"),s=localStorage.getItem("userId");return(await Oe.delete(`${us}/api/v1/users/delete-account/${s}`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(a){throw new Error(a.response.data.message)}},vj=async(a,s,n,o,l,d,u,m)=>{try{const g=localStorage.getItem("token"),f=localStorage.getItem("userId");if(!g)throw new Error("Authentication token not found. Please login again.");if(!f)throw new Error("User ID not found. Please login again.");return(await Oe.patch(`${us}/api/v1/users/teacher-profile/${f}`,{fullname:a,username:s,birthday:n,gender:o,school_id:l,yearsOfExperience:d,phone:u,phone_e164:m},{headers:{Authorization:`Bearer ${g}`}})).data}catch(g){throw console.log("Teacher profile API error:",g),g.response?.data?.message?new Error(g.response.data.message):g.message?new Error(g.message):new Error("Failed to create teacher profile. Please try again.")}},wj=async(a,s,n,o,l,d,u,m)=>{try{const g=localStorage.getItem("token"),f=localStorage.getItem("userId");if(!g)throw new Error("Authentication token not found. Please login again.");if(!f)throw new Error("User ID not found. Please login again.");return(await Oe.patch(`${us}/api/v1/users/student-profile/${f}`,{fullname:a,username:s,birthday:n,gender:o,school_id:l,grade:d,phone:u,phone_e164:m},{headers:{Authorization:`Bearer ${g}`}})).data}catch(g){throw console.log("Student profile API error:",g),g.response?.data?.message?new Error(g.response.data.message):g.message?new Error(g.message):new Error("Failed to create student profile. Please try again.")}},Kn=async()=>{try{const a=localStorage.getItem("token"),s=localStorage.getItem("userId");return(await Oe.get(`${us}/api/v1/users/user-profile/${s}`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(a){throw new Error(a.response.data.message)}},jj=async(a,s,n,o,l,d,u,m,g,f,y)=>{try{const b=localStorage.getItem("token"),v=localStorage.getItem("userId");return(await Oe.patch(`${us}/api/v1/users/student-profile-update/${v}`,{fullname:a,username:s,birthday:n,gender:o,school_id:l,grade:d,yearsOfExperience:u,phone:m,email:g,avatar:f,phone_e164:y},{headers:{Authorization:`Bearer ${b}`}})).data}catch(b){throw new Error(b.response.data.message)}},Nj=async(a,s,n,o,l,d,u,m,g,f)=>{try{const y=localStorage.getItem("token"),b=localStorage.getItem("userId");return(await Oe.patch(`${us}/api/v1/users/teacher-profile-update/${b}`,{fullname:a,username:s,birthday:n,gender:o,school_id:l,yearsOfExperience:d,phone:u,email:m,avatar:g,phone_e164:f},{headers:{Authorization:`Bearer ${y}`}})).data}catch(y){throw new Error(y.response.data.message)}},Sj=async a=>{try{const s=localStorage.getItem("token"),n=localStorage.getItem("userId"),o=new FormData;return o.append("avatar",a),(await Oe.post(`${us}/api/v1/users/upload-avatar/${n}`,o,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"multipart/form-data"}})).data}catch(s){throw new Error(s.response.data.message)}},Cj=async()=>{try{const a=localStorage.getItem("token");return(await Oe.get(`${us}/api/v1/users/all-users`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(a){throw new Error(a.response.data.message)}},up=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.patch(`${us}/api/v1/users/update-user-status/${a}`,{status:s},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response.data.message)}},Tx=async(a,s,n,o,l,d,u,m,g,f,y)=>{try{const b=localStorage.getItem("token"),v=localStorage.getItem("userId");return(await Oe.patch(`${us}/api/v1/users/teacher-profile-and-custom-locality/${v}`,{fullname:a,username:s,birthday:n,gender:o,custom_locality_name:l,custom_school_name:d,yearsOfExperience:u,phone:m,email:g,avatar:f,phone_e164:y},{headers:{Authorization:`Bearer ${b}`}})).data}catch(b){throw new Error(b.response.data.message)}},kj=async(a,s,n,o,l,d,u,m,g)=>{try{const f=localStorage.getItem("token"),y=localStorage.getItem("userId");return(await Oe.patch(`${us}/api/v1/users/teacher-profile-custom-school-name/${y}`,{fullname:a,username:s,birthday:n,gender:o,locality:l,custom_school_name:d,yearsOfExperience:u,phone:m,phone_e164:g},{headers:{Authorization:`Bearer ${f}`}})).data}catch(f){throw new Error(f.response.data.message)}},Rx=async(a,s,n,o,l,d,u,m,g)=>{try{const f=localStorage.getItem("token"),y=localStorage.getItem("userId");return(await Oe.patch(`${us}/api/v1/users/student-profile-and-custom-locality/${y}`,{fullname:a,username:s,birthday:n,gender:o,custom_locality_name:l,custom_school_name:d,grade:u,phone:m,phone_e164:g},{headers:{Authorization:`Bearer ${f}`}})).data}catch(f){throw new Error(f.response.data.message)}},_j=async(a,s,n,o,l,d,u,m,g)=>{try{const f=localStorage.getItem("token"),y=localStorage.getItem("userId");return(await Oe.patch(`${us}/api/v1/users/student-profile-custom-school-name/${y}`,{fullname:a,username:s,birthday:n,gender:o,locality:l,custom_school_name:d,grade:u,phone:m,phone_e164:g},{headers:{Authorization:`Bearer ${f}`}})).data}catch(f){throw new Error(f.response.data.message)}},Ej=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.patch(`${us}/api/v1/users/send-superuser-invite`,{username:a,email:s},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response.data.message)}},Aj=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.patch(`${us}/api/v1/users/remove-superuser-invite`,{username:a,email:s},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response.data.message)}},xa="http://localhost:1000",Dj=async a=>{try{const s=localStorage.getItem("token"),n=new FormData;return n.append("file",a),(await Oe.post(`${xa}/api/v1/organisers/organiser-approval-edvince-upload`,n,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"multipart/form-data"}})).data}catch(s){throw new Error(s.response.data.message)}},Tj=async(a,s,n,o)=>{try{const l=localStorage.getItem("token"),d=localStorage.getItem("userId");return(await Oe.post(`${xa}/api/v1/organisers/organiser-approval-request/${d}`,{school_id:a,locality_id:s,role:n,evidenceDocs:o},{headers:{Authorization:`Bearer ${l}`}})).data}catch(l){throw new Error(l.response.data.message)}},Rj=async()=>{try{const a=localStorage.getItem("token");return(await Oe.get(`${xa}/api/v1/organisers/all-organisers`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(a){throw new Error(a.response.data.message)}},Lj=async(a,s)=>{try{const n=localStorage.getItem("token"),o=localStorage.getItem("userId");return(await Oe.patch(`${xa}/api/v1/organisers/update-organiser-status/${a}`,{status:s,userId:o},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response.data.message)}},Oj=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${xa}/api/v1/organisers/delete-organiser/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response.data.message)}},Uj=async(a,s,n,o,l,d,u)=>{try{const m=localStorage.getItem("token");return(await Oe.post(`${xa}/api/v1/organisers/add-organiser-by-super-user`,{user_id:a,school_id:s,locality_id:n,role:o,evidence:l,status:d,actioned_by_user_id:u},{headers:{Authorization:`Bearer ${m}`}})).data}catch(m){throw new Error(m.response.data.message)}},Mj=async a=>{try{const s=localStorage.getItem("token");return(await Oe.post(`${xa}/api/v1/organisers/assign-organiser-to-school`,{userId:a},{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response.data.message)}},Bj=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${xa}/api/v1/organisers/remove-organiser-from-school/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response.data.message)}},Ih="http://localhost:1000",$j=async()=>{try{const a=localStorage.getItem("token");if(!a)throw new Error("Authentication token not found. Please login again.");return(await Oe.get(`${Ih}/api/v1/localities/all-localities`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(a){throw a.response?.data?.message?new Error(a.response.data.message):a.message?new Error(a.message):new Error("Failed to load localities. Please try again.")}},Ij=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.post(`${Ih}/api/v1/localities/merge-localities`,{primaryLocalityId:a,secondaryLocalityId:s},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response.data.message)}},zj=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${Ih}/api/v1/localities/delete-locality/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response.data.message)}},Qn="http://localhost:1000",Fj=async()=>{try{const a=localStorage.getItem("token");return(await Oe.get(`${Qn}/api/v1/schools/all-schools`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(a){throw console.log("Get schools API error:",a),a.response?.data?.message?new Error(a.response.data.message):a.message?new Error(a.message):new Error("Failed to load schools. Please try again.")}},Pj=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.patch(`${Qn}/api/v1/schools/update-school-status/${a}`,{status:s},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response.data.message)}},Hj=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${Qn}/api/v1/schools/delete-school/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response.data.message)}},qj=async(a,s,n,o,l)=>{try{const d=localStorage.getItem("token");return(await Oe.patch(`${Qn}/api/v1/schools/update-school/${a}`,{code:s,name:n,locality_id:o,area_id:l},{headers:{Authorization:`Bearer ${d}`}})).data}catch(d){throw new Error(d.response.data.message)}},Vj=async(a,s,n,o)=>{try{const l=localStorage.getItem("token");return(await Oe.post(`${Qn}/api/v1/schools/create-school`,{code:a,name:s,locality_id:n,area_id:o},{headers:{Authorization:`Bearer ${l}`}})).data}catch(l){throw new Error(l.response.data.message)}},Yj=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.post(`${Qn}/api/v1/schools/merge-schools`,{primarySchoolId:a,secondarySchoolId:s},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response.data.message)}},zh="http://localhost:1000",Gj=async()=>{try{const a=localStorage.getItem("token");return(await Oe.get(`${zh}/api/v1/areas/all-areas`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(a){console.log("Get areas API error:",a)}},Wj=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.patch(`${zh}/api/v1/areas/update-area-status/${a}`,{status:s},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response.data.message)}},Kj=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${zh}/api/v1/areas/delete-area/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response.data.message)}},vr="http://localhost:1000",Lx=async a=>{try{const s=localStorage.getItem("token"),n=new FormData;return n.append("file",a),(await Oe.post(`${vr}/api/v1/events/create-event-images-upload`,n,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"multipart/form-data"}})).data}catch(s){throw new Error(s.response.data.message)}},Qj=async(a,s,n,o,l,d,u,m,g,f,y,b,v,N,w)=>{try{const S=localStorage.getItem("token"),_=localStorage.getItem("organiserId");return(await Oe.post(`${vr}/api/v1/events/create-event/${_}`,{name:a,description:s,start_date:n,end_date:o,cover_image:l,logo_image:d,locality_id:u,school_id:m,area_id:g,number_of_seats:f,fees_per_delegate:y,total_revenue:b,website:v,instagram:N,organiser_id:w},{headers:{Authorization:`Bearer ${S}`}})).data}catch(S){throw new Error(S.response.data.message)}},Ox=async()=>{try{const a=localStorage.getItem("token");return(await Oe.get(`${vr}/api/v1/events/get-events`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}})).data}catch(a){throw new Error(a.response.data.message)}},Ux=async()=>{try{const a=localStorage.getItem("token"),s=localStorage.getItem("organiserId");return(await Oe.get(`${vr}/api/v1/events/get-events-of-organiser/${s}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}})).data}catch(a){throw new Error(a.response.data.message)}},Fh=async a=>{try{const s=localStorage.getItem("token");return(await Oe.get(`${vr}/api/v1/events/get-event-by-id/${a}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response.data.message)}},Xj=async(a,s,n,o,l,d,u,m,g,f,y,b,v,N)=>{try{const w=localStorage.getItem("token");return(await Oe.patch(`${vr}/api/v1/events/update-event/${a}`,{name:s,description:n,start_date:o,end_date:l,cover_image:d,locality_id:u,school_id:m,area_id:g,number_of_seats:f,fees_per_delegate:y,total_revenue:b,website:v,instagram:N},{headers:{Authorization:`Bearer ${w}`}})).data}catch(w){throw new Error(w.response.data.message)}},Jj=async()=>{try{const a=localStorage.getItem("token");return(await Oe.get(`${vr}/api/v1/events/all-events`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}})).data}catch(a){console.error("Failed to fetch events:",a)}},Zj=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.patch(`${vr}/api/v1/events/update-event-status/${a}`,{status:s},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response.data.message)}},eN=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${vr}/api/v1/events/delete-event/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response.data.message)}},Mx=async a=>{try{const s=localStorage.getItem("token");return(await Oe.get(`${vr}/api/v1/events/check-registration-status/${a}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response.data.message)}},pc="http://localhost:1000",hp=async()=>{try{const a=localStorage.getItem("token");return(await Oe.get(`${pc}/api/v1/leadership-roles/all-leadership-roles`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(a){console.error("Failed to fetch leadership roles:",a)}},tN=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.post(`${pc}/api/v1/leadership-roles/add-leadership-role`,{abbr:a,leadership_role:s},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to create leadership role")}},sN=async(a,s,n)=>{try{const o=localStorage.getItem("token");return(await Oe.patch(`${pc}/api/v1/leadership-roles/update-leadership-role/${a}`,{abbr:s,leadership_role:n},{headers:{Authorization:`Bearer ${o}`}})).data}catch(o){throw new Error(o.response?.data?.message||"Failed to update leadership role")}},rN=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${pc}/api/v1/leadership-roles/delete-leadership-role/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to delete leadership role")}},aN="modulepreload",nN=function(a){return"/"+a},fp={},yi=function(s,n,o){let l=Promise.resolve();if(n&&n.length>0){let f=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var u=f;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),g=m?.nonce||m?.getAttribute("nonce");l=f(n.map(y=>{if(y=nN(y),y in fp)return;fp[y]=!0;const b=y.endsWith(".css"),v=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${v}`))return;const N=document.createElement("link");if(N.rel=b?"stylesheet":aN,b||(N.as="script"),N.crossOrigin="",N.href=y,g&&N.setAttribute("nonce",g),document.head.appendChild(N),b)return new Promise((w,S)=>{N.addEventListener("load",w),N.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${y}`)))})}))}function d(m){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=m,window.dispatchEvent(g),!g.defaultPrevented)throw m}return l.then(m=>{for(const g of m||[])g.status==="rejected"&&d(g.reason);return s().catch(d)})},oN=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...n)=>yi(async()=>{const{default:o}=await Promise.resolve().then(()=>Xn);return{default:o}},[]).then(({default:o})=>o(...n)):s=fetch,(...n)=>s(...n)};class Ph extends Error{constructor(s,n="FunctionsError",o){super(s),this.name=n,this.context=o}}class iN extends Ph{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class mp extends Ph{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class gp extends Ph{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var ch;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(ch||(ch={}));var lN=function(a,s,n,o){function l(d){return d instanceof n?d:new n(function(u){u(d)})}return new(n||(n=Promise))(function(d,u){function m(y){try{f(o.next(y))}catch(b){u(b)}}function g(y){try{f(o.throw(y))}catch(b){u(b)}}function f(y){y.done?d(y.value):l(y.value).then(m,g)}f((o=o.apply(a,s||[])).next())})};class cN{constructor(s,{headers:n={},customFetch:o,region:l=ch.Any}={}){this.url=s,this.headers=n,this.region=l,this.fetch=oN(o)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s,n={}){var o;return lN(this,void 0,void 0,function*(){try{const{headers:l,method:d,body:u}=n;let m={},{region:g}=n;g||(g=this.region);const f=new URL(`${this.url}/${s}`);g&&g!=="any"&&(m["x-region"]=g,f.searchParams.set("forceFunctionRegion",g));let y;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(m["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(m["Content-Type"]="application/json",y=JSON.stringify(u)));const b=yield this.fetch(f.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:y}).catch(S=>{throw new iN(S)}),v=b.headers.get("x-relay-error");if(v&&v==="true")throw new mp(b);if(!b.ok)throw new gp(b);let N=((o=b.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),w;return N==="application/json"?w=yield b.json():N==="application/octet-stream"?w=yield b.blob():N==="text/event-stream"?w=b:N==="multipart/form-data"?w=yield b.formData():w=yield b.text(),{data:w,error:null,response:b}}catch(l){return{data:null,error:l,response:l instanceof gp||l instanceof mp?l.context:void 0}}})}}var ds={},En={},An={},Dn={},Tn={},Rn={},dN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fn=dN();const uN=Fn.fetch,Bx=Fn.fetch.bind(Fn),$x=Fn.Headers,hN=Fn.Request,fN=Fn.Response,Xn=Object.freeze(Object.defineProperty({__proto__:null,Headers:$x,Request:hN,Response:fN,default:Bx,fetch:uN},Symbol.toStringTag,{value:"Module"})),mN=Ov(Xn);var Ml={},pp;function Ix(){if(pp)return Ml;pp=1,Object.defineProperty(Ml,"__esModule",{value:!0});class a extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ml.default=a,Ml}var xp;function zx(){if(xp)return Rn;xp=1;var a=Rn&&Rn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Rn,"__esModule",{value:!0});const s=a(mN),n=a(Ix());class o{constructor(d){var u,m;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(u=d.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=d.signal,this.isMaybeSingle=(m=d.isMaybeSingle)!==null&&m!==void 0?m:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,u){return this.headers=new Headers(this.headers),this.headers.set(d,u),this}then(d,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let g=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var y,b,v,N;let w=null,S=null,_=null,L=f.status,D=f.statusText;if(f.ok){if(this.method!=="HEAD"){const q=await f.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?S=q:S=JSON.parse(q))}const F=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),B=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");F&&B&&B.length>1&&(_=parseInt(B[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(w={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,_=null,L=406,D="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const F=await f.text();try{w=JSON.parse(F),Array.isArray(w)&&f.status===404&&(S=[],w=null,L=200,D="OK")}catch{f.status===404&&F===""?(L=204,D="No Content"):w={message:F}}if(w&&this.isMaybeSingle&&(!((N=w?.details)===null||N===void 0)&&N.includes("0 rows"))&&(w=null,L=200,D="OK"),w&&this.shouldThrowOnError)throw new n.default(w)}return{error:w,data:S,count:_,status:L,statusText:D}});return this.shouldThrowOnError||(g=g.catch(f=>{var y,b,v;return{error:{message:`${(y=f?.name)!==null&&y!==void 0?y:"FetchError"}: ${f?.message}`,details:`${(b=f?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(v=f?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),g.then(d,u)}returns(){return this}overrideTypes(){return this}}return Rn.default=o,Rn}var yp;function Fx(){if(yp)return Tn;yp=1;var a=Tn&&Tn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Tn,"__esModule",{value:!0});const s=a(zx());class n extends s.default{select(l){let d=!1;const u=(l??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:d=!0,nullsFirst:u,foreignTable:m,referencedTable:g=m}={}){const f=g?`${g}.order`:"order",y=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${y?`${y},`:""}${l}.${d?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:d,referencedTable:u=d}={}){const m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(m,`${l}`),this}range(l,d,{foreignTable:u,referencedTable:m=u}={}){const g=typeof m>"u"?"offset":`${m}.offset`,f=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(g,`${l}`),this.url.searchParams.set(f,`${d-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:d=!1,settings:u=!1,buffers:m=!1,wal:g=!1,format:f="text"}={}){var y;const b=[l?"analyze":null,d?"verbose":null,u?"settings":null,m?"buffers":null,g?"wal":null].filter(Boolean).join("|"),v=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${b};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return Tn.default=n,Tn}var bp;function Hh(){if(bp)return Dn;bp=1;var a=Dn&&Dn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Dn,"__esModule",{value:!0});const s=a(Fx());class n extends s.default{eq(l,d){return this.url.searchParams.append(l,`eq.${d}`),this}neq(l,d){return this.url.searchParams.append(l,`neq.${d}`),this}gt(l,d){return this.url.searchParams.append(l,`gt.${d}`),this}gte(l,d){return this.url.searchParams.append(l,`gte.${d}`),this}lt(l,d){return this.url.searchParams.append(l,`lt.${d}`),this}lte(l,d){return this.url.searchParams.append(l,`lte.${d}`),this}like(l,d){return this.url.searchParams.append(l,`like.${d}`),this}likeAllOf(l,d){return this.url.searchParams.append(l,`like(all).{${d.join(",")}}`),this}likeAnyOf(l,d){return this.url.searchParams.append(l,`like(any).{${d.join(",")}}`),this}ilike(l,d){return this.url.searchParams.append(l,`ilike.${d}`),this}ilikeAllOf(l,d){return this.url.searchParams.append(l,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(l,d){return this.url.searchParams.append(l,`ilike(any).{${d.join(",")}}`),this}is(l,d){return this.url.searchParams.append(l,`is.${d}`),this}in(l,d){const u=Array.from(new Set(d)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(l,`in.(${u})`),this}contains(l,d){return typeof d=="string"?this.url.searchParams.append(l,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(l,`cs.{${d.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(d)}`),this}containedBy(l,d){return typeof d=="string"?this.url.searchParams.append(l,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(l,`cd.{${d.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(d)}`),this}rangeGt(l,d){return this.url.searchParams.append(l,`sr.${d}`),this}rangeGte(l,d){return this.url.searchParams.append(l,`nxl.${d}`),this}rangeLt(l,d){return this.url.searchParams.append(l,`sl.${d}`),this}rangeLte(l,d){return this.url.searchParams.append(l,`nxr.${d}`),this}rangeAdjacent(l,d){return this.url.searchParams.append(l,`adj.${d}`),this}overlaps(l,d){return typeof d=="string"?this.url.searchParams.append(l,`ov.${d}`):this.url.searchParams.append(l,`ov.{${d.join(",")}}`),this}textSearch(l,d,{config:u,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const f=u===void 0?"":`(${u})`;return this.url.searchParams.append(l,`${g}fts${f}.${d}`),this}match(l){return Object.entries(l).forEach(([d,u])=>{this.url.searchParams.append(d,`eq.${u}`)}),this}not(l,d,u){return this.url.searchParams.append(l,`not.${d}.${u}`),this}or(l,{foreignTable:d,referencedTable:u=d}={}){const m=u?`${u}.or`:"or";return this.url.searchParams.append(m,`(${l})`),this}filter(l,d,u){return this.url.searchParams.append(l,`${d}.${u}`),this}}return Dn.default=n,Dn}var vp;function Px(){if(vp)return An;vp=1;var a=An&&An.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(An,"__esModule",{value:!0});const s=a(Hh());class n{constructor(l,{headers:d={},schema:u,fetch:m}){this.url=l,this.headers=new Headers(d),this.schema=u,this.fetch=m}select(l,{head:d=!1,count:u}={}){const m=d?"HEAD":"GET";let g=!1;const f=(l??"*").split("").map(y=>/\s/.test(y)&&!g?"":(y==='"'&&(g=!g),y)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new s.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:d,defaultToNull:u=!0}={}){var m;const g="POST";if(d&&this.headers.append("Prefer",`count=${d}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const f=l.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(f.length>0){const y=[...new Set(f)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new s.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(l,{onConflict:d,ignoreDuplicates:u=!1,count:m,defaultToNull:g=!0}={}){var f;const y="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),m&&this.headers.append("Prefer",`count=${m}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const b=l.reduce((v,N)=>v.concat(Object.keys(N)),[]);if(b.length>0){const v=[...new Set(b)].map(N=>`"${N}"`);this.url.searchParams.set("columns",v.join(","))}}return new s.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(l,{count:d}={}){var u;const m="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new s.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:l}={}){var d;const u="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new s.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return An.default=n,An}var wp;function gN(){if(wp)return En;wp=1;var a=En&&En.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(En,"__esModule",{value:!0});const s=a(Px()),n=a(Hh());class o{constructor(d,{headers:u={},schema:m,fetch:g}={}){this.url=d,this.headers=new Headers(u),this.schemaName=m,this.fetch=g}from(d){const u=new URL(`${this.url}/${d}`);return new s.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new o(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,u={},{head:m=!1,get:g=!1,count:f}={}){var y;let b;const v=new URL(`${this.url}/rpc/${d}`);let N;m||g?(b=m?"HEAD":"GET",Object.entries(u).filter(([S,_])=>_!==void 0).map(([S,_])=>[S,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([S,_])=>{v.searchParams.append(S,_)})):(b="POST",N=u);const w=new Headers(this.headers);return f&&w.set("Prefer",`count=${f}`),new n.default({method:b,url:v,headers:w,schema:this.schemaName,body:N,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return En.default=o,En}var jp;function pN(){if(jp)return ds;jp=1;var a=ds&&ds.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(ds,"__esModule",{value:!0}),ds.PostgrestError=ds.PostgrestBuilder=ds.PostgrestTransformBuilder=ds.PostgrestFilterBuilder=ds.PostgrestQueryBuilder=ds.PostgrestClient=void 0;const s=a(gN());ds.PostgrestClient=s.default;const n=a(Px());ds.PostgrestQueryBuilder=n.default;const o=a(Hh());ds.PostgrestFilterBuilder=o.default;const l=a(Fx());ds.PostgrestTransformBuilder=l.default;const d=a(zx());ds.PostgrestBuilder=d.default;const u=a(Ix());return ds.PostgrestError=u.default,ds.default={PostgrestClient:s.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:d.default,PostgrestError:u.default},ds}var xN=pN();const yN=_h(xN),{PostgrestClient:bN,PostgrestQueryBuilder:j_,PostgrestFilterBuilder:N_,PostgrestTransformBuilder:S_,PostgrestBuilder:C_,PostgrestError:k_}=yN;class vN{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let n=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(n+=`

Suggested solution: ${s.workaround}`),new Error(n)}static createWebSocket(s,n){const o=this.getWebSocketConstructor();return new o(s,n)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const wN="2.15.5",jN=`realtime-js/${wN}`,NN="1.0.0",dh=1e4,SN=1e3,CN=100;var ri;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(ri||(ri={}));var rs;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(rs||(rs={}));var rr;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(rr||(rr={}));var uh;(function(a){a.websocket="websocket"})(uh||(uh={}));var Fa;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(Fa||(Fa={}));class kN{constructor(){this.HEADER_LENGTH=1}decode(s,n){return s.constructor===ArrayBuffer?n(this._binaryDecode(s)):n(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const n=new DataView(s),o=new TextDecoder;return this._decodeBroadcast(s,n,o)}_decodeBroadcast(s,n,o){const l=n.getUint8(1),d=n.getUint8(2);let u=this.HEADER_LENGTH+2;const m=o.decode(s.slice(u,u+l));u=u+l;const g=o.decode(s.slice(u,u+d));u=u+d;const f=JSON.parse(o.decode(s.slice(u,s.byteLength)));return{ref:null,topic:m,event:g,payload:f}}}class Hx{constructor(s,n){this.callback=s,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $t;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})($t||($t={}));const Np=(a,s,n={})=>{var o;const l=(o=n.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(s).reduce((d,u)=>(d[u]=_N(u,a,s,l),d),{})},_N=(a,s,n,o)=>{const l=s.find(m=>m.name===a),d=l?.type,u=n[a];return d&&!o.includes(d)?qx(d,u):hh(u)},qx=(a,s)=>{if(a.charAt(0)==="_"){const n=a.slice(1,a.length);return TN(s,n)}switch(a){case $t.bool:return EN(s);case $t.float4:case $t.float8:case $t.int2:case $t.int4:case $t.int8:case $t.numeric:case $t.oid:return AN(s);case $t.json:case $t.jsonb:return DN(s);case $t.timestamp:return RN(s);case $t.abstime:case $t.date:case $t.daterange:case $t.int4range:case $t.int8range:case $t.money:case $t.reltime:case $t.text:case $t.time:case $t.timestamptz:case $t.timetz:case $t.tsrange:case $t.tstzrange:return hh(s);default:return hh(s)}},hh=a=>a,EN=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},AN=a=>{if(typeof a=="string"){const s=parseFloat(a);if(!Number.isNaN(s))return s}return a},DN=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch(s){return console.log(`JSON parse error: ${s}`),a}return a},TN=(a,s)=>{if(typeof a!="string")return a;const n=a.length-1,o=a[n];if(a[0]==="{"&&o==="}"){let d;const u=a.slice(1,n);try{d=JSON.parse("["+u+"]")}catch{d=u?u.split(","):[]}return d.map(m=>qx(s,m))}return a},RN=a=>typeof a=="string"?a.replace(" ","T"):a,Vx=a=>{let s=a;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")+"/api/broadcast"};class Iu{constructor(s,n,o={},l=dh){this.channel=s,this.event=n,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,n){var o;return this._hasReceived(s)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:s,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:n}){this.recHooks.filter(o=>o.status===s).forEach(o=>o.callback(n))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Sp;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(Sp||(Sp={}));class ai{constructor(s,n){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:d,onLeave:u,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ai.syncState(this.state,l,d,u),this.pendingDiffs.forEach(g=>{this.state=ai.syncDiff(this.state,g,d,u)}),this.pendingDiffs=[],m()}),this.channel._on(o.diff,{},l=>{const{onJoin:d,onLeave:u,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=ai.syncDiff(this.state,l,d,u),m())}),this.onJoin((l,d,u)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:d,newPresences:u})}),this.onLeave((l,d,u)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:d,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,n,o,l){const d=this.cloneDeep(s),u=this.transformState(n),m={},g={};return this.map(d,(f,y)=>{u[f]||(g[f]=y)}),this.map(u,(f,y)=>{const b=d[f];if(b){const v=y.map(_=>_.presence_ref),N=b.map(_=>_.presence_ref),w=y.filter(_=>N.indexOf(_.presence_ref)<0),S=b.filter(_=>v.indexOf(_.presence_ref)<0);w.length>0&&(m[f]=w),S.length>0&&(g[f]=S)}else m[f]=y}),this.syncDiff(d,{joins:m,leaves:g},o,l)}static syncDiff(s,n,o,l){const{joins:d,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(d,(m,g)=>{var f;const y=(f=s[m])!==null&&f!==void 0?f:[];if(s[m]=this.cloneDeep(g),y.length>0){const b=s[m].map(N=>N.presence_ref),v=y.filter(N=>b.indexOf(N.presence_ref)<0);s[m].unshift(...v)}o(m,y,g)}),this.map(u,(m,g)=>{let f=s[m];if(!f)return;const y=g.map(b=>b.presence_ref);f=f.filter(b=>y.indexOf(b.presence_ref)<0),s[m]=f,l(m,f,g),f.length===0&&delete s[m]}),s}static map(s,n){return Object.getOwnPropertyNames(s).map(o=>n(o,s[o]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((n,o)=>{const l=s[o];return"metas"in l?n[o]=l.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):n[o]=l,n},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Cp;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(Cp||(Cp={}));var ni;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(ni||(ni={}));var Br;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(Br||(Br={}));class qh{constructor(s,n={config:{}},o){this.topic=s,this.params=n,this.socket=o,this.bindings={},this.state=rs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Iu(this,rr.join,this.params,this.timeout),this.rejoinTimer=new Hx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rs.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=rs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=rs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rr.reply,{},(l,d)=>{this._trigger(this._replyEventName(d),l)}),this.presence=new ai(this),this.broadcastEndpointURL=Vx(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(s,n=this.timeout){var o,l,d;if(this.socket.isConnected()||this.socket.connect(),this.state==rs.closed){const{config:{broadcast:u,presence:m,private:g}}=this.params,f=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(N=>N.filter))!==null&&l!==void 0?l:[],y=!!this.bindings[ni.PRESENCE]&&this.bindings[ni.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,b={},v={broadcast:u,presence:Object.assign(Object.assign({},m),{enabled:y}),postgres_changes:f,private:g};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(N=>s?.(Br.CHANNEL_ERROR,N)),this._onClose(()=>s?.(Br.CLOSED)),this.updateJoinPayload(Object.assign({config:v},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:N})=>{var w;if(this.socket.setAuth(),N===void 0){s?.(Br.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,_=(w=S?.length)!==null&&w!==void 0?w:0,L=[];for(let D=0;D<_;D++){const M=S[D],{filter:{event:F,schema:B,table:q,filter:ee}}=M,le=N&&N[D];if(le&&le.event===F&&le.schema===B&&le.table===q&&le.filter===ee)L.push(Object.assign(Object.assign({},M),{id:le.id}));else{this.unsubscribe(),this.state=rs.errored,s?.(Br.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,s&&s(Br.SUBSCRIBED);return}}).receive("error",N=>{this.state=rs.errored,s?.(Br.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(N).join(", ")||"error")))}).receive("timeout",()=>{s?.(Br.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,n={}){return await this.send({type:"presence",event:"track",payload:s},n.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,n,o){return this.state===rs.joined&&s===ni.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,n,o)}async send(s,n={}){var o,l;if(!this._canPush()&&s.type==="broadcast"){const{event:d,payload:u}=s,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:u,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=f.body)===null||l===void 0?void 0:l.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var u,m,g;const f=this._push(s.type,s,n.timeout||this.timeout);s.type==="broadcast"&&!(!((g=(m=(u=this.params)===null||u===void 0?void 0:u.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&d("ok"),f.receive("ok",()=>d("ok")),f.receive("error",()=>d("error")),f.receive("timeout",()=>d("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=rs.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rr.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new Iu(this,rr.leave,{},s),o.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=rs.closed,this.bindings={}}async _fetchWithTimeout(s,n,o){const l=new AbortController,d=setTimeout(()=>l.abort(),o),u=await this.socket.fetch(s,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(d),u}_push(s,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Iu(this,s,n,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>CN){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(s,n,o){return n}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,n,o){var l,d;const u=s.toLocaleLowerCase(),{close:m,error:g,leave:f,join:y}=rr;if(o&&[m,g,f,y].indexOf(u)>=0&&o!==this._joinRef())return;let v=this._onMessage(u,n,o);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(N=>{var w,S,_;return((w=N.filter)===null||w===void 0?void 0:w.event)==="*"||((_=(S=N.filter)===null||S===void 0?void 0:S.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===u}).map(N=>N.callback(v,o)):(d=this.bindings[u])===null||d===void 0||d.filter(N=>{var w,S,_,L,D,M;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in N){const F=N.id,B=(w=N.filter)===null||w===void 0?void 0:w.event;return F&&((S=n.ids)===null||S===void 0?void 0:S.includes(F))&&(B==="*"||B?.toLocaleLowerCase()===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const F=(D=(L=N?.filter)===null||L===void 0?void 0:L.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return F==="*"||F===((M=n?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return N.type.toLocaleLowerCase()===u}).map(N=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:S,table:_,commit_timestamp:L,type:D,errors:M}=w;v=Object.assign(Object.assign({},{schema:S,table:_,commit_timestamp:L,eventType:D,new:{},old:{},errors:M}),this._getPayloadRecords(w))}N.callback(v,o)})}_isClosed(){return this.state===rs.closed}_isJoined(){return this.state===rs.joined}_isJoining(){return this.state===rs.joining}_isLeaving(){return this.state===rs.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,n,o){const l=s.toLocaleLowerCase(),d={type:l,filter:n,callback:o};return this.bindings[l]?this.bindings[l].push(d):this.bindings[l]=[d],this}_off(s,n){const o=s.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var d;return!(((d=l.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===o&&qh.isEqual(l.filter,n))})),this}static isEqual(s,n){if(Object.keys(s).length!==Object.keys(n).length)return!1;for(const o in s)if(s[o]!==n[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(rr.close,{},s)}_onError(s){this._on(rr.error,{},n=>s(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rs.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const n={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(n.new=Np(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(n.old=Np(s.columns,s.old_record)),n}}const zu=()=>{},Bl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},LN=[1e3,2e3,5e3,1e4],ON=1e4,UN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class MN{constructor(s,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=dh,this.transport=null,this.heartbeatIntervalMs=Bl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zu,this.ref=0,this.reconnectTimer=null,this.logger=zu,this.conn=null,this.sendBuffer=[],this.serializer=new kN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let d;return l?d=l:typeof fetch>"u"?d=(...u)=>yi(async()=>{const{default:m}=await Promise.resolve().then(()=>Xn);return{default:m}},void 0).then(({default:m})=>m(...u)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...u)=>d(...u)},!(!((o=n?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${s}/${uh.websocket}`,this.httpEndpoint=Vx(s),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vN.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const n=s.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:NN}))}disconnect(s,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},s?this.conn.close(s,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const n=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const s=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,n,o){this.logger(s,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case ri.connecting:return Fa.Connecting;case ri.open:return Fa.Open;case ri.closing:return Fa.Closing;default:return Fa.Closed}}isConnected(){return this.connectionState()===Fa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,n={config:{}}){const o=`realtime:${s}`,l=this.getChannels().find(d=>d.topic===o);if(l)return l;{const d=new qh(`realtime:${s}`,n,this);return this.channels.push(d),d}}push(s){const{topic:n,event:o,payload:l,ref:d}=s,u=()=>{this.encode(s,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${n} ${o} (${d})`,l),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(SN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Bl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let n=this.channels.find(o=>o.topic===s&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${s}"`),n.unsubscribe())}_remove(s){this.channels=this.channels.filter(n=>n.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:d,ref:u}=n,m=u?`(${u})`:"",g=d.status||"";this.log("receive",`${g} ${o} ${l} ${m}`.trim(),d),this.channels.filter(f=>f._isMember(o)).forEach(f=>f._trigger(l,d,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(s){var n;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var n;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(rr.error))}_appendParams(s,n){if(Object.keys(n).length===0)return s;const o=s.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${s}${o}${l}`}_workerObjectUrl(s){let n;if(s)n=s;else{const o=new Blob([UN],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(s,n=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(s=null){let n;s?n=s:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const l={access_token:n,version:jN};n&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(rr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${s}`,n)})}_triggerStateCallbacks(s,n){try{this.stateChangeCallbacks[s].forEach(o=>{try{o(n)}catch(l){this.log("error",`error in ${s} callback`,l)}})}catch(o){this.log("error",`error triggering ${s} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Hx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var n,o,l,d,u,m,g,f,y;if(this.transport=(n=s?.transport)!==null&&n!==void 0?n:null,this.timeout=(o=s?.timeout)!==null&&o!==void 0?o:dh,this.heartbeatIntervalMs=(l=s?.heartbeatIntervalMs)!==null&&l!==void 0?l:Bl.HEARTBEAT_INTERVAL,this.worker=(d=s?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(u=s?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(m=s?.heartbeatCallback)!==null&&m!==void 0?m:zu,s?.params&&(this.params=s.params),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=s?.reconnectAfterMs)!==null&&g!==void 0?g:(b=>LN[b-1]||ON),this.encode=(f=s?.encode)!==null&&f!==void 0?f:((b,v)=>v(JSON.stringify(b))),this.decode=(y=s?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s?.workerUrl}}}class Vh extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function as(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}class BN extends Vh{constructor(s,n,o){super(s),this.name="StorageApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fh extends Vh{constructor(s,n){super(s),this.name="StorageUnknownError",this.originalError=n}}var $N=function(a,s,n,o){function l(d){return d instanceof n?d:new n(function(u){u(d)})}return new(n||(n=Promise))(function(d,u){function m(y){try{f(o.next(y))}catch(b){u(b)}}function g(y){try{f(o.throw(y))}catch(b){u(b)}}function f(y){y.done?d(y.value):l(y.value).then(m,g)}f((o=o.apply(a,s||[])).next())})};const Yx=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...n)=>yi(async()=>{const{default:o}=await Promise.resolve().then(()=>Xn);return{default:o}},void 0).then(({default:o})=>o(...n)):s=fetch,(...n)=>s(...n)},IN=()=>$N(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield yi(()=>Promise.resolve().then(()=>Xn),void 0)).Response:Response}),mh=a=>{if(Array.isArray(a))return a.map(n=>mh(n));if(typeof a=="function"||a!==Object(a))return a;const s={};return Object.entries(a).forEach(([n,o])=>{const l=n.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));s[l]=mh(o)}),s},zN=a=>{if(typeof a!="object"||a===null)return!1;const s=Object.getPrototypeOf(a);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)};var Ya=function(a,s,n,o){function l(d){return d instanceof n?d:new n(function(u){u(d)})}return new(n||(n=Promise))(function(d,u){function m(y){try{f(o.next(y))}catch(b){u(b)}}function g(y){try{f(o.throw(y))}catch(b){u(b)}}function f(y){y.done?d(y.value):l(y.value).then(m,g)}f((o=o.apply(a,s||[])).next())})};const Fu=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),FN=(a,s,n)=>Ya(void 0,void 0,void 0,function*(){const o=yield IN();a instanceof o&&!n?.noResolveJson?a.json().then(l=>{const d=a.status||500,u=l?.statusCode||d+"";s(new BN(Fu(l),d,u))}).catch(l=>{s(new fh(Fu(l),l))}):s(new fh(Fu(a),a))}),PN=(a,s,n,o)=>{const l={method:a,headers:s?.headers||{}};return a==="GET"||!o?l:(zN(o)?(l.headers=Object.assign({"Content-Type":"application/json"},s?.headers),l.body=JSON.stringify(o)):l.body=o,s?.duplex&&(l.duplex=s.duplex),Object.assign(Object.assign({},l),n))};function bi(a,s,n,o,l,d){return Ya(this,void 0,void 0,function*(){return new Promise((u,m)=>{a(n,PN(s,o,l,d)).then(g=>{if(!g.ok)throw g;return o?.noResolveJson?g:g.json()}).then(g=>u(g)).catch(g=>FN(g,m,o))})})}function rc(a,s,n,o){return Ya(this,void 0,void 0,function*(){return bi(a,"GET",s,n,o)})}function xr(a,s,n,o,l){return Ya(this,void 0,void 0,function*(){return bi(a,"POST",s,o,l,n)})}function gh(a,s,n,o,l){return Ya(this,void 0,void 0,function*(){return bi(a,"PUT",s,o,l,n)})}function HN(a,s,n,o){return Ya(this,void 0,void 0,function*(){return bi(a,"HEAD",s,Object.assign(Object.assign({},n),{noResolveJson:!0}),o)})}function Gx(a,s,n,o,l){return Ya(this,void 0,void 0,function*(){return bi(a,"DELETE",s,o,l,n)})}var js=function(a,s,n,o){function l(d){return d instanceof n?d:new n(function(u){u(d)})}return new(n||(n=Promise))(function(d,u){function m(y){try{f(o.next(y))}catch(b){u(b)}}function g(y){try{f(o.throw(y))}catch(b){u(b)}}function f(y){y.done?d(y.value):l(y.value).then(m,g)}f((o=o.apply(a,s||[])).next())})};const qN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class VN{constructor(s,n={},o,l){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.bucketId=o,this.fetch=Yx(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,n,o,l){return js(this,void 0,void 0,function*(){try{let d;const u=Object.assign(Object.assign({},kp),l);let m=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&o instanceof Blob?(d=new FormData,d.append("cacheControl",u.cacheControl),g&&d.append("metadata",this.encodeMetadata(g)),d.append("",o)):typeof FormData<"u"&&o instanceof FormData?(d=o,d.append("cacheControl",u.cacheControl),g&&d.append("metadata",this.encodeMetadata(g))):(d=o,m["cache-control"]=`max-age=${u.cacheControl}`,m["content-type"]=u.contentType,g&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),l?.headers&&(m=Object.assign(Object.assign({},m),l.headers));const f=this._removeEmptyFolders(n),y=this._getFinalPath(f),b=yield(s=="PUT"?gh:xr)(this.fetch,`${this.url}/object/${y}`,d,Object.assign({headers:m},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:f,id:b.Id,fullPath:b.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(as(d))return{data:null,error:d};throw d}})}upload(s,n,o){return js(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,n,o)})}uploadToSignedUrl(s,n,o,l){return js(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),m=new URL(this.url+`/object/upload/sign/${u}`);m.searchParams.set("token",n);try{let g;const f=Object.assign({upsert:kp.upsert},l),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&o instanceof Blob?(g=new FormData,g.append("cacheControl",f.cacheControl),g.append("",o)):typeof FormData<"u"&&o instanceof FormData?(g=o,g.append("cacheControl",f.cacheControl)):(g=o,y["cache-control"]=`max-age=${f.cacheControl}`,y["content-type"]=f.contentType);const b=yield gh(this.fetch,m.toString(),g,{headers:y});return{data:{path:d,fullPath:b.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(as(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(s,n){return js(this,void 0,void 0,function*(){try{let o=this._getFinalPath(s);const l=Object.assign({},this.headers);n?.upsert&&(l["x-upsert"]="true");const d=yield xr(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),u=new URL(this.url+d.url),m=u.searchParams.get("token");if(!m)throw new Vh("No token returned by API");return{data:{signedUrl:u.toString(),path:s,token:m},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(as(o))return{data:null,error:o};throw o}})}update(s,n,o){return js(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,n,o)})}move(s,n,o){return js(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(as(l))return{data:null,error:l};throw l}})}copy(s,n,o){return js(this,void 0,void 0,function*(){try{return{data:{path:(yield xr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(as(l))return{data:null,error:l};throw l}})}createSignedUrl(s,n,o){return js(this,void 0,void 0,function*(){try{let l=this._getFinalPath(s),d=yield xr(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${u}`)},{data:d,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(as(l))return{data:null,error:l};throw l}})}createSignedUrls(s,n,o){return js(this,void 0,void 0,function*(){try{const l=yield xr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:s},{headers:this.headers}),d=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${d}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(as(l))return{data:null,error:l};throw l}})}download(s,n){return js(this,void 0,void 0,function*(){const l=typeof n?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(n?.transform||{}),u=d?`?${d}`:"";try{const m=this._getFinalPath(s);return{data:yield(yield rc(this.fetch,`${this.url}/${l}/${m}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(as(m))return{data:null,error:m};throw m}})}info(s){return js(this,void 0,void 0,function*(){const n=this._getFinalPath(s);try{const o=yield rc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:mh(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(as(o))return{data:null,error:o};throw o}})}exists(s){return js(this,void 0,void 0,function*(){const n=this._getFinalPath(s);try{return yield HN(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(as(o)&&o instanceof fh){const l=o.originalError;if([400,404].includes(l?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(s,n){const o=this._getFinalPath(s),l=[],d=n?.download?`download=${n.download===!0?"":n.download}`:"";d!==""&&l.push(d);const m=typeof n?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(n?.transform||{});g!==""&&l.push(g);let f=l.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${o}${f}`)}}}remove(s){return js(this,void 0,void 0,function*(){try{return{data:yield Gx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(as(n))return{data:null,error:n};throw n}})}list(s,n,o){return js(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},qN),n),{prefix:s||""});return{data:yield xr(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(as(l))return{data:null,error:l};throw l}})}listV2(s,n){return js(this,void 0,void 0,function*(){try{const o=Object.assign({},s);return{data:yield xr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(as(o))return{data:null,error:o};throw o}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}}const YN="2.12.1",GN={"X-Client-Info":`storage-js/${YN}`};var Ln=function(a,s,n,o){function l(d){return d instanceof n?d:new n(function(u){u(d)})}return new(n||(n=Promise))(function(d,u){function m(y){try{f(o.next(y))}catch(b){u(b)}}function g(y){try{f(o.throw(y))}catch(b){u(b)}}function f(y){y.done?d(y.value):l(y.value).then(m,g)}f((o=o.apply(a,s||[])).next())})};class WN{constructor(s,n={},o,l){this.shouldThrowOnError=!1;const d=new URL(s);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href,this.headers=Object.assign(Object.assign({},GN),n),this.fetch=Yx(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ln(this,void 0,void 0,function*(){try{return{data:yield rc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}})}getBucket(s){return Ln(this,void 0,void 0,function*(){try{return{data:yield rc(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(as(n))return{data:null,error:n};throw n}})}createBucket(s,n={public:!1}){return Ln(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(as(o))return{data:null,error:o};throw o}})}updateBucket(s,n){return Ln(this,void 0,void 0,function*(){try{return{data:yield gh(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(as(o))return{data:null,error:o};throw o}})}emptyBucket(s){return Ln(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(as(n))return{data:null,error:n};throw n}})}deleteBucket(s){return Ln(this,void 0,void 0,function*(){try{return{data:yield Gx(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(as(n))return{data:null,error:n};throw n}})}}class KN extends WN{constructor(s,n={},o,l){super(s,n,o,l)}from(s){return new VN(this.url,this.headers,s,this.fetch)}}const QN="2.57.4";let ei="";typeof Deno<"u"?ei="deno":typeof document<"u"?ei="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ei="react-native":ei="node";const XN={"X-Client-Info":`supabase-js-${ei}/${QN}`},JN={headers:XN},ZN={schema:"public"},eS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tS={};var sS=function(a,s,n,o){function l(d){return d instanceof n?d:new n(function(u){u(d)})}return new(n||(n=Promise))(function(d,u){function m(y){try{f(o.next(y))}catch(b){u(b)}}function g(y){try{f(o.throw(y))}catch(b){u(b)}}function f(y){y.done?d(y.value):l(y.value).then(m,g)}f((o=o.apply(a,s||[])).next())})};const rS=a=>{let s;return a?s=a:typeof fetch>"u"?s=Bx:s=fetch,(...n)=>s(...n)},aS=()=>typeof Headers>"u"?$x:Headers,nS=(a,s,n)=>{const o=rS(n),l=aS();return(d,u)=>sS(void 0,void 0,void 0,function*(){var m;const g=(m=yield s())!==null&&m!==void 0?m:a;let f=new l(u?.headers);return f.has("apikey")||f.set("apikey",a),f.has("Authorization")||f.set("Authorization",`Bearer ${g}`),o(d,Object.assign(Object.assign({},u),{headers:f}))})};var oS=function(a,s,n,o){function l(d){return d instanceof n?d:new n(function(u){u(d)})}return new(n||(n=Promise))(function(d,u){function m(y){try{f(o.next(y))}catch(b){u(b)}}function g(y){try{f(o.throw(y))}catch(b){u(b)}}function f(y){y.done?d(y.value):l(y.value).then(m,g)}f((o=o.apply(a,s||[])).next())})};function iS(a){return a.endsWith("/")?a:a+"/"}function lS(a,s){var n,o;const{db:l,auth:d,realtime:u,global:m}=a,{db:g,auth:f,realtime:y,global:b}=s,v={db:Object.assign(Object.assign({},g),l),auth:Object.assign(Object.assign({},f),d),realtime:Object.assign(Object.assign({},y),u),storage:{},global:Object.assign(Object.assign(Object.assign({},b),m),{headers:Object.assign(Object.assign({},(n=b?.headers)!==null&&n!==void 0?n:{}),(o=m?.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>oS(this,void 0,void 0,function*(){return""})};return a.accessToken?v.accessToken=a.accessToken:delete v.accessToken,v}function cS(a){const s=a?.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(iS(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Wx="2.71.1",$n=30*1e3,ph=3,Pu=ph*$n,dS="http://localhost:9999",uS="supabase.auth.token",hS={"X-Client-Info":`gotrue-js/${Wx}`},xh="X-Supabase-Api-Version",Kx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},fS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,mS=600*1e3;class Yh extends Error{constructor(s,n,o){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function dt(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class gS extends Yh{constructor(s,n,o){super(s,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function pS(a){return dt(a)&&a.name==="AuthApiError"}class Qx extends Yh{constructor(s,n){super(s),this.name="AuthUnknownError",this.originalError=n}}class ya extends Yh{constructor(s,n,o,l){super(s,o,l),this.name=n,this.status=o}}class ma extends ya{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xS(a){return dt(a)&&a.name==="AuthSessionMissingError"}class $l extends ya{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Il extends ya{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class zl extends ya{constructor(s,n=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yS(a){return dt(a)&&a.name==="AuthImplicitGrantRedirectError"}class _p extends ya{constructor(s,n=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yh extends ya{constructor(s,n){super(s,"AuthRetryableFetchError",n,void 0)}}function Hu(a){return dt(a)&&a.name==="AuthRetryableFetchError"}class Ep extends ya{constructor(s,n,o){super(s,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class bh extends ya{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const ac="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ap=` 	
\r=`.split(""),bS=(()=>{const a=new Array(128);for(let s=0;s<a.length;s+=1)a[s]=-1;for(let s=0;s<Ap.length;s+=1)a[Ap[s].charCodeAt(0)]=-2;for(let s=0;s<ac.length;s+=1)a[ac[s].charCodeAt(0)]=s;return a})();function Dp(a,s,n){if(a!==null)for(s.queue=s.queue<<8|a,s.queuedBits+=8;s.queuedBits>=6;){const o=s.queue>>s.queuedBits-6&63;n(ac[o]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const o=s.queue>>s.queuedBits-6&63;n(ac[o]),s.queuedBits-=6}}function Xx(a,s,n){const o=bS[a];if(o>-1)for(s.queue=s.queue<<6|o,s.queuedBits+=6;s.queuedBits>=8;)n(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function Tp(a){const s=[],n=u=>{s.push(String.fromCodePoint(u))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},d=u=>{jS(u,o,n)};for(let u=0;u<a.length;u+=1)Xx(a.charCodeAt(u),l,d);return s.join("")}function vS(a,s){if(a<=127){s(a);return}else if(a<=2047){s(192|a>>6),s(128|a&63);return}else if(a<=65535){s(224|a>>12),s(128|a>>6&63),s(128|a&63);return}else if(a<=1114111){s(240|a>>18),s(128|a>>12&63),s(128|a>>6&63),s(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function wS(a,s){for(let n=0;n<a.length;n+=1){let o=a.charCodeAt(n);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(a.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}vS(o,s)}}function jS(a,s,n){if(s.utf8seq===0){if(a<=127){n(a);return}for(let o=1;o<6;o+=1)if((a>>7-o&1)===0){s.utf8seq=o;break}if(s.utf8seq===2)s.codepoint=a&31;else if(s.utf8seq===3)s.codepoint=a&15;else if(s.utf8seq===4)s.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|a&63,s.utf8seq-=1,s.utf8seq===0&&n(s.codepoint)}}function NS(a){const s=[],n={queue:0,queuedBits:0},o=l=>{s.push(l)};for(let l=0;l<a.length;l+=1)Xx(a.charCodeAt(l),n,o);return new Uint8Array(s)}function SS(a){const s=[];return wS(a,n=>s.push(n)),new Uint8Array(s)}function CS(a){const s=[],n={queue:0,queuedBits:0},o=l=>{s.push(l)};return a.forEach(l=>Dp(l,n,o)),Dp(null,n,o),s.join("")}function kS(a){return Math.round(Date.now()/1e3)+a}function _S(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){const s=Math.random()*16|0;return(a=="x"?s:s&3|8).toString(16)})}const sr=()=>typeof window<"u"&&typeof document<"u",$a={tested:!1,writable:!1},Jx=()=>{if(!sr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($a.tested)return $a.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),$a.tested=!0,$a.writable=!0}catch{$a.tested=!0,$a.writable=!1}return $a.writable};function ES(a){const s={},n=new URL(a);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,d)=>{s[d]=l})}catch{}return n.searchParams.forEach((o,l)=>{s[l]=o}),s}const Zx=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...n)=>yi(async()=>{const{default:o}=await Promise.resolve().then(()=>Xn);return{default:o}},void 0).then(({default:o})=>o(...n)):s=fetch,(...n)=>s(...n)},AS=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",In=async(a,s,n)=>{await a.setItem(s,JSON.stringify(n))},Ia=async(a,s)=>{const n=await a.getItem(s);if(!n)return null;try{return JSON.parse(n)}catch{return n}},fa=async(a,s)=>{await a.removeItem(s)};class xc{constructor(){this.promise=new xc.promiseConstructor((s,n)=>{this.resolve=s,this.reject=n})}}xc.promiseConstructor=Promise;function qu(a){const s=a.split(".");if(s.length!==3)throw new bh("Invalid JWT structure");for(let o=0;o<s.length;o++)if(!fS.test(s[o]))throw new bh("JWT not in base64url format");return{header:JSON.parse(Tp(s[0])),payload:JSON.parse(Tp(s[1])),signature:NS(s[2]),raw:{header:s[0],payload:s[1]}}}async function DS(a){return await new Promise(s=>{setTimeout(()=>s(null),a)})}function TS(a,s){return new Promise((o,l)=>{(async()=>{for(let d=0;d<1/0;d++)try{const u=await a(d);if(!s(d,null,u)){o(u);return}}catch(u){if(!s(d,u)){l(u);return}}})()})}function RS(a){return("0"+a.toString(16)).substr(-2)}function LS(){const s=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let l="";for(let d=0;d<56;d++)l+=n.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(s),Array.from(s,RS).join("")}async function OS(a){const n=new TextEncoder().encode(a),o=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(o);return Array.from(l).map(d=>String.fromCharCode(d)).join("")}async function US(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const n=await OS(a);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function On(a,s,n=!1){const o=LS();let l=o;n&&(l+="/PASSWORD_RECOVERY"),await In(a,`${s}-code-verifier`,l);const d=await US(o);return[d,o===d?"plain":"s256"]}const MS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function BS(a){const s=a.headers.get(xh);if(!s||!s.match(MS))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function $S(a){if(!a)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(a<=s)throw new Error("JWT has expired")}function IS(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Un(a){if(!zS.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vu(){const a={};return new Proxy(a,{get:(s,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Rp(a){return JSON.parse(JSON.stringify(a))}var FS=function(a,s){var n={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&s.indexOf(o)<0&&(n[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(a);l<o.length;l++)s.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(a,o[l])&&(n[o[l]]=a[o[l]]);return n};const za=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),PS=[502,503,504];async function Lp(a){var s;if(!AS(a))throw new yh(za(a),0);if(PS.includes(a.status))throw new yh(za(a),a.status);let n;try{n=await a.json()}catch(d){throw new Qx(za(d),d)}let o;const l=BS(a);if(l&&l.getTime()>=Kx["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new Ep(za(n),a.status,((s=n.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(o==="session_not_found")throw new ma}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((d,u)=>d&&typeof u=="string",!0))throw new Ep(za(n),a.status,n.weak_password.reasons);throw new gS(za(n),a.status||500,o)}const HS=(a,s,n,o)=>{const l={method:a,headers:s?.headers||{}};return a==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s?.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),n))};async function bt(a,s,n,o){var l;const d=Object.assign({},o?.headers);d[xh]||(d[xh]=Kx["2024-01-01"].name),o?.jwt&&(d.Authorization=`Bearer ${o.jwt}`);const u=(l=o?.query)!==null&&l!==void 0?l:{};o?.redirectTo&&(u.redirect_to=o.redirectTo);const m=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await qS(a,s,n+m,{headers:d,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(g):{data:Object.assign({},g),error:null}}async function qS(a,s,n,o,l,d){const u=HS(s,o,l,d);let m;try{m=await a(n,Object.assign({},u))}catch(g){throw console.error(g),new yh(za(g),0)}if(m.ok||await Lp(m),o?.noResolveJson)return m;try{return await m.json()}catch(g){await Lp(g)}}function Mr(a){var s;let n=null;WS(a)&&(n=Object.assign({},a),a.expires_at||(n.expires_at=kS(a.expires_in)));const o=(s=a.user)!==null&&s!==void 0?s:a;return{data:{session:n,user:o},error:null}}function Op(a){const s=Mr(a);return!s.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(s.data.weak_password=a.weak_password),s}function ga(a){var s;return{data:{user:(s=a.user)!==null&&s!==void 0?s:a},error:null}}function VS(a){return{data:a,error:null}}function YS(a){const{action_link:s,email_otp:n,hashed_token:o,redirect_to:l,verification_type:d}=a,u=FS(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:s,email_otp:n,hashed_token:o,redirect_to:l,verification_type:d},g=Object.assign({},u);return{data:{properties:m,user:g},error:null}}function GS(a){return a}function WS(a){return a.access_token&&a.refresh_token&&a.expires_in}const Yu=["global","local","others"];var KS=function(a,s){var n={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&s.indexOf(o)<0&&(n[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(a);l<o.length;l++)s.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(a,o[l])&&(n[o[l]]=a[o[l]]);return n};class QS{constructor({url:s="",headers:n={},fetch:o}){this.url=s,this.headers=n,this.fetch=Zx(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(s,n=Yu[0]){if(Yu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Yu.join(", ")}`);try{return await bt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(o){if(dt(o))return{data:null,error:o};throw o}}async inviteUserByEmail(s,n={}){try{return await bt(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ga})}catch(o){if(dt(o))return{data:{user:null},error:o};throw o}}async generateLink(s){try{const{options:n}=s,o=KS(s,["options"]),l=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(l.new_email=o?.newEmail,delete l.newEmail),await bt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:YS,redirectTo:n?.redirectTo})}catch(n){if(dt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(s){try{return await bt(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:ga})}catch(n){if(dt(n))return{data:{user:null},error:n};throw n}}async listUsers(s){var n,o,l,d,u,m,g;try{const f={nextPage:null,lastPage:0,total:0},y=await bt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=s?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(d=(l=s?.perPage)===null||l===void 0?void 0:l.toString())!==null&&d!==void 0?d:""},xform:GS});if(y.error)throw y.error;const b=await y.json(),v=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,N=(g=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return N.length>0&&(N.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(w.split(";")[1].split("=")[1]);f[`${_}Page`]=S}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},b),f),error:null}}catch(f){if(dt(f))return{data:{users:[]},error:f};throw f}}async getUserById(s){Un(s);try{return await bt(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:ga})}catch(n){if(dt(n))return{data:{user:null},error:n};throw n}}async updateUserById(s,n){Un(s);try{return await bt(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:n,headers:this.headers,xform:ga})}catch(o){if(dt(o))return{data:{user:null},error:o};throw o}}async deleteUser(s,n=!1){Un(s);try{return await bt(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:n},xform:ga})}catch(o){if(dt(o))return{data:{user:null},error:o};throw o}}async _listFactors(s){Un(s.userId);try{const{data:n,error:o}=await bt(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:o}}catch(n){if(dt(n))return{data:null,error:n};throw n}}async _deleteFactor(s){Un(s.userId),Un(s.id);try{return{data:await bt(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}}}function Up(a={}){return{getItem:s=>a[s]||null,setItem:(s,n)=>{a[s]=n},removeItem:s=>{delete a[s]}}}function XS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Mn={debug:!!(globalThis&&Jx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ey extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class JS extends ey{}async function ZS(a,s,n){Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,s);const o=new globalThis.AbortController;return s>0&&setTimeout(()=>{o.abort(),Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,l.name);try{return await n()}finally{Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,l.name)}}else{if(s===0)throw Mn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new JS(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(Mn.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}XS();const e4={url:dS,storageKey:uS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mp(a,s,n){return await n()}const Bn={};class ci{constructor(s){var n,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ci.nextInstanceID,ci.nextInstanceID+=1,this.instanceID>0&&sr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},e4),s);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new QS({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Zx(l.fetch),this.lock=l.lock||Mp,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:sr()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=ZS:this.lock=Mp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Jx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Up(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Up(this.memoryStorage)),sr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}get jwks(){var s,n;return(n=(s=Bn[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(s){Bn[this.storageKey]=Object.assign(Object.assign({},Bn[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,n;return(n=(s=Bn[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){Bn[this.storageKey]=Object.assign(Object.assign({},Bn[this.storageKey]),{cachedAt:s})}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Wx}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{const n=ES(window.location.href);let o="none";if(this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce"),sr()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:d}=await this._getSessionFromURL(n,o);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),yS(d)){const g=(s=d.details)===null||s===void 0?void 0:s.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:u,redirectType:m}=l;return this._debug("#_initialize()","detected session in URL",u,"redirect type",m),await this._saveSession(u),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return dt(n)?{error:n}:{error:new Qx("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var n,o,l;try{const d=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=s?.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=s?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Mr}),{data:u,error:m}=d;if(m||!u)return{data:{user:null,session:null},error:m};const g=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:f,session:g},error:null}}catch(d){if(dt(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(s){var n,o,l;try{let d;if("email"in s){const{email:y,password:b,options:v}=s;let N=null,w=null;this.flowType==="pkce"&&([N,w]=await On(this.storage,this.storageKey)),d=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:y,password:b,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:N,code_challenge_method:w},xform:Mr})}else if("phone"in s){const{phone:y,password:b,options:v}=s;d=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:b,data:(o=v?.data)!==null&&o!==void 0?o:{},channel:(l=v?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Mr})}else throw new Il("You must provide either an email or phone number and a password");const{data:u,error:m}=d;if(m||!u)return{data:{user:null,session:null},error:m};const g=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:f,session:g},error:null}}catch(d){if(dt(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(s){try{let n;if("email"in s){const{email:d,password:u,options:m}=s;n=await bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:u,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Op})}else if("phone"in s){const{phone:d,password:u,options:m}=s;n=await bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:u,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Op})}else throw new Il("You must provide either an email or phone number and a password");const{data:o,error:l}=n;return l?{data:{user:null,session:null},error:l}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new $l}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(n){if(dt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(s){var n,o,l,d;return await this._handleProviderSignIn(s.provider,{redirectTo:(n=s.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=s.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=s.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(d=s.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:n}=s;if(n==="solana")return await this.signInWithSolana(s);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(s){var n,o,l,d,u,m,g,f,y,b,v,N;let w,S;if("message"in s)w=s.message,S=s.signature;else{const{chain:_,wallet:L,statement:D,options:M}=s;let F;if(sr())if(typeof L=="object")F=L;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))F=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=L}const B=new URL((n=M?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in F&&F.signIn){const q=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M?.signInWithSolana),{version:"1",domain:B.host,uri:B.href}),D?{statement:D}:null));let ee;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")ee=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)ee=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)w=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),S=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${B.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${B.href}`,`Issued At: ${(l=(o=M?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((d=M?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((u=M?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((m=M?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((g=M?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((f=M?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((b=(y=M?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||b===void 0)&&b.length?["Resources",...M.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);const q=await F.signMessage(new TextEncoder().encode(w),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=q}}try{const{data:_,error:L}=await bt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:CS(S)},!((v=s.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(N=s.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:Mr});if(L)throw L;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new $l}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:L})}catch(_){if(dt(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(s){const n=await Ia(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(n??"").split("/");try{const{data:d,error:u}=await bt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:o},xform:Mr});if(await fa(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new $l}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:l??null}),error:u})}catch(d){if(dt(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(s){try{const{options:n,provider:o,token:l,access_token:d,nonce:u}=s,m=await bt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:d,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Mr}),{data:g,error:f}=m;return f?{data:{user:null,session:null},error:f}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new $l}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:f})}catch(n){if(dt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(s){var n,o,l,d,u;try{if("email"in s){const{email:m,options:g}=s;let f=null,y=null;this.flowType==="pkce"&&([f,y]=await On(this.storage,this.storageKey));const{error:b}=await bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(n=g?.data)!==null&&n!==void 0?n:{},create_user:(o=g?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:f,code_challenge_method:y},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in s){const{phone:m,options:g}=s,{data:f,error:y}=await bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(l=g?.data)!==null&&l!==void 0?l:{},create_user:(d=g?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(u=g?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:y}}throw new Il("You must provide either an email or phone number.")}catch(m){if(dt(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(s){var n,o;try{let l,d;"options"in s&&(l=(n=s.options)===null||n===void 0?void 0:n.redirectTo,d=(o=s.options)===null||o===void 0?void 0:o.captchaToken);const{data:u,error:m}=await bt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:d}}),redirectTo:l,xform:Mr});if(m)throw m;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,f=u.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:f,session:g},error:null}}catch(l){if(dt(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(s){var n,o,l;try{let d=null,u=null;return this.flowType==="pkce"&&([d,u]=await On(this.storage,this.storageKey)),await bt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(o=(n=s.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=s?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:u}),headers:this.headers,xform:VS})}catch(d){if(dt(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:n},error:o}=s;if(o)throw o;if(!n)throw new ma;const{error:l}=await bt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:l}})}catch(s){if(dt(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{const n=`${this.url}/resend`;if("email"in s){const{email:o,type:l,options:d}=s,{error:u}=await bt(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in s){const{phone:o,type:l,options:d}=s,{data:u,error:m}=await bt(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:m}}throw new Il("You must provide either an email or phone number and a type")}catch(n){if(dt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(s,n){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await s(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const n=await Ia(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?s=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const o=s.expires_at?s.expires_at*1e3-Date.now()<Pu:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",s.expires_at),!o){if(this.userStorage){const u=await Ia(this.userStorage,this.storageKey+"-user");u?.user?s.user=u.user:s.user=Vu()}if(this.storage.isServer&&s.user){let u=this.suppressGetSessionWarning;s=new Proxy(s,{get:(g,f,y)=>(!u&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,f,y))})}return{data:{session:s},error:null}}const{session:l,error:d}=await this._callRefreshToken(s.refresh_token);return d?{data:{session:null},error:d}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:ga}):await this._useSession(async n=>{var o,l,d;const{data:u,error:m}=n;if(m)throw m;return!(!((o=u.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ma}:await bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0,xform:ga})})}catch(n){if(dt(n))return xS(n)&&(await this._removeSession(),await fa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(s,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,n))}async _updateUser(s,n={}){try{return await this._useSession(async o=>{const{data:l,error:d}=o;if(d)throw d;if(!l.session)throw new ma;const u=l.session;let m=null,g=null;this.flowType==="pkce"&&s.email!=null&&([m,g]=await On(this.storage,this.storageKey));const{data:f,error:y}=await bt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:m,code_challenge_method:g}),jwt:u.access_token,xform:ga});if(y)throw y;return u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(o){if(dt(o))return{data:{user:null},error:o};throw o}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new ma;const n=Date.now()/1e3;let o=n,l=!0,d=null;const{payload:u}=qu(s.access_token);if(u.exp&&(o=u.exp,l=o<=n),l){const{session:m,error:g}=await this._callRefreshToken(s.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:g}=await this._getUser(s.access_token);if(g)throw g;d={access_token:s.access_token,refresh_token:s.refresh_token,user:m.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(n){if(dt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async n=>{var o;if(!s){const{data:u,error:m}=n;if(m)throw m;s=(o=u.session)!==null&&o!==void 0?o:void 0}if(!s?.refresh_token)throw new ma;const{session:l,error:d}=await this._callRefreshToken(s.refresh_token);return d?{data:{user:null,session:null},error:d}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(dt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(s,n){try{if(!sr())throw new zl("No browser detected.");if(s.error||s.error_description||s.error_code)throw new zl(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _p("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new _p("No code detected.");const{data:D,error:M}=await this._exchangeCodeForSession(s.code);if(M)throw M;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:d,refresh_token:u,expires_in:m,expires_at:g,token_type:f}=s;if(!d||!m||!u||!f)throw new zl("No session defined in URL");const y=Math.round(Date.now()/1e3),b=parseInt(m);let v=y+b;g&&(v=parseInt(g));const N=v-y;N*1e3<=$n&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${N}s, should have been closer to ${b}s`);const w=v-b;y-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,y):y-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,y);const{data:S,error:_}=await this._getUser(d);if(_)throw _;const L={provider_token:o,provider_refresh_token:l,access_token:d,expires_in:b,expires_at:v,refresh_token:u,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:L,redirectType:s.type},error:null}}catch(o){if(dt(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const n=await Ia(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&n)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:l,error:d}=n;if(d)return{error:d};const u=(o=l.session)===null||o===void 0?void 0:o.access_token;if(u){const{error:m}=await this.admin.signOut(u,s);if(m&&!(pS(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return s!=="others"&&(await this._removeSession(),await fa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(s){const n=_S(),o={id:n,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(s){return await this._useSession(async n=>{var o,l;try{const{data:{session:d},error:u}=n;if(u)throw u;await((o=this.stateChangeEmitters.get(s))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",s,"session",d)}catch(d){await((l=this.stateChangeEmitters.get(s))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",d),console.error(d)}})}async resetPasswordForEmail(s,n={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await On(this.storage,this.storageKey,!0));try{return await bt(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(d){if(dt(d))return{data:null,error:d};throw d}}async getUserIdentities(){var s;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(s=n.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}}async linkIdentity(s){var n;try{const{data:o,error:l}=await this._useSession(async d=>{var u,m,g,f,y;const{data:b,error:v}=d;if(v)throw v;const N=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(u=s.options)===null||u===void 0?void 0:u.redirectTo,scopes:(m=s.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=s.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await bt(this.fetch,"GET",N,{headers:this.headers,jwt:(y=(f=b.session)===null||f===void 0?void 0:f.access_token)!==null&&y!==void 0?y:void 0})});if(l)throw l;return sr()&&!(!((n=s.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:s.provider,url:o?.url},error:null}}catch(o){if(dt(o))return{data:{provider:s.provider,url:null},error:o};throw o}}async unlinkIdentity(s){try{return await this._useSession(async n=>{var o,l;const{data:d,error:u}=n;if(u)throw u;return await bt(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(l=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(dt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(s){const n=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await TS(async l=>(l>0&&await DS(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await bt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:Mr})),(l,d)=>{const u=200*Math.pow(2,l);return d&&Hu(d)&&Date.now()+u-o<$n})}catch(o){if(this._debug(n,"error",o),dt(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(n,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",n,"url",o),sr()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:s,url:o},error:null}}async _recoverAndRefresh(){var s,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await Ia(this.storage,this.storageKey);if(l&&this.userStorage){let u=await Ia(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:l.user},await In(this.userStorage,this.storageKey+"-user",u)),l.user=(s=u?.user)!==null&&s!==void 0?s:Vu()}else if(l&&!l.user&&!l.user){const u=await Ia(this.storage,this.storageKey+"-user");u&&u?.user?(l.user=u.user,await fa(this.storage,this.storageKey+"-user"),await In(this.storage,this.storageKey,l)):l.user=Vu()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const d=((n=l.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Pu;if(this._debug(o,`session has${d?"":" not"} expired with margin of ${Pu}s`),d){if(this.autoRefreshToken&&l.refresh_token){const{error:u}=await this._callRefreshToken(l.refresh_token);u&&(console.error(u),Hu(u)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:m}=await this._getUser(l.access_token);!m&&u?.user?(l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(o,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(s){var n,o;if(!s)throw new ma;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new xc;const{data:d,error:u}=await this._refreshAccessToken(s);if(u)throw u;if(!d.session)throw new ma;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={session:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(l,"error",d),dt(d)){const u={session:null,error:d};return Hu(d)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(d),d}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(s,n,o=!0){const l=`#_notifyAllSubscribers(${s})`;this._debug(l,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:s,session:n});const d=[],u=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(s,n)}catch(g){d.push(g)}});if(await Promise.all(u),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(l,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const n=Object.assign({},s),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await In(this.userStorage,this.storageKey+"-user",{user:n.user});const l=Object.assign({},n);delete l.user;const d=Rp(l);await In(this.storage,this.storageKey,d)}else{const l=Rp(n);await In(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await fa(this.storage,this.storageKey),await fa(this.storage,this.storageKey+"-code-verifier"),await fa(this.storage,this.storageKey+"-user"),this.userStorage&&await fa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&sr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",s)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),$n);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-s)/$n);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${$n}ms, refresh threshold is ${ph} ticks`),l<=ph&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof ey)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const n=`#_onVisibilityChanged(${s})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,n,o){const l=[`provider=${encodeURIComponent(n)}`];if(o?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[d,u]=await On(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(u)}`});l.push(m.toString())}if(o?.queryParams){const d=new URLSearchParams(o.queryParams);l.push(d.toString())}return o?.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${s}?${l.join("&")}`}async _unenroll(s){try{return await this._useSession(async n=>{var o;const{data:l,error:d}=n;return d?{data:null,error:d}:await bt(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(dt(n))return{data:null,error:n};throw n}}async _enroll(s){try{return await this._useSession(async n=>{var o,l;const{data:d,error:u}=n;if(u)return{data:null,error:u};const m=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:{issuer:s.issuer}),{data:g,error:f}=await bt(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return f?{data:null,error:f}:(s.factorType==="totp"&&(!((l=g?.totp)===null||l===void 0)&&l.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(n){if(dt(n))return{data:null,error:n};throw n}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:l,error:d}=n;if(d)return{data:null,error:d};const{data:u,error:m}=await bt(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:{code:s.code,challenge_id:s.challengeId},headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:m})})}catch(n){if(dt(n))return{data:null,error:n};throw n}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:l,error:d}=n;return d?{data:null,error:d}:await bt(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:{channel:s.channel},headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(dt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(s){const{data:n,error:o}=await this._challenge({factorId:s.factorId});return o?{data:null,error:o}:await this._verify({factorId:s.factorId,challengeId:n.id,code:s.code})}async _listFactors(){const{data:{user:s},error:n}=await this.getUser();if(n)return{data:null,error:n};const o=s?.factors||[],l=o.filter(u=>u.factor_type==="totp"&&u.status==="verified"),d=o.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:o,totp:l,phone:d},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var n,o;const{data:{session:l},error:d}=s;if(d)return{data:null,error:d};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=qu(l.access_token);let m=null;u.aal&&(m=u.aal);let g=m;((o=(n=l.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(g="aal2");const y=u.amr||[];return{data:{currentLevel:m,nextLevel:g,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(s,n={keys:[]}){let o=n.keys.find(m=>m.kid===s);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(m=>m.kid===s),o&&this.jwks_cached_at+mS>l)return o;const{data:d,error:u}=await bt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=l,o=d.keys.find(m=>m.kid===s),!o)?null:o}async getClaims(s,n={}){try{let o=s;if(!o){const{data:N,error:w}=await this.getSession();if(w||!N.session)return{data:null,error:w};o=N.session.access_token}const{header:l,payload:d,signature:u,raw:{header:m,payload:g}}=qu(o);n?.allowExpired||$S(d.exp);const f=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!f){const{error:N}=await this.getUser(o);if(N)throw N;return{data:{claims:d,header:l,signature:u},error:null}}const y=IS(l.alg),b=await crypto.subtle.importKey("jwk",f,y,!0,["verify"]);if(!await crypto.subtle.verify(y,b,u,SS(`${m}.${g}`)))throw new bh("Invalid JWT signature");return{data:{claims:d,header:l,signature:u},error:null}}catch(o){if(dt(o))return{data:null,error:o};throw o}}}ci.nextInstanceID=0;const t4=ci;class s4 extends t4{constructor(s){super(s)}}var r4=function(a,s,n,o){function l(d){return d instanceof n?d:new n(function(u){u(d)})}return new(n||(n=Promise))(function(d,u){function m(y){try{f(o.next(y))}catch(b){u(b)}}function g(y){try{f(o.throw(y))}catch(b){u(b)}}function f(y){y.done?d(y.value):l(y.value).then(m,g)}f((o=o.apply(a,s||[])).next())})};class a4{constructor(s,n,o){var l,d,u;this.supabaseUrl=s,this.supabaseKey=n;const m=cS(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,f={db:ZN,realtime:tS,auth:Object.assign(Object.assign({},eS),{storageKey:g}),global:JN},y=lS(o??{},f);this.storageKey=(l=y.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(d=y.global.headers)!==null&&d!==void 0?d:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(b,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=y.auth)!==null&&u!==void 0?u:{},this.headers,y.global.fetch),this.fetch=nS(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new bN(new URL("rest/v1",m).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new KN(this.storageUrl.href,this.headers,this.fetch,o?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new cN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},o={}){return this.rest.rpc(s,n,o)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var s,n;return r4(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(n=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:o,storage:l,userStorage:d,storageKey:u,flowType:m,lock:g,debug:f},y,b){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new s4({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),y),storageKey:u,autoRefreshToken:s,persistSession:n,detectSessionInUrl:o,storage:l,userStorage:d,flowType:m,lock:g,debug:f,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new MN(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,o)=>{this._handleTokenChanged(n,"CLIENT",o?.access_token)})}_handleTokenChanged(s,n,o){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const n4=(a,s,n)=>new a4(a,s,n);function o4(){if(typeof window<"u"||typeof process>"u")return!1;const a=process.version;if(a==null)return!1;const s=a.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}o4()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const i4="https://nmarfwjjsmnnxjmcvubr.supabase.co",l4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5tYXJmd2pqc21ubnhqbWN2dWJyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3MjEyMTQsImV4cCI6MjA3MzI5NzIxNH0.SptKmkp2qsWK7AQnqzfOxNW4EO88G_UKqTcpZQhAEVg",Ir=n4(i4,l4),ty=x.createContext(void 0),c4=()=>{const a=x.useContext(ty);if(a===void 0)throw new Error("useSupabaseAuth must be used within a SupabaseAuthProvider");return a},d4=({children:a})=>{const[s,n]=x.useState(null),[o,l]=x.useState(null),[d,u]=x.useState(!0);x.useEffect(()=>{Ir.auth.getSession().then(({data:{session:y}})=>{l(y),n(y?.user??null),y?.access_token&&localStorage.setItem("token",y.access_token),u(!1)});const{data:{subscription:f}}=Ir.auth.onAuthStateChange((y,b)=>{l(b),n(b?.user??null),b?.access_token?localStorage.setItem("token",b.access_token):(y==="SIGNED_OUT"||y==="TOKEN_REFRESHED")&&localStorage.clear(),u(!1)});return()=>f.unsubscribe()},[]);const g={user:s,session:o,loading:d,signOut:async()=>{await Ir.auth.signOut()}};return t.jsx(ty.Provider,{value:g,children:a})},yc="http://localhost:1000",sy=async()=>{try{const a=localStorage.getItem("token");return(await Oe.get(`${yc}/api/v1/committees/all-committees`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(a){console.log("Failed to fetch committees:",a)}},u4=async(a,s,n)=>{try{const o=localStorage.getItem("token");return(await Oe.post(`${yc}/api/v1/committees/add-committee`,{abbr:a,committee:s,category:n},{headers:{Authorization:`Bearer ${o}`}})).data}catch(o){console.error("Failed to create committee:",o)}},h4=async(a,s,n,o)=>{try{const l=localStorage.getItem("token");return(await Oe.patch(`${yc}/api/v1/committees/update-committee/${a}`,{abbr:s,committee:n,category:o},{headers:{Authorization:`Bearer ${l}`}})).data}catch(l){console.error("Failed to update committee:",l)}},f4=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${yc}/api/v1/committees/delete-committee/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){console.error("Failed to delete committee:",s)}},wr="http://localhost:1000",ry=async a=>{try{const s=localStorage.getItem("token");return(await Oe.get(`${wr}/api/v1/registerations/get-registrations/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response.data.message)}},m4=async(a,s,n)=>{try{const o=localStorage.getItem("token"),l=localStorage.getItem("userId");return(await Oe.post(`${wr}/api/v1/registerations/event-registration-teacher/${l}`,{eventId:a,foodPreference:s,foodAllergies:n},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}})).data}catch(o){throw new Error(o.response.data.message)}},g4=async(a,s,n,o,l,d,u,m,g)=>{try{const f=localStorage.getItem("token"),y=localStorage.getItem("userId");return(await Oe.post(`${wr}/api/v1/registerations/event-registration-student/${y}`,{eventId:a,mun_experience:s,pref_committee_1_id:n,pref_committee_2_id:o,pref_committee_3_id:l,food_pref:d,food_allergies:u,emergency_name:m,emergency_phone:g},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`}})).data}catch(f){throw new Error(f.response.data.message)}},ay=async a=>{try{const s=localStorage.getItem("token"),n=localStorage.getItem("userId");return(await Oe.get(`${wr}/api/v1/registerations/get-registration-info-by-eventId-and-userId/${a}/${n}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response.data.message)}},ny=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${wr}/api/v1/registerations/delete-registration-by-registrationId/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to cancel registration")}},nc=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${wr}/api/v1/registerations/delete-delegate/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response.data.message)}},oi=async(a,s,n)=>{try{const o=localStorage.getItem("token");return(await Oe.post(`${wr}/api/v1/registerations/assign-delegate`,{delegateId:a,committeeId:s,countryId:n},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}})).data}catch(o){throw new Error(o.response?.data?.message||"Failed to assign delegate")}},oy=async a=>{try{const s=localStorage.getItem("token");return(await Oe.post(`${wr}/api/v1/registerations/unassign-delegate`,{delegateId:a},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to unassign delegate")}},iy=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.post(`${wr}/api/v1/registerations/toggle-delegate-flag`,{delegateId:a,flag:s},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to toggle delegate flag")}},p4=async(a,s)=>{try{const n=localStorage.getItem("token"),o=new FormData;return o.append("file",a),o.append("eventId",s),(await Oe.post(`${wr}/api/v1/registerations/upload-delegates`,o,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to upload delegates")}},x4="http://localhost:1000",y4=async()=>{try{const a=localStorage.getItem("token");return(await Oe.get(`${x4}/api/v1/countries/all-countries`,{headers:{Authorization:`Bearer ${a}`}})).data}catch(a){throw new Error(a.response.data.message)}},ly=x.createContext(void 0),b4=({children:a})=>{const{user:s,session:n,loading:o}=c4(),l=Ct(),[d,u]=x.useState(null),[m,g]=x.useState(!1),[f,y]=x.useState(!0),[b,v]=x.useState(!1),[N,w]=x.useState([]),[S,_]=x.useState([]),[L,D]=x.useState([]),[M,F]=x.useState([]),[B,q]=x.useState([]),[ee,le]=x.useState([]),[he,be]=x.useState([]),[Te,we]=x.useState([]),[fe,K]=x.useState([]),[ye,O]=x.useState([]),[H,se]=x.useState({eventsUpcoming:5,eventsCompleted:5,users:900,organisers:80,pendingApprovals:3,schools:70}),W=x.useCallback(async()=>{try{y(!0);const me=!!(s&&n?.access_token);if(v(me),s?.user_metadata?.role?u(s.user_metadata.role):u("student"),n?.access_token){const _e=await Cj();_e.success?w(_e.data):k.error(_e.message);const Ye=await Rj();_(Ye.data);const st=await hp();be(st.data)}}catch(me){let _e=localStorage.getItem("token");(b&&_e||me?.message?.includes("expired"))&&(localStorage.clear(),l("/login"),k.error("JWT token is expired. Please login again."))}finally{y(!1)}},[s,n,b]),A=x.useCallback(async()=>{try{const me=await Jj();me.success?D(me.data):k.error(me.message)}catch(me){let _e=localStorage.getItem("token");(b&&_e||me?.message?.includes("expired"))&&(localStorage.clear(),l("/login"),k.error("JWT token is expired. Please login again."))}},[b]),Q=x.useCallback(async()=>{try{const me=await $j();me.success?F(me.data):k.error(me.message)}catch(me){let _e=localStorage.getItem("token");(b&&_e||me?.message?.includes("expired"))&&(localStorage.clear(),l("/login"),k.error("JWT token is expired. Please login again."))}},[b]),ne=x.useCallback(async()=>{try{const me=await Fj();me.success?q(me.data):k.error(me.message)}catch(me){let _e=localStorage.getItem("token");(b&&_e||me?.message?.includes("expired"))&&(localStorage.clear(),l("/login"),k.error("JWT token is expired. Please login again."))}},[b]),ae=x.useCallback(async()=>{try{const me=await Gj();me.success?le(me.data):k.error(me.message)}catch(me){let _e=localStorage.getItem("token");(b&&_e||me?.message?.includes("expired"))&&(localStorage.clear(),l("/login"),k.error("JWT token is expired. Please login again."))}},[b]),ge=x.useCallback(async()=>{try{const me=await hp();me.success?be(me.data):k.error(me.message),be(me.data||[])}catch(me){let _e=localStorage.getItem("token");(b&&_e||me?.message?.includes("expired"))&&(localStorage.clear(),l("/login"),k.error("JWT token is expired. Please login again."))}},[b]),ve=x.useCallback(async()=>{try{const me=await sy();me.success?we(me.data):k.error(me.message)}catch(me){let _e=localStorage.getItem("token");(b&&_e||me?.message?.includes("expired"))&&(localStorage.clear(),l("/login"),k.error("JWT token is expired. Please login again."))}},[b]),U=x.useCallback(async me=>{try{if(!me){console.log("No eventId provided to refreshRegistrationsData");return}const _e=await ry(me);_e.success?O(_e.data||[]):(console.log("API response not successful:",_e.message),k.error(_e.message))}catch(_e){console.log("Error in refreshRegistrationsData:",_e);let Ye=localStorage.getItem("token");(b&&Ye||_e?.message?.includes("expired"))&&(localStorage.clear(),l("/login"),k.error("JWT token is expired. Please login again."))}},[b]),Ee=x.useCallback(async()=>{try{const me=await y4();me.success?K(me.data):k.error(me.message)}catch(me){let _e=localStorage.getItem("token");(b&&_e||me?.message?.includes("expired"))&&(localStorage.clear(),l("/login"),k.error("JWT token is expired. Please login again."))}},[b]),Ce=me=>{se(_e=>({..._e,...me}))};x.useEffect(()=>{const me=localStorage.getItem("token");!o&&me&&(W(),A(),ge(),ne(),Q(),ae(),ve(),Ee())},[s,n,o,W,A,ge,ne,Q,ae]);const Me={userType:d,isOrganiser:m,isLoading:f,loginStatus:b,dashboardStats:H,allUsers:N,allEvents:L,allLocalities:M,allSchools:B,allAreas:ee,allLeadershipRoles:he,allCommittees:Te,allRegistrations:ye,setAllEvents:D,setAllLocalities:F,setAllSchools:q,setAllAreas:le,setAllLeadershipRoles:be,setAllUsers:w,setAllOrganisers:_,setAllRegistrations:O,allOrganisers:S,setUserType:u,setIsOrganiser:g,setLoginStatus:v,updateDashboardStats:Ce,refreshUserData:W,refreshEventsData:A,refreshLocalitiesData:Q,refreshSchoolsData:ne,refreshAreasData:ae,refreshLeadershipRolesData:ge,refreshCommitteesData:ve,refreshRegistrationsData:U,allCountries:fe,setAllCountries:K,refreshCountriesData:Ee};return t.jsx(ly.Provider,{value:Me,children:a})},Ot=()=>{const a=x.useContext(ly);return a===void 0?(console.log("useApp - Context is undefined, this should not happen if component is wrapped in AppProvider"),console.log("Stack trace:",new Error().stack),{userType:null,isOrganiser:!1,isLoading:!0,loginStatus:!1,allUsers:[],allOrganisers:[],allEvents:[],allLocalities:[],allSchools:[],allAreas:[],allLeadershipRoles:[],allCommittees:[],allRegistrations:[],dashboardStats:{eventsUpcoming:0,eventsCompleted:0,users:0,organisers:0,pendingApprovals:0,schools:0},setUserType:()=>{},setIsOrganiser:()=>{},setLoginStatus:()=>{},updateDashboardStats:()=>{},refreshUserData:async()=>{},setAllUsers:()=>{},setAllOrganisers:()=>{},setAllEvents:()=>{},setAllLocalities:()=>{},setAllSchools:()=>{},setAllAreas:()=>{},setAllLeadershipRoles:()=>{},refreshEventsData:async()=>{},refreshLocalitiesData:async()=>{},refreshSchoolsData:async()=>{},refreshAreasData:async()=>{},refreshLeadershipRolesData:async()=>{},refreshCommitteesData:async()=>{},setAllRegistrations:()=>{},refreshRegistrationsData:async s=>{},allCountries:[],setAllCountries:()=>{},refreshCountriesData:async()=>{}}):a},br=Object.create(null);br.open="0";br.close="1";br.ping="2";br.pong="3";br.message="4";br.upgrade="5";br.noop="6";const Xl=Object.create(null);Object.keys(br).forEach(a=>{Xl[br[a]]=a});const vh={type:"error",data:"parser error"},cy=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",dy=typeof ArrayBuffer=="function",uy=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,Gh=({type:a,data:s},n,o)=>cy&&s instanceof Blob?n?o(s):Bp(s,o):dy&&(s instanceof ArrayBuffer||uy(s))?n?o(s):Bp(new Blob([s]),o):o(br[a]+(s||"")),Bp=(a,s)=>{const n=new FileReader;return n.onload=function(){const o=n.result.split(",")[1];s("b"+(o||""))},n.readAsDataURL(a)};function $p(a){return a instanceof Uint8Array?a:a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}let Gu;function v4(a,s){if(cy&&a.data instanceof Blob)return a.data.arrayBuffer().then($p).then(s);if(dy&&(a.data instanceof ArrayBuffer||uy(a.data)))return s($p(a.data));Gh(a,!1,n=>{Gu||(Gu=new TextEncoder),s(Gu.encode(n))})}const Ip="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ti=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let a=0;a<Ip.length;a++)ti[Ip.charCodeAt(a)]=a;const w4=a=>{let s=a.length*.75,n=a.length,o,l=0,d,u,m,g;a[a.length-1]==="="&&(s--,a[a.length-2]==="="&&s--);const f=new ArrayBuffer(s),y=new Uint8Array(f);for(o=0;o<n;o+=4)d=ti[a.charCodeAt(o)],u=ti[a.charCodeAt(o+1)],m=ti[a.charCodeAt(o+2)],g=ti[a.charCodeAt(o+3)],y[l++]=d<<2|u>>4,y[l++]=(u&15)<<4|m>>2,y[l++]=(m&3)<<6|g&63;return f},j4=typeof ArrayBuffer=="function",Wh=(a,s)=>{if(typeof a!="string")return{type:"message",data:hy(a,s)};const n=a.charAt(0);return n==="b"?{type:"message",data:N4(a.substring(1),s)}:Xl[n]?a.length>1?{type:Xl[n],data:a.substring(1)}:{type:Xl[n]}:vh},N4=(a,s)=>{if(j4){const n=w4(a);return hy(n,s)}else return{base64:!0,data:a}},hy=(a,s)=>{switch(s){case"blob":return a instanceof Blob?a:new Blob([a]);case"arraybuffer":default:return a instanceof ArrayBuffer?a:a.buffer}},fy="",S4=(a,s)=>{const n=a.length,o=new Array(n);let l=0;a.forEach((d,u)=>{Gh(d,!1,m=>{o[u]=m,++l===n&&s(o.join(fy))})})},C4=(a,s)=>{const n=a.split(fy),o=[];for(let l=0;l<n.length;l++){const d=Wh(n[l],s);if(o.push(d),d.type==="error")break}return o};function k4(){return new TransformStream({transform(a,s){v4(a,n=>{const o=n.length;let l;if(o<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,o);else if(o<65536){l=new Uint8Array(3);const d=new DataView(l.buffer);d.setUint8(0,126),d.setUint16(1,o)}else{l=new Uint8Array(9);const d=new DataView(l.buffer);d.setUint8(0,127),d.setBigUint64(1,BigInt(o))}a.data&&typeof a.data!="string"&&(l[0]|=128),s.enqueue(l),s.enqueue(n)})}})}let Wu;function Fl(a){return a.reduce((s,n)=>s+n.length,0)}function Pl(a,s){if(a[0].length===s)return a.shift();const n=new Uint8Array(s);let o=0;for(let l=0;l<s;l++)n[l]=a[0][o++],o===a[0].length&&(a.shift(),o=0);return a.length&&o<a[0].length&&(a[0]=a[0].slice(o)),n}function _4(a,s){Wu||(Wu=new TextDecoder);const n=[];let o=0,l=-1,d=!1;return new TransformStream({transform(u,m){for(n.push(u);;){if(o===0){if(Fl(n)<1)break;const g=Pl(n,1);d=(g[0]&128)===128,l=g[0]&127,l<126?o=3:l===126?o=1:o=2}else if(o===1){if(Fl(n)<2)break;const g=Pl(n,2);l=new DataView(g.buffer,g.byteOffset,g.length).getUint16(0),o=3}else if(o===2){if(Fl(n)<8)break;const g=Pl(n,8),f=new DataView(g.buffer,g.byteOffset,g.length),y=f.getUint32(0);if(y>Math.pow(2,21)-1){m.enqueue(vh);break}l=y*Math.pow(2,32)+f.getUint32(4),o=3}else{if(Fl(n)<l)break;const g=Pl(n,l);m.enqueue(Wh(d?g:Wu.decode(g),s)),o=0}if(l===0||l>a){m.enqueue(vh);break}}}})}const my=4;function es(a){if(a)return E4(a)}function E4(a){for(var s in es.prototype)a[s]=es.prototype[s];return a}es.prototype.on=es.prototype.addEventListener=function(a,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(s),this};es.prototype.once=function(a,s){function n(){this.off(a,n),s.apply(this,arguments)}return n.fn=s,this.on(a,n),this};es.prototype.off=es.prototype.removeListener=es.prototype.removeAllListeners=es.prototype.removeEventListener=function(a,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+a];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var o,l=0;l<n.length;l++)if(o=n[l],o===s||o.fn===s){n.splice(l,1);break}return n.length===0&&delete this._callbacks["$"+a],this};es.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),n=this._callbacks["$"+a],o=1;o<arguments.length;o++)s[o-1]=arguments[o];if(n){n=n.slice(0);for(var o=0,l=n.length;o<l;++o)n[o].apply(this,s)}return this};es.prototype.emitReserved=es.prototype.emit;es.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]};es.prototype.hasListeners=function(a){return!!this.listeners(a).length};const bc=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,n)=>n(s,0),Qs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),A4="arraybuffer";function gy(a,...s){return s.reduce((n,o)=>(a.hasOwnProperty(o)&&(n[o]=a[o]),n),{})}const D4=Qs.setTimeout,T4=Qs.clearTimeout;function vc(a,s){s.useNativeTimers?(a.setTimeoutFn=D4.bind(Qs),a.clearTimeoutFn=T4.bind(Qs)):(a.setTimeoutFn=Qs.setTimeout.bind(Qs),a.clearTimeoutFn=Qs.clearTimeout.bind(Qs))}const R4=1.33;function L4(a){return typeof a=="string"?O4(a):Math.ceil((a.byteLength||a.size)*R4)}function O4(a){let s=0,n=0;for(let o=0,l=a.length;o<l;o++)s=a.charCodeAt(o),s<128?n+=1:s<2048?n+=2:s<55296||s>=57344?n+=3:(o++,n+=4);return n}function py(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function U4(a){let s="";for(let n in a)a.hasOwnProperty(n)&&(s.length&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(a[n]));return s}function M4(a){let s={},n=a.split("&");for(let o=0,l=n.length;o<l;o++){let d=n[o].split("=");s[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return s}class B4 extends Error{constructor(s,n,o){super(s),this.description=n,this.context=o,this.type="TransportError"}}class Kh extends es{constructor(s){super(),this.writable=!1,vc(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,n,o){return super.emitReserved("error",new B4(s,n,o)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const n=Wh(s,this.socket.binaryType);this.onPacket(n)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,n={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const n=U4(s);return n.length?"?"+n:""}}class $4 extends Kh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const n=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let o=0;this._polling&&(o++,this.once("pollComplete",function(){--o||n()})),this.writable||(o++,this.once("drain",function(){--o||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const n=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(o)};C4(s,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,S4(s,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=py()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(s,n)}}let xy=!1;try{xy=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const I4=xy;function z4(){}class F4 extends $4{constructor(s){if(super(s),typeof location<"u"){const n=location.protocol==="https:";let o=location.port;o||(o=n?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||o!==s.port}}doWrite(s,n){const o=this.request({method:"POST",data:s});o.on("success",n),o.on("error",(l,d)=>{this.onError("xhr post error",l,d)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(n,o)=>{this.onError("xhr poll error",n,o)}),this.pollXhr=s}}class yr extends es{constructor(s,n,o){super(),this.createRequest=s,vc(this,o),this._opts=o,this._method=o.method||"GET",this._uri=n,this._data=o.data!==void 0?o.data:null,this._create()}_create(){var s;const n=gy(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const o=this._xhr=this.createRequest(n);try{o.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){o.setDisableHeaderCheck&&o.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&o.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{o.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{o.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(o),"withCredentials"in o&&(o.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(o.timeout=this._opts.requestTimeout),o.onreadystatechange=()=>{var l;o.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(o.getResponseHeader("set-cookie"))),o.readyState===4&&(o.status===200||o.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof o.status=="number"?o.status:0)},0))},o.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=yr.requestsCount++,yr.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=z4,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete yr.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}yr.requestsCount=0;yr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",zp);else if(typeof addEventListener=="function"){const a="onpagehide"in Qs?"pagehide":"unload";addEventListener(a,zp,!1)}}function zp(){for(let a in yr.requests)yr.requests.hasOwnProperty(a)&&yr.requests[a].abort()}const P4=(function(){const a=yy({xdomain:!1});return a&&a.responseType!==null})();class H4 extends F4{constructor(s){super(s);const n=s&&s.forceBase64;this.supportsBinary=P4&&!n}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new yr(yy,this.uri(),s)}}function yy(a){const s=a.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||I4))return new XMLHttpRequest}catch{}if(!s)try{return new Qs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const by=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class q4 extends Kh{get name(){return"websocket"}doOpen(){const s=this.uri(),n=this.opts.protocols,o=by?{}:gy(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,n,o)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let n=0;n<s.length;n++){const o=s[n],l=n===s.length-1;Gh(o,this.supportsBinary,d=>{try{this.doWrite(o,d)}catch{}l&&bc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=py()),this.supportsBinary||(n.b64=1),this.createUri(s,n)}}const Ku=Qs.WebSocket||Qs.MozWebSocket;class V4 extends q4{createSocket(s,n,o){return by?new Ku(s,n,o):n?new Ku(s,n):new Ku(s)}doWrite(s,n){this.ws.send(n)}}class Y4 extends Kh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const n=_4(Number.MAX_SAFE_INTEGER,this.socket.binaryType),o=s.readable.pipeThrough(n).getReader(),l=k4();l.readable.pipeTo(s.writable),this._writer=l.writable.getWriter();const d=()=>{o.read().then(({done:m,value:g})=>{m||(this.onPacket(g),d())}).catch(m=>{})};d();const u={type:"open"};this.query.sid&&(u.data=`{"sid":"${this.query.sid}"}`),this._writer.write(u).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let n=0;n<s.length;n++){const o=s[n],l=n===s.length-1;this._writer.write(o).then(()=>{l&&bc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const G4={websocket:V4,webtransport:Y4,polling:H4},W4=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,K4=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function wh(a){if(a.length>8e3)throw"URI too long";const s=a,n=a.indexOf("["),o=a.indexOf("]");n!=-1&&o!=-1&&(a=a.substring(0,n)+a.substring(n,o).replace(/:/g,";")+a.substring(o,a.length));let l=W4.exec(a||""),d={},u=14;for(;u--;)d[K4[u]]=l[u]||"";return n!=-1&&o!=-1&&(d.source=s,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),d.pathNames=Q4(d,d.path),d.queryKey=X4(d,d.query),d}function Q4(a,s){const n=/\/{2,9}/g,o=s.replace(n,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&o.splice(0,1),s.slice(-1)=="/"&&o.splice(o.length-1,1),o}function X4(a,s){const n={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,l,d){l&&(n[l]=d)}),n}const jh=typeof addEventListener=="function"&&typeof removeEventListener=="function",Jl=[];jh&&addEventListener("offline",()=>{Jl.forEach(a=>a())},!1);class pa extends es{constructor(s,n){if(super(),this.binaryType=A4,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(n=s,s=null),s){const o=wh(s);n.hostname=o.host,n.secure=o.protocol==="https"||o.protocol==="wss",n.port=o.port,o.query&&(n.query=o.query)}else n.host&&(n.hostname=wh(n.host).host);vc(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(o=>{const l=o.prototype.name;this.transports.push(l),this._transportsByName[l]=o}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=M4(this.opts.query)),jh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Jl.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const n=Object.assign({},this.opts.query);n.EIO=my,n.transport=s,this.id&&(n.sid=this.id);const o=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](o)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&pa.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(s);n.open(),this.setTransport(n)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",pa.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=s.data,this._onError(n);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let o=0;o<this.writeBuffer.length;o++){const l=this.writeBuffer[o].data;if(l&&(n+=L4(l)),o>0&&n>this._maxPayload)return this.writeBuffer.slice(0,o);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,bc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,n,o){return this._sendPacket("message",s,n,o),this}send(s,n,o){return this._sendPacket("message",s,n,o),this}_sendPacket(s,n,o,l){if(typeof n=="function"&&(l=n,n=void 0),typeof o=="function"&&(l=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;const d={type:s,data:n,options:o};this.emitReserved("packetCreate",d),this.writeBuffer.push(d),l&&this.once("flush",l),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),s()},o=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():s()}):this.upgrading?o():s()),this}_onError(s){if(pa.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),jh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const o=Jl.indexOf(this._offlineEventListener);o!==-1&&Jl.splice(o,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,n),this.writeBuffer=[],this._prevBufferLen=0}}}pa.protocol=my;class J4 extends pa{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let n=this.createTransport(s),o=!1;pa.priorWebsocketSuccess=!1;const l=()=>{o||(n.send([{type:"ping",data:"probe"}]),n.once("packet",b=>{if(!o)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;pa.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{o||this.readyState!=="closed"&&(y(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=n.name,this.emitReserved("upgradeError",v)}}))};function d(){o||(o=!0,y(),n.close(),n=null)}const u=b=>{const v=new Error("probe error: "+b);v.transport=n.name,d(),this.emitReserved("upgradeError",v)};function m(){u("transport closed")}function g(){u("socket closed")}function f(b){n&&b.name!==n.name&&d()}const y=()=>{n.removeListener("open",l),n.removeListener("error",u),n.removeListener("close",m),this.off("close",g),this.off("upgrading",f)};n.once("open",l),n.once("error",u),n.once("close",m),this.once("close",g),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{o||n.open()},200):n.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const n=[];for(let o=0;o<s.length;o++)~this.transports.indexOf(s[o])&&n.push(s[o]);return n}}let Z4=class extends J4{constructor(s,n={}){const o=typeof s=="object"?s:n;(!o.transports||o.transports&&typeof o.transports[0]=="string")&&(o.transports=(o.transports||["polling","websocket","webtransport"]).map(l=>G4[l]).filter(l=>!!l)),super(s,o)}};function eC(a,s="",n){let o=a;n=n||typeof location<"u"&&location,a==null&&(a=n.protocol+"//"+n.host),typeof a=="string"&&(a.charAt(0)==="/"&&(a.charAt(1)==="/"?a=n.protocol+a:a=n.host+a),/^(https?|wss?):\/\//.test(a)||(typeof n<"u"?a=n.protocol+"//"+a:a="https://"+a),o=wh(a)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";const d=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+d+":"+o.port+s,o.href=o.protocol+"://"+d+(n&&n.port===o.port?"":":"+o.port),o}const tC=typeof ArrayBuffer=="function",sC=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,vy=Object.prototype.toString,rC=typeof Blob=="function"||typeof Blob<"u"&&vy.call(Blob)==="[object BlobConstructor]",aC=typeof File=="function"||typeof File<"u"&&vy.call(File)==="[object FileConstructor]";function Qh(a){return tC&&(a instanceof ArrayBuffer||sC(a))||rC&&a instanceof Blob||aC&&a instanceof File}function Zl(a,s){if(!a||typeof a!="object")return!1;if(Array.isArray(a)){for(let n=0,o=a.length;n<o;n++)if(Zl(a[n]))return!0;return!1}if(Qh(a))return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return Zl(a.toJSON(),!0);for(const n in a)if(Object.prototype.hasOwnProperty.call(a,n)&&Zl(a[n]))return!0;return!1}function nC(a){const s=[],n=a.data,o=a;return o.data=Nh(n,s),o.attachments=s.length,{packet:o,buffers:s}}function Nh(a,s){if(!a)return a;if(Qh(a)){const n={_placeholder:!0,num:s.length};return s.push(a),n}else if(Array.isArray(a)){const n=new Array(a.length);for(let o=0;o<a.length;o++)n[o]=Nh(a[o],s);return n}else if(typeof a=="object"&&!(a instanceof Date)){const n={};for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=Nh(a[o],s));return n}return a}function oC(a,s){return a.data=Sh(a.data,s),delete a.attachments,a}function Sh(a,s){if(!a)return a;if(a&&a._placeholder===!0){if(typeof a.num=="number"&&a.num>=0&&a.num<s.length)return s[a.num];throw new Error("illegal attachments")}else if(Array.isArray(a))for(let n=0;n<a.length;n++)a[n]=Sh(a[n],s);else if(typeof a=="object")for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&(a[n]=Sh(a[n],s));return a}const iC=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],lC=5;var wt;(function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"})(wt||(wt={}));class cC{constructor(s){this.replacer=s}encode(s){return(s.type===wt.EVENT||s.type===wt.ACK)&&Zl(s)?this.encodeAsBinary({type:s.type===wt.EVENT?wt.BINARY_EVENT:wt.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let n=""+s.type;return(s.type===wt.BINARY_EVENT||s.type===wt.BINARY_ACK)&&(n+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(n+=s.nsp+","),s.id!=null&&(n+=s.id),s.data!=null&&(n+=JSON.stringify(s.data,this.replacer)),n}encodeAsBinary(s){const n=nC(s),o=this.encodeAsString(n.packet),l=n.buffers;return l.unshift(o),l}}function Fp(a){return Object.prototype.toString.call(a)==="[object Object]"}class Xh extends es{constructor(s){super(),this.reviver=s}add(s){let n;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(s);const o=n.type===wt.BINARY_EVENT;o||n.type===wt.BINARY_ACK?(n.type=o?wt.EVENT:wt.ACK,this.reconstructor=new dC(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Qh(s)||s.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(s),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let n=0;const o={type:Number(s.charAt(0))};if(wt[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===wt.BINARY_EVENT||o.type===wt.BINARY_ACK){const d=n+1;for(;s.charAt(++n)!=="-"&&n!=s.length;);const u=s.substring(d,n);if(u!=Number(u)||s.charAt(n)!=="-")throw new Error("Illegal attachments");o.attachments=Number(u)}if(s.charAt(n+1)==="/"){const d=n+1;for(;++n&&!(s.charAt(n)===","||n===s.length););o.nsp=s.substring(d,n)}else o.nsp="/";const l=s.charAt(n+1);if(l!==""&&Number(l)==l){const d=n+1;for(;++n;){const u=s.charAt(n);if(u==null||Number(u)!=u){--n;break}if(n===s.length)break}o.id=Number(s.substring(d,n+1))}if(s.charAt(++n)){const d=this.tryParse(s.substr(n));if(Xh.isPayloadValid(o.type,d))o.data=d;else throw new Error("invalid payload")}return o}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,n){switch(s){case wt.CONNECT:return Fp(n);case wt.DISCONNECT:return n===void 0;case wt.CONNECT_ERROR:return typeof n=="string"||Fp(n);case wt.EVENT:case wt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&iC.indexOf(n[0])===-1);case wt.ACK:case wt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class dC{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const n=oC(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const uC=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Xh,Encoder:cC,get PacketType(){return wt},protocol:lC},Symbol.toStringTag,{value:"Module"}));function ar(a,s,n){return a.on(s,n),function(){a.off(s,n)}}const hC=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class wy extends es{constructor(s,n,o){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=n,o&&o.auth&&(this.auth=o.auth),this._opts=Object.assign({},o),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[ar(s,"open",this.onopen.bind(this)),ar(s,"packet",this.onpacket.bind(this)),ar(s,"error",this.onerror.bind(this)),ar(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...n){var o,l,d;if(hC.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(n.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const u={type:wt.EVENT,data:n};if(u.options={},u.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const y=this.ids++,b=n.pop();this._registerAckCallback(y,b),u.id=y}const m=(l=(o=this.io.engine)===null||o===void 0?void 0:o.transport)===null||l===void 0?void 0:l.writable,g=this.connected&&!(!((d=this.io.engine)===null||d===void 0)&&d._hasPingExpired());return this.flags.volatile&&!m||(g?(this.notifyOutgoingListeners(u),this.packet(u)):this.sendBuffer.push(u)),this.flags={},this}_registerAckCallback(s,n){var o;const l=(o=this.flags.timeout)!==null&&o!==void 0?o:this._opts.ackTimeout;if(l===void 0){this.acks[s]=n;return}const d=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let m=0;m<this.sendBuffer.length;m++)this.sendBuffer[m].id===s&&this.sendBuffer.splice(m,1);n.call(this,new Error("operation has timed out"))},l),u=(...m)=>{this.io.clearTimeoutFn(d),n.apply(this,m)};u.withError=!0,this.acks[s]=u}emitWithAck(s,...n){return new Promise((o,l)=>{const d=(u,m)=>u?l(u):o(m);d.withError=!0,n.push(d),this.emit(s,...n)})}_addToQueue(s){let n;typeof s[s.length-1]=="function"&&(n=s.pop());const o={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((l,...d)=>o!==this._queue[0]?void 0:(l!==null?o.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(l)):(this._queue.shift(),n&&n(null,...d)),o.pending=!1,this._drainQueue())),this._queue.push(o),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!s||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:wt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(o=>String(o.id)===s)){const o=this.acks[s];delete this.acks[s],o.withError&&o.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case wt.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case wt.EVENT:case wt.BINARY_EVENT:this.onevent(s);break;case wt.ACK:case wt.BINARY_ACK:this.onack(s);break;case wt.DISCONNECT:this.ondisconnect();break;case wt.CONNECT_ERROR:this.destroy();const o=new Error(s.data.message);o.data=s.data.data,this.emitReserved("connect_error",o);break}}onevent(s){const n=s.data||[];s.id!=null&&n.push(this.ack(s.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const o of n)o.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const n=this;let o=!1;return function(...l){o||(o=!0,n.packet({type:wt.ACK,id:s,data:l}))}}onack(s){const n=this.acks[s.id];typeof n=="function"&&(delete this.acks[s.id],n.withError&&s.data.unshift(null),n.apply(this,s.data))}onconnect(s,n){this.id=s,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:wt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const n=this._anyListeners;for(let o=0;o<n.length;o++)if(s===n[o])return n.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const n=this._anyOutgoingListeners;for(let o=0;o<n.length;o++)if(s===n[o])return n.splice(o,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const o of n)o.apply(this,s.data)}}}function Jn(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}Jn.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),n=Math.floor(s*this.jitter*a);a=(Math.floor(s*10)&1)==0?a-n:a+n}return Math.min(a,this.max)|0};Jn.prototype.reset=function(){this.attempts=0};Jn.prototype.setMin=function(a){this.ms=a};Jn.prototype.setMax=function(a){this.max=a};Jn.prototype.setJitter=function(a){this.jitter=a};class Ch extends es{constructor(s,n){var o;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(n=s,s=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,vc(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((o=n.randomizationFactor)!==null&&o!==void 0?o:.5),this.backoff=new Jn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=s;const l=n.parser||uC;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var n;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(n=this.backoff)===null||n===void 0||n.setMin(s),this)}randomizationFactor(s){var n;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(n=this.backoff)===null||n===void 0||n.setJitter(s),this)}reconnectionDelayMax(s){var n;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(n=this.backoff)===null||n===void 0||n.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new Z4(this.uri,this.opts);const n=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;const l=ar(n,"open",function(){o.onopen(),s&&s()}),d=m=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",m),s?s(m):this.maybeReconnectOnOpen()},u=ar(n,"error",d);if(this._timeout!==!1){const m=this._timeout,g=this.setTimeoutFn(()=>{l(),d(new Error("timeout")),n.close()},m);this.opts.autoUnref&&g.unref(),this.subs.push(()=>{this.clearTimeoutFn(g)})}return this.subs.push(l),this.subs.push(u),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(ar(s,"ping",this.onping.bind(this)),ar(s,"data",this.ondata.bind(this)),ar(s,"error",this.onerror.bind(this)),ar(s,"close",this.onclose.bind(this)),ar(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(n){this.onclose("parse error",n)}}ondecoded(s){bc(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,n){let o=this.nsps[s];return o?this._autoConnect&&!o.active&&o.connect():(o=new wy(this,s,n),this.nsps[s]=o),o}_destroy(s){const n=Object.keys(this.nsps);for(const o of n)if(this.nsps[o].active)return;this._close()}_packet(s){const n=this.encoder.encode(s);for(let o=0;o<n.length;o++)this.engine.write(n[o],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,n){var o;this.cleanup(),(o=this.engine)===null||o===void 0||o.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const o=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(l=>{l?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",l)):s.onreconnect()}))},n);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const Zo={};function ec(a,s){typeof a=="object"&&(s=a,a=void 0),s=s||{};const n=eC(a,s.path||"/socket.io"),o=n.source,l=n.id,d=n.path,u=Zo[l]&&d in Zo[l].nsps,m=s.forceNew||s["force new connection"]||s.multiplex===!1||u;let g;return m?g=new Ch(o,s):(Zo[l]||(Zo[l]=new Ch(o,s)),g=Zo[l]),n.query&&!s.query&&(s.query=n.queryKey),g.socket(n.path,s)}Object.assign(ec,{Manager:Ch,Socket:wy,io:ec,connect:ec});class fC{socket=null;backendUrl;constructor(){this.backendUrl="http://localhost:1000",console.log("🌐 Backend URL configured:",this.backendUrl)}connect(){return this.socket||(console.log("🔌 Connecting to socket server:",this.backendUrl),this.socket=ec(this.backendUrl,{transports:["websocket","polling"],autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}),this.socket.on("connect",()=>{console.log("✅ Connected to server:",this.socket?.id),console.log("📡 Socket transport:",this.socket?.io.engine.transport.name)}),this.socket.on("disconnect",s=>{console.log("❌ Disconnected from server:",s)}),this.socket.on("connect_error",s=>{console.error("🚨 Connection error:",s)}),this.socket.on("reconnect",s=>{console.log("🔄 Reconnected after",s,"attempts")}),this.socket.on("reconnect_error",s=>{console.error("🚨 Reconnection error:",s)}),this.socket.on("reconnect_failed",()=>{console.error("🚨 Reconnection failed - giving up")})),this.socket}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}getSocket(){return this.socket}isConnected(){return this.socket?.connected||!1}}const mC=new fC,jy=x.createContext(void 0),gC=({children:a})=>{const[s,n]=x.useState(!1),[o,l]=x.useState([]),[d,u]=x.useState(0),m=()=>(u(v=>v+1),`${Date.now()}_${d}`),g=(v,N)=>N.some(w=>w.message===v.message&&w.eventId===v.eventId&&Math.abs(new Date(w.timestamp).getTime()-new Date(v.timestamp).getTime())<1e3);x.useEffect(()=>{const v=mC.connect();return n(v.connected),v.on("connect",()=>{n(!0),console.log("✅ Socket connected successfully");const N=localStorage.getItem("token"),w=localStorage.getItem("userId");N&&(w?(v.emit("join_user_room",w),console.log(`🔗 Emitting join_user_room for user: ${w}`),console.log(`🔗 Socket ID: ${v.id}`)):console.log("⚠️ No userId found in localStorage - cannot join user room"))}),v.on("disconnect",()=>{n(!1),console.log("❌ Socket disconnected")}),v.on("event_created",N=>{console.log("🔔 Event created notification received:",N),l(w=>{if(g(N,w))return console.log("⚠️ Duplicate event created notification ignored"),w;const S={id:m(),...N,read:!1};return console.log("✅ Event created notification processed"),[S,...w]})}),v.on("event_status_updated",N=>{console.log("🔔 Event status updated notification received:",N),l(w=>{if(g(N,w))return console.log("⚠️ Duplicate event status notification ignored"),w;const S={id:m(),...N,read:!1};return console.log("✅ Event status updated notification processed"),[S,...w]})}),v.on("event_deleted",N=>{console.log("🔔 Event deleted notification received:",N),l(w=>{if(g(N,w))return console.log("⚠️ Duplicate event deleted notification ignored"),w;const S={id:m(),...N,read:!1};return console.log("✅ Event deleted notification processed"),[S,...w]})}),v.on("event_updated",N=>{console.log("🔔 Event updated notification received (general):",N),l(w=>{if(g(N,w))return console.log("⚠️ Duplicate event updated notification ignored"),w;const S={id:m(),...N,read:!1};return console.log("✅ Event updated notification processed"),[S,...w]})}),v.on("user_status_updated",N=>{console.log("🔔 User status notification received:",N),l(w=>{if(g(N,w))return console.log("⚠️ Duplicate user status notification ignored"),w;const S={id:m(),...N,read:!1};return console.log("✅ User status notification processed"),[S,...w]})}),v.on("event_updated_for_registered_users",N=>{console.log("🔔 Targeted event update notification received:",N),l(w=>{if(g(N,w))return console.log("⚠️ Duplicate targeted event update notification ignored"),w;const S={id:m(),...N,read:!1};return console.log("✅ Targeted event update notification processed"),console.log("📊 Total notifications after adding:",w.length+1),[S,...w]})}),v.on("leadership_role_created",N=>{console.log("🔔 Leadership role created notification received:",N);const w=localStorage.getItem("userId");if(N.targetUserId&&N.targetUserId!==w){console.log("⚠️ Leadership role notification not for current user, ignoring");return}l(S=>{if(g(N,S))return console.log("⚠️ Duplicate leadership role created notification ignored"),S;const _={id:m(),...N,read:!1};return console.log("✅ Leadership role created notification processed"),[_,...S]})}),v.on("leadership_role_updated",N=>{console.log("🔔 Leadership role updated notification received:",N);const w=localStorage.getItem("userId");if(N.targetUserId&&N.targetUserId!==w){console.log("⚠️ Leadership role update notification not for current user, ignoring");return}l(S=>{if(g(N,S))return console.log("⚠️ Duplicate leadership role updated notification ignored"),S;const _={id:m(),...N,read:!1};return console.log("✅ Leadership role updated notification processed"),[_,...S]})}),v.on("leadership_role_deleted",N=>{console.log("🔔 Leadership role deleted notification received:",N);const w=localStorage.getItem("userId");if(N.targetUserId&&N.targetUserId!==w){console.log("⚠️ Leadership role deletion notification not for current user, ignoring");return}l(S=>{if(g(N,S))return console.log("⚠️ Duplicate leadership role deleted notification ignored"),S;const _={id:m(),...N,read:!1};return console.log("✅ Leadership role deleted notification processed"),[_,...S]})}),v.on("leadership_role_assigned",N=>{console.log("🔔 Leadership role assigned notification received:",N);const w=localStorage.getItem("userId");if(N.targetUserId&&N.targetUserId!==w){console.log("⚠️ Leadership role assignment notification not for current user, ignoring");return}l(S=>{if(g(N,S))return console.log("⚠️ Duplicate leadership role assignment notification ignored"),S;const _={id:m(),...N,read:!1};return console.log("✅ Leadership role assignment notification processed"),[_,...S]})}),v.on("leadership_role_removed",N=>{console.log("🔔 Leadership role removed notification received:",N);const w=localStorage.getItem("userId");if(N.targetUserId&&N.targetUserId!==w){console.log("⚠️ Leadership role removal notification not for current user, ignoring");return}l(S=>{if(g(N,S))return console.log("⚠️ Duplicate leadership role removal notification ignored"),S;const _={id:m(),...N,read:!1};return console.log("✅ Leadership role removal notification processed"),[_,...S]})}),v.on("committee_created",N=>{console.log("🔔 Committee created notification received:",N),l(w=>{if(g(N,w))return console.log("⚠️ Duplicate committee created notification ignored"),w;const S={id:m(),...N,read:!1};return console.log("✅ Committee created notification processed"),[S,...w]})}),v.on("committee_updated",N=>{console.log("🔔 Committee updated notification received:",N),l(w=>{if(g(N,w))return console.log("⚠️ Duplicate committee updated notification ignored"),w;const S={id:m(),...N,read:!1};return console.log("✅ Committee updated notification processed"),[S,...w]})}),v.on("committee_deleted",N=>{console.log("🔔 Committee deleted notification received:",N),l(w=>{if(g(N,w))return console.log("⚠️ Duplicate committee deleted notification ignored"),w;const S={id:m(),...N,read:!1};return console.log("✅ Committee deleted notification processed"),[S,...w]})}),v.on("agenda_created",N=>{console.log("🔔 Agenda created notification received:",N),l(w=>{if(g(N,w))return console.log("⚠️ Duplicate agenda created notification ignored"),w;const S={id:m(),...N,read:!1};return console.log("✅ Agenda created notification processed"),[S,...w]})}),v.on("agenda_updated",N=>{console.log("🔔 Agenda updated notification received:",N),l(w=>{if(g(N,w))return console.log("⚠️ Duplicate agenda updated notification ignored"),w;const S={id:m(),...N,read:!1};return console.log("✅ Agenda updated notification processed"),[S,...w]})}),v.on("agenda_deleted",N=>{console.log("🔔 Agenda deleted notification received:",N),l(w=>{if(g(N,w))return console.log("⚠️ Duplicate agenda deleted notification ignored"),w;const S={id:m(),...N,read:!1};return console.log("✅ Agenda deleted notification processed"),[S,...w]})}),()=>{v.off("connect"),v.off("disconnect"),v.off("event_created"),v.off("event_status_updated"),v.off("event_deleted"),v.off("event_updated"),v.off("user_status_updated"),v.off("event_updated_for_registered_users"),v.off("leadership_role_created"),v.off("leadership_role_updated"),v.off("leadership_role_deleted"),v.off("leadership_role_assigned"),v.off("leadership_role_removed"),v.off("committee_created"),v.off("committee_updated"),v.off("committee_deleted"),v.off("agenda_created"),v.off("agenda_updated"),v.off("agenda_deleted")}},[]);const f=()=>{l([])},y=()=>{console.log("🔍 Notification Debug Info:"),console.log("Total notifications:",o.length),console.log("Unread notifications:",o.filter(v=>!v.read).length),console.log("Notifications by type:",o.reduce((v,N)=>{const w=N.type||"unknown";return v[w]=(v[w]||0)+1,v},{})),console.log("All notifications:",o)};x.useEffect(()=>{const v=()=>{const w=new Date(Date.now()-864e5);l(S=>S.filter(_=>new Date(_.timestamp)>w))},N=setInterval(v,36e5);return v(),()=>clearInterval(N)},[]);const b={isConnected:s,notifications:o,clearNotifications:f,debugNotifications:y};return t.jsx(jy.Provider,{value:b,children:a})},pC=()=>{const a=x.useContext(jy);if(a===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return a},ii=({variant:a="primary",size:s="medium",children:n,className:o="",...l})=>{const d="btn font-medium transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2",u={primary:"bg-[#A88554] hover:bg-[#9a7849] text-white focus:ring-[#A88554] shadow-lg",secondary:"bg-[#1E395D] hover:bg-[#1a324f] text-white focus:ring-[#1E395D]",outline:"bg-white border border-gray-300 hover:border-gray-400 text-gray-700 focus:ring-gray-300","role-select":"bg-white border border-gray-300 hover:border-gray-400 text-gray-700 focus:ring-gray-300","role-select-active":"bg-[#C7A87D] hover:bg-[#b89a6a] text-white border border-[#C7A87D] focus:ring-[#C7A87D] shadow-lg"},m={small:"px-3 py-1 text-xs",medium:"px-5 py-2 text-sm",large:"px-6 py-3 text-base"},g=`${d} ${u[a]} ${m[s]} ${o}`;return t.jsx("button",{className:g,...l,children:n})},Ny=({error:a,className:s="",containerClassName:n="",...o})=>t.jsxs("div",{className:`w-full ${n}`,children:[t.jsx("input",{className:`w-full px-3.5 py-3.5 border border-black rounded-[16px] text-sm bg-white placeholder-gray-500 focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${a?"border-red-500 focus:border-red-500 focus:ring-red-500":""} ${s}`,...o}),a&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:a})]}),Sy=({error:a,className:s="",containerClassName:n="",...o})=>{const[l,d]=x.useState(!1),u=()=>{d(!l)};return t.jsxs("div",{className:`w-full ${n}`,children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:l?"text":"password",className:`w-full px-3.5 py-3.5 pr-10 border border-black rounded-[16px] text-sm bg-white placeholder-gray-500 focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${a?"border-red-500 focus:border-red-500 focus:ring-red-500":""} ${s}`,...o}),t.jsx("button",{type:"button",onClick:u,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700 focus:outline-none",children:l?t.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),t.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:[t.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]}),a&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:a})]})},xC="/assets/Logo-1VuMq3k9.png",Zn=({size:a="medium",className:s=""})=>{const n={small:"h-6 w-auto",medium:"h-10 w-auto",large:"h-12 w-auto",figma:"w-[375px] h-[82px] flex-shrink-0"};return t.jsx("div",{className:`flex items-center justify-start ${s}`,children:t.jsx("img",{src:xC,alt:"MunQuest Logo",className:`${n[a]} object-contain`})})},di="/assets/default_student-DiMAztY4.png",kh="/assets/default_teacher-CmMFUZ4w.png",si=a=>a==="student"?di:kh,yC=()=>{localStorage.removeItem("userAvatar")},bC=async()=>{try{const a=localStorage.getItem("userAvatar");if(a)return a;const s=await Kn();if(s.success&&s.data.avatar)return localStorage.setItem("userAvatar",s.data.avatar),s.data.avatar;const n=localStorage.getItem("userRole");return n?si(n):di}catch(a){return console.log("Error getting user avatar:",a),di}},Ga=({size:a="medium",className:s="",onClick:n,showBorder:o=!1,forceRefresh:l=!1})=>{const[d,u]=x.useState(""),[m,g]=x.useState(!0),[f,y]=x.useState(Date.now()),b=async()=>{try{g(!0);const w=await bC();if(w)u(w);else{const S=localStorage.getItem("userRole")||"student";u(si(S))}y(Date.now())}catch(w){console.log("Error loading avatar:",w);const S=localStorage.getItem("userRole")||"student";u(si(S)),y(Date.now())}finally{g(!1)}};x.useEffect(()=>{b()},[]),x.useEffect(()=>{const w=()=>{y(Date.now()),b()},S=()=>{y(Date.now()),b()};return window.addEventListener("storage",w),window.addEventListener("avatarUpdated",S),()=>{window.removeEventListener("storage",w),window.removeEventListener("avatarUpdated",S)}},[]),x.useEffect(()=>{l&&b()},[l]),x.useEffect(()=>{const w=setInterval(()=>{const S=Date.now();if(S-f>2e3){const _=localStorage.getItem("userAvatar");_&&_!==d&&b(),y(S)}},2e3);return()=>clearInterval(w)},[d,f]);const v={small:"w-8 h-8",medium:"w-12 h-12",large:"w-16 h-16"},N=o?"border-2 border-white shadow-lg":"";return m?t.jsx("div",{className:`${v[a]} bg-gray-200 rounded-full flex items-center justify-center ${s}`,onClick:n,children:t.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}):t.jsx("div",{className:`${v[a]}  rounded-full flex items-center justify-center cursor-pointer ${N} ${s}`,onClick:n,children:t.jsx("img",{src:d||si(localStorage.getItem("userRole")||"student"),alt:"User Avatar",className:"w-full h-full rounded-full object-cover",onError:w=>{const S=localStorage.getItem("userRole")||"student";w.currentTarget.src=si(S)}})})},Fr=({size:a="medium",className:s="",text:n="Uploading..."})=>{const o={small:"w-4 h-4",medium:"w-6 h-6",large:"w-8 h-8"};return t.jsxs("div",{className:`flex flex-col items-center justify-center ${s}`,children:[t.jsx("div",{className:`${o[a]} border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin`}),n&&t.jsx("span",{className:"text-sm text-gray-600 mt-2",children:n})]})},Cy=({startDate:a,endDate:s,onDateRangeChange:n,onClose:o,maxDays:l=7})=>{const[d,u]=x.useState(new Date),[m,g]=x.useState(a?new Date(a):null),[f,y]=x.useState(s?new Date(s):null),[b,v]=x.useState(null),[N,w]=x.useState(""),[S,_]=x.useState(!1),L=x.useRef(null),D=new Date;D.setHours(0,0,0,0),x.useEffect(()=>{const O=H=>{L.current&&!L.current.contains(H.target)&&o()};return document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[o]);const M=O=>{const H=O.getFullYear(),se=O.getMonth(),W=new Date(H,se,1),Q=new Date(H,se+1,0).getDate(),ne=W.getDay(),ae=[],ge=new Date(H,se-1,0);for(let U=ne-1;U>=0;U--)ae.push({date:new Date(H,se-1,ge.getDate()-U),isCurrentMonth:!1,isToday:!1,isPast:!0});for(let U=1;U<=Q;U++){const Ee=new Date(H,se,U),Ce=Ee.getTime()===D.getTime(),Me=Ee<D;ae.push({date:Ee,isCurrentMonth:!0,isToday:Ce,isPast:Me})}const ve=42-ae.length;for(let U=1;U<=ve;U++)ae.push({date:new Date(H,se+1,U),isCurrentMonth:!1,isToday:!1,isPast:!1});return ae},F=O=>{const H=O.getDate().toString().padStart(2,"0"),se=(O.getMonth()+1).toString().padStart(2,"0"),W=O.getFullYear();return`${H} / ${se} / ${W}`},B=O=>!m||!f?!1:O>=m&&O<=f,q=O=>!!(m&&O.getTime()===m.getTime()||f&&O.getTime()===f.getTime()),ee=O=>{if(!b||!m)return!1;const H=m<b?m:b,se=m<b?b:m;return O>=H&&O<=se},le=O=>{if(O<D){w("Past dates cannot be selected");return}w(""),!m||m&&f?(g(O),y(null),_(!0)):(O<m?(y(m),g(O)):y(O),_(!1))},he=O=>{S&&m&&v(O)},be=()=>{if(m&&f){if(Math.ceil((f.getTime()-m.getTime())/864e5)+1>l){w(`Maximum event length is ${l} consecutive days`);return}const H=m.toISOString().split("T")[0],se=f.toISOString().split("T")[0];n(H,se),o()}},Te=()=>{o()},we=O=>{u(H=>{const se=new Date(H);return O==="prev"?se.setMonth(H.getMonth()-1):se.setMonth(H.getMonth()+1),se})},fe=O=>O.toLocaleDateString("en-US",{month:"long",year:"numeric"}),K=M(d),ye=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return t.jsxs("div",{ref:L,className:"absolute top-full left-0 z-50 bg-white border border-gray-300 rounded-lg shadow-lg p-4 mt-2",style:{minWidth:"320px"},children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("button",{onClick:()=>we("prev"),className:"p-2 hover:bg-gray-100 rounded-full",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:fe(d)}),t.jsx("button",{onClick:()=>we("next"),className:"p-2 hover:bg-gray-100 rounded-full",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),t.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:ye.map(O=>t.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:O},O))}),t.jsx("div",{className:"grid grid-cols-7 gap-1",children:K.map((O,H)=>{const se=q(O.date),W=B(O.date),A=ee(O.date),Q=O.isPast&&!O.isCurrentMonth;return t.jsx("button",{onClick:()=>le(O.date),onMouseEnter:()=>he(O.date),onMouseLeave:()=>v(null),disabled:Q,className:`
                relative h-8 w-8 text-sm rounded-full transition-colors
                ${O.isCurrentMonth?"text-gray-900":"text-gray-400"}
                ${Q?"cursor-not-allowed opacity-50":"cursor-pointer hover:bg-gray-100"}
                ${se?"bg-purple-600 text-white":""}
                ${W&&!se?"bg-purple-100":""}
                ${A&&!se&&!W?"bg-purple-50":""}
                ${O.isToday?"font-bold":""}
              `,children:O.date.getDate()},H)})}),t.jsxs("div",{className:"flex gap-4 mt-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Start Date"}),t.jsx("input",{type:"text",value:m?F(m):"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-gray-50",placeholder:"DD / MM / YYYY"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"End Date"}),t.jsx("input",{type:"text",value:f?F(f):"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-gray-50",placeholder:"DD / MM / YYYY"})]})]}),N&&t.jsx("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-2 rounded",children:N}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsx("button",{onClick:Te,className:"flex-1 px-4 py-2 border border-purple-600 text-purple-600 rounded-md hover:bg-purple-50 transition-colors",children:"Cancel"}),t.jsx("button",{onClick:be,disabled:!m||!f,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Apply"})]})]})},$s=({isOpen:a,onClose:s,onConfirm:n,title:o,message:l,confirmText:d="Yes",cancelText:u="No",confirmButtonColor:m="text-red-600",isLoading:g=!1,loadingText:f="Deleting..."})=>a?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 ",style:{marginTop:"0px"},children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full mx-4",children:[t.jsx("h2",{className:"text-xl font-bold text-black mb-4 text-center",children:o}),t.jsx("p",{className:"text-black text-center mb-6 leading-relaxed",children:l}),t.jsxs("div",{className:"flex justify-center space-x-4",children:[t.jsx("button",{onClick:n,disabled:g,className:`px-6 py-2 rounded-lg text-sm font-bold ${m} hover:opacity-80 transition-opacity flex items-center justify-center ${g?"opacity-60 cursor-not-allowed":""}`,children:g?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),f]}):d}),t.jsx("button",{onClick:s,disabled:g,className:`px-6 py-2 rounded-lg text-sm font-bold text-gray-700 hover:bg-gray-100 transition-colors ${g?"opacity-60 cursor-not-allowed":""}`,children:u})]})]})}):null,vC=({isOpen:a,onKeepEditing:s,onDiscardChanges:n})=>a?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full mx-4",children:[t.jsx("h2",{className:"text-xl font-bold text-black mb-4 text-center",children:"Unsaved Changes"}),t.jsx("p",{className:"text-black text-center mb-6 leading-relaxed",children:"Your changes have not been saved."}),t.jsxs("div",{className:"flex justify-center space-x-4",children:[t.jsx("button",{onClick:s,className:"px-6 py-2 rounded-lg text-sm font-bold text-blue-600 hover:bg-blue-50 transition-colors",children:"Keep Editing"}),t.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg text-sm font-bold text-red-600 hover:bg-red-50 transition-colors",children:"Discard Changes"})]})]})}):null,oc=({options:a,value:s,placeholder:n,onSelect:o,disabled:l=!1,className:d="",setSelected:u})=>{const[m,g]=x.useState(!1),[f,y]=x.useState(""),[b,v]=x.useState(a),N=x.useRef(null),w=x.useRef(null);x.useEffect(()=>{if(f.trim()==="")v(a);else{const B=a.filter(q=>q.name.toLowerCase().includes(f.toLowerCase()));v(B)}},[f,a]),x.useEffect(()=>{const B=q=>{N.current&&!N.current.contains(q.target)&&(g(!1),y(""))};return document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[]),x.useEffect(()=>{m&&w.current&&w.current.focus()},[m]);const S=()=>{l||(g(!m),y(""))},_=B=>{o(B.id,B.name),g(!1),y(""),u?.(B.id,B.name)},L=B=>{y(B.target.value)},D=B=>{B.key==="Escape"&&(g(!1),y(""))},M=a.find(B=>B.id===s),F=M?M.name:"Unassigned";return t.jsxs("div",{className:`relative ${d}`,ref:N,children:[t.jsxs("div",{className:`h-full flex items-center justify-between bg-white px-3 py-2 text-sm rounded-md border border-gray-200 cursor-pointer ${l?"opacity-50 cursor-not-allowed":"hover:border-gray-300"}`,onClick:S,children:[t.jsx("span",{className:s?"text-gray-900":"text-red-600",children:F}),t.jsx("svg",{className:`w-3 h-3 text-gray-400 transition-transform ${m?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),m&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-hidden",children:[t.jsx("div",{className:"p-2 border-b border-gray-100",children:t.jsx("input",{ref:w,type:"text",placeholder:`Search ${n.toLowerCase()}...`,value:f,onChange:L,onKeyDown:D,className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),t.jsx("div",{className:"max-h-48 overflow-y-auto",children:b.length===0?t.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500",children:["No ",n.toLowerCase()," found"]}):b.map(B=>t.jsx("div",{className:"px-3 py-2 text-sm text-gray-900 cursor-pointer hover:bg-gray-100 flex items-center justify-between",onClick:()=>_(B),children:t.jsx("span",{children:B.name})},B.id))})]})]})},wC="data:image/svg+xml,%3csvg%20width='60'%20height='70'%20viewBox='0%200%2060%2070'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M54.2671%2060H36.9357C36.5306%2060%2036.2028%2059.6709%2036.2028%2059.2665V47.5354C36.2028%2044.1161%2033.4206%2041.3328%2030%2041.3328C26.5794%2041.3328%2023.7966%2044.1155%2023.7966%2047.5354V59.2665C23.7966%2059.6715%2023.4681%2060%2023.0637%2060H5.73286C5.32784%2060%205%2059.6709%205%2059.2665V29.7917C5%2029.5672%205.10333%2029.3542%205.28%2029.2151L29.5465%2010.1569C29.8125%209.9477%2030.1869%209.9477%2030.4529%2010.1569L54.72%2029.2151C54.8967%2029.3548%2055%2029.5678%2055%2029.7917V59.2665C55%2059.6715%2054.6722%2060%2054.2671%2060ZM37.6691%2058.5324H53.533V30.1495L41.7665%2020.908L30%2011.6666L6.46699%2030.1495V58.5331H22.3302V47.5354C22.3302%2043.3061%2025.7713%2039.8658%2030%2039.8658C34.2287%2039.8658%2037.6691%2043.3068%2037.6691%2047.5354V58.5324Z'%20fill='black'/%3e%3c/svg%3e",ky="/assets/organiser_icon-DBiM919n.svg",jC="/assets/super_user_icon-ksD-coqW.svg",NC="/assets/showprofile_icon-DlOL1YGI.svg",SC="data:image/svg+xml,%3csvg%20width='30'%20height='18'%20viewBox='0%200%2030%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.2062%2014.2268V15.3093C13.2062%2016.7938%2012%2018%2010.5154%2018H2.69069C1.20615%2018%20-3.33786e-05%2016.7938%20-3.33786e-05%2015.3093V2.69072C-3.33786e-05%201.20619%201.20615%200%202.69069%200H10.5058C11.9903%200%2013.1965%201.20619%2013.1965%202.69072V3.23678C13.1965%203.38079%2013.0834%203.49485%2012.9384%203.49485C12.7944%203.49485%2012.6804%203.38177%2012.6804%203.23678V2.69072C12.6804%201.48454%2011.7013%200.515134%2010.5048%200.515134H2.68005C1.47386%200.515134%200.504462%201.49419%200.504462%202.69072V15.2986C0.504462%2016.5048%201.48351%2017.4742%202.68005%2017.4742H10.5058C11.712%2017.4742%2012.6814%2016.4952%2012.6814%2015.2986V14.2162C12.6814%2014.0722%2012.7944%2013.9581%2012.9394%2013.9581C13.0825%2013.9591%2013.2062%2014.0828%2013.2062%2014.2268Z'%20fill='black'/%3e%3cpath%20d='M8.12432%205.15434C8.21711%205.05093%208.38239%205.04126%208.48482%205.13405L12.7113%208.80382C12.7731%208.85601%2012.8041%208.92753%2012.8041%209.00002C12.8041%209.0725%2012.7731%209.14402%2012.7113%209.19622L8.48482%2012.866C8.4336%2012.9075%208.37174%2012.9278%208.31955%2012.9278C8.24706%2012.9278%208.17554%2012.8969%208.12335%2012.8351C8.03057%2012.7316%208.0412%2012.5673%208.14365%2012.4746L11.8753%209.23778C11.8646%209.23778%2011.855%209.25808%2011.8337%209.25808H4.19454C4.05053%209.25808%203.93648%209.145%203.93648%209.00002C3.93648%208.85601%204.04956%208.74196%204.19454%208.74196H11.8357C11.856%208.74196%2011.856%208.75259%2011.8773%208.76225L8.14563%205.52547C8.04124%205.43268%208.03154%205.26838%208.12432%205.15434ZM12.0618%209.08218L12.1546%209.00002L12.0618%208.91787C12.0724%208.9488%2012.0927%208.9691%2012.0927%209.00002C12.0927%209.03095%2012.0724%209.05125%2012.0618%209.08218Z'%20fill='black'/%3e%3c/svg%3e",CC=async(a,s)=>{try{const{data:n,error:o}=await Ir.auth.signUp({email:a,password:s,options:{emailRedirectTo:`${window.location.origin}/email-confirmation`}});if(o)throw new Error(o.message);return{success:!0,message:"Sign up successful! Please check your email to verify your account.",data:n}}catch(n){return{success:!1,message:n.message||"Sign up failed"}}},kC=async(a,s)=>{try{const{data:n,error:o}=await Ir.auth.signInWithPassword({email:a,password:s});if(o)throw new Error(o.message);return{success:!0,message:"Login successful!",data:n,token:n.session?.access_token}}catch(n){return{success:!1,message:n.message||"Login failed"}}},_C=async()=>{try{const{error:a}=await Ir.auth.signOut();if(a)throw new Error(a.message);return{success:!0,message:"Logged out successfully"}}catch(a){return{success:!1,message:a.message||"Logout failed"}}},EC=async a=>{try{const{data:s,error:n}=await Ir.auth.updateUser({password:a});if(n)throw new Error(n.message);return{success:!0,message:"Password updated successfully!",data:s}}catch(s){return{success:!1,message:s.message||"Failed to update password"}}},AC=async a=>{try{const{data:s,error:n}=await Ir.auth.resend({type:"signup",email:a});if(n)throw new Error(n.message);return{success:!0,message:"Verification email sent successfully! Please check your inbox.",data:s}}catch(s){return{success:!1,message:s.message||"Failed to resend verification email"}}},DC=()=>{const{notifications:a,isConnected:s}=pC(),[n,o]=x.useState(!1),l=x.useRef(null),[d,u]=x.useState([]),m=()=>{u([])};return x.useEffect(()=>{const g=f=>{l.current&&!l.current.contains(f.target)&&o(!1)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[]),x.useEffect(()=>{u(a)},[a]),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex relative items-center justify-center",children:t.jsxs("button",{onClick:()=>o(!n),className:"relative p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full","aria-label":"Notifications",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),d.filter(g=>!g.read).length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:d.filter(g=>!g.read).length}),!s&&t.jsx("span",{className:"absolute -bottom-1 -right-1 bg-yellow-500 text-white text-xs rounded-full h-3 w-3"})]})}),n&&t.jsxs("div",{ref:l,className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",style:{top:"60px",right:"-20px"},children:[t.jsx("div",{className:"p-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),t.jsx("span",{className:"text-sm text-gray-500",children:s?"Connected":"Disconnected"})]})}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:d.length===0?t.jsx("div",{className:"p-4 text-center text-gray-500",children:"No notifications yet"}):d.map(g=>t.jsx("div",{className:`p-4 border-b border-gray-100 hover:bg-gray-50 ${g.read?"":"bg-blue-50"}`,children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.message}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(g.timestamp).toLocaleString()}),g.eventDescription&&t.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:g.eventDescription})]})]})},g.id))}),d.length>0&&t.jsx("div",{className:"p-3 border-t border-gray-200",children:t.jsx("button",{onClick:()=>{m(),o(!1)},className:"w-full text-center text-sm text-blue-600 hover:text-blue-800",children:"Mark all as read"})})]})]})},Wt=({showNavigation:a=!0})=>{const s=Ct(),n=localStorage.getItem("global_role")?.toLowerCase()==="superuser";let o=null;try{o=Ot().userType}catch(_){console.log("Error accessing AppContext in Header:",_),o=localStorage.getItem("userType")||"student"}const[l,d]=x.useState(!1),[u,m]=x.useState(!1),g=x.useRef(null);x.useEffect(()=>{const _=localStorage.getItem("organiserId");d(!!(_&&_!=="null"))},[]);const f=async()=>{s(o==="student"?"/student-profile-page":o==="teacher"?"/teacher-profile-page":o==="organizer"?"/organiser":"/profile-page")},y=()=>{s("/home")},b=()=>{s("/organiser")},v=()=>{s("/super-user")},N=()=>{m(!u)},w=async()=>{m(!1),await f()},S=async()=>{m(!1),localStorage.clear(),s("/login"),d(!1),await _C()};return x.useEffect(()=>{const _=L=>{g.current&&!g.current.contains(L.target)&&m(!1)};return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[]),t.jsx("div",{className:"bg-white shadow-sm",style:{height:"100px"},children:t.jsx("div",{className:"mx-auto px-6 py-4",style:{maxWidth:"88rem",height:"100%"},children:t.jsxs("div",{className:"flex items-center justify-between",style:{height:"100%"},children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("a",{href:"/home",children:t.jsx(Zn,{size:"medium"})})}),a&&t.jsxs("div",{className:"flex items-center space-x-8",children:[t.jsxs("div",{className:"flex flex-col items-center cursor-pointer",onClick:y,children:[t.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-1",children:t.jsx("img",{src:wC,alt:"Home",className:"w-6 h-6"})}),t.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Home"})]}),n&&t.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[t.jsx("div",{onClick:v,className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-1",children:t.jsx("img",{src:jC,alt:"Superuser",className:"w-6 h-6"})}),t.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Superuser"})]}),t.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[t.jsx(DC,{}),t.jsx("span",{className:"text-xs text-gray-600 font-medium mt-1",children:"Notification"})]}),!n&&l&&o!=="organizer"&&t.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[t.jsx("div",{onClick:b,className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mb-1",children:t.jsx("img",{src:ky,alt:"Organiser",className:"w-6 h-6"})}),t.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Organiser"})]}),t.jsxs("div",{className:"relative",ref:g,children:[t.jsxs("div",{className:"flex flex-col items-center cursor-pointer",onClick:N,children:[t.jsx(Ga,{size:"medium",className:"mb-1"}),t.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Profile"})]}),u&&t.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-50",children:[t.jsxs("div",{className:"px-4 py-3 cursor-pointer hover:bg-[#D9C7A1] transition-colors duration-200 flex items-center",onClick:w,children:[t.jsx("div",{className:"flex items-center mr-3",children:t.jsx("img",{src:NC,alt:"Profile"})}),t.jsx("span",{className:"text-gray-900 font-medium",children:"Show Profile"})]}),t.jsx("div",{className:"border-t border-gray-200"}),t.jsxs("div",{className:"px-4 py-3 cursor-pointer hover:bg-[#D9C7A1] transition-colors duration-200 flex items-center",onClick:S,children:[t.jsx("div",{className:"flex items-center mr-3",children:t.jsx("img",{src:SC,alt:"Logout"})}),t.jsx("span",{className:"text-gray-900 font-medium",children:"Log Out"})]})]})]})]})]})})})},TC=({events:a,onAction:s})=>{const[n,o]=x.useState(null),[l,d]=x.useState(null),u=x.useRef({}),{refreshEventsData:m}=Ot(),g=b=>{o(n===b?null:b)},f=async(b,v)=>{d(v);try{if(b==="delete"){const N=await eN(v);N.success?(k.success(N.message),await m()):k.error(N.message)}else{const N=await Zj(v,b);N.success?(k.success(N.message),await m()):k.error(N.message)}s(b,v)}catch(N){console.log("Error updating event status:",N),k.error("Failed to update event status")}finally{d(null)}o(null)},y=b=>{if(!b)return"text-gray-600";switch(b.toLowerCase()){case"pending":return"text-yellow-500";case"flagged":return"text-yellow-500";case"blocked":return"text-red-600";case"approved":return"text-green-600";case"rejected":return"text-red-600";default:return"text-gray-600"}};return x.useEffect(()=>{const b=v=>{Object.values(u.current).every(w=>!w||!w.contains(v.target))&&o(null)};return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[]),t.jsxs("div",{children:[t.jsx("div",{className:"grid grid-cols-8 gap-2 mb-2",children:["Event ID","Event Name","Locality","Date","Fees","Event Phase","Event Status"].map((b,v)=>t.jsxs("div",{className:`px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md ${v<4?"bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between":"bg-[#F0F7FF] border border-[#4A5F7A] flex items-center"}`,children:[t.jsx("span",{children:b}),v<4&&t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]},b))}),a.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:"No events found"}):a.map(b=>t.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-2",children:[t.jsx("div",{className:"bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:b?.id.split("-")[0]||"N/A"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:b?.name||"N/A"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:b?.locality?.name||"N/A"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:b?.start_date+" - "+b?.end_date||"N/A"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:b?.fees_per_delegate||"N/A"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:b?.event_phase||"N/A"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200 flex items-center justify-center",children:l===b?.id?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}),t.jsx("span",{className:"text-gray-500",children:"Updating"})]}):t.jsx("span",{className:`font-medium ${y(b?.status)}`,children:b?.status||"N/A"})}),t.jsx("div",{ref:v=>{u.current[b.id]=v},className:"px-3 py-2 text-sm font-medium relative",children:t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>g(b?.id||""),className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),n===b?.id&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:t.jsxs("div",{className:"py-1",children:[b?.status?.toLowerCase()==="pending"&&t.jsx("button",{onClick:()=>f("approved",b?.id||""),disabled:l===b?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===b?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900"}`,children:"Approve"}),b?.status?.toLowerCase()!=="flagged"&&t.jsx("button",{onClick:()=>f("flagged",b?.id||""),disabled:l===b?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===b?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900"}`,children:"Flag"}),b?.status?.toLowerCase()!=="blocked"&&t.jsx("button",{onClick:()=>f("blocked",b?.id||""),disabled:l===b?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===b?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900"}`,children:"Block"}),(b?.status?.toLowerCase()==="flagged"||b?.status?.toLowerCase()==="blocked")&&t.jsx("button",{onClick:()=>f("approved",b?.id||""),disabled:l===b?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===b?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900"}`,children:"Approve"}),t.jsx("button",{onClick:()=>f("delete",b?.id||""),disabled:l===b?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===b?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900"}`,children:"Delete"})]})})]})})]},b?.id||Math.random()))]})},RC=({activeSection:a,onSectionChange:s,usersSubSection:n,setUsersSubSection:o,schoolsSubSection:l,setSchoolsSubSection:d})=>{const u=[{id:"events-related",label:"Events Related"},{id:"users-related",label:"Users Related"},{id:"schools-related",label:"Schools Related"}],m={"events-related":[{id:"events",label:"Events"},{id:"organisers",label:"Organisers"},{id:"leadership-roles",label:"Leadership Roles"},{id:"committees",label:"Committees"}],"users-related":[{id:"users",label:"Users"},{id:"superusers",label:"Superusers"}],"schools-related":[{id:"schools",label:"Schools"},{id:"localities",label:"Localities"}],"schools-city-related":[{id:"DU",label:"Dubai"},{id:"AD",label:"Abu Dhabi"},{id:"AIN",label:"Al Ain"},{id:"SH",label:"Sharjah"},{id:"AJ",label:"Ajman"},{id:"RAK",label:"Ras Al Khaimah"},{id:"UAQ",label:"Umm Al Quwain"},{id:"other",label:"Other"}]},g=(v,N=!1,w=!1,S=0)=>{const _="font-medium transition-colors duration-200";if(N)return S===3?`${_} ${v?"bg-[#84B5F3] text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-100"}`:`${_} ${v?"bg-[#C6DAF4] text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-100"}`;if(w&&!v)return`${_} bg-[#607DA3] text-white`;if(S===1)return`${_} ${v?"bg-[#1E395D] text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-100"}`;if(S===2)return`${_} ${v?"bg-[#607DA3] text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-100"}`},f=v=>a===v||v==="masterlists"&&["events-related","users-related","schools-related","events","organisers","leadership-roles","committees","students","teachers","users","superusers","users-students","users-teachers","schools","localities","dubai","abu-dhabi","al-ain","sharjah","ajman","ras-al-khaimah","umm-al-quwain","other"].includes(a),y=v=>v==="events-related"?a==="events-related"||a==="events"||a==="organisers"||a==="leadership-roles"||a==="committees"||a==="students"||a==="teachers":v==="users-related"?a==="users-related"||a==="users"||a==="superusers":v==="schools-related"?a==="schools-related"||a==="schools"||a==="localities"||a==="dubai"||a==="abu-dhabi"||a==="al-ain"||a==="sharjah"||a==="ajman"||a==="ras-al-khaimah"||a==="umm-al-quwain"||a==="other":v==="organisers"?a==="students"||a==="teachers":v==="users"?a==="users"||a==="users-students":v==="superusers"?a==="superusers"||a==="users-teachers":v==="schools"?a==="schools"||a==="dubai"||a==="abu-dhabi"||a==="al-ain"||a==="sharjah"||a==="ajman"||a==="ras-al-khaimah"||a==="umm-al-quwain"||a==="other":v==="localities"?a==="localities"||a==="dubai"||a==="abu-dhabi"||a==="al-ain"||a==="sharjah"||a==="ajman"||a==="ras-al-khaimah"||a==="umm-al-quwain"||a==="other":a===v,b=v=>v==="events-related"?["events","organisers","leadership-roles","committees","students","teachers"].includes(a):v==="users-related"?["users","superusers","users-students","users-teachers"].includes(a):v==="schools-related"?["schools","localities"].includes(a):v==="organisers"?["students","teachers"].includes(a):!1;return x.useEffect(()=>{d(0),o(!0)},[a]),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>s("dashboard"),className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm rounded-[20px] ${g(f("dashboard"),!1,!1,1)}`,children:"Dashboard"}),t.jsx("button",{onClick:()=>s("events"),className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm rounded-[20px] ${g(f("masterlists"),!1,!1,1)}`,children:"Masterlists"})]}),(f("masterlists")||a==="events"||a==="students"||a==="teachers"||a==="users"||a==="superusers"||a==="global-students"||a==="global-teachers"||a==="users-students"||a==="users-teachers"||a==="schools"||a==="localities"||a==="dubai"||a==="abu-dhabi"||a==="al-ain"||a==="sharjah"||a==="ajman"||a==="ras-al-khaimah"||a==="umm-al-quwain"||a==="other")&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"flex space-x-2",children:u.map(v=>t.jsx("button",{onClick:()=>{s(v.id==="events-related"?"events":v.id==="users-related"?"users":v.id==="schools-related"?"schools":v.id)},className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm rounded-[20px] ${g(y(v.id),!1,b(v.id),2)}`,children:v.label},v.id))}),a==="events-related"||a==="events"||a==="organisers"||a==="leadership-roles"||a==="committees"||a==="students"||a==="teachers"?t.jsx("div",{className:"flex space-x-2",children:m["events-related"]?.map(v=>t.jsx("button",{onClick:()=>s(v.id==="organisers"?"students":v.id),className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm rounded-[20px] ${g(y(v.id),!0,b(v.id),3)}`,children:v.label},v.id))}):null,a==="students"||a==="teachers"?t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>s("students"),className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm rounded-[20px] ${g(y("students"),!0,!1,4)}`,children:"Students"}),t.jsx("button",{onClick:()=>s("teachers"),className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm rounded-[20px] ${g(y("teachers"),!0,!1,4)}`,children:"Teachers"})]}):null,a==="users-related"||a==="users"||a==="superusers"||a==="users-students"||a==="users-teachers"?t.jsx("div",{className:"flex space-x-2",children:m["users-related"]?.map(v=>t.jsx("button",{onClick:()=>{s(v.id)},className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm rounded-[20px] ${g(y(v.id),!0,b(v.id),3)}`,children:v.label},v.id))}):null,a==="users-related"||a==="users"||a==="superusers"||a==="users-students"||a==="users-teachers"?t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>{o(!0)},className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm rounded-[20px] font-medium transition-colors duration-200 ${n?"bg-[#C6DAF4] text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-100"}`,children:"Students"}),t.jsx("button",{onClick:()=>{o(!1)},className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm rounded-[20px] font-medium transition-colors duration-200 ${n?"bg-white text-gray-700 border border-gray-300 hover:bg-gray-100":"bg-[#C6DAF4] text-white"}`,children:"Teachers"})]}):null,a==="schools-related"||a==="schools"||a==="departments"||a==="programs"||a==="localities"||a==="dubai"||a==="abu-dhabi"||a==="al-ain"||a==="sharjah"||a==="ajman"||a==="ras-al-khaimah"||a==="umm-al-quwain"||a==="other"?t.jsx("div",{className:"flex space-x-2",children:m["schools-related"]?.map(v=>t.jsx("button",{onClick:()=>{s(v.id)},className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm rounded-[20px] ${g(y(v.id),!0,b(v.id),3)}`,children:v.label},v.id))}):null,a==="schools-related"||a==="schools"||a==="departments"||a==="programs"||a==="localities"||a==="dubai"||a==="abu-dhabi"||a==="al-ain"||a==="sharjah"||a==="ajman"||a==="ras-al-khaimah"||a==="umm-al-quwain"||a==="other"?t.jsx("div",{className:"flex space-x-2",children:m["schools-city-related"]?.map((v,N)=>t.jsx("button",{onClick:()=>{console.log("MasterlistsNavigation - School locality clicked:",v.label,"index:",N),d(N)},className:`w-[130px] h-[58px] px-[5px] py-[5px] text-sm rounded-[20px] font-medium transition-colors duration-200 ${l===N?"bg-[#C6DAF4] text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-100"}`,children:v.label},v.id))}):null]})]})},LC=()=>{const[a,s]=x.useState(""),{allEvents:n}=Ot(),o=x.useMemo(()=>{if(!n||n.length===0)return console.log("EventsPage: No events found or empty array"),[];if(!a.trim())return n;const d=a.toLowerCase();return n.filter(u=>{const m=u?.name?.toLowerCase()||"",g=u?.locality?.name?.toLowerCase()||"",f=u?.id?.toString().toLowerCase()||"";return m.includes(d)||g.includes(d)||f.includes(d)})},[n,a]),l=d=>{};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-left",children:t.jsxs("div",{className:"relative w-full max-w-md",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.jsx("input",{type:"text",placeholder:"Search",value:a,onChange:d=>s(d.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-800 rounded-[10px] leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})}),t.jsx(TC,{events:o,onAction:l})]})},Pn="data:image/svg+xml,%3csvg%20width='14'%20height='20'%20viewBox='0%200%2014%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11%200H3C1.483%200%200.25%201.233%200.25%202.75V17.336C0.25%2018.529%201.221%2019.5%202.414%2019.5C2.983%2019.5%203.54%2019.27%203.944%2018.866L5.823%2016.987C6.45%2016.358%207.548%2016.358%208.176%2016.987L10.055%2018.866C10.458%2019.268%2011.016%2019.499%2011.585%2019.499C12.778%2019.499%2013.749%2018.528%2013.749%2017.335V2.75C13.749%201.233%2012.516%200%2010.999%200H11Z'%20fill='%23C2A46D'/%3e%3c/svg%3e",OC=({organisers:a,onAction:s,organiserType:n="all"})=>{const[o,l]=x.useState(null),[d,u]=x.useState(null),[m,g]=x.useState(!1),[f,y]=x.useState(!1),[b,v]=x.useState(""),[N,w]=x.useState([]),[S,_]=x.useState(null),[L,D]=x.useState(null),[M,F]=x.useState(!1),[B,q]=x.useState([]),[ee,le]=x.useState(!1),[he,be]=x.useState(null),Te=x.useRef(null),we=x.useRef({}),{refreshUserData:fe,allUsers:K}=Ot();x.useEffect(()=>{const U=Ee=>{Object.values(we.current).every(Me=>!Me||!Me.contains(Ee.target))&&l(null),Te.current&&!Te.current.contains(Ee.target)&&(F(!1),l(null))};return document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[]),x.useEffect(()=>{if(!b.trim())w(a);else{const U=a.filter(Ee=>{const Ce=b.toLowerCase(),Me=Ee?.users?.username||"",me=Ee?.users?.fullname||"",_e=Ee?.users?.school_location||"",Ye=Ee?.school?.name||Ee?.school||"",st=Ee?.role||"";return Me.toLowerCase().includes(Ce)||me.toLowerCase().includes(Ce)||_e.toLowerCase().includes(Ce)||Ye.toLowerCase().includes(Ce)||st.toLowerCase().includes(Ce)});w(U)}},[b,a]);const ye=U=>{l(o===U?null:U)},O=()=>{g(!0),D(null),F(!1),q([]),_({id:"",username:"",locality:"",fullname:"",school:"",role:"",evidence:"",status:"pending",users:{id:""},created_at:null,actioned_at:null})},H=(U,Ee)=>{_(Ce=>({...Ce,[U]:Ee})),Ee.trim()?(F(!0),D(null),se(Ee.trim())):(F(!1),D(null),q([]),_(Ce=>({...Ce,fullname:"",locality:"",school:"",role:"",evidence:""})))},se=U=>{const Ee=new Set(a.map(Me=>Me.users?.id||Me.id)),Ce=K.filter(Me=>{const me=Me.username?.toLowerCase().includes(U.toLowerCase()),_e=!Ee.has(Me.id);let Ye=!0;return n==="students"?Ye=Me.role==="student":n==="teachers"&&(Ye=Me.role==="teacher"),me&&_e&&Ye});q(Ce)},W=U=>{_(Ee=>({...Ee,user_id:U.id||"",school_id:U.school_id||"",locality_id:U.school.locality_id||"",username:U.username||"",fullname:U.fullname||"",locality:U.school.code||"",school:U.school?.name||"",role:U.role_in_event||U.role||"",evidence:U.evidence||"Internal",users:{id:U.id||""},...n==="students"?{grade:U.grade||""}:{years_of_experience:U.years_of_experience||""}})),D(!0),F(!1),q([])},A=async()=>{try{if(!S.username||!S.fullname||!S.school){k.error("Please fill in all required fields (Username, Name, School)");return}y(!0);const U=localStorage.getItem("userId"),Ee=await Uj(S.user_id||"",S.school_id||"",S.locality_id||"",S.role,S.evidence,"pending",U||"");Ee.success?(k.success("New organiser added successfully!"),g(!1),D(null),F(!1),q([]),_({id:"",username:"",fullname:"",locality:"",school:"",role:"",evidence:"",status:"pending",users:{id:""},created_at:null,actioned_at:null}),await fe()):k.error(Ee.message||"Failed to save new organiser")}catch(U){console.log("Error saving new organiser:",U),k.error(U.message||"Failed to save new organiser")}finally{y(!1)}},Q=U=>{be(U),le(!0),l(null)},ne=async()=>{if(he){le(!1),u(he);try{const U=await Oj(he);U.success?(k.success(U.message),await fe(),s("delete",he)):k.error(U.message)}catch(U){console.log("Error deleting organiser:",U),k.error(U.message)}finally{u(null),be(null)}}},ae=()=>{le(!1),be(null)},ge=async(U,Ee)=>{u(Ee);try{const Ce=await Lj(Ee,U);Ce.success?(k.success(Ce.message),await fe()):k.error(Ce.message),s(U,Ee)}catch(Ce){console.log("Error updating organiser status:",Ce),k.error("Failed to update organiser status")}finally{u(null)}l(null)},ve=U=>{if(!U)return"text-gray-600";switch(U.toLowerCase()){case"approved":return"text-green-600";case"pending":return"text-orange-500";case"rejected":return"text-red-600";case"flagged":return"text-yellow-500";case"blocked":return"text-red-600";default:return"text-gray-600"}};return t.jsxs("div",{children:[t.jsx("div",{className:"mb-4",style:{display:"none"},children:t.jsx("input",{type:"text",placeholder:"Search organisers...",value:b,onChange:U=>v(U.target.value),className:"w-full max-w-md px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),t.jsx("div",{className:"grid grid-cols-12 gap-2 mb-2",children:["UserID","Organiser ID","Username","Name",n==="students"?"Academic Level":"Teaching Experience","School","Role in Event","Evidence","Date Received","Date Actioned","Status"," "].map((U,Ee)=>U===" "?t.jsx("div",{},U):t.jsxs("div",{className:`px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md ${Ee<4?"bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between":"bg-[#F0F7FF] border border-[#4A5F7A] flex items-center"}`,children:[t.jsx("span",{children:U}),Ee<4&&t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]},U))}),N.length===0&&!m?t.jsx("div",{className:"text-center py-8 text-gray-500",children:b?"No organisers found matching your search":"No organisers found"}):N.length>0?N.map(U=>t.jsxs("div",{className:`grid grid-cols-12 gap-2 mb-2 ${d===U?.id?"opacity-60 pointer-events-none":""}`,children:[t.jsx("div",{className:"bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:U?.users.id.split("-")[0]||"N/A"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:U?.id.split("-")[0]||"N/A"}),t.jsx("div",{className:"w-full break-words bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:U?.users.username||"N/A"}),t.jsx("div",{className:"w-full break-words bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:U?.users.fullname||"N/A"}),t.jsx("div",{className:"w-full break-words bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:n==="students"?U?.users?.grade||"N/A":U?.users?.years_of_experience||"N/A"}),t.jsx("div",{className:"w-full break-words bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:U?.school?.name||U?.school||"N/A"}),t.jsx("div",{className:"w-full break-words bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:U?.role||"N/A"}),t.jsx("div",{className:"w-full break-words bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:U?.evidence?typeof U.evidence=="object"&&U.evidence.file_url?t.jsx("div",{className:"flex items-center justify-center",children:U.evidence.file_url==="Internal"?t.jsx("span",{children:U.evidence.file_url}):t.jsxs("button",{onClick:()=>window.open(U.evidence.file_url,"_blank"),className:"flex flex-wrap items-center justify-center p-1 rounded hover:bg-gray-100 transition-colors duration-200",title:"Click to open document",disabled:d===U?.id,children:["Document",t.jsx("svg",{className:"w-5 h-5 text-blue-600 hover:text-blue-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]})}):t.jsx("span",{children:typeof U.evidence=="string"?U.evidence:"Document"}):"N/A"}),t.jsx("div",{className:"w-full break-words bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:U?.created_at?.split("T")[0]||"N/A"}),t.jsx("div",{className:"w-full break-words bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 flex items-center justify-center",children:U?.actioned_at?.split("T")[0]||"N/A"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200 flex items-center justify-center",children:d===U?.id?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}),t.jsx("span",{className:"text-gray-500",children:"Deleting..."})]}):t.jsx("span",{className:`font-medium ${ve(U?.status)}`,children:U?.status||"N/A"})}),t.jsx("div",{ref:Ee=>{we.current[U?.id||""]=Ee},className:"px-3 py-2 text-sm font-medium relative",children:t.jsx("div",{className:"relative",children:d===U?.id?t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-900"})}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>ye(U?.id||""),className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),o===U?.id&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:t.jsxs("div",{className:"py-1",children:[U?.status?.toLowerCase()!=="approved"&&t.jsx("button",{onClick:()=>ge("approved",U?.id||""),disabled:d===U?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===U?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900"}`,children:"Approve"}),U?.status?.toLowerCase()!=="rejected"&&t.jsx("button",{onClick:()=>ge("rejected",U?.id||""),disabled:d===U?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===U?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900"}`,children:"Reject"}),U?.status?.toLowerCase()!=="flagged"&&t.jsx("button",{onClick:()=>ge("flagged",U?.id||""),disabled:d===U?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===U?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900"}`,children:"Flag"}),U?.status?.toLowerCase()!=="blocked"&&t.jsx("button",{onClick:()=>ge("blocked",U?.id||""),disabled:d===U?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===U?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900"}`,children:"Block"}),(U?.status?.toLowerCase()==="flagged"||U?.status?.toLowerCase()==="blocked")&&t.jsx("button",{onClick:()=>ge("approved",U?.id||""),disabled:d===U?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===U?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900"}`,children:"Activate"}),t.jsx("button",{onClick:()=>Q(U?.id||""),disabled:d===U?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===U?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900"}`,children:"Delete"})]})})]})})})]},U?.id||Math.random())):null,m&&t.jsxs("div",{className:`grid grid-cols-12 gap-2 mb-2 ${f?"opacity-60 pointer-events-none":""}`,children:[t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:S.users?.id?.split("-")[0],placeholder:"Auto populated",className:"w-full border-none outline-none text-sm",disabled:!0})}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:S.organiser_id||"N/A",placeholder:"Auto populated",className:"w-full border-none outline-none text-sm",disabled:!0})}),t.jsxs("div",{ref:Te,className:`px-3 py-2 text-sm rounded-md border relative ${L===!0?"bg-green-50 border-green-300":L===!1?"bg-red-50 border-red-300":"bg-white border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"text",value:S.username,onChange:U=>H("username",U.target.value),onFocus:()=>{S.username.trim()&&(F(!0),se(S.username.trim()))},placeholder:"Enter username to populate fields",className:"w-full border-none outline-none text-sm bg-transparent",autoComplete:"off",disabled:f}),L===!0&&t.jsx("svg",{className:"w-4 h-4 text-green-600 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),L===!1&&t.jsx("svg",{className:"w-4 h-4 text-red-600 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),M&&B.length>0&&!f&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:B.map((U,Ee)=>t.jsxs("div",{onClick:()=>W(U),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm border-b border-gray-100 last:border-b-0",children:[t.jsx("div",{className:"font-medium text-gray-900",children:U.username}),t.jsx("div",{className:"text-xs text-gray-500",children:U.fullname}),t.jsxs("div",{className:"text-xs text-gray-400",children:[U.school?.name||U.school_name||U.schoolName||U.school||"No school"," • ",U.locality?.name||U.school_location||U.locality||"No location"]})]},U.id||Ee))}),M&&B.length===0&&S.username.trim()&&!f&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-50",children:t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No available users found"})})]}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:S.fullname,disabled:!0,placeholder:"Auto populated",className:"w-full border-none outline-none text-sm"})}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:n==="students"?S.grade||"":S.years_of_experience||"",disabled:!0,placeholder:"Auto populated",className:"w-full border-none outline-none text-sm"})}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:S.school,disabled:!0,placeholder:"Auto populated",className:"w-full border-none outline-none text-sm"})}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:S.role,disabled:!0,placeholder:"Auto populated",className:"w-full border-none outline-none text-sm"})}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:S.evidence,disabled:!0,placeholder:"Auto populated",className:"w-full border-none outline-none text-sm"})}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:S.created_at?.split("T")[0]||"N/A",className:"w-full border-none outline-none text-sm",disabled:!0})}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:S.actioned_at?.split("T")[0]||"N/A",className:"w-full border-none outline-none text-sm",disabled:!0})}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:f?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}),t.jsx("span",{className:"text-gray-500",children:"Saving..."})]}):t.jsx("span",{className:"font-medium text-orange-500",children:"Pending"})}),t.jsx("div",{className:"px-3 py-2 text-sm font-medium relative",children:f?t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"})}):t.jsx("div",{className:"flex space-x-2",children:t.jsx("img",{src:Pn,alt:"Save",className:"w-4 h-4"})})})]}),t.jsxs("div",{className:"flex justify-start space-x-4 mt-6",children:[t.jsx("button",{onClick:O,disabled:m||f,className:`bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] mr-[10px] transition-colors duration-200 ${m||f?"opacity-50 cursor-not-allowed":"hover:bg-[#9a7849]"}`,children:"Add"}),t.jsx("button",{onClick:A,disabled:!m||f,className:`bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] transition-colors duration-200 flex items-center justify-center ${!m||f?"opacity-50 cursor-not-allowed":"hover:bg-[#b89a6a]"}`,children:f?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),t.jsx("span",{children:"Saving..."})]}):"Save"})]}),t.jsx($s,{isOpen:ee,onClose:ae,onConfirm:ne,title:"Confirm Delete",message:"Are you sure you want to delete this organiser? This action cannot be undone.",confirmText:"Yes",cancelText:"No",confirmButtonColor:"text-red-600"})]})},Qu=({type:a="organisers"})=>{const[s,n]=x.useState(""),{allOrganisers:o}=Ot(),l=o.filter(f=>f.users.role==="student"),d=o.filter(f=>f.users.role==="teacher"),u=()=>{switch(a){case"students":return l||[];case"teachers":return d||[];default:return o||[]}},m=x.useMemo(()=>{const f=u();if(!f||f.length===0)return[];if(!s.trim())return f;const y=s.toLowerCase();return f.filter(b=>{const v=b?.users?.fullname?.toLowerCase()||"",N=b?.users?.username?.toLowerCase()||"",w=b?.school?.name?.toLowerCase()||b?.school?.toLowerCase()||"",S=b?.users?.id?.toString().toLowerCase()||"",_=b?.role?.toLowerCase()||"",L=b?.users?.school_location?.toLowerCase()||"";return v.includes(y)||N.includes(y)||w.includes(y)||S.includes(y)||_.includes(y)||L.includes(y)})},[a,o,s]),g=f=>{};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-left",children:t.jsxs("div",{className:"relative w-full max-w-md",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.jsx("input",{type:"text",placeholder:"Search",value:s,onChange:f=>n(f.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-800 rounded-[10px] leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})}),t.jsx(OC,{organisers:m,onAction:g,organiserType:a==="students"?"students":a==="teachers"?"teachers":"all"})]})},UC=({leadershipRoles:a,onRefresh:s})=>{const[n,o]=x.useState(!1),[l,d]=x.useState(null),[u,m]=x.useState(null),[g,f]=x.useState({abbr:"",leadership_role:""}),[y,b]=x.useState({abbr:"",leadership_role:""}),[v,N]=x.useState(""),[w,S]=x.useState([]),[_,L]=x.useState(!1),[D,M]=x.useState(null);x.useEffect(()=>{if(!v.trim())S(a);else{const fe=a.filter(K=>{const ye=v.toLowerCase();return K.id.toLowerCase().includes(ye)||K.abbr.toLowerCase().includes(ye)||K.leadership_role.toLowerCase().includes(ye)});S(fe)}},[v,a]);const F=async()=>{if(!g.abbr.trim()||!g.leadership_role.trim()){k.error("Please fill in all fields");return}try{const fe=await tN(g.abbr.trim(),g.leadership_role.trim());fe.success?k.success("Leadership role created successfully"):k.error(fe.message||"Failed to create leadership role"),f({abbr:"",leadership_role:""}),o(!1),s()}catch(fe){k.error(fe.message||"Failed to create leadership role")}},B=async fe=>{if(!y.abbr.trim()||!y.leadership_role.trim()){k.error("Please fill in all fields");return}try{const K=await sN(fe,y.abbr.trim(),y.leadership_role.trim());K.success?k.success("Leadership role updated successfully"):k.error(K.message||"Failed to update leadership role"),b({abbr:"",leadership_role:""}),d(null),s()}catch(K){k.error(K.message||"Failed to update leadership role")}},q=fe=>{M(fe),L(!0),m(null)},ee=async()=>{if(D)try{const fe=await rN(D);fe.success?k.success("Leadership role deleted successfully"):k.error(fe.message||"Failed to delete leadership role"),s()}catch(fe){k.error(fe.message||"Failed to delete leadership role")}finally{L(!1),M(null)}},le=()=>{L(!1),M(null)},he=fe=>{console.log("Edit button clicked for role:",fe),b({abbr:fe.abbr,leadership_role:fe.leadership_role}),d(fe.id),m(null)},be=fe=>{m(u===fe?null:fe)};x.useEffect(()=>{const fe=K=>{u&&(K.target.closest(".context-menu")||m(null))};return document.addEventListener("mousedown",fe),()=>{document.removeEventListener("mousedown",fe)}},[u]);const Te=()=>{d(null),b({abbr:"",leadership_role:""})},we=()=>{o(!1),f({abbr:"",leadership_role:""}),m(null)};return t.jsxs("div",{children:[t.jsx("div",{className:"mb-4",style:{display:"none"},children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search",value:v,onChange:fe=>N(fe.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),t.jsx("div",{className:"w-[600px] grid grid-cols-[0.5fr_0.5fr_2fr_1fr] gap-2 mb-2",children:["ID","ABBR","Leadership Role"," "].map(fe=>fe===" "?t.jsx("div",{},fe):t.jsxs("div",{className:"px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between",children:[t.jsx("span",{children:fe}),t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]},fe))}),w.length===0&&!n?t.jsx("div",{className:"text-center py-8 text-gray-500",children:v?"No leadership roles found matching your search":"No leadership roles found"}):w.length>0?w.map(fe=>t.jsxs("div",{className:"w-[600px] grid grid-cols-[0.5fr_0.5fr_2fr_1fr] gap-2 mb-2",children:[t.jsx("div",{className:"bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200",children:fe.id}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:l===fe.id?t.jsx("input",{type:"text",value:y.abbr,onChange:K=>b({...y,abbr:K.target.value}),className:"w-full border-none outline-none text-sm bg-transparent",placeholder:"Abbreviation"}):fe.abbr}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:l===fe.id?t.jsx("input",{type:"text",value:y.leadership_role,onChange:K=>b({...y,leadership_role:K.target.value}),className:"w-full border-none outline-none text-sm bg-transparent",placeholder:"Leadership Role Title"}):fe.leadership_role}),t.jsx("div",{className:"w-full break-words px-3 py-2 text-sm font-medium relative",children:t.jsxs("div",{className:"relative",children:[l===fe.id?t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>B(fe.id),className:"hover:opacity-80 transition-opacity duration-200",children:t.jsx("img",{src:Pn,alt:"Save",className:"w-5 h-5"})}),t.jsx("button",{onClick:Te,className:"text-red-600 hover:text-red-800 text-sm",children:"✕"})]}):t.jsx("button",{onClick:()=>be(fe.id),className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),u===fe.id&&!n&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200 context-menu",children:t.jsxs("div",{className:"py-1",children:[t.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),he(fe)},className:"block w-full text-left px-4 py-2 text-sm transition-colors duration-200 text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900",children:"Edit"}),t.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),console.log("Add button clicked from dropdown"),o(!0),m(null)},className:"block w-full text-left px-4 py-2 text-sm transition-colors duration-200 text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900",children:"Add"}),t.jsx("button",{onClick:K=>{K.preventDefault(),K.stopPropagation(),console.log("Delete button clicked"),q(fe.id)},className:"block w-full text-left px-4 py-2 text-sm transition-colors duration-200 text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900",children:"Delete"})]})})]})})]},fe.id)):null,n&&t.jsxs("div",{className:"w-[600px] grid grid-cols-[0.5fr_0.5fr_2fr_1fr] gap-2 mb-2",children:[t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:"Auto generated",placeholder:"Auto generated",className:"w-full border-none outline-none text-sm text-gray-500",disabled:!0})}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:g.abbr,onChange:fe=>f({...g,abbr:fe.target.value}),placeholder:"Add an abbreviation",className:"w-full border-none outline-none text-sm bg-transparent"})}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:g.leadership_role,onChange:fe=>f({...g,leadership_role:fe.target.value}),placeholder:"Add a title",className:"w-full border-none outline-none text-sm bg-transparent"})}),t.jsx("div",{className:"w-full break-words px-3 py-2 text-sm font-medium relative",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:F,className:"hover:opacity-80 transition-opacity duration-200",children:t.jsx("img",{src:Pn,alt:"Save",className:"w-5 h-5"})}),t.jsx("button",{onClick:we,className:"text-red-600 hover:text-red-800 text-sm",children:"cancel"})]})})]}),t.jsxs("div",{className:"flex justify-start space-x-4 mt-6",children:[t.jsx("button",{onClick:()=>o(!0),disabled:n,className:`bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] mr-[10px] transition-colors duration-200 ${n?"opacity-50 cursor-not-allowed":"hover:bg-[#9a7849]"}`,children:"Add"}),t.jsx("button",{onClick:F,disabled:!n,className:`bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] transition-colors duration-200 ${n?"hover:bg-[#b89a6a]":"opacity-50 cursor-not-allowed"}`,children:"Save"})]}),t.jsx($s,{isOpen:_,onClose:le,onConfirm:ee,title:"Delete Leadership Role",message:"Are you sure you want to delete this leadership role? This action cannot be undone.",confirmText:"Yes",cancelText:"No",confirmButtonColor:"text-red-600"})]})},MC=()=>{const[a,s]=x.useState(""),{allLeadershipRoles:n,refreshLeadershipRolesData:o,isLoading:l}=Ot(),d=x.useMemo(()=>{if(!n||n.length===0)return[];if(!a.trim())return n;const u=a.toLowerCase();return n.filter(m=>{const g=String(m.id||"").toLowerCase(),f=String(m.abbr||m.abbr||"").toLowerCase(),y=String(m.leadership_role||m.leadership_role||"").toLowerCase();return g.includes(u)||f.includes(u)||y.includes(u)})},[n,a]);return l?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading leadership roles..."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-left",children:t.jsxs("div",{className:"relative w-full max-w-md",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.jsx("input",{type:"text",placeholder:"Search",value:a,onChange:u=>s(u.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-800 rounded-[10px] leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})}),t.jsx(UC,{leadershipRoles:d,onRefresh:o})]})},BC=({committees:a,onRefresh:s,committeeType:n})=>{const[o,l]=x.useState(!1),[d,u]=x.useState(null),[m,g]=x.useState(null),[f,y]=x.useState({abbr:"",committee:""}),[b,v]=x.useState({abbr:"",committee:""}),[N,w]=x.useState(""),[S,_]=x.useState([]),[L,D]=x.useState(!1),[M,F]=x.useState(null);x.useEffect(()=>{let K=a.filter(ye=>ye.category===n);if(N.trim()){const ye=N.toLowerCase();K=K.filter(O=>String(O.id).toLowerCase().includes(ye)||O.abbr.toLowerCase().includes(ye)||O.committee.toLowerCase().includes(ye))}_(K)},[N,a,n]);const B=async()=>{if(!(!f.abbr.trim()||!f.committee.trim()))try{const K=await u4(f.abbr.trim(),f.committee.trim(),n);K.success?k.success("Committee created successfully"):k.error(K.message||"Failed to create committee"),y({abbr:"",committee:""}),l(!1),s()}catch(K){k.error(K.message||"Failed to create committee")}},q=async K=>{if(!b.abbr.trim()||!b.committee.trim()){k.error("Please fill in all fields");return}try{const ye=await h4(K,b.abbr.trim(),b.committee.trim(),n);ye.success?k.success("Committee updated successfully"):k.error(ye.message||"Failed to update committee"),v({abbr:"",committee:""}),u(null),s()}catch(ye){k.error(ye.message||"Failed to update committee")}},ee=K=>{F(K),D(!0),g(null)},le=async()=>{if(M)try{const K=await f4(M);K.success?k.success("Committee deleted successfully"):k.error(K.message||"Failed to delete committee"),s()}catch(K){k.error(K.message||"Failed to delete committee")}finally{D(!1),F(null)}},he=()=>{D(!1),F(null)},be=K=>{console.log("Edit button clicked for committee:",K),v({abbr:K.abbr,committee:K.committee}),u(K.id),g(null)},Te=K=>{g(m===K?null:K)};x.useEffect(()=>{const K=ye=>{m&&(ye.target.closest(".context-menu")||g(null))};return document.addEventListener("mousedown",K),()=>{document.removeEventListener("mousedown",K)}},[m]);const we=()=>{u(null),v({abbr:"",committee:""})},fe=()=>{l(!1),y({abbr:"",committee:""}),g(null)};return t.jsxs("div",{children:[t.jsx("div",{className:"mb-4 w-[400px]",children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",placeholder:"Search",value:N,onChange:K=>w(K.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-[10px] focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),t.jsx("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"70px 120px 0.5fr 60px"},children:["ID","ABBR","Committee"," "].map(K=>K===" "?t.jsx("div",{},K):t.jsxs("div",{className:"px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between",children:[t.jsx("span",{children:K}),t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]},K))}),S.length===0&&!o?t.jsx("div",{className:"text-center py-8 text-gray-500",children:N?"No committees found matching your search":"No committees found"}):S.length>0?S.map(K=>t.jsxs("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"70px 120px 0.5fr 60px"},children:[t.jsx("div",{className:"bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200",children:K.id}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:d===K.id?t.jsx("input",{type:"text",value:b.abbr,onChange:ye=>v({...b,abbr:ye.target.value}),className:"w-full border-none outline-none text-sm bg-transparent",placeholder:"Abbreviation"}):K.abbr}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:d===K.id?t.jsx("input",{type:"text",value:b.committee,onChange:ye=>v({...b,committee:ye.target.value}),className:"w-full border-none outline-none text-sm bg-transparent",placeholder:"Committee Name"}):K.committee}),t.jsx("div",{className:"px-3 py-2 text-sm font-medium relative",children:t.jsxs("div",{className:"relative",children:[d===K.id?t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>q(K.id),className:"hover:opacity-80 transition-opacity duration-200",children:t.jsx("img",{src:Pn,alt:"Save",className:"w-5 h-5"})}),t.jsx("button",{onClick:we,className:"text-red-600 hover:text-red-800 text-sm",children:"✕"})]}):t.jsx("button",{onClick:()=>Te(K.id),className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),m===K.id&&!o&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200 context-menu",children:t.jsxs("div",{className:"py-1",children:[t.jsx("button",{onClick:ye=>{ye.preventDefault(),ye.stopPropagation(),console.log("Edit button clicked"),be(K)},className:"block w-full text-left px-4 py-2 text-sm transition-colors duration-200 text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900",children:"Edit"}),t.jsx("button",{onClick:ye=>{ye.preventDefault(),ye.stopPropagation(),console.log("Add button clicked from dropdown"),l(!0),g(null)},className:"block w-full text-left px-4 py-2 text-sm transition-colors duration-200 text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900",children:"Add"}),t.jsx("button",{onClick:ye=>{ye.preventDefault(),ye.stopPropagation(),console.log("Delete button clicked"),ee(K.id)},className:"block w-full text-left px-4 py-2 text-sm transition-colors duration-200 text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900",children:"Delete"})]})})]})})]},K.id)):null,o&&t.jsxs("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"70px 120px 0.5fr 60px"},children:[t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:"Auto generated",placeholder:"Auto generated",className:"w-full border-none outline-none text-sm text-gray-500",disabled:!0})}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:f.abbr,onChange:K=>y({...f,abbr:K.target.value}),placeholder:"Add an abbreviation",className:"w-full border-none outline-none text-sm bg-transparent"})}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:f.committee,onChange:K=>y({...f,committee:K.target.value}),placeholder:"Add a name",className:"w-full border-none outline-none text-sm bg-transparent"})}),t.jsx("div",{className:"px-3 py-2 text-sm font-medium relative",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:B,className:"hover:opacity-80 transition-opacity duration-200",children:t.jsx("img",{src:Pn,alt:"Save",className:"w-5 h-5"})}),t.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 text-sm",children:"cancel"})]})})]}),t.jsxs("div",{className:"flex justify-start space-x-4 mt-6",children:[t.jsx("button",{onClick:()=>l(!0),disabled:o,className:`bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] mr-[10px] transition-colors duration-200 ${o?"opacity-50 cursor-not-allowed":"hover:bg-[#9a7849]"}`,children:"Add"}),t.jsx("button",{onClick:B,disabled:!o,className:`bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] transition-colors duration-200 ${o?"hover:bg-[#b89a6a]":"opacity-50 cursor-not-allowed"}`,children:"Save"})]}),t.jsx($s,{isOpen:L,onClose:he,onConfirm:le,title:"Delete Committee",message:"Are you sure you want to delete this committee? This action cannot be undone.",confirmText:"Yes",cancelText:"No",confirmButtonColor:"text-red-600"})]})},$C=()=>{const[a,s]=x.useState("country"),[n,o]=x.useState([]),[l,d]=x.useState(!0),u=[{id:"country",name:"Country Committees",label:"Country Committees"},{id:"role",name:"Role Committees",label:"Role Committees"},{id:"crisis",name:"Crisis Committees",label:"Crisis Committees"},{id:"open",name:"Open Committees",label:"Open Committees"}],m=async()=>{try{d(!0);const y=await sy();o(y.data||[])}catch(y){console.log("Error fetching committees:",y),o([])}finally{d(!1)}},g=y=>{s(y)},f=()=>{m()};return x.useEffect(()=>{m()},[]),l?t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx(Fr,{size:"large",text:"Loading committees..."})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex space-x-2",children:u.map(y=>t.jsx("button",{onClick:()=>g(y.id),className:`text-sm font-medium transition-colors ${a===y.id?"bg-[#C6DAF4] text-white":"bg-white text-black border border-gray-800"}`,style:{width:"200px",height:"58px",borderRadius:"20px",padding:"5px"},children:y.label},y.id))}),t.jsx(BC,{committees:n,onRefresh:f,committeeType:a})]})},IC=()=>{const a=Ct(),[s,n]=x.useState(""),[o,l]=x.useState(""),[d,u]=x.useState("student"),[m,g]=x.useState(!1),[f,y]=x.useState({});x.useEffect(()=>{localStorage.getItem("token")?a("/home"):localStorage.clear()},[a]);const b=N=>{u(N)},v=async()=>{try{g(!0);const N={},w=/^[a-zA-Z0-9._%+-]+@gmail\.com$/;if(s){if(!w.test(s)){N.email="Please enter a valid Gmail address",k.error("Please enter a valid Gmail address"),g(!1);return}}else{N.email="Email is required",k.error("Email is required"),g(!1);return}if(o){if(o.length<6){N.password="Password must be at least 6 characters",k.error("Password must be at least 6 characters"),g(!1);return}}else{N.password="Password is required",k.error("Password is required"),g(!1);return}if(Object.keys(N).length>0){y(N),k.error("Please fill in all required fields"),g(!1);return}const S=await CC(s,o),_=S.data?.user?.id;if(S.success){const L=await xj(s,d,_||"");if(!L.success)throw new Error(L.message);k.success("Account created successfully!"),a("/email-verification",{state:{email:s}})}else throw new Error(S.message)}catch(N){k.error(N.message)}finally{g(!1)}};return t.jsx("div",{className:"min-h-screen bg-[#F7F7F7] flex items-center justify-center p-6",children:t.jsx("div",{className:"overflow-hidden w-full max-w-5xl",children:t.jsxs("div",{className:"flex h-[760px]",children:[t.jsxs("div",{className:"w-[566px] bg-[#1E395D] flex flex-col items-center justify-end p-12 relative flex-shrink-0 rounded-[32px]",children:[t.jsx("div",{className:"mb-10",children:t.jsx("div",{className:"bg-[#F7F7F7] p-6 rounded-[24px] shadow-lg",children:t.jsx(Zn,{size:"figma"})})}),t.jsx("h2",{className:"text-[#F7F7F7] text-[21px] font-normal mb-12 text-center leading-normal font-[Poppins]",children:"Quest for Leadership, Quest for Change"}),t.jsx("div",{className:"flex items-center mt-20 mb-10",children:t.jsx("h1",{className:"text-[#F7F7F7] text-[32px] font-normal text-center leading-normal",children:'"Future Leaders Start Here"'})}),t.jsx("div",{className:"mt-16",children:t.jsx("p",{className:"text-[#AAA] text-center font-[Poppins] text-[16px] font-normal leading-normal",children:"© Iman Praveesh Hassan"})})]}),t.jsx("div",{className:"flex flex-col items-center justify-center p-10 flex-1",children:t.jsx("div",{className:"w-full max-w-md",children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(Ny,{type:"email",name:"email",placeholder:"Email",value:s,onChange:N=>n(N.target.value),error:f.email,className:"w-full"}),t.jsx(Sy,{name:"password",placeholder:"Password",value:o,onChange:N=>l(N.target.value),error:f.password,className:"w-full"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(ii,{type:"button",variant:d==="student"?"role-select-active":"role-select",onClick:()=>b("student"),className:"flex-1 py-3.5 rounded-[16px] text-sm font-medium text-black",children:"Student"}),t.jsx(ii,{type:"button",variant:d==="teacher"?"role-select-active":"role-select",onClick:()=>b("teacher"),className:"flex-1 py-3.5 rounded-[16px] text-sm font-medium border border-black",children:"Teacher"})]}),t.jsx(ii,{variant:"primary",className:"w-full py-4 rounded-[32px] text-base font-bold",style:{backgroundColor:"#C2A46D"},onClick:v,disabled:m,children:m?t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"})}):"Sign Up"}),t.jsxs("div",{className:"flex justify-between items-center text-xs mt-5",children:[t.jsxs("span",{className:"text-gray-600",children:["Have an account?"," ",t.jsx(fi,{to:"/login",className:"text-[#1E395D] hover:underline font-medium underline",children:"Log In"})]}),t.jsx("a",{href:"#",className:"text-[#1E395D] hover:underline font-medium underline",children:"Read Terms and Conditions"})]})]})})})]})})})},zC=()=>{const a=Ct(),[s,n]=x.useState(""),[o,l]=x.useState(""),[d,u]=x.useState(!1),[m,g]=x.useState({});x.useEffect(()=>{localStorage.getItem("token")?a("/home"):localStorage.clear()},[a]);const f=async(y,b)=>{try{u(!0);const v={},N=/^[a-zA-Z0-9._%+-]+@gmail\.com$/;if(y){if(!N.test(y)){v.email="Please enter a valid Gmail address",k.error("Please enter a valid Gmail address"),u(!1);return}}else{v.email="Email is required",k.error("Email is required"),u(!1);return}if(b){if(b.length<6){v.password="Password must be at least 6 characters",k.error("Password must be at least 6 characters"),u(!1);return}}else{v.password="Password is required",k.error("Password is required"),u(!1);return}if(Object.keys(v).length>0){g(v),k.error("Please fill in all required fields"),u(!1);return}const w=await kC(y,b),S=await yj(y,b);S.success&&w.success?(k.success(S.message),localStorage.setItem("token",w.data?.session?.access_token||""),localStorage.setItem("userId",S.data.userId),localStorage.setItem("userRole",S.data.userRole),localStorage.setItem("global_role",S.data.global_role),localStorage.setItem("organiserId",S.data.organiserId||"")):k.error(S.message);const{userRole:_,global_role:L,organiserId:D,hasProfile:M}=S.data;a(L==="superuser"?"/super-user":D?"/organiser":_==="student"?M?"/home":"/student-profile-page":M?"/home":"/teacher-profile-page")}catch(v){k.error(v.message)}finally{u(!1)}};return t.jsx("div",{className:"min-h-screen bg-[#F7F7F7] flex items-center justify-center p-6",children:t.jsx("div",{className:"overflow-hidden w-full max-w-5xl",children:t.jsxs("div",{className:"flex h-[760px]",children:[t.jsxs("div",{className:"w-[566px] bg-[#1E395D] flex flex-col items-center justify-end p-12 relative flex-shrink-0 rounded-[32px]",children:[t.jsx("div",{className:"mb-10",children:t.jsx("div",{className:"bg-[#F7F7F7] p-6 rounded-[24px] shadow-lg",children:t.jsx(Zn,{size:"figma"})})}),t.jsx("h2",{className:"text-[#F7F7F7] text-[21px] font-normal mb-12 text-center leading-normal font-[Poppins]",children:"Quest for Leadership, Quest for Change"}),t.jsx("div",{className:"flex items-center mt-20 mb-10",children:t.jsx("h1",{className:"text-[#F7F7F7] text-[32px] font-normal text-center leading-normal",children:'"Future Leaders Start Here"'})}),t.jsx("div",{className:"mt-16",children:t.jsx("p",{className:"text-[#AAA] text-center font-[Poppins] text-[16px] font-normal leading-normal",children:"© Iman Praveesh Hassan"})})]}),t.jsx("div",{className:"flex flex-col items-center justify-center p-10 flex-1",children:t.jsx("div",{className:"w-full max-w-md mb-20",children:t.jsxs("div",{className:"space-y-6",children:[t.jsx(Ny,{type:"email",name:"email",placeholder:"Email",value:s,onChange:y=>n(y.target.value),error:m.email,className:"w-full"}),t.jsx(Sy,{name:"password",placeholder:"Password",value:o,onChange:y=>l(y.target.value),error:m.password,className:"w-full"}),t.jsx(ii,{type:"button",onClick:()=>f(s,o),variant:"primary",className:"w-full py-4 rounded-[32px] text-base font-bold",style:{backgroundColor:"#C2A46D"},disabled:d,children:d?t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"})}):"Log In"}),t.jsxs("div",{className:"flex justify-between items-center text-xs mt-5",children:[t.jsxs("span",{className:"text-gray-600",children:["Don't have an account?"," ",t.jsx(fi,{to:"/signup",className:"text-[#1E395D] hover:underline font-medium underline",children:"Sign Up"})]}),t.jsx("a",{href:"#",className:"text-[#1E395D] hover:underline font-medium underline",children:"Forgot Password?"})]})]})})})]})})})},FC=()=>{const a=ir(),s=Ct(),n=a.state?.email||"",[o,l]=x.useState(!1),[d,u]=x.useState(0);$e.useEffect(()=>{n||s("/signup")},[n,s]);const m=async()=>{if(d>0){k.error(`Please wait ${d} seconds before resending`);return}try{l(!0);const g=await AC(n);if(g.success){k.success(g.message),u(60);const f=setInterval(()=>{u(y=>y<=1?(clearInterval(f),0):y-1)},1e3)}else k.error(g.message)}catch(g){k.error(g.message||"Failed to resend verification email")}finally{l(!1)}};return t.jsx("div",{className:"min-h-screen bg-[#F7F7F7] flex items-center justify-center p-6",children:t.jsx("div",{className:"overflow-hidden w-full max-w-5xl",children:t.jsxs("div",{className:"flex h-[760px]",children:[t.jsxs("div",{className:"w-[566px] bg-[#1E395D] flex flex-col items-center justify-end p-12 relative flex-shrink-0 rounded-[32px]",children:[t.jsx("div",{className:"mb-10",children:t.jsx("div",{className:"bg-[#F7F7F7] p-6 rounded-[24px] shadow-lg",children:t.jsx(Zn,{size:"figma"})})}),t.jsx("h2",{className:"text-[#F7F7F7] text-[21px] font-normal mb-12 text-center leading-normal font-[Poppins]",children:"Quest for Leadership, Quest for Change"}),t.jsx("div",{className:"flex items-center mt-20 mb-10",children:t.jsx("h1",{className:"text-[#F7F7F7] text-[32px] font-normal text-center leading-normal",children:'"Future Leaders Start Here"'})}),t.jsx("div",{className:"mt-16",children:t.jsx("p",{className:"text-[#AAA] text-center font-[Poppins] text-[16px] font-normal leading-normal",children:"© Iman Praveesh Hassan"})})]}),t.jsx("div",{className:"flex flex-col items-center justify-center p-10 flex-1",children:t.jsx("div",{className:"w-full max-w-md",children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"w-20 h-20 bg-[#C2A46D] rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),t.jsx("h1",{className:"text-[#1E395D] text-[32px] font-bold text-center leading-normal",children:"Verify Your Email"}),t.jsxs("div",{className:"space-y-4 text-center",children:[t.jsx("p",{className:"text-gray-700 text-[16px] leading-relaxed",children:"We've sent a verification email to:"}),t.jsx("p",{className:"text-[#1E395D] text-[18px] font-semibold break-all px-2",children:n}),t.jsx("div",{className:"bg-[#FFF8E7] border-l-4 border-[#C2A46D] p-4 rounded-r-lg text-left",children:t.jsxs("p",{className:"text-gray-800 text-[14px] leading-relaxed",children:[t.jsx("span",{className:"font-semibold",children:"📧 Important:"})," Please check your email inbox",t.jsx("span",{className:"font-semibold",children:" including Spam/Promotions folders"})," to verify your account."]})}),t.jsx("p",{className:"text-gray-600 text-[14px] leading-relaxed",children:"Click the verification link in the email to activate your account and log in."})]}),t.jsx(ii,{variant:"primary",className:"w-full py-4 rounded-[32px] text-base font-bold mt-6",style:{backgroundColor:d>0?"#9CA3AF":"#C2A46D",cursor:d>0?"not-allowed":"pointer"},onClick:m,disabled:o||d>0,children:o?t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),t.jsx("span",{className:"ml-2",children:"Sending..."})]}):d>0?`Resend in ${d}s`:"Resend Verification Email"}),t.jsx("div",{className:"flex justify-center items-center text-sm mt-6",children:t.jsxs("span",{className:"text-gray-600",children:["Already verified?"," ",t.jsx(fi,{to:"/login",className:"text-[#1E395D] hover:underline font-medium underline",children:"Log In"})]})}),t.jsx("div",{className:"text-center mt-4",children:t.jsx("p",{className:"text-gray-500 text-xs",children:"Didn't receive the email? Check your spam folder or click resend."})})]})})})]})})})},PC=()=>{const a=Ct(),[s]=lw(),[n,o]=x.useState("loading"),[l,d]=x.useState("");return x.useEffect(()=>{(async()=>{try{console.log("🔄 Processing email confirmation..."),console.log("🔗 Current URL:",window.location.href),console.log("🔗 URL Hash:",window.location.hash),console.log("🔗 URL Search:",window.location.search),await new Promise(f=>setTimeout(f,1e3));const{data:m,error:g}=await Ir.auth.getSession();if(console.log("📋 Session data:",m),console.log("❌ Session error:",g),g){console.error("❌ Session error:",g),o("error"),d("Email confirmation failed. Please try again."),setTimeout(()=>a("/login"),3e3);return}if(m.session&&m.session.user){console.log("✅ Email confirmed successfully!"),console.log("👤 User:",m.session.user.email),console.log("🔑 Access token:",m.session.access_token?"Present":"Missing"),o("success"),d("Email confirmed! Logging you in...");try{localStorage.setItem("token",m.session.access_token),console.log("💾 Token stored in localStorage"),console.log("📞 Calling getUserDataByEmailApi with:",m.session.user.email);const f=await lh(m.session.user.email);if(console.log("📋 User data response:",f),f.success&&f.user){localStorage.setItem("userId",f.user.id),localStorage.setItem("userRole",f.user.role),localStorage.setItem("global_role",f.user.global_role||""),console.log("✅ Auto-login successful!"),console.log("👤 User data stored:",{userId:f.user.id,role:f.user.role,global_role:f.user.global_role}),k.success("Welcome to MunQuest!");const{role:y,global_role:b,organiserId:v,hasProfile:N}=f.user;setTimeout(()=>{a(b==="superuser"?"/super-user":v?"/organiser":y==="student"?N?"/student-home":"/student-profile":N?"/teacher-home":"/teacher-profile")},2e3)}else throw console.error("❌ Invalid user data response:",f),new Error("Failed to get user data")}catch(f){console.error("❌ Backend login error:",f),o("error"),d("Login failed. Please try logging in manually."),setTimeout(()=>a("/login"),3e3)}}else{console.log("⚠️ No session found, checking URL parameters...");const f=s.get("email");if(f){console.log("📧 Found email in URL parameters:",f),o("success"),d("Email confirmed! Logging you in...");try{console.log("📞 Calling getUserDataByEmailApi with URL email:",f);const y=await lh(f);if(console.log("📋 User data response:",y),y.success&&y.user){localStorage.setItem("userId",y.user.id),localStorage.setItem("userRole",y.user.role),localStorage.setItem("global_role",y.user.global_role||""),console.log("✅ Auto-login successful with URL email!"),k.success("Welcome to MunQuest!");const{role:b,global_role:v,organiserId:N,hasProfile:w}=y.user;setTimeout(()=>{a(v==="superuser"?"/super-user":N?"/organiser":b==="student"?w?"/student-home":"/student-profile":w?"/teacher-home":"/teacher-profile")},2e3)}else throw new Error("Failed to get user data")}catch(y){console.error("❌ Backend login error with URL email:",y),o("error"),d("Login failed. Please try logging in manually."),setTimeout(()=>a("/login"),3e3)}}else o("error"),d("No active session found. Please log in."),setTimeout(()=>a("/login"),3e3)}}catch(m){console.error("❌ Email confirmation error:",m),o("error"),d("Email confirmation failed. Please try again."),setTimeout(()=>a("/login"),3e3)}finally{}})()},[a,s]),t.jsx("div",{className:"min-h-screen bg-[#F7F7F7] flex items-center justify-center p-6",children:t.jsx("div",{className:"overflow-hidden w-full max-w-5xl",children:t.jsxs("div",{className:"flex h-[760px]",children:[t.jsxs("div",{className:"w-[566px] bg-[#1E395D] flex flex-col items-center justify-end p-12 relative flex-shrink-0 rounded-[32px]",children:[t.jsx("div",{className:"mb-10",children:t.jsx("div",{className:"bg-[#F7F7F7] p-6 rounded-[24px] shadow-lg",children:t.jsx(Zn,{size:"figma"})})}),t.jsx("h2",{className:"text-[#F7F7F7] text-[21px] font-normal mb-12 text-center leading-normal font-[Poppins]",children:"Quest for Leadership, Quest for Change"}),t.jsx("div",{className:"flex items-center mt-20 mb-10",children:t.jsx("h1",{className:"text-[#F7F7F7] text-[32px] font-normal text-center leading-normal",children:'"Future Leaders Start Here"'})}),t.jsx("div",{className:"mt-16",children:t.jsx("p",{className:"text-[#AAA] text-center font-[Poppins] text-[16px] font-normal leading-normal",children:"© Iman Praveesh Hassan"})})]}),t.jsx("div",{className:"flex flex-col items-center justify-center p-10 flex-1",children:t.jsx("div",{className:"w-full max-w-md",children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsxs("div",{className:`w-20 h-20 rounded-full flex items-center justify-center ${n==="loading"?"bg-[#C2A46D]":n==="success"?"bg-green-500":"bg-red-500"}`,children:[n==="loading"&&t.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-white"}),n==="success"&&t.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),n==="error"&&t.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})}),t.jsxs("h1",{className:"text-[#1E395D] text-[32px] font-bold text-center leading-normal",children:[n==="loading"&&"Confirming Email...",n==="success"&&"Welcome to MunQuest!",n==="error"&&"Confirmation Failed"]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-gray-700 text-[16px] leading-relaxed",children:l}),n==="loading"&&t.jsx("div",{className:"mt-4",children:t.jsx("p",{className:"text-gray-600 text-[14px] leading-relaxed",children:"Please wait while we verify your email and log you in automatically."})}),n==="success"&&t.jsx("div",{className:"mt-4",children:t.jsx("p",{className:"text-green-600 text-[14px] leading-relaxed",children:"🎉 Your email has been confirmed! Redirecting you to your dashboard..."})}),n==="error"&&t.jsx("div",{className:"mt-4",children:t.jsx("p",{className:"text-red-600 text-[14px] leading-relaxed",children:"Something went wrong. You'll be redirected to the login page."})})]}),n==="loading"&&t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-6",children:t.jsx("div",{className:"bg-[#C2A46D] h-2 rounded-full animate-pulse",style:{width:"100%"}})})]})})})]})})})},HC=()=>{const a=Ct();return x.useEffect(()=>{window.location.hash.includes("access_token=")?(console.log("🔗 Access token detected in URL, redirecting to email confirmation..."),a("/email-confirmation",{replace:!0})):(console.log("🔗 No access token, redirecting to login..."),a("/login",{replace:!0}))},[a]),t.jsx("div",{className:"min-h-screen bg-[#F7F7F7] flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#C2A46D] mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Redirecting..."})]})})},qC=()=>{const[a,s]=x.useState(""),[n,o]=x.useState(null),[l,d]=x.useState(!1),u=async()=>{if(a){d(!0);try{console.log("Testing API with email:",a);const m=await lh(a);console.log("API Response:",m),o(m)}catch(m){console.error("API Error:",m),o({error:m.message})}finally{d(!1)}}};return t.jsxs("div",{className:"p-8",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Test Email Confirmation API"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("input",{type:"email",value:a,onChange:m=>s(m.target.value),placeholder:"Enter email to test",className:"border p-2 rounded w-64 mr-2"}),t.jsx("button",{onClick:u,disabled:l,className:"bg-blue-500 text-white px-4 py-2 rounded disabled:opacity-50",children:l?"Testing...":"Test API"})]}),n&&t.jsxs("div",{className:"mt-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Result:"}),t.jsx("pre",{className:"bg-gray-100 p-4 rounded overflow-auto",children:JSON.stringify(n,null,2)})]})]})},xs=({children:a,loadingText:s="Loading...",delay:n=1e3})=>{const[o,l]=x.useState(!0);return x.useEffect(()=>{const d=setTimeout(()=>{l(!1)},n);return()=>clearTimeout(d)},[n]),o?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx(Fr,{size:"large",text:s})}):t.jsx(t.Fragment,{children:a})},VC=()=>{const a=Ct(),[s,n]=x.useState(!0),[o,l]=x.useState(!1);x.useEffect(()=>{(async()=>{try{if(localStorage.getItem("organiserId")){const g=await Ux();if(g.success&&g.data&&g.data.length>0){a("/dashboard");return}}else{const g=await Ox();if(g.success&&g.data&&g.data.length>0){a("/dashboard");return}}}catch(m){console.log("Error checking events:",m)}finally{n(!1)}})()},[a]);const d=async()=>{try{l(!0);const u=localStorage.getItem("userId");if(u){const m=await Mx(u);return m.success&&m.data?(k.success(`The status is ${m.data}`),!0):(k.warning("You are not registered as an organiser"),a("/request-approval"),!1)}else return!1}catch(u){console.log("Error checking registration status:",u)}finally{l(!1)}};return s?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx(Fr,{size:"large",text:"Loading events..."})}):t.jsx(xs,{loadingText:"Loading Home...",children:t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsx(Wt,{}),t.jsx("div",{className:"bg-white",children:t.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:t.jsx("div",{className:"mt-6 flex justify-end space-x-4",children:t.jsxs("button",{onClick:d,disabled:o,className:"bg-[#1E395D] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#1a2f4a] transition-colors duration-200 flex items-center",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),o?"Checking...":"Register Organiser"]})})})}),t.jsx("div",{className:"bg-[#1E395D] min-h-[calc(100vh-200px)] flex flex-col items-center justify-center px-6",children:t.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"bg-white rounded-lg p-8 inline-block",children:t.jsx(Zn,{size:"large"})})}),t.jsx("h2",{className:"text-white text-2xl md:text-3xl font-medium mb-8 leading-relaxed",children:"Quest for Leadership, Quest for Change"}),t.jsx("h1",{className:"text-white text-4xl md:text-5xl lg:text-6xl font-bold leading-tight",children:'"Future Leaders Start Here"'})]})}),t.jsx("div",{className:"bg-[#1E395D] py-4",children:t.jsx("div",{className:"text-center",children:t.jsx("p",{className:"text-white text-sm",children:"© Iman Praveesh Hassan"})})})]})})},YC=()=>{const a=Ct(),[s,n]=x.useState("Upcoming"),[o,l]=x.useState(!0),[d,u]=x.useState([]),[m,g]=x.useState(!1),[f,y]=x.useState([]),{allRegistrations:b,refreshRegistrationsData:v}=Ot();x.useEffect(()=>{let D=localStorage.getItem("userId"),M=d.filter(F=>b.filter(q=>q.event_id===F.id&&q.user_id===D).length>0);y(M)},[b]),x.useEffect(()=>{d.length>0&&d.forEach(D=>{v(D.id.toString())})},[d,v]),x.useEffect(()=>{(async()=>{try{const M=await Ox();if(M.success&&M.data&&M.data.length>0)u(M.data);else{a("/home");return}}catch(M){console.log("Error checking events:",M),a("/home");return}finally{l(!1)}})()},[a]);const N=async()=>{try{g(!0);const D=localStorage.getItem("userId");if(!D)return!1;const M=await Mx(D);return M.success&&M.data?(k.success(`The status is ${M.data}`),!0):(k.warning("You are not registered as an organiser"),a("/request-approval"),!1)}catch(D){return console.log("Error checking registration status:",D),!1}finally{g(!1)}},w=async D=>{const M=localStorage.getItem("userRole");a(M==="student"?`/student-registration/${D}`:`/teacher-registration/${D}`)},_=(()=>{const D=new Date,M=localStorage.getItem("userId"),F=B=>B?new Date(B):null;switch(s){case"Upcoming":return d.filter(B=>{const q=F(B.end_date)||F(B.start_date),ee=b.filter(le=>le.event_id===B.id&&le.user_id===M);return q&&q>=D&&B.status!=="cancelled"&&B.organiser.userid!==M&&ee.length===0});case"Registered":return f;case"Past":return d.filter(B=>{const q=F(B.end_date)||F(B.start_date);return q&&q<D&&B.status!=="cancelled"});case"Cancelled":return d.filter(B=>B.status==="cancelled");default:return d}})();if(o)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx(Fr,{size:"large",text:"Loading events..."})});const L=["Upcoming","Registered","Past","Cancelled"];return t.jsx(xs,{loadingText:"Loading Dashboard...",children:t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsx(Wt,{}),t.jsx("div",{className:"bg-white",children:t.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:t.jsx("div",{className:"mt-6 flex justify-end space-x-4",children:t.jsxs("button",{onClick:N,disabled:m,className:"bg-[#1E395D] w-[230px] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#1a2f4a] transition-colors duration-200 flex items-center",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),m?"Checking...":"Register Organiser"]})})})}),t.jsx("div",{className:"bg-white border-b border-gray-200",children:t.jsx("div",{className:"max-w-7xl mx-auto px-6",children:t.jsx("div",{className:"flex space-x-8",children:L.map(D=>t.jsx("button",{onClick:()=>n(D),className:`py-4 px-1 text-sm font-medium border-b-2 transition-colors duration-200 ${s===D?"border-[#1E395D] text-[#1E395D]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:D},D))})})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(D=>t.jsxs("div",{onClick:()=>w(D.id),className:"border border-gray-800 bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[t.jsx("div",{className:"h-48 bg-gray-200 overflow-hidden",children:t.jsx("img",{src:D.cover_image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",alt:D.name,className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:D.name}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),D.start_date]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),D.locality.name]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})}),D.fees_per_delegate]})]})]})]},D.id))}),_.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-gray-400 mb-4",children:t.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",s.toLowerCase()," events"]}),t.jsxs("p",{className:"text-gray-500",children:["There are no ",s.toLowerCase()," events at the moment."]})]})]})]})})},GC=()=>{const a=Ct(),[s,n]=x.useState(""),[o,l]=x.useState(""),[d,u]=x.useState(""),[m,g]=x.useState(""),[f,y]=x.useState(""),[b,v]=x.useState(""),[N,w]=x.useState([]),[S,_]=x.useState(!1),[L,D]=x.useState(!1);x.useEffect(()=>{async function q(){const ee=await Kn();n(ee.data?.school?.name||""),l(ee.data?.school?.code||""),g(ee.data?.school?.locality_id||""),u(ee.data?.school?.id||"")}q()},[]);const M=async q=>{try{const ee=q.target.files;if(ee){D(!0);const le=Array.from(ee).map(be=>be.name),he=await Dj(ee[0]);he.success?(k.success(he.message),w(be=>[...be,...le]),v(he.documentUrl)):k.error(he.message)}}catch(ee){k.error(ee.message)}finally{D(!1)}},F=q=>{w(ee=>ee.filter(le=>le!==q))},B=async()=>{if(!f.trim()){k.error("Please enter your role in event or in school");return}if(!b.trim()){k.error("Please upload evidence documents");return}_(!0);try{const q=await Tj(d,m,f,b);q.success?(k.success(q.message),a("/request-under-verification")):(k.error(q.message),_(!1))}catch(q){k.error(q.message),_(!1)}finally{_(!1)}};return t.jsx(xs,{loadingText:"Loading Request Approval...",children:t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsx(Wt,{}),t.jsxs("div",{className:"max-w-[62rem] mx-auto px-6 py-12",children:[t.jsx("h1",{className:"font-bold text-[#C2A46D] mb-8 text-left",style:{fontSize:"40px"},children:"Request for Approval"}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"font-bold text-black mb-6",style:{fontSize:"30px"},children:"Organiser Info"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"School"}),t.jsx("input",{type:"text",disabled:!0,value:s,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#607DA3] focus:border-transparent",placeholder:"Enter school name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Locality"}),t.jsx("input",{type:"text",disabled:!0,value:o,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#607DA3] focus:border-transparent",placeholder:"Enter locality"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Role in Event or in School"}),t.jsx("input",{type:"text",value:f,onChange:q=>y(q.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#607DA3] focus:border-transparent",placeholder:"Enter your role"})]})]})]}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Evidence"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"text",placeholder:"E.g. Letter from School or / and ID",className:"w-[350px] px-4 py-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-[#607DA3] focus:border-transparent",readOnly:!0}),t.jsxs("label",{className:`px-4 py-3 rounded-r-lg transition-colors duration-200 ${L?"bg-gray-400 cursor-not-allowed":"bg-[#607DA3] text-white cursor-pointer hover:bg-[#1a2f4a]"}`,style:{height:"50px",display:"flex",alignItems:"center",justifyContent:"center"},children:[L?t.jsx(Fr,{size:"small",text:""}):t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),t.jsx("input",{type:"file",multiple:!0,onChange:M,disabled:L,className:"hidden"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"grey",fontSize:"12px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Uploaded Files"}),t.jsx("div",{className:"space-y-2",children:N.map((q,ee)=>t.jsxs("div",{className:"w-[400px] flex items-center justify-between bg-gray-50 px-4 py-3 rounded-lg",children:[t.jsx("span",{className:"text-sm text-gray-700",children:q}),t.jsx("button",{onClick:()=>F(q),className:"text-red-500 hover:text-red-700 transition-colors duration-200",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},ee))})]})]}),t.jsx("div",{className:"text-left",children:t.jsx("button",{onClick:B,disabled:S,style:{display:"flex",width:"120px",padding:"10px",justifyContent:"center",alignItems:"center",gap:"10px",borderRadius:"30px",backgroundColor:"#D9C7A1",color:"white",fontWeight:500,transition:"background-color 0.2s",opacity:S?.5:1,cursor:S?"not-allowed":"pointer"},onMouseOver:q=>q.currentTarget.style.background="#B8945F",onMouseOut:q=>q.currentTarget.style.background="#C2A46D",children:S?"Submitting...":"Submit"})})]})]})})},WC=()=>{const a=Ct();return t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsx(Wt,{}),t.jsx("div",{className:"max-w-[75rem] mx-auto px-6 py-12",style:{paddingTop:"15rem"},children:t.jsxs("div",{className:"text-left",children:[t.jsx("h1",{style:{color:"#000",textAlign:"center",fontSize:"40px",fontStyle:"normal",fontWeight:500,lineHeight:"150%",marginBottom:"1rem"},children:"Your request is under verification"}),t.jsx("p",{style:{color:"#000",textAlign:"center",fontSize:"30px",fontStyle:"normal",fontWeight:400,lineHeight:"150%",marginBottom:"1rem"},children:"We will notify you soon."}),t.jsxs("button",{onClick:()=>a("/home"),style:{display:"flex",width:"140px",height:"60px",padding:"10px",justifyContent:"center",alignItems:"center",gap:"10px",borderRadius:"30px",backgroundColor:"#C2A46D",color:"white",fontWeight:500,fontSize:"16px",border:"none",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",cursor:"pointer",margin:"auto",marginTop:"3rem"},onMouseEnter:s=>{s.currentTarget.style.backgroundColor="#B8945F",s.currentTarget.style.transform="translateY(-1px)",s.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:s=>{s.currentTarget.style.backgroundColor="#C2A46D",s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},children:[t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),t.jsx("polyline",{points:"9,22 9,12 15,12 15,22"})]}),"Home"]})]})})]})},Ks="data:image/svg+xml,%3csvg%20width='23'%20height='24'%20viewBox='0%200%2023%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M19.6807%200.569926C18.9446%20-0.18965%2017.7436%20-0.18965%2017.0075%200.569926L6.89579%2011.0041C6.35341%2011.5638%205.95266%2012.2696%205.75895%2013.043L5.087%2015.6815C4.89329%2016.4273%205.10032%2017.2006%205.62939%2017.7341C6.03014%2018.1476%206.54588%2018.36%207.08826%2018.36C7.26866%2018.36%207.45027%2018.3337%207.61733%2018.2938L10.1743%2017.6004C10.9237%2017.4005%2011.5944%2016.987%2012.1501%2016.4273L22.2618%205.99312C22.9979%205.23355%2022.9979%203.99424%2022.2618%203.23467L19.6807%200.569926ZM11.7131%2015.9751C11.2482%2016.4548%2010.6671%2016.8008%2010.0339%2016.9745L7.47693%2017.6679C6.98661%2017.8016%206.46963%2017.6541%206.10763%2017.2819C5.72021%2016.9071%205.59186%2016.3749%205.72021%2015.8676L6.39215%2013.2291C6.56043%2012.5757%206.89579%2011.9761%207.3607%2011.4963L15.4057%203.19473L19.7582%207.68598L11.7131%2015.9751ZM21.8248%205.54091L20.2098%207.20621L15.8573%202.71497L17.4712%201.04966C17.7169%200.796049%2018.0269%200.676106%2018.3489%200.676106C18.6722%200.676106%2018.9821%200.796039%2019.2267%201.04966L21.8224%203.72816C22.3018%204.22164%2022.3018%205.03367%2021.8248%205.54091Z'%20fill='black'/%3e%3cpath%20d='M22.2246%2011.6698C22.0442%2011.6698%2021.9014%2011.816%2021.9014%2012.0034V20.6785C21.9014%2021.9441%2020.9074%2022.971%2019.6797%2022.971H2.86691C1.64049%2022.971%200.645288%2021.9454%200.645288%2020.6785V3.32825C0.645288%202.06272%201.63925%201.03577%202.86691%201.03577H11.2739C11.4543%201.03577%2011.5972%200.889605%2011.5972%200.702199C11.5972%200.516054%2011.4543%200.369873%2011.2739%200.369873H2.86691C1.27849%200.369873%200%201.70289%200%203.32822V20.6785C0%2022.3038%201.29182%2023.6369%202.86691%2023.6369H19.681C21.2694%2023.6369%2022.5479%2022.3038%2022.5479%2020.6785V12.0034C22.5479%2011.8172%2022.4062%2011.6698%2022.2246%2011.6698Z'%20fill='black'/%3e%3c/svg%3e",KC=()=>{const a=Ct(),[s,n]=x.useState(1),[o,l]=x.useState(""),[d,u]=x.useState(""),[m,g]=x.useState(""),[f,y]=x.useState(""),[b,v]=x.useState(""),[N,w]=x.useState(null),[S,_]=x.useState(null),[L,D]=x.useState(""),[M,F]=x.useState(""),[B,q]=x.useState(""),[ee,le]=x.useState(""),[he,be]=x.useState(""),[Te,we]=x.useState(""),[fe,K]=x.useState(""),[ye,O]=x.useState(""),[H,se]=x.useState(""),[W,A]=x.useState({}),[Q,ne]=x.useState(!1),[ae,ge]=x.useState(!1),[ve,U]=x.useState(!1),[Ee,Ce]=x.useState(!1),Me=[{id:1,name:"Event Info",active:s===1},{id:2,name:"Seats & Fees",active:s===2},{id:3,name:"Event Links",active:s===3}];x.useEffect(()=>{async function $(){const De=await Kn();l(De.data?.school?.name||""),u(De.data?.school?.code||""),g(De.data?.school?.locality_id||""),y(De.data?.school?.id||""),v(De.data?.school?.area_id||"")}$()},[]);const me=()=>{const $={};if(N||($.coverImage="Event cover image is required"),S||($.eventLogo="Event logo is required"),L.trim()||($.eventName="Event name is required"),M.trim()?M.trim().length>500&&($.eventDescription="Event description must be upto 500 characters"):$.eventDescription="Event description is required",B||($.eventStartDate="Event start date is required"),ee||($.eventEndDate="Event end date is required"),B&&ee){const De=new Date(B),Be=new Date(ee);De>=Be&&($.eventEndDate="End date must be after start date")}return s===2&&(he.trim()?(isNaN(Number(he))||Number(he)<=0)&&($.numberOfSeats="Number of seats must be a positive number"):$.numberOfSeats="Number of seats is required",Te.trim()?(isNaN(Number(Te))||Number(Te)<=0)&&($.feesPerDelegate="Fees per delegate must be a positive number"):$.feesPerDelegate="Fees per delegate is required"),s===3&&(ye.trim()?Fe(ye)||($.website="Please enter a valid website URL"):$.website="Website is required",H.trim()?Je(H)||($.instagram="Please enter a valid Instagram handle (e.g., @username)"):$.instagram="Instagram handle is required"),A($),Object.keys($).length===0},_e=async()=>{if(s===1){if(!me()){k.error("Please fill in all required fields and ensure description is upto 500 characters");return}n(s+1)}else if(s===2){if(!me()){k.error("Please fill in all required fields for seats and fees");return}n(s+1)}else if(s===3){if(!me()){k.error("Please fill in all required fields for event links");return}try{Ce(!0);const $=localStorage.getItem("organiserId"),De=await Qj(L,M,B,ee,N,S,m,f,b,he,Te,fe,ye,H,$);De.success?(k.success(De.message),a("/event-create-success")):k.error(De.message)}catch($){k.error("Failed to create event: "+($.message||"Unknown error"))}finally{Ce(!1)}}else n(s+1)},Ye=$=>{W[$]&&A(De=>{const Be={...De};return delete Be[$],Be})},st=($,De)=>{q($),le(De),Ye("eventStartDate"),Ye("eventEndDate")},re=()=>{U(!ve)},Se=()=>{U(!1)},Ie=($,De)=>{const Be=Number($),Pe=Number(De);!isNaN(Be)&&!isNaN(Pe)&&Be>0&&Pe>0?K((Be*Pe).toString()):K("")},Fe=$=>{try{return new URL($.startsWith("http")?$:`https://${$}`),!0}catch{return!1}},Je=$=>/^@[a-zA-Z0-9._]+$/.test($),T=($,De,Be)=>{/[^0-9]/.test($)&&k.error("Only numbers are allowed in this field");const P=$.replace(/[^0-9]/g,"");De(P),Ye(Be)},je=async($,De)=>{try{const Be=$.target.files;if(Be){De==="cover"?ne(!0):ge(!0);const Pe=await Lx(Be[0]);Pe.success?(k.success(Pe.message),De==="cover"?(w(Pe.imageUrl),Ye("coverImage")):(_(Pe.imageUrl),Ye("eventLogo"))):k.error(Pe.message)}}catch(Be){k.error(Be.message)}finally{De==="cover"?ne(!1):ge(!1)}},te=()=>t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{style:{display:"flex",gap:"8rem",alignItems:"flex-end"},children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"flex items-center justify-center border-2 border-dashed",style:{width:"400px",height:"225px",flexShrink:0,borderRadius:"20px",background:"#D9C7A1",borderColor:W.coverImage?"#ef4444":"#d1d5db"},children:Q?t.jsx(Fr,{size:"large",text:"Uploading..."}):N?t.jsx("img",{src:typeof N=="string"?N:URL.createObjectURL(N),alt:"Event Cover",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"20px"}}):t.jsx("div",{className:"text-center text-black font-medium",children:"Event Cover Image"})}),t.jsxs("label",{className:`absolute bottom-0 bg-white rounded-full p-2 shadow-md ${Q?"cursor-not-allowed opacity-50":"cursor-pointer hover:bg-gray-50"}`,style:{right:"-2rem"},children:[t.jsx("img",{src:Ks,alt:"Edit",className:"w-4 h-4"}),t.jsx("input",{type:"file",accept:"image/*",onChange:$=>$.target.files?.[0]&&je($,"cover"),disabled:Q,className:"hidden"})]})]}),t.jsx("div",{children:t.jsxs("div",{className:"relative w-32 h-32",children:[t.jsx("div",{className:"flex items-center justify-center border-2 border-dashed",style:{width:"128px",height:"128px",flexShrink:0,borderRadius:"20px",background:"#D9C7A1",borderColor:W.eventLogo?"#ef4444":"#d1d5db"},children:ae?t.jsx(Fr,{size:"medium",text:"Uploading..."}):S?t.jsx("img",{src:typeof S=="string"?S:URL.createObjectURL(S),alt:"Event Logo",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"20px"}}):t.jsx("div",{className:"text-center text-black font-medium text-sm",children:"Event Logo"})}),t.jsxs("label",{className:`absolute bottom-0 bg-white rounded-full p-2 shadow-md ${ae?"cursor-not-allowed opacity-50":"cursor-pointer hover:bg-gray-50"}`,style:{right:"-2rem"},children:[t.jsx("img",{src:Ks,alt:"Edit",className:"w-4 h-4"}),t.jsx("input",{type:"file",accept:"image/*",onChange:$=>$.target.files?.[0]&&je($,"logo"),disabled:ae,className:"hidden"})]})]})})]}),t.jsxs("div",{className:"flex gap-8",children:[t.jsx("div",{children:W.coverImage&&t.jsx("div",{className:"text-red-500 text-sm mt-2",children:W.coverImage})}),t.jsx("div",{children:W.eventLogo&&t.jsx("div",{className:"text-red-500 text-sm mt-2",children:W.eventLogo})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Event Name"}),t.jsx("input",{type:"text",value:L,onChange:$=>{D($.target.value),Ye("eventName")},placeholder:"E.g. Global Vision MUN 2025",style:{display:"flex",width:"400px",height:"40px",padding:"10px",alignItems:"flex-start",gap:"10px",borderRadius:"5px",border:W.eventName?"1px solid #ef4444":"1px solid #d1d5db",outline:"none"}}),W.eventName&&t.jsx("div",{className:"text-red-500 text-sm mt-1",children:W.eventName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Event Description"}),t.jsx("textarea",{value:M,onChange:$=>{F($.target.value),Ye("eventDescription")},placeholder:"E.g. Describe the event (upto 500 characters)",maxLength:500,rows:4,style:{display:"flex",width:"400px",height:"100px",padding:"10px",alignItems:"flex-start",gap:"10px",borderRadius:"5px",border:W.eventDescription?"1px solid #ef4444":"1px solid #d1d5db",outline:"none"}}),t.jsx("div",{className:"flex justify-between w-[400px] text-sm mt-1",children:t.jsx("div",{className:W.eventDescription?"text-red-500":"text-gray-500",children:W.eventDescription||`${M.length}/500 maximum`})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Event Dates"}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{onClick:re,className:"flex items-center justify-between w-[400px] px-4 py-3 border border-gray-300 rounded-lg cursor-pointer hover:border-gray-400 transition-colors",style:{border:W.eventStartDate||W.eventEndDate?"1px solid #ef4444":"1px solid #9CA3AF"},children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Start Date"}),t.jsx("span",{className:"text-sm font-medium",children:B?new Date(B).toLocaleDateString("en-GB"):"DD / MM / YYYY"})]}),t.jsx("div",{className:"text-gray-400",children:"to"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"End Date"}),t.jsx("span",{className:"text-sm font-medium",children:ee?new Date(ee).toLocaleDateString("en-GB"):"DD / MM / YYYY"})]})]}),t.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]}),ve&&t.jsx(Cy,{startDate:B,endDate:ee,onDateRangeChange:st,onClose:Se,maxDays:7})]}),t.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Select the start and end dates for your event"}),(W.eventStartDate||W.eventEndDate)&&t.jsx("div",{className:"text-red-500 text-sm mt-1",children:W.eventStartDate||W.eventEndDate})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"School"}),t.jsx("input",{type:"text",value:o,disabled:!0,onChange:$=>l($.target.value),style:{display:"flex",width:"400px",height:"40px",padding:"10px",alignItems:"flex-start",gap:"10px",borderRadius:"5px",border:"1px solid #d1d5db",outline:"none"}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Locality"}),t.jsx("input",{type:"text",value:d,disabled:!0,onChange:$=>u($.target.value),style:{display:"flex",width:"400px",height:"40px",padding:"10px",alignItems:"flex-start",gap:"10px",borderRadius:"5px",border:"1px solid #d1d5db",outline:"none"}})]})]}),X=()=>t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"No. of Seats"}),t.jsx("input",{type:"number",inputMode:"numeric",pattern:"[0-9]*",value:he,onChange:$=>{T($.target.value,De=>{be(De),Ie(De,Te)},"numberOfSeats")},placeholder:"E.g. 400",style:{display:"flex",width:"400px",height:"40px",padding:"10px",alignItems:"flex-start",gap:"10px",borderRadius:"5px",border:W.numberOfSeats?"1px solid #ef4444":"1px solid #d1d5db",outline:"none"}}),W.numberOfSeats&&t.jsx("div",{className:"text-red-500 text-sm mt-1",children:W.numberOfSeats})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Fees per Delegate"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#6b7280",fontSize:"16px",fontWeight:500},children:"AED"}),t.jsx("input",{type:"number",inputMode:"numeric",pattern:"[0-9]*",value:Te,onChange:$=>{T($.target.value,De=>{we(De),Ie(he,De)},"feesPerDelegate")},placeholder:"200",style:{display:"flex",width:"400px",height:"40px",padding:"10px 10px 10px 50px",alignItems:"flex-start",gap:"10px",borderRadius:"5px",border:W.feesPerDelegate?"1px solid #ef4444":"1px solid #d1d5db",outline:"none"}})]}),W.feesPerDelegate&&t.jsx("div",{className:"text-red-500 text-sm mt-1",children:W.feesPerDelegate})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Total Revenue"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:"#6b7280",fontSize:"16px",fontWeight:500},children:"AED"}),t.jsx("input",{type:"number",inputMode:"numeric",pattern:"[0-9]*",value:fe,readOnly:!0,placeholder:"80000",style:{display:"flex",width:"400px",height:"40px",padding:"10px 10px 10px 50px",alignItems:"flex-start",gap:"10px",borderRadius:"5px",border:"1px solid #d1d5db",outline:"none",backgroundColor:"#f9fafb",color:"#6b7280"}})]})]})]}),Le=()=>t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Website"}),t.jsx("input",{type:"text",value:ye,onChange:$=>{O($.target.value),Ye("website")},placeholder:"www.globalvisionmun.com",style:{display:"flex",width:"400px",height:"40px",padding:"10px",alignItems:"flex-start",gap:"10px",borderRadius:"5px",border:W.website?"1px solid #ef4444":"1px solid #d1d5db",outline:"none"}}),W.website&&t.jsx("div",{className:"text-red-500 text-sm mt-1",children:W.website})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Instagram"}),t.jsx("input",{type:"text",value:H,onChange:$=>{se($.target.value),Ye("instagram")},placeholder:"@globalvisionmun",style:{display:"flex",width:"400px",height:"40px",padding:"10px",alignItems:"flex-start",gap:"10px",borderRadius:"5px",border:W.instagram?"1px solid #ef4444":"1px solid #d1d5db",outline:"none"}}),W.instagram&&t.jsx("div",{className:"text-red-500 text-sm mt-1",children:W.instagram})]})]});return t.jsx(xs,{loadingText:"Loading Event Creation...",children:t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsx(Wt,{}),t.jsx("div",{className:"py-3",children:t.jsx("div",{className:"mx-auto px-6",style:{maxWidth:"65rem"},children:t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx("span",{className:"cursor-pointer",onClick:()=>a("/home"),style:{color:"#C2A46D",fontSize:"25px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Home"}),t.jsx("span",{className:"mx-2",style:{color:"#C2A46D",fontSize:"25px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:">"}),t.jsx("span",{className:"text-[#1E395D] font-medium",style:{color:"#C2A46D",fontSize:"25px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Event Info"})]})})}),t.jsx("div",{className:"bg-white",children:t.jsx("div",{className:"mx-auto px-6",style:{maxWidth:"65rem"},children:t.jsx("div",{className:"flex items-center space-x-4",children:Me.map(($,De)=>t.jsxs($e.Fragment,{children:[t.jsx("div",{className:`font-medium transition-colors duration-200 cursor-pointer ${$.active?"bg-[#1E395D] text-white":"bg-white text-gray-600 hover:text-gray-800"}`,style:{display:"flex",width:"200px",height:"58px",padding:"5px",justifyContent:"center",alignItems:"center",borderRadius:"20px"},onClick:()=>n($.id),children:$.name}),De<Me.length-1&&t.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},$.id))})})}),t.jsxs("div",{className:"mx-auto px-6 py-8",style:{maxWidth:"65rem"},children:[s===1&&te(),s===2&&X(),s===3&&Le(),t.jsx("div",{className:"mt-12 text-left",children:t.jsx("button",{onClick:()=>{if(s===3)_e();else{if(!me()){k.error("Please fill in all required fields");return}n(s+1)}},disabled:Ee,style:{display:"flex",width:"120px",padding:"10px",justifyContent:"center",alignItems:"center",gap:"10px",borderRadius:"30px",background:Ee?"#9CA3AF":"#C2A46D",color:"#fff",fontWeight:500,fontSize:"16px",border:"none",cursor:Ee?"not-allowed":"pointer",transition:"background 0.2s",opacity:Ee?.7:1},onMouseOver:$=>!Ee&&($.currentTarget.style.background="#B8945F"),onMouseOut:$=>!Ee&&($.currentTarget.style.background="#C2A46D"),children:Ee?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),t.jsx("span",{children:"Creating..."})]}):"Continue"})})]})]})})},QC=()=>{const a=Ct();return t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsx(Wt,{}),t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[70vh] px-6",children:[t.jsx("div",{className:"text-center mb-12",children:t.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",style:{color:"#000",fontSize:"48px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Your event is created."})}),t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("button",{onClick:()=>a("/home"),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"30px",background:"#C2A46D",color:"#fff",fontWeight:500,fontSize:"16px",border:"none",cursor:"pointer",transition:"background 0.2s"},onMouseOver:s=>s.currentTarget.style.background="#B8945F",onMouseOut:s=>s.currentTarget.style.background="#C2A46D",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"App Home"]}),t.jsxs("button",{onClick:()=>a("/organiser"),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"30px",background:"#C2A46D",color:"#fff",fontWeight:500,fontSize:"16px",border:"none",cursor:"pointer",transition:"background 0.2s"},onMouseOver:s=>s.currentTarget.style.background="#B8945F",onMouseOut:s=>s.currentTarget.style.background="#C2A46D",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Organiser Home"]})]})]})]})},XC=()=>{const a=Ct(),[s,n]=x.useState([]),[o,l]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const g=await Ux();g.success?n(g.data||[]):k.error(g.message)}catch(g){console.log("Error fetching events:",g),k.error(g.message)}finally{l(!1)}})()},[]);const d=()=>{a("/event-create")},u=m=>{a(`/event-dashboard/${m}`)};return o?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#1E395D] mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading events..."})]})}):t.jsx(xs,{loadingText:"Loading Events...",children:t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Wt,{maxWidth:"max-w-[88rem]"}),t.jsxs("div",{className:"max-w-[85rem] mx-auto px-6 py-8",style:{paddingLeft:"10.5rem"},children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsx("h1",{className:"text-4xl font-medium text-[#C2A46D]",children:"Organiser Events"}),t.jsxs("button",{onClick:d,style:{display:"flex",width:"160px",height:"40px",padding:"10px",justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"30px",backgroundColor:"#1E395D",color:"white",fontWeight:500,transition:"background-color 0.2s"},className:"font-medium hover:bg-[#1a2f4a]",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Event"]})]}),s.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-gray-400 mb-4",children:t.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events available"}),t.jsx("p",{className:"text-gray-500",children:"Please create an event to get started."})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(m=>t.jsxs("div",{onClick:()=>u(m.id),className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200 cursor-pointer",children:[t.jsx("div",{className:"h-48 bg-gray-200 overflow-hidden",children:t.jsx("img",{src:m.cover_image||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop",alt:m.name,className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:m.name}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),m.start_date," - ",m.end_date]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),m.locality.name]}),t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})}),m.fees_per_delegate]})]}),t.jsx("div",{className:"text-sm text-[#1E395D] font-medium",children:"Click to manage event →"})]})]},m.id))})]})]})})},Pp=a=>a.toLowerCase().trim().replace(/[^\w\s]/g,"").replace(/\s+/g,"").normalize("NFD").replace(/[\u0300-\u036f]/g,""),JC=()=>Math.floor(1e3+Math.random()*9e3).toString(),ZC=()=>String.fromCharCode(97+Math.floor(Math.random()*26)),ic=a=>{if(!a||a.trim()==="")return"";const s=a.trim().split(/\s+/),n=s[0]||"",o=s.slice(1).join("")||"",l=Pp(n);let d="";if(l.length>=4)d=l.substring(0,4);else{const u=Pp(o);for(d=l+u;d.length<4;)d+=ZC();d=d.substring(0,4)}return d+=JC(),d.toLowerCase()},ek=()=>{const[a,s]=x.useState("personal"),n=Ct(),{allLocalities:o,allSchools:l,refreshLocalitiesData:d,refreshSchoolsData:u,refreshAreasData:m}=Ot(),[g,f]=x.useState(!1),y=x.useRef(null),[b,v]=x.useState(""),[N,w]=x.useState(""),[S,_]=x.useState(""),[L,D]=x.useState(""),[M,F]=x.useState(""),[B,q]=x.useState(""),[ee,le]=x.useState(""),[he,be]=x.useState(null),[Te,we]=x.useState(""),[fe,K]=x.useState(""),[ye,O]=x.useState(""),[H,se]=x.useState(""),[W,A]=x.useState(""),[Q,ne]=x.useState(""),[ae,ge]=x.useState("+971"),[ve,U]=x.useState([]),[Ee,Ce]=x.useState(!1),[Me,me]=x.useState(""),[_e,Ye]=x.useState({}),st=[{code:"+971",country:"UAE",flag:"🇦🇪"},{code:"+1",country:"USA",flag:"🇺🇸"},{code:"+44",country:"UK",flag:"🇬🇧"},{code:"+33",country:"France",flag:"🇫🇷"},{code:"+49",country:"Germany",flag:"🇩🇪"},{code:"+81",country:"Japan",flag:"🇯🇵"},{code:"+86",country:"China",flag:"🇨🇳"},{code:"+91",country:"India",flag:"🇮🇳"},{code:"+966",country:"Saudi Arabia",flag:"🇸🇦"},{code:"+965",country:"Kuwait",flag:"🇰🇼"},{code:"+973",country:"Bahrain",flag:"🇧🇭"},{code:"+974",country:"Qatar",flag:"🇶🇦"},{code:"+968",country:"Oman",flag:"🇴🇲"},{code:"+20",country:"Egypt",flag:"🇪🇬"},{code:"+90",country:"Turkey",flag:"🇹🇷"},{code:"+7",country:"Russia",flag:"🇷🇺"},{code:"+55",country:"Brazil",flag:"🇧🇷"},{code:"+61",country:"Australia",flag:"🇦🇺"},{code:"+64",country:"New Zealand",flag:"🇳🇿"},{code:"+27",country:"South Africa",flag:"🇿🇦"}],re=C=>{v(C),w(C);const Y=ic(C);_(Y)},Se=C=>{F(C)},Ie=C=>{O(C)},Fe=(C,Y)=>{const Ne=C.replace(/[^0-9]/g,""),xe=`${Y}${Ne}`;return console.log("Generating phone_e164:",{phone:C,countryCode:Y,cleanPhone:Ne,phoneE164:xe}),xe},Je=C=>{if(ge(C),f(!1),W){const Y=Fe(W,C);ne(Y)}};x.useEffect(()=>{(async()=>{try{await Promise.all([d(),u(),m()])}catch(Y){console.log("Error loading data:",Y),k.error("Failed to load profile data. Please refresh the page.")}})()},[]);const T=C=>{if(q(C),be(null),K(""),me(""),we(""),C!=="Other"&&le(""),C&&C!=="Other"){const Y=l.filter(Ne=>Ne.locality.code===C);U(Y)}else U([])},je=C=>{le(C),be(null),K(""),me(""),we(""),U([])},te=C=>{if(me(C),C.trim()===""){const Y=l.filter(Ne=>Ne.locality.code===B);U(Y)}else{const Ne=l.filter(xe=>xe.locality.code===B).filter(xe=>xe.name?.toLowerCase().includes(C.toLowerCase())||xe.locality.code?.toLowerCase().includes(C.toLowerCase()));U(Ne)}},X=C=>{console.log("handleSchoolSelect",C);const Y=C.name;be(C),K(C.id),me(Y),Ce(!1),C.id!=="UNLISTED"&&we("")},Le=C=>{we(C)};x.useEffect(()=>{const C=Y=>{y.current&&!y.current.contains(Y.target)&&(f(!1),Ce(!1))};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[]);const $=()=>{const C=[{key:"personal",label:"Personal Info"},{key:"school",label:"School Info"},{key:"contact",label:"Contact Info"}];return t.jsx("div",{className:"flex items-center justify-start mb-8",children:C.map((Y,Ne)=>t.jsxs($e.Fragment,{children:[t.jsx("button",{className:`flex items-center justify-center w-[200px] h-[58px] p-[5px] rounded-[20px] text-sm font-medium transition-all ${a===Y.key?"bg-[#1E395D] text-white":"bg-white text-gray-600 border border-gray-300"}`,onClick:()=>s(Y.key),children:Y.label}),Ne<C.length-1&&t.jsx("span",{className:"mx-3 text-gray-600 text-sm",children:">"})]},Y.key))})},De=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Name"}),t.jsx("input",{type:"text",name:"name",placeholder:"E.g. Sam Morgan Lee",value:N,onChange:C=>re(C.target.value),className:`w-[400px] px-4 py-4 border rounded-lg text-sm bg-white placeholder-gray-500 focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${_e?.name?"border-red-500":"border-gray-300"}`}),_e?.name&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:_e.name}),S&&t.jsx("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Generated Username:"}),t.jsx("span",{className:"ml-2 font-mono text-sm font-medium text-[#1E395D]",children:S})]})})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Date of Birth"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"date",name:"dateOfBirth",value:L,onChange:C=>D(C.target.value),className:`w-[400px] px-4 py-4 pl-12 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${_e?.dateOfBirth?"border-red-500":"border-gray-300"}`}),t.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),_e?.dateOfBirth&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:_e.dateOfBirth})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Gender"}),t.jsx("div",{className:"flex gap-2",children:["male","female","other"].map(C=>t.jsx("button",{type:"button",onClick:()=>Se(C),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all flex items-center justify-center w-[200px] ${M===C?"bg-[#D9C7A1] text-black border-[#D9C7A1]":"bg-white text-gray-700 border-gray-300 hover:border-gray-400"}`,children:C.charAt(0).toUpperCase()+C.slice(1)},C))}),_e?.gender&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:_e.gender})]})]}),Be=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-base font-bold text-black mb-2",children:["Locality of School ",t.jsx("span",{className:"text-[#7E7E7E] text-base font-normal leading-[150%]",children:"(City or Town)"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{name:"locality",value:B,onChange:C=>T(C.target.value),className:`w-[400px] px-4 py-4 pr-10 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 appearance-none ${_e?.locality?"border-red-500":"border-gray-300"}`,children:[t.jsx("option",{value:"",children:"Select a locality..."}),o.length>0?o.map(C=>t.jsx("option",{value:C.code,children:C.name},C.id)):t.jsx("option",{value:"",disabled:!0,children:"No localities loaded"})]}),t.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),_e?.locality&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:_e.locality}),B==="Other"&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Enter Custom Locality"}),t.jsx("input",{type:"text",name:"customLocality",placeholder:"Enter your locality name...",value:ee,onChange:C=>je(C.target.value),className:`w-[400px] px-4 py-4 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${_e?.customLocality?"border-red-500":"border-gray-300"}`}),_e?.customLocality&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:_e.customLocality})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"School Name"}),t.jsxs("div",{className:"relative",ref:y,children:[t.jsx("input",{type:"text",name:"schoolName",placeholder:B==="Other"?"School selection not available for custom locality":B?"Search by school name or code...":"Please select a city first",value:Me,onChange:C=>te(C.target.value),onFocus:()=>Ce(!0),disabled:!B||B==="Other",className:`w-[400px] px-4 py-4 pl-12 pr-12 border rounded-lg text-sm bg-white placeholder-gray-500 focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${_e?.schoolName?"border-red-500":"border-gray-300"} ${!B||B==="Other"?"bg-gray-100 cursor-not-allowed":""}`}),t.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.jsx("button",{type:"button",onClick:()=>{be(null),K(""),me(""),Ce(!1)},disabled:!B||B==="Other",className:`absolute right-4 top-1/2 transform -translate-y-1/2 w-6 h-6 rounded-full flex items-center justify-center transition-colors ${!B||B==="Other"?"bg-gray-200 cursor-not-allowed":"bg-gray-300 hover:bg-gray-400"}`,children:t.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),Ee&&B&&B!=="Other"&&ve.length>0&&t.jsxs("div",{className:"absolute top-full left-0 z-10 w-[400px] mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[ve.map((C,Y)=>t.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>X(C),children:[t.jsx("div",{className:"font-medium text-sm text-gray-900",children:C.name}),t.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Code: ",C.code]}),C.area&&C.area.name!=="-"&&t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:C.area.name}),C.locality.name&&t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:C.locality.name})]},`${C.code}-${Y}`)),t.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>X({id:"UNLISTED",name:"Unlisted / Not in the list / Other",code:"UNLISTED",locality:{name:"Unlisted / Not in the list / Other"}}),children:t.jsx("div",{className:"font-medium text-sm text-gray-900",children:"Unlisted / Not in the list / Other"})}),ve.length===0&&Me&&t.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500",children:['No schools found matching "',Me,'"']})]})]}),_e?.schoolName&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:_e.schoolName}),(he&&he.id==="UNLISTED"||B==="Other")&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Enter School Name"}),t.jsx("input",{type:"text",name:"customSchool",placeholder:"Enter your school name...",value:Te,onChange:C=>Le(C.target.value),className:`w-[400px] px-4 py-4 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${_e?.customSchool?"border-red-500":"border-gray-300"}`}),_e?.customSchool&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:_e.customSchool})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Grade or Year or Programme"}),t.jsx("div",{className:"w-[400px] border border-gray-300 rounded-lg p-4 mb-4",children:t.jsx("div",{className:"flex gap-4 bg-white",children:["grade","year","programme","other"].map(C=>t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"gradeType",value:C,checked:ye===C,onChange:()=>Ie(C),className:"mr-3 w-5 h-5 text-[#1E395D] focus:ring-[#1E395D]"}),t.jsx("span",{className:`text-sm capitalize ${ye===C?"text-black":"text-gray-500"}`,children:C})]},C))})}),_e?.gradeType&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:_e.gradeType})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"relative",children:[t.jsxs("select",{name:"grade",value:H,onChange:C=>se(C.target.value),className:`w-full px-4 py-4 pr-10 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 appearance-none ${_e?.grade?"border-red-500":"border-gray-300"}`,children:[ye==="grade"&&t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"",children:"Select Grade"}),t.jsx("option",{value:"grade-5",children:"Grade 5"}),t.jsx("option",{value:"grade-6",children:"Grade 6"}),t.jsx("option",{value:"grade-7",children:"Grade 7"}),t.jsx("option",{value:"grade-8",children:"Grade 8"}),t.jsx("option",{value:"grade-9",children:"Grade 9"}),t.jsx("option",{value:"grade-10",children:"Grade 10"}),t.jsx("option",{value:"grade-11",children:"Grade 11"}),t.jsx("option",{value:"grade-12",children:"Grade 12"})]}),ye==="year"&&t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"",children:"Select Year"}),t.jsx("option",{value:"year-6",children:"Year 6"}),t.jsx("option",{value:"year-7",children:"Year 7"}),t.jsx("option",{value:"year-8",children:"Year 8"}),t.jsx("option",{value:"year-9",children:"Year 9"}),t.jsx("option",{value:"year-10",children:"Year 10"}),t.jsx("option",{value:"year-11",children:"Year 11"}),t.jsx("option",{value:"year-12",children:"Year 12"}),t.jsx("option",{value:"year-13",children:"Year 13"})]}),ye==="programme"&&t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"",children:"Select Programme"}),t.jsx("option",{value:"PYP-5",children:"PYP 5"}),t.jsx("option",{value:"MYP-1",children:"MYP 1"}),t.jsx("option",{value:"MYP-2",children:"MYP 2"}),t.jsx("option",{value:"MYP-3",children:"MYP 3"}),t.jsx("option",{value:"MYP-4",children:"MYP 4"}),t.jsx("option",{value:"MYP-5",children:"MYP 5"}),t.jsx("option",{value:"IB-DP-1",children:"IB DP 1"}),t.jsx("option",{value:"IB-DP-2",children:"IB DP 2"})]}),ye==="other"&&t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"",children:"Select Other"}),t.jsx("option",{value:"other-1",children:"Other 1"}),t.jsx("option",{value:"other-2",children:"Other 2"}),t.jsx("option",{value:"other-3",children:"Other 3"}),t.jsx("option",{value:"other-4",children:"Other 4"}),t.jsx("option",{value:"other-5",children:"Other 5"}),t.jsx("option",{value:"other-6",children:"Other 6"}),t.jsx("option",{value:"other-7",children:"Other 7"}),t.jsx("option",{value:"other-8",children:"Other 8"})]})]}),t.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),_e?.grade&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:_e.grade})]})]}),Pe=()=>t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Mobile"}),t.jsxs("div",{className:"relative",ref:y,children:[t.jsxs("div",{className:"flex border rounded-lg bg-white",children:[t.jsxs("div",{className:"flex items-center px-4 py-4 border-r border-gray-300 cursor-pointer hover:bg-gray-50",onClick:()=>f(!g),children:[t.jsx("span",{className:"text-sm text-gray-600 mr-2",children:ae}),t.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsx("input",{type:"tel",inputMode:"numeric",pattern:"[0-9\\s]*",name:"phone",placeholder:"50 6362040",value:W,onChange:C=>{/[^0-9\s]/.test(C.target.value)&&k.error("Only numbers and spaces are allowed in phone number");const Ne=C.target.value.replace(/[^0-9\s]/g,"");A(Ne);const xe=Fe(Ne,ae);ne(xe)},className:`flex-1 px-4 py-4 text-sm bg-white placeholder-gray-500 focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${_e?.phone?"border-red-500":"border-gray-300"}`})]}),g&&t.jsx("div",{className:"absolute top-full left-0 z-10 w-64 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:st.map(C=>t.jsxs("div",{className:"flex items-center px-4 py-3 hover:bg-gray-50 cursor-pointer",onClick:()=>Je(C.code),children:[t.jsx("span",{className:"text-lg mr-3",children:C.flag}),t.jsx("span",{className:"text-sm text-gray-600 mr-2",children:C.code}),t.jsx("span",{className:"text-sm text-gray-800",children:C.country})]},C.code))})]}),_e?.phone&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:_e.phone})]})}),P=async(C,Y,Ne,xe,Ve,V,I,R)=>{try{let ie=Ve,J;B==="Other"?J=await Rx(C,Y,Ne,xe,ee,Te,V,I,R):he&&he.id==="UNLISTED"?J=await _j(C,Y,Ne,xe,B,Te,V,I,R):J=await wj(C,Y,Ne,xe,ie,V,I,R),J.success?(k.success("Student profile created successfully"),n("/student-home")):(Ye(J.errors),k.error(J.errors.message))}catch(ie){const J=ie?.errors||ie||{message:"An unexpected error occurred"};Ye(J),k.error(J.message||"An unexpected error occurred")}};return t.jsx(xs,{loadingText:"Loading Student Profile...",children:t.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#F8F8F8"},children:[t.jsx(Wt,{}),t.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6 text-left",children:"Student Signup"}),$()]}),t.jsxs("div",{className:"w-[400px] rounded-lg shadow-sm mb-8",style:{padding:"2rem 0.5rem"},children:[a==="personal"&&De(),a==="school"&&Be(),a==="contact"&&Pe()]}),t.jsx("div",{className:"flex justify-start",children:t.jsx("button",{type:"button",onClick:()=>{a==="personal"?N&&S&&L&&M?s("school"):k.error("Please fill in all personal information fields"):a==="school"?B==="Other"?ee.trim()&&Te.trim()&&H?s("contact"):k.error("Please fill in all school information fields"):he&&he.id==="UNLISTED"?Te.trim()&&H?s("contact"):k.error("Please fill in all school information fields"):B&&he&&H?s("contact"):k.error("Please fill in all school information fields"):a==="contact"&&(W&&Q?P(b,S,L,M,fe,H,W,Q):k.error("Please fill in all contact information fields"))},className:"font-medium text-white transition-all",style:{backgroundColor:"#C2A46D",borderRadius:"30px",display:"flex",width:"120px",padding:"10px",justifyContent:"center",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},onMouseOver:C=>C.currentTarget.style.backgroundColor="#C2A46D",onMouseOut:C=>C.currentTarget.style.backgroundColor="#D9C7A1",children:"Continue"})})]})]})})},tk=()=>{const a=Ct(),{allLocalities:s,allSchools:n,refreshLocalitiesData:o,refreshSchoolsData:l,refreshAreasData:d}=Ot(),[u,m]=x.useState("personal"),[g,f]=x.useState(""),[y,b]=x.useState(""),[v,N]=x.useState(""),[w,S]=x.useState(""),[_,L]=x.useState(""),[D,M]=x.useState(""),[F,B]=x.useState(""),[q,ee]=x.useState(null),[le,he]=x.useState(""),[be,Te]=x.useState(""),[we,fe]=x.useState(""),[K,ye]=x.useState("+971"),[O,H]=x.useState([]),[se,W]=x.useState(!1),[A,Q]=x.useState(""),[ne,ae]=x.useState({}),[ge,ve]=x.useState(!1),U=x.useRef(null),Ee=[{code:"+971",country:"UAE",flag:"🇦🇪"},{code:"+1",country:"USA",flag:"🇺🇸"},{code:"+44",country:"UK",flag:"🇬🇧"},{code:"+33",country:"France",flag:"🇫🇷"},{code:"+49",country:"Germany",flag:"🇩🇪"},{code:"+81",country:"Japan",flag:"🇯🇵"},{code:"+86",country:"China",flag:"🇨🇳"},{code:"+91",country:"India",flag:"🇮🇳"},{code:"+966",country:"Saudi Arabia",flag:"🇸🇦"},{code:"+965",country:"Kuwait",flag:"🇰🇼"},{code:"+973",country:"Bahrain",flag:"🇧🇭"},{code:"+974",country:"Qatar",flag:"🇶🇦"},{code:"+968",country:"Oman",flag:"🇴🇲"},{code:"+20",country:"Egypt",flag:"🇪🇬"},{code:"+90",country:"Turkey",flag:"🇹🇷"},{code:"+7",country:"Russia",flag:"🇷🇺"},{code:"+55",country:"Brazil",flag:"🇧🇷"},{code:"+61",country:"Australia",flag:"🇦🇺"},{code:"+64",country:"New Zealand",flag:"🇳🇿"},{code:"+27",country:"South Africa",flag:"🇿🇦"}];x.useEffect(()=>{(async()=>{try{await Promise.all([o(),l(),d()])}catch(je){console.log("Error loading data:",je),k.error("Failed to load profile data. Please refresh the page.")}})()},[]);const Ce=T=>{if(console.log("handleCityChange",T),console.log("allSchools",n),M(T),ee(null),Q(""),he(""),T!=="Other"&&B(""),T&&T!=="Other"){const je=n.filter(te=>te.locality&&te.locality.code===T);H(je)}else H([])},Me=T=>{B(T),ee(null),Q(""),he(""),H([])},me=T=>{if(Q(T),T.trim()===""){const je=n.filter(te=>te.locality&&te.locality.code===D);H(je)}else{const te=n.filter(X=>X.locality&&X.locality.code===D).filter(X=>X.name?.toLowerCase().includes(T.toLowerCase())||X.locality&&X.locality.code?.toLowerCase().includes(T.toLowerCase()));H(te)}},_e=T=>{console.log("handleSchoolSelect",T);const je=T.name;ee(T),Q(je),W(!1),T.id!=="UNLISTED"&&he("")},Ye=T=>{he(T)};x.useEffect(()=>{const T=je=>{U.current&&!U.current.contains(je.target)&&(ve(!1),W(!1))};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);const st=()=>{const T=[{key:"personal",label:"Personal Info"},{key:"school",label:"School Info"},{key:"contact",label:"Contact Info"}];return t.jsx("div",{className:"flex items-center justify-start mb-8",children:T.map((je,te)=>t.jsxs($e.Fragment,{children:[t.jsx("button",{className:`flex items-center justify-center w-[200px] h-[58px] p-[5px] rounded-[20px] text-sm font-medium transition-all ${u===je.key?"bg-[#1E395D] text-white":"bg-white text-gray-600 border border-gray-300"}`,onClick:()=>m(je.key),children:je.label}),te<T.length-1&&t.jsx("span",{className:"mx-3 text-gray-600 text-sm",children:">"})]},je.key))})},re=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Name"}),t.jsx("input",{type:"text",name:"name",placeholder:"E.g. Sam Morgan Lee",value:g,onChange:T=>{f(T.target.value),b(T.target.value);const je=ic(T.target.value);N(je)},className:`w-[400px] px-4 py-4 border rounded-lg text-sm bg-white placeholder-gray-500 focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${ne.name?"border-red-500":"border-gray-300"}`}),ne.name&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:ne.name}),v&&t.jsx("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Generated Username:"}),t.jsx("span",{className:"ml-2 font-mono text-sm font-medium text-[#1E395D]",children:v})]})})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Date of Birth"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"date",name:"dateOfBirth",value:w,onChange:T=>S(T.target.value),className:`w-[400px] px-4 py-4 pl-12 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${ne.dateOfBirth?"border-red-500":"border-gray-300"}`}),t.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),ne.dateOfBirth&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:ne.dateOfBirth})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Gender"}),t.jsx("div",{className:"flex gap-2",children:["male","female","other"].map(T=>t.jsx("button",{type:"button",onClick:()=>L(T),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all flex items-center justify-center w-[200px] ${_===T?"bg-[#D9C7A1] text-black border-[#1E395D]":"bg-white text-black border-gray-300 hover:border-gray-400"}`,children:T.charAt(0).toUpperCase()+T.slice(1)},T))}),ne.gender&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:ne.gender})]})]}),Se=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-base font-bold text-black mb-2",children:["Locality of School ",t.jsx("span",{className:"text-[#7E7E7E] text-base font-normal leading-[150%]",children:"(City or Town)"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{name:"locality",value:D,onChange:T=>Ce(T.target.value),className:`w-[400px] px-4 py-4 pr-10 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 appearance-none ${ne.locality?"border-red-500":"border-gray-300"}`,children:[t.jsx("option",{value:"",children:"Select a locality..."}),s.map(T=>t.jsx("option",{value:T.code,children:T.name},T.id))]}),t.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),ne.locality&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:ne.locality}),D==="Other"&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Enter Custom Locality"}),t.jsx("input",{type:"text",name:"customLocality",placeholder:"Enter your locality name...",value:F,onChange:T=>Me(T.target.value),className:`w-[400px] px-4 py-4 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${ne.customLocality?"border-red-500":"border-gray-300"}`}),ne.customLocality&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:ne.customLocality})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"School Name"}),t.jsxs("div",{className:"relative",ref:U,children:[t.jsx("input",{type:"text",name:"schoolName",placeholder:D==="Other"?"School selection not available for custom locality":D?"Search by school name or code...":"Please select a city first",value:A,onChange:T=>me(T.target.value),onFocus:()=>W(!0),disabled:!D||D==="Other",className:`w-[400px] px-4 py-4 pl-12 pr-12 border rounded-lg text-sm bg-white placeholder-gray-500 focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${ne.schoolName?"border-red-500":"border-gray-300"} ${!D||D==="Other"?"bg-gray-100 cursor-not-allowed":""}`}),t.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.jsx("button",{type:"button",onClick:()=>{ee(null),Q(""),W(!1)},disabled:!D||D==="Other",className:`absolute right-4 top-1/2 transform -translate-y-1/2 w-6 h-6 rounded-full flex items-center justify-center transition-colors ${!D||D==="Other"?"bg-gray-200 cursor-not-allowed":"bg-gray-300 hover:bg-gray-400"}`,children:t.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),se&&D&&D!=="Other"&&O.length>0&&t.jsxs("div",{className:"absolute top-full left-0 z-10 w-[400px] mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[O.map((T,je)=>t.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>_e(T),children:[t.jsx("div",{className:"font-medium text-sm text-gray-900",children:T.name}),t.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Code: ",T.code]}),T.area&&T.area.name!=="-"&&t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:T.area.name}),T.locality&&T.locality.name&&t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:T.locality.name})]},`${T.code}-${je}`)),t.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>_e({id:"UNLISTED",name:"Unlisted / Not in the list / Other",code:"UNLISTED",locality:{name:"Unlisted / Not in the list / Other"}}),children:t.jsx("div",{className:"font-medium text-sm text-gray-900",children:"Unlisted / Not in the list / Other"})}),O.length===0&&A&&t.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500",children:['No schools found matching "',A,'"']})]})]}),ne.schoolName&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:ne.schoolName}),(D==="Other"||q&&q.id==="UNLISTED")&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Enter School Name"}),t.jsx("input",{type:"text",name:"customSchool",placeholder:"Enter your school name...",value:le,onChange:T=>Ye(T.target.value),className:`w-[400px] px-4 py-4 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${ne.customSchool?"border-red-500":"border-gray-300"}`}),ne.customSchool&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:ne.customSchool})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Years of Work Experience"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",inputMode:"numeric",pattern:"[0-9]*",name:"yearsOfExperience",placeholder:"E.g. 20",value:be,onChange:T=>{/[^0-9]/.test(T.target.value)&&k.error("Only numbers are allowed in this field");const te=T.target.value.replace(/[^0-9]/g,"");Te(te)},className:`w-[400px] px-4 py-4 pl-12 border rounded-lg text-sm bg-white placeholder-gray-500 focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${ne.yearsOfExperience?"border-red-500":"border-gray-300"}`}),t.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),ne.yearsOfExperience&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:ne.yearsOfExperience})]})]}),Ie=()=>t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Mobile"}),t.jsxs("div",{className:"relative",ref:U,children:[t.jsxs("div",{className:"flex border rounded-lg bg-white",children:[t.jsxs("div",{className:"flex items-center px-4 py-4 border-r border-gray-300 cursor-pointer hover:bg-gray-50",onClick:()=>ve(!ge),children:[t.jsx("span",{className:"text-sm text-gray-600 mr-2",children:K}),t.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsx("input",{type:"tel",inputMode:"numeric",pattern:"[0-9\\s]*",name:"phone",placeholder:"50 6362040",value:we,onChange:T=>{/[^0-9\s]/.test(T.target.value)&&k.error("Only numbers and spaces are allowed in phone number");const te=T.target.value.replace(/[^0-9\s]/g,"");fe(te)},className:`flex-1 px-4 py-4 text-sm bg-white placeholder-gray-500 focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${ne.phone?"border-red-500":"border-gray-300"}`})]}),ge&&t.jsx("div",{className:"absolute top-full left-0 z-10 w-64 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Ee.map(T=>t.jsxs("div",{className:"flex items-center px-4 py-3 hover:bg-gray-50 cursor-pointer",onClick:()=>ye(T.code),children:[t.jsx("span",{className:"text-lg mr-3",children:T.flag}),t.jsx("span",{className:"text-sm text-gray-600 mr-2",children:T.code}),t.jsx("span",{className:"text-sm text-gray-800",children:T.country})]},T.code))})]}),ne.phone&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:ne.phone})]})}),Fe=(T,je)=>{const te=T.replace(/[^0-9]/g,"");return`${je}${te}`},Je=async(T,je,te,X,Le,$,De,Be)=>{try{const Pe=Fe(De,Be);let P;if(D==="Other"){const C=`${F}`,Y=`${le}`;P=await Tx(T,je,te,X,C,Y,$,De,"",void 0,Pe)}else if(q&&q.id==="UNLISTED"){const C=`${le}`;P=await kj(T,je,te,X,D,C,$,De,Pe)}else P=await vj(T,je,te,X,Le,$,De,Pe);P.success?(k.success("Teacher profile created successfully"),a("/teacher-home")):(ae(P.errors),k.error(P.errors.message))}catch(Pe){console.log("Teacher Profile Error:",Pe),Pe.errors?(ae(Pe.errors),k.error(Pe.errors.message)):k.error(Pe.message||"Failed to create teacher profile")}};return t.jsx(xs,{loadingText:"Loading Teacher Profile...",children:t.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#F8F8F8"},children:[t.jsx(Wt,{}),t.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6 text-left",children:"Teacher Signup"}),st()]}),t.jsxs("div",{className:"w-[400px] rounded-lg shadow-sm mb-8",style:{padding:"2rem 0.5rem"},children:[u==="personal"&&re(),u==="school"&&Se(),u==="contact"&&Ie()]}),t.jsx("div",{className:"flex justify-start",children:t.jsx("button",{type:"button",onClick:()=>{if(u==="personal")y&&w&&_?m("school"):k.error("Please fill in all personal information fields");else if(u==="school")D==="Other"?F.trim()&&le.trim()&&be?m("contact"):k.error("Please fill in all school information fields"):q&&q.id==="UNLISTED"?le.trim()&&be?m("contact"):k.error("Please fill in all school information fields"):D&&q&&be?m("contact"):k.error("Please fill in all school information fields");else if(u==="contact")if(we&&K){const T=D==="Other"||q&&q.id==="UNLISTED"?"":q?.id||"";Je(g,v,w,_,T,be,we,K)}else k.error("Please fill in all contact information fields")},className:"font-medium text-white transition-all",style:{backgroundColor:"#D9C7A1",borderRadius:"30px",display:"flex",width:"120px",padding:"10px",justifyContent:"center",alignItems:"center",gap:"10px",transition:"background-color 0.2s"},onMouseOver:T=>T.currentTarget.style.backgroundColor="#C2A46D",onMouseOut:T=>T.currentTarget.style.backgroundColor="#D9C7A1",children:"Continue"})})]})]})})},Jh=({userType:a,initialData:s})=>{const n=x.useRef(null),{allLocalities:o,refreshLocalitiesData:l,allSchools:d,refreshSchoolsData:u}=Ot();x.useEffect(()=>{(async()=>{try{await Promise.all([l(),u()])}catch(ze){console.log("Error loading data:",ze),k.error("Failed to load profile data. Please refresh the page.")}})()},[]);const m=[...o.map(Qe=>({value:Qe.code,label:Qe.name})),{value:"Other",label:"Unlisted / Not in the list / Other"}];x.useEffect(()=>{(async()=>{const ze=await Kn();ze.data?.username?Ne(!0):Ne(!1);const Ke={...ze.data,username:ze.data?.username||"",fullname:ze.data?.fullname||"",birthday:ze.data?.birthday||"",gender:ze.data?.gender||"",locality:ze.data?.school?.locality?.name||"",schoolName:ze.data?.school?.name||"",school_id:ze.data?.school?.id||"",grade:ze.data?.grade||"",year_of_work_experience:ze.data?.year_of_work_experience||"",phone_number:ze.data?.phone_number||"",email:ze.data?.email||"",avatar:ze.data?.avatar||(a==="student"?di:kh)};f(Ke),ae(Ke.fullname),ve(Ke.username),Ee(Ke.birthday),Me(Ke.gender),_e(Ke.locality),st(Ke.schoolName),Se(Ke.school_id||""),Fe(Ke.grade),te(Ke.year_of_work_experience),Le(Ke.phone_number),Pe(Ke.country_code||"+971"),De(Ze(Ke.phone_number||"",Ke.country_code||"+971")),C(Ke.email)})()},[a]);const[g,f]=x.useState({username:s?.username||"",fullname:s?.fullname||"",birthday:s?.birthday||"",gender:s?.gender||"",school_location:s?.school_location||"",school_name:s?.school_name||"",grade:s?.grade||"",email:s?.email||"",phone_number:s?.phone_number||"",name:s?.fullname||"",dateOfBirth:s?.birthday||"",locality:s?.school_location||"",schoolName:s?.school_name||"",gradeOrYear:s?.grade||"",mobile:s?.phone_number?`+971 ${s.phone_number}`:"",avatar:s?.avatar||(a==="student"?di:kh)}),[y,b]=x.useState(null),[v,N]=x.useState(""),[w,S]=x.useState(""),[_,L]=x.useState(""),[D,M]=x.useState(!1),[F,B]=x.useState(!1),[q,ee]=x.useState(!1),le=x.useRef(null),[he,be]=x.useState([]),[Te,we]=x.useState([]),[fe,K]=x.useState(!1),[ye,O]=x.useState(""),[H,se]=x.useState(""),[W,A]=x.useState(""),[Q]=x.useState({}),[ne,ae]=x.useState(""),[ge,ve]=x.useState(""),[U,Ee]=x.useState(""),[Ce,Me]=x.useState(""),[me,_e]=x.useState(""),[Ye,st]=x.useState(""),[re,Se]=x.useState(""),[Ie,Fe]=x.useState(""),[Je,T]=x.useState(""),[je,te]=x.useState(""),[X,Le]=x.useState(""),[$,De]=x.useState(""),[Be,Pe]=x.useState("+971"),[P,C]=x.useState(""),[Y,Ne]=x.useState(!0),[xe,Ve]=x.useState(!1),[V,I]=x.useState(!1),[R,ie]=x.useState(!1),[J,Ue]=x.useState(!1),[He,ot]=x.useState(!1),Ze=(Qe,ze)=>{const Ke=Qe.replace(/[^0-9]/g,"");return`${ze}${Ke}`},pt=[{code:"+971",country:"UAE",flag:"🇦🇪"},{code:"+1",country:"USA",flag:"🇺🇸"},{code:"+44",country:"UK",flag:"🇬🇧"},{code:"+33",country:"France",flag:"🇫🇷"},{code:"+49",country:"Germany",flag:"🇩🇪"},{code:"+81",country:"Japan",flag:"🇯🇵"},{code:"+86",country:"China",flag:"🇨🇳"},{code:"+91",country:"India",flag:"🇮🇳"},{code:"+966",country:"Saudi Arabia",flag:"🇸🇦"},{code:"+965",country:"Kuwait",flag:"🇰🇼"},{code:"+973",country:"Bahrain",flag:"🇧🇭"},{code:"+974",country:"Qatar",flag:"🇶🇦"},{code:"+968",country:"Oman",flag:"🇴🇲"},{code:"+20",country:"Egypt",flag:"🇪🇬"},{code:"+90",country:"Turkey",flag:"🇹🇷"},{code:"+7",country:"Russia",flag:"🇷🇺"},{code:"+55",country:"Brazil",flag:"🇧🇷"},{code:"+61",country:"Australia",flag:"🇦🇺"},{code:"+64",country:"New Zealand",flag:"🇳🇿"},{code:"+27",country:"South Africa",flag:"🇿🇦"}],Ge=a==="student"?{grade:[{value:"grade-5",label:"Grade 5"},{value:"grade-6",label:"Grade 6"},{value:"grade-7",label:"Grade 7"},{value:"grade-8",label:"Grade 8"},{value:"grade-9",label:"Grade 9"},{value:"grade-10",label:"Grade 10"},{value:"grade-11",label:"Grade 11"},{value:"grade-12",label:"Grade 12"}],year:[{value:"year-6",label:"Year 6"},{value:"year-7",label:"Year 7"},{value:"year-8",label:"Year 8"},{value:"year-9",label:"Year 9"},{value:"year-10",label:"Year 10"},{value:"year-11",label:"Year 11"},{value:"year-12",label:"Year 12"},{value:"year-13",label:"Year 13"}],programme:[{value:"PYP-5",label:"PYP 5"},{value:"MYP-1",label:"MYP 1"},{value:"MYP-2",label:"MYP 2"},{value:"MYP-3",label:"MYP 3"},{value:"MYP-4",label:"MYP 4"},{value:"MYP-5",label:"MYP 5"},{value:"IB-DP-1",label:"IB DP 1"},{value:"IB-DP-2",label:"IB DP 2"}],other:[{value:"other-1",label:"Other 1"},{value:"other-2",label:"Other 2"},{value:"other-3",label:"Other 3"},{value:"other-4",label:"Other 4"},{value:"other-5",label:"Other 5"},{value:"other-6",label:"Other 6"},{value:"other-7",label:"Other 7"},{value:"other-8",label:"Other 8"}]}:["Primary Teacher","Secondary Teacher","Subject Teacher","Head of Department","Vice Principal","Principal","Counselor","Librarian","Other"],ft=(Qe,ze)=>{b(Qe),N(ze)},vt=(Qe,ze)=>{switch(N(ze),Qe){case"fullname":if(ae(ze),!Y){const Ke=ic(ze);ve(Ke)}break;case"username":ve(ze);break;case"birthday":Ee(ze);break;case"gender":Me(ze);break;case"school_location":_e(ze);break;case"school_name":st(ze);break;case"school_id":Se(ze);break;case"grade":Fe(ze);break;case"gradeType":T(ze);break;case"year_of_work_experience":te(ze);break;case"phone_number":Le(ze);break;case"email":C(ze);break}},Ut=()=>{if(y)switch(y){case"fullname":ae(g.fullname),ve(g.username);break;case"username":ve(g.username);break;case"birthday":Ee(g.birthday);break;case"gender":Me(g.gender);break;case"school_location":_e(g.school_location);break;case"school_name":st(g.school_name);break;case"school_id":Se(g.school_id||"");break;case"grade":Fe(g.grade),T(g.grade_year_programme||"");break;case"year_of_work_experience":te(String(g.year_of_work_experience||""));break;case"phone_number":Le(g.phone_number);break;case"email":C(g.email);break}b(null),N("")},Is=async Qe=>{const ze=Qe.target.files?.[0];if(ze)try{Ve(!0);const Ke=await Sj(ze);Ke.success?(yC(),localStorage.setItem("userAvatar",Ke.avatarUrl),setTimeout(()=>{const it=new CustomEvent("avatarUpdated",{detail:{avatarUrl:Ke.avatarUrl}});window.dispatchEvent(it)},100),k.success(Ke.message)):k.error("Failed to upload avatar: "+Ke.message)}catch(Ke){k.error("Failed to upload avatar: "+Ke.message)}finally{Ve(!1)}},Ht=async()=>{if(w!==_){k.error("Passwords do not match");return}if(w.length<6){k.error("Password must be at least 6 characters");return}try{ot(!0);const Qe=await EC(w);Qe.success?(k.success(Qe.message),S(""),L(""),M(!1)):k.error(Qe.message)}catch(Qe){k.error("Failed to update password: "+(Qe.message||"Unknown error"))}finally{ot(!1)}},It=Ct(),et=()=>{I(!0)},We=async()=>{try{Ue(!0);const Qe=await bj();Qe.success?(k.success(Qe.message),localStorage.clear(),It("/login")):k.error(Qe.message)}catch(Qe){k.error(Qe.message)}finally{Ue(!1)}},qe=()=>{I(!1),We()},Vt=()=>{I(!1)};x.useEffect(()=>{const Qe=ze=>{le.current&&!le.current.contains(ze.target)&&(B(!1),K(!1),ee(!1))};return document.addEventListener("mousedown",Qe),()=>{document.removeEventListener("mousedown",Qe)}},[]),x.useEffect(()=>{if(me&&me!=="Other"&&d.length>0){const Qe=d.filter(ze=>ze.locality?.name===me);be(Qe),we(Qe)}else be([]),we([])},[me,d]);const Js=Qe=>{if(O(Qe),Qe.trim()==="")we(he);else{const ze=he.filter(Ke=>Ke.name?.toLowerCase().includes(Qe.toLowerCase())||Ke.code?.toLowerCase().includes(Qe.toLowerCase())||Ke.locality?.name?.toLowerCase().includes(Qe.toLowerCase()));we(ze)}},ji=Qe=>{se(Qe)},Ni=Qe=>{A(Qe)},va=(Qe,ze,Ke)=>{const Mt=y===ze?v:Ke,ns=Nt=>{vt(ze,Nt)};return t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:Qe}),t.jsx("div",{className:"flex gap-2",children:["male","female","other"].map(Nt=>t.jsx("button",{type:"button",onClick:()=>ns(Nt),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all flex items-center justify-center w-24 ${Mt===Nt?"bg-[#C2A46D] text-white border-[#C2A46D]":"bg-white text-gray-700 border-gray-300 hover:border-gray-400"}`,children:Nt.charAt(0).toUpperCase()+Nt.slice(1)},Nt))})]})},eo=(Qe,ze,Ke)=>{const it=y===ze,Mt=it?v:Ke,ns=it?ic(v):ge;return t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:Qe}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:Mt,onChange:Nt=>vt(ze,Nt.target.value),disabled:!it,className:`w-[400px] px-4 py-3 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${it?"border-[#1E395D]":"border-gray-300 bg-gray-50"}`,placeholder:`Enter ${Qe.toLowerCase()}`}),t.jsxs(t.Fragment,{children:[!it&&t.jsx("button",{onClick:()=>ft(ze,Ke),className:"absolute top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",style:{right:"36.75rem"},children:t.jsx("img",{src:Ks,alt:"Edit",className:"w-4 h-4"})}),it&&t.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 flex space-x-2",style:{right:"35rem"},children:t.jsx("button",{onClick:Ut,className:"text-red-600 hover:text-red-800 text-sm font-medium mr-2",children:"✕"})})]})]}),it&&v&&t.jsx("div",{className:"w-[400px] mt-2 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Generated Username:"}),t.jsx("span",{className:"ml-2 font-mono text-sm font-medium text-[#1E395D]",children:ns})]})})})]})},Pr=(Qe,ze,Ke,it,Mt,ns)=>{const Nt=y===ze,lt=Nt?v:(()=>{const ct=it.find(Ds=>Ds.value===Ke);return ct?ct.label:Ke})(),os=ct=>{ct.value==="Other"?(vt(ze,"Other"),Se(""),st(""),A(""),se("")):(vt(ze,ct.label),se(""),A(""))};return t.jsxs("div",{className:"mb-6",children:[t.jsxs("label",{className:"block text-base font-bold text-black mb-2",children:[Qe,t.jsx("span",{className:"text-[#7E7E7E] text-base font-normal leading-[150%] ml-1",children:"(City or Town)"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{type:"button",onClick:()=>Nt&&ns(!1),disabled:!Nt,className:`w-[400px] px-4 py-3 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 text-left ${Nt?"border-[#1E395D]":"border-gray-300 bg-gray-50"}`,children:lt}),!Nt&&t.jsx("button",{onClick:()=>ft(ze,Ke),className:"absolute top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",style:{right:"36.75rem"},children:t.jsx("img",{src:Ks,alt:"Edit",className:"w-4 h-4"})}),!Mt&&Nt&&t.jsx("div",{className:"absolute top-full left-0 z-10 w-[400px] mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:it.map((ct,Ds)=>t.jsx("div",{className:"w-[400px] px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>{os(ct),ns(!0)},children:typeof ct=="string"?ct:ct.label},Ds))}),Nt&&t.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 flex space-x-2",style:{right:"35rem"},children:t.jsx("button",{onClick:Ut,className:"text-red-600 hover:text-red-800 text-sm font-medium mr-2",children:"✕"})})]}),Nt&&Ke==="Other"&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Enter Custom Locality"}),t.jsx("input",{type:"text",name:"customLocality",placeholder:"Enter your locality name...",value:H,onChange:ct=>ji(ct.target.value),className:"w-[400px] px-4 py-4 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 border-gray-300"}),!H.trim()&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:'Custom locality is required when "Other" is selected'})]})]})},Hr=(Qe,ze,Ke)=>{const it=y===ze,Mt=it?ye:Ke,ns=lt=>{it&&(O(lt),Js(lt))},Nt=lt=>{if(it){const os=lt.name;Se(lt.id),vt(ze,os),O(os),K(!0)}};return t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:Qe}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",name:"schoolName",placeholder:me==="Other"?"School selection not available for custom locality":me?"Search by school name or code...":"Please select a city first",value:Mt,onChange:lt=>ns(lt.target.value),onFocus:()=>it&&K(!1),disabled:!it||!me||me==="Other",className:`w-[400px] px-4 py-4 pl-12 pr-12 border rounded-lg text-sm bg-white placeholder-gray-500 focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${it?"border-[#1E395D]":"border-gray-300 bg-gray-50"} ${!me||me==="Other"?"bg-gray-100 cursor-not-allowed":""}`}),t.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),!it&&t.jsx("button",{onClick:()=>ft(ze,Ke),className:"absolute top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",style:{right:"36.75rem"},children:t.jsx("img",{src:Ks,alt:"Edit",className:"w-4 h-4"})}),!fe&&me&&me!=="Other"&&Te.length>0&&it&&t.jsxs("div",{className:"absolute top-full left-0 z-10 w-[400px] mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[Te.map((lt,os)=>t.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>Nt(lt),children:[t.jsx("div",{className:"font-medium text-sm text-gray-900",children:lt.name}),t.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Code: ",lt.code]}),lt.area&&lt.area.name!=="-"&&t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:lt.area.name}),lt.locality.name&&t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:lt.locality.name})]},`${lt.code}-${os}`)),t.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>Nt({id:"UNLISTED",name:"Unlisted / Not in the list / Other"}),children:t.jsx("div",{className:"font-medium text-sm text-gray-900",children:"Unlisted / Not in the list / Other"})}),Te.length===0&&ye&&t.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500",children:['No schools found matching "',ye,'"']})]}),it&&t.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 flex space-x-2",style:{right:"35rem"},children:t.jsx("button",{onClick:Ut,className:"text-red-600 hover:text-red-800 text-sm font-medium mr-2",children:"✕"})})]}),it&&me==="Other"&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Enter School Name"}),t.jsx("input",{type:"text",name:"customSchool",placeholder:"Enter your school name...",value:W,onChange:lt=>Ni(lt.target.value),className:"w-[400px] px-4 py-4 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 border-gray-300"}),!W.trim()&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:'Custom school name is required when "Other" locality is selected'})]})]})},wa=(Qe,ze,Ke)=>{const it=y===ze,Mt=it?v:Ke,ns=lt=>{/[^0-9\s]/.test(lt)&&k.error("Only numbers and spaces are allowed in phone number");const ct=lt.replace(/[^0-9\s]/g,"");vt(ze,ct);const Ds=Ze(ct,Be);De(Ds)},Nt=lt=>{if(Pe(lt),ee(!1),X){const os=Ze(X,lt);De(os)}};return t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:Qe}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"w-[400px] flex border rounded-lg bg-white",children:[t.jsxs("div",{className:`flex items-center px-4 py-4 border-r border-gray-300 cursor-pointer hover:bg-gray-50 ${it?"cursor-pointer":"cursor-not-allowed"}`,onClick:()=>it&&ee(!q),children:[t.jsx("span",{className:"text-sm text-gray-600 mr-2",children:Be}),t.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsx("input",{type:"tel",inputMode:"numeric",pattern:"[0-9\\s]*",name:"phone",placeholder:"50 6362040",value:Mt,onChange:lt=>ns(lt.target.value),disabled:!it,className:`flex-1 px-4 py-4 text-sm bg-white placeholder-gray-500 focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${it?"border-[#1E395D]":"border-gray-300 bg-gray-50"}`})]}),q&&it&&t.jsx("div",{className:"absolute top-full left-0 z-10 w-64 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:pt.map(lt=>t.jsxs("div",{className:"flex items-center px-4 py-3 hover:bg-gray-50 cursor-pointer",onClick:()=>Nt(lt.code),children:[t.jsx("span",{className:"text-lg mr-3",children:lt.flag}),t.jsx("span",{className:"text-sm text-gray-600 mr-2",children:lt.code}),t.jsx("span",{className:"text-sm text-gray-800",children:lt.country})]},lt.code))}),!it&&t.jsx("button",{onClick:()=>ft(ze,Ke),className:"absolute top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",style:{right:"36.75rem"},children:t.jsx("img",{src:Ks,alt:"Edit",className:"w-4 h-4"})}),it&&t.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 flex space-x-2",style:{right:"35rem"},children:t.jsx("button",{onClick:Ut,className:"text-red-600 hover:text-red-800 text-sm font-medium mr-2",children:"✕"})})]})]})},cr=(Qe,ze,Ke,it="text")=>{const Mt=y===ze,ns=Mt?v:Ke,Nt=ze==="year_of_work_experience",lt=Nt?"number":it,os=Nt?"numeric":void 0,ct=Nt?"[0-9]*":void 0;return t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%",marginBottom:"0.5rem",display:"block"},children:Qe}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:lt,inputMode:os,pattern:ct,value:ns,onChange:Ds=>{if(Nt){/[^0-9]/.test(Ds.target.value)&&k.error("Only numbers are allowed in this field");const qr=Ds.target.value.replace(/[^0-9]/g,"");vt(ze,qr)}else vt(ze,Ds.target.value)},disabled:!Mt,style:{display:"flex",width:"400px",height:"40px",padding:"10px",alignItems:"flex-start",gap:"10px"},className:`border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-500 w-full px-4 py-3 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${Mt?"border-[#1E395D]":"border-gray-300 bg-gray-50"}`,placeholder:`Enter ${Qe.toLowerCase()}`}),!Mt&&t.jsx("button",{onClick:()=>ft(ze,Ke),className:"absolute top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",style:{right:"36.75rem"},children:t.jsx("img",{src:Ks,alt:"Edit",className:"w-4 h-4"})}),Mt&&t.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 flex space-x-2",style:{right:"35rem"},children:t.jsx("button",{onClick:Ut,className:"text-red-600 hover:text-red-800 text-sm font-medium mr-2",children:"✕"})})]}),Q[ze]&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:Q[ze]})]})},Xt=(Qe,ze,Ke)=>{const it=y===ze,Mt=Je,ns=Ke,Nt=()=>a==="student"&&typeof Ge=="object"&&Mt?Ge[Mt]||[]:[],lt=ct=>{vt("grade",ct)},os=ct=>{vt("gradeType",ct),vt("grade","")};return t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:Qe}),t.jsxs("div",{className:`w-[400px] relative border rounded-lg p-4 mb-4 ${it?"border-[#1E395D]":"border-gray-300 bg-gray-50"}`,children:[t.jsx("div",{className:"flex gap-4 bg-white",children:["grade","year","programme","other"].map(ct=>t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"gradeType",value:ct,checked:Mt===ct,onChange:()=>os(ct),disabled:!it,className:"mr-3 w-5 h-5 text-[#1E395D] focus:ring-[#1E395D]"}),t.jsx("span",{className:`text-sm capitalize ${Mt===ct?"text-black":"text-gray-500"}`,children:ct})]},ct))}),!it&&t.jsx("button",{onClick:()=>ft(ze,Ke),className:"absolute top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",style:{right:"-1.25rem"},children:t.jsx("img",{src:Ks,alt:"Edit",className:"w-4 h-4"})}),it&&t.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 flex space-x-2",style:{right:"-1.6rem"},children:t.jsx("button",{onClick:Ut,className:"text-red-600 hover:text-red-800 text-sm font-medium mr-2",children:"✕"})})]}),t.jsx("div",{className:"relative",children:t.jsxs("select",{name:"grade",value:ns,onChange:ct=>lt(ct.target.value),disabled:!it||!Mt,className:`w-[400px] px-4 py-4 pr-10 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 appearance-none ${!it||!Mt?"bg-gray-100 cursor-not-allowed":"border-gray-300"}`,children:[t.jsx("option",{value:"",children:it?`Select ${Mt||"option"}`:ns}),Nt().map(ct=>t.jsx("option",{value:ct.value,children:ct.label},ct.value))]})})]})},Si=async()=>{try{if(ie(!0),me==="Other"){if(!H.trim()){k.error("Please enter a custom locality name");return}if(!W.trim()){k.error("Please enter a custom school name");return}}const ze=localStorage.getItem("userAvatar")||void 0;let Ke;me==="Other"?a==="student"?Ke=await Rx(ne,ge,U,Ce,H,W,Ie,X,$):Ke=await Tx(ne,ge,U,Ce,H,W,je,X,P,ze,$):Ke=a==="student"?await jj(ne,ge,U,Ce,re,Ie,je,X,P,ze,$):await Nj(ne,ge,U,Ce,re,je,X,P,ze,$),Ke.success?(k.success(Ke.message),se(""),A("")):k.error("Failed to update profile: "+Ke.message)}catch(Qe){k.error("Failed to update profile: "+Qe.data.message)}finally{ie(!1)}};return t.jsxs(xs,{loadingText:"Loading Profile...",children:[t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Wt,{}),t.jsxs("div",{className:"mx-auto py-8",style:{maxWidth:"65rem"},children:[t.jsxs("div",{className:"text-left mb-8",children:[t.jsxs("div",{className:"relative inline-block",children:[xe?t.jsx("div",{className:"w-32 h-32 border-4 border-white shadow-lg rounded-full flex items-center justify-center bg-gray-100",children:t.jsx(Fr,{size:"large",text:"Uploading..."})}):t.jsx(Ga,{size:"large",className:"w-32 h-32 border-4 border-white shadow-lg",showBorder:!0}),t.jsx("button",{onClick:()=>!xe&&n.current?.click(),disabled:xe,className:`absolute bottom-2 right-2 w-8 h-8 rounded-full flex items-center justify-center transition-colors ${xe?"bg-gray-300 cursor-not-allowed opacity-50":"hover:bg-gray-300"}`,style:{right:"-1.5rem",bottom:"-0.5rem"},children:t.jsx("img",{src:Ks,alt:"Edit Avatar",className:"w-4 h-4"})}),t.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:Is,disabled:xe,className:"hidden"})]}),t.jsxs("h1",{className:"font-bold text-gray-900 mt-4",style:{fontSize:"30px"},children:[a==="student"?"Student":"Teacher"," Profile"]})]}),t.jsxs("div",{className:"rounded-lg shadow-sm p-4",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%",marginBottom:"0.5rem",display:"block"},children:"Username"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",value:g.username,disabled:!0,style:{display:"flex",width:"400px",height:"40px",padding:"10px",alignItems:"flex-start",gap:"10px"},className:"border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-500"})}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Username is system generated"})]}),eo("Name","fullname",ne),cr("Date of Birth","birthday",U,"date"),va("Gender","gender",Ce),Pr("Locality of School ","school_location",me,m,F,B),Hr("School Name","school_name",Ye),a==="student"?Xt("Grade or Year or Programme","grade",Ie):cr("Years of Work Experience","year_of_work_experience",je,"number"),cr("Email","email",P,"email"),wa("Mobile","phone_number",X),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%",marginBottom:"0.5rem",display:"block"},children:"Change Password"}),D?t.jsxs("div",{className:"space-y-4",children:[t.jsx("input",{type:"password",placeholder:"New password",value:w,onChange:Qe=>S(Qe.target.value),style:{display:"flex",width:"400px",height:"40px",padding:"10px",alignItems:"flex-start",gap:"10px"},className:"border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-500"}),t.jsx("input",{type:"password",placeholder:"Confirm new password",value:_,onChange:Qe=>L(Qe.target.value),style:{display:"flex",width:"400px",height:"40px",padding:"10px",alignItems:"flex-start",gap:"10px"},className:"border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-500"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:Ht,disabled:He,className:`px-4 py-2 text-white rounded-lg text-sm transition-colors ${He?"bg-gray-400 cursor-not-allowed":"bg-[#D9C7A1] hover:bg-[#C2A46D]"}`,children:He?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block"}),"Saving..."]}):"Save Password"}),t.jsx("button",{onClick:()=>{M(!1),S(""),L("")},disabled:He,className:`px-4 py-2 rounded-lg text-sm transition-colors ${He?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-300 text-gray-700 hover:bg-gray-400"}`,children:"Cancel"})]})]}):t.jsx("button",{onClick:()=>M(!0),style:{display:"flex",width:"400px",height:"40px",padding:"10px",alignItems:"flex-start",gap:"10px"},className:"border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-500",children:"Click to change password"})]}),t.jsx("div",{className:"mb-6",children:t.jsx("button",{onClick:et,disabled:J,className:`mb-2 underline ${J?"cursor-not-allowed text-gray-400":"cursor-pointer"}`,style:{color:J?"#9CA3AF":"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%",marginBottom:"0.5rem",display:"block"},children:J?"Deleting Account...":"Delete Account"})}),t.jsx("div",{className:"flex justify-left",children:t.jsx("button",{onClick:()=>{Si()},disabled:R,className:`text-white font-medium transition-all ${R?"bg-gray-400 cursor-not-allowed":"bg-[#D9C7A1] hover:bg-[#C2A46D]"}`,style:{display:"flex",width:"120px",padding:"10px",justifyContent:"center",alignItems:"center",gap:"10px",borderRadius:"30px"},children:R?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Save"})})]})]})]}),t.jsx($s,{isOpen:V,onClose:Vt,onConfirm:qe,title:"Confirm Delete",message:"Deleting your account will remove all information. This cannot be undone.",confirmText:J?"Deleting...":"Yes",cancelText:"No",confirmButtonColor:"text-red-600"})]})},sk=()=>{const a={username:"@samm1234",name:"Sam Morgan Lee",dateOfBirth:"2008-10-05",gender:"male",locality:"DU",schoolName:"Oasis World School",gradeOrYear:"IB DP 2",email:"samlee@gmail.com",mobile:"+971 50 6362040"};return t.jsx(Jh,{userType:"student",initialData:a})},rk=()=>{const a={username:"@teach4567",name:"Dr. Sarah Johnson",dateOfBirth:"1985-03-15",gender:"female",locality:"DU",schoolName:"Oasis World School",gradeOrYear:"Head of Department",email:"sarah.johnson@oasis.edu",mobile:"+971 50 1234567"};return t.jsx(Jh,{userType:"teacher",initialData:a})},ak=()=>{const a=Ct();return t.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#F8F8F8"},children:[t.jsx(Wt,{showNavigation:!1}),t.jsx("div",{className:"flex items-center justify-center flex-1",style:{height:"80vh"},children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-black text-center text-4xl font-medium leading-[150%] mb-8",children:"Your Student Profile is created."}),t.jsxs("div",{className:"flex gap-4 justify-center",children:[t.jsxs("button",{onClick:()=>{a("/home")},className:"flex items-center font-medium transition-all",style:{width:"140px",height:"60px",borderRadius:"30px",opacity:1,gap:"10px",borderWidth:"1px",borderStyle:"solid",borderColor:"#C2A46D",padding:"23px",backgroundColor:"#C2A46D",color:"#F7F7F7"},children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Home"]}),t.jsxs("button",{onClick:()=>a("/student-profile-page"),className:"flex items-center font-medium transition-all",style:{width:"140px",height:"60px",borderRadius:"30px",opacity:1,gap:"10px",borderWidth:"1px",borderStyle:"solid",borderColor:"#C2A46D",padding:"23px",backgroundColor:"#C2A46D",color:"#F7F7F7"},children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Profile"]})]})]})})]})},nk=()=>{const a=Ct();return t.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#F8F8F8"},children:[t.jsx(Wt,{}),t.jsx("div",{className:"flex items-center justify-center flex-1",style:{height:"80vh"},children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-black text-center text-4xl font-medium leading-[150%] mb-8",children:"Your Teacher Profile is created."}),t.jsxs("div",{className:"flex gap-4 justify-center",children:[t.jsxs("button",{onClick:()=>{a("/home")},className:"flex items-center font-medium transition-all",style:{width:"140px",height:"60px",borderRadius:"30px",opacity:1,gap:"10px",borderWidth:"1px",borderStyle:"solid",borderColor:"#C2A46D",padding:"23px",backgroundColor:"#C2A46D",color:"#F7F7F7"},children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Home"]}),t.jsxs("button",{onClick:()=>a("/teacher-profile-page"),className:"flex items-center font-medium transition-all",style:{width:"140px",height:"60px",borderRadius:"30px",opacity:1,gap:"10px",borderWidth:"1px",borderStyle:"solid",borderColor:"#C2A46D",padding:"23px",backgroundColor:"#C2A46D",color:"#F7F7F7"},children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Profile"]})]})]})})]})},wc="http://localhost:1000",Hn=async a=>{try{const s=localStorage.getItem("token");return(await Oe.get(`${wc}/api/v1/event-committees/get-all-event-committees/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to fetch all event committees")}},ok=async(a,s,n,o,l,d,u,m,g,f,y)=>{try{const b=localStorage.getItem("token");return(await Oe.post(`${wc}/api/v1/event-committees/save-event-committees-by-event`,{committeeId:a,eventId:s,category:n,abbr:o,seats:l,chair_username:d,chair_fullname:u,deputy_chair1_username:m,deputy_chair1_fullname:g,deputy_chair2_username:f,deputy_chair2_fullname:y},{headers:{Authorization:`Bearer ${b}`}})).data}catch(b){throw new Error(b.response?.data?.message||"Failed to save event committees by event id")}},ik=async(a,s,n,o,l,d,u,m,g,f,y)=>{try{const b=localStorage.getItem("token");return(await Oe.patch(`${wc}/api/v1/event-committees/update-event-committees-by-event/${a}`,{committeeId:n,eventId:s,category:o,seats:l,chair_username:d,chair_fullname:u,deputy_chair1_username:m,deputy_chair1_fullname:g,deputy_chair2_username:f,deputy_chair2_fullname:y},{headers:{Authorization:`Bearer ${b}`}})).data}catch(b){throw new Error(b.response?.data?.message||"Failed to update event committees by event id")}},lk=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${wc}/api/v1/event-committees/delete-event-committees-by-event/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to delete event committees by event id")}},ck=()=>{const a=Ct(),s=x.useRef(null),{allLocalities:n}=Ot(),[o,l]=x.useState("personal"),{eventId:d}=ps(),[u,m]=x.useState(""),[g,f]=x.useState(""),[y,b]=x.useState(""),[v,N]=x.useState(""),[w,S]=x.useState(""),[_,L]=x.useState(""),[D,M]=x.useState(""),[F,B]=x.useState(""),[q,ee]=x.useState(""),[le,he]=x.useState(""),[be,Te]=x.useState(""),[we,fe]=x.useState(""),[K,ye]=x.useState(""),[O,H]=x.useState(""),[se,W]=x.useState(""),[A,Q]=x.useState(""),[ne,ae]=x.useState(""),[ge,ve]=x.useState("UAE"),[U,Ee]=x.useState(""),[Ce,Me]=x.useState(!1),[me,_e]=x.useState(null),[Ye,st]=x.useState(!1),re=[{code:"+971",country:"UAE",flag:"🇦🇪"},{code:"+1",country:"USA",flag:"🇺🇸"},{code:"+44",country:"UK",flag:"🇬🇧"},{code:"+33",country:"France",flag:"🇫🇷"},{code:"+49",country:"Germany",flag:"🇩🇪"},{code:"+81",country:"Japan",flag:"🇯🇵"},{code:"+86",country:"China",flag:"🇨🇳"},{code:"+91",country:"India",flag:"🇮🇳"},{code:"+966",country:"Saudi Arabia",flag:"🇸🇦"},{code:"+965",country:"Kuwait",flag:"🇰🇼"},{code:"+973",country:"Bahrain",flag:"🇧🇭"},{code:"+974",country:"Qatar",flag:"🇶🇦"},{code:"+968",country:"Oman",flag:"🇴🇲"},{code:"+20",country:"Egypt",flag:"🇪🇬"},{code:"+90",country:"Turkey",flag:"🇹🇷"},{code:"+7",country:"Russia",flag:"🇷🇺"},{code:"+55",country:"Brazil",flag:"🇧🇷"},{code:"+61",country:"Australia",flag:"🇦🇺"},{code:"+64",country:"New Zealand",flag:"🇳🇿"},{code:"+27",country:"South Africa",flag:"🇿🇦"}],Se=$=>{ve($),Me(!1)};x.useEffect(()=>{const $=async()=>{try{const Be=await Kn();Be.success?(m(Be.data.username||""),f(Be.data.fullname||""),b(Be.data.birthday||""),N(Be.data.gender||""),L(Be.data?.school?.name||""),M(Be.data?.school?.locality_id||""),B(Be.data.grade||""),ee(Be.data.email||""),he(Be.data.phone_number||"")):k.error("Failed to get user by id: "+Be.message)}catch(Be){k.error("Failed to get user by id: "+Be.message)}},De=async()=>{const Be=await Hn(d);Be.success&&_e(Be.data)};$(),De()},[]),x.useEffect(()=>{if(n&&n.length>0&&D){const $=n.find(De=>{const Be=String(De.id||"").toLowerCase(),Pe=String(D||"").toLowerCase();return Be===Pe});S($&&$.name||"")}},[n,D]),x.useEffect(()=>{const $=De=>{s.current&&!s.current.contains(De.target)&&Me(!1)};return document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},[]);const Ie=[{id:"personal",name:"Personal Info",active:o==="personal"},{id:"mun",name:"MUN Info",active:o==="mun"},{id:"food",name:"Food Info",active:o==="food"},{id:"emergency",name:"Emergency Info",active:o==="emergency"}],Fe=async()=>{switch(o){case"personal":l("mun");break;case"mun":l("food");break;case"food":l("emergency");break;case"emergency":if(Ye)return;st(!0);try{await Le()}finally{st(!1)}break}},Je=()=>t.jsx("div",{className:"flex items-center justify-left mb-8",children:Ie.map(($,De)=>t.jsxs($e.Fragment,{children:[t.jsx("div",{onClick:()=>l($.id),style:{display:"flex",width:"200px",height:"58px",padding:"5px",justifyContent:"center",alignItems:"center",borderRadius:"20px",background:$.active?"#395579":"#fff",border:"1px solid #000"},className:`text-sm font-medium transition-colors ${$.active?"text-white":"text-gray-700"}`,children:$.name}),De<Ie.length-1&&t.jsx("div",{className:"mx-2 text-gray-400",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]},$.id))}),T=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"MUN Experience in Years"}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("input",{type:"text",value:be,onChange:$=>Te($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent",placeholder:"E.g. 5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Preferred Committee - Choice 1"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:we,onChange:$=>fe($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent appearance-none bg-white pr-10",children:[t.jsx("option",{value:"",children:"Select"}),Array.isArray(me)&&me.map(($,De)=>t.jsxs("option",{value:$.id,children:[$.abbr,"  (",$.committee.committee,")"]},`${$.abbr}-${$.id}-${De}`))]}),t.jsx("div",{className:"absolute",style:{right:"17.75rem",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"},children:t.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Preferred Committee - Choice 2"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:K,onChange:$=>ye($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent appearance-none bg-white pr-10",children:[t.jsx("option",{value:"",children:"Select"}),Array.isArray(me)&&me.map(($,De)=>t.jsxs("option",{value:$.id,children:[$.abbr,"  (",$.committee.committee,")"]},`${$.abbr}-${$.id}-${De}`))]}),t.jsx("div",{className:"absolute",style:{right:"17.75rem",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"},children:t.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Preferred Committee - Choice 3"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:O,onChange:$=>H($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent appearance-none bg-white pr-10",children:[t.jsx("option",{value:"",children:"Select"}),Array.isArray(me)&&me.map(($,De)=>t.jsxs("option",{value:$.id,children:[$.abbr,"  (",$.committee.committee,")"]},`${$.abbr}-${$.id}-${De}`))]}),t.jsx("div",{className:"absolute",style:{right:"17.75rem",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"},children:t.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})]}),je=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Food Preference"}),t.jsx("div",{className:"flex space-x-4",children:["Vegetarian","Non-Vegetarian"].map($=>t.jsx("button",{onClick:()=>W($),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${se===$?"bg-[#C2A46D] text-white":"text-gray-700 hover:bg-gray-300"}`,style:{border:"1px solid #000"},children:$},$))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Food Allergies"}),t.jsx("input",{type:"text",value:A,onChange:$=>Q($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent",placeholder:"E.g. Peanut"})]})]}),te=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Emergency Contact Name"}),t.jsx("input",{type:"text",value:ne,onChange:$=>ae($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent",placeholder:"E.g. Alice Lee"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Emergency Mobile Number"}),t.jsxs("div",{className:"relative w-[400px]",ref:s,children:[t.jsxs("div",{className:"flex border border-gray-300 rounded-lg bg-white",children:[t.jsxs("div",{className:"flex items-center px-4 py-3 border-r border-gray-300 cursor-pointer hover:bg-gray-50",onClick:()=>Me(!Ce),children:[t.jsx("span",{className:"text-sm text-gray-600 mr-2",children:ge}),t.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsx("input",{type:"tel",inputMode:"numeric",pattern:"[0-9\\s]*",placeholder:"50 650 5005",value:U,onChange:$=>{/[^0-9\s]/.test($.target.value)&&k.error("Only numbers and spaces are allowed in phone number");const Be=$.target.value.replace(/[^0-9\s]/g,"");Ee(Be)},className:"flex-1 px-4 py-3 text-sm bg-white placeholder-gray-500 focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200"})]}),Ce&&t.jsx("div",{className:"absolute top-full left-0 z-10 w-64 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:re.map($=>t.jsxs("div",{className:"flex items-center px-4 py-3 hover:bg-gray-50 cursor-pointer",onClick:()=>Se($.code),children:[t.jsx("span",{className:"text-lg mr-3",children:$.flag}),t.jsx("span",{className:"text-sm text-gray-600 mr-2",children:$.code}),t.jsx("span",{className:"text-sm text-gray-800",children:$.country})]},$.code))})]})]})]}),X=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-left mb-8",children:t.jsx("div",{className:"relative",children:t.jsx(Ga,{size:"large",className:"w-32 h-32 border-4 border-white shadow-lg",showBorder:!0})})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Username"}),t.jsx("input",{type:"text",disabled:!0,value:u,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent",placeholder:"Enter username"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Username is system generated"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",disabled:!0,value:g||"",onChange:$=>f($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter your name"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",disabled:!0,value:y,onChange:$=>b($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter date of birth"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),t.jsx("div",{className:"flex space-x-4",children:["male","female","other"].map($=>t.jsx("button",{onClick:()=>N($),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${v===$?"bg-[#C2A46D] text-white":" text-gray-700 hover:bg-gray-300"}`,style:{border:"1px solid #000"},children:$},$))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Place of School"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",disabled:!0,value:w,onChange:$=>S($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter place of school"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School Name"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",disabled:!0,value:_,onChange:$=>L($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter school name"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grade or Year"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",disabled:!0,value:F||"",onChange:$=>B($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter grade or year"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"email",disabled:!0,value:q||"",onChange:$=>ee($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter email address"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"tel",disabled:!0,value:le||"",onChange:$=>he($.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter mobile number"})})]})]})]}),Le=async()=>{try{const $=await g4(d,be,we,K,O,se,A,ne,U);if($.success){k.success("Registration completed successfully!");const De=await localStorage.getItem("userRole");a(De==="teacher"?`/teacher-registration-success/${d}`:`/student-registration-success/${d}`)}else k.error("Failed to register for event: "+$.message)}catch($){k.error("Failed to register for event: "+$.message)}};return t.jsx(xs,{loadingText:"Loading Registration...",children:t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Wt,{}),t.jsxs("div",{className:"max-w-[85rem] mx-auto px-6 py-8",style:{paddingLeft:"10.5rem"},children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"mb-6",style:{color:"#000",fontSize:"18px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Review Info"}),Je()]}),t.jsxs("div",{className:"max-w-2xl",children:[o==="personal"&&X(),o==="mun"&&T(),o==="food"&&je(),o==="emergency"&&te()]}),t.jsx("div",{className:"flex justify-left mt-8",children:t.jsx("button",{onClick:Fe,disabled:o==="emergency"&&Ye,className:"font-medium text-white transition-all hover:opacity-90 disabled:opacity-60 disabled:cursor-not-allowed",style:{backgroundColor:"#C2A46D",borderRadius:"30px",display:"flex",width:"160px",height:"50px",padding:"10px",justifyContent:"center",alignItems:"center",gap:"10px",fontSize:"16px"},children:o==="emergency"?Ye?"Registering...":"Register":"Continue"})})]})]})})},dk=()=>{const a=Ct(),{eventId:s}=ps();return t.jsx(xs,{loadingText:"Loading Success Page...",children:t.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#F8F8F8"},children:[t.jsx(Wt,{}),t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[70vh] px-6",children:[t.jsx("div",{className:"text-center mb-12",children:t.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",style:{color:"#000",fontSize:"48px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"You are registered to GMA MUN 2025"})}),t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("button",{onClick:()=>a("/home"),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"30px",background:"#C2A46D",color:"#fff",fontWeight:500,fontSize:"16px",border:"none",cursor:"pointer",transition:"background 0.2s"},onMouseOver:n=>n.currentTarget.style.background="#B8945F",onMouseOut:n=>n.currentTarget.style.background="#C2A46D",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Home"]}),t.jsxs("button",{onClick:()=>a(`/student-delegate-page/${s}`),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"30px",background:"#C2A46D",color:"#fff",fontWeight:500,fontSize:"16px",border:"none",cursor:"pointer",transition:"background 0.2s"},onMouseOver:n=>n.currentTarget.style.background="#B8945F",onMouseOut:n=>n.currentTarget.style.background="#C2A46D",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Event"]})]})]})]})})},lc="data:image/svg+xml,%3csvg%20width='30'%20height='26'%20viewBox='0%200%2030%2026'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M29.5525%2016.5036C29.3126%2016.5036%2029.1226%2016.6919%2029.1226%2016.9334V21.0206C29.1226%2023.0297%2027.4919%2024.6443%2025.499%2024.6443L4.48329%2024.6427C2.47428%2024.6427%200.859651%2023.012%200.859651%2021.019V16.9318C0.859651%2016.6919%200.671307%2016.502%200.429825%2016.502C0.189968%2016.502%200%2016.6903%200%2016.9318V21.019C0%2023.4917%202.00901%2025.5007%204.48164%2025.5007H25.4813C27.9539%2025.5007%2029.9629%2023.4917%2029.9629%2021.019V16.9318C29.9822%2016.6919%2029.7939%2016.5036%2029.5525%2016.5036Z'%20fill='black'/%3e%3cpath%20d='M14.9916%200.5C14.7517%200.5%2014.5617%200.688345%2014.5617%200.929826V16.7266L10.1493%2012.0389C9.97707%2011.8667%209.71949%2011.8506%209.54888%2012.0212C9.37663%2012.1758%209.36054%2012.4511%209.53117%2012.6217L14.6825%2018.0998C14.7678%2018.1851%2014.8708%2018.2366%2014.9916%2018.2366C15.1123%2018.2366%2015.2153%2018.1851%2015.3006%2018.0998L20.452%2012.6217C20.6065%2012.4494%2020.6065%2012.1758%2020.4343%2012.0212C20.262%2011.8667%2019.9884%2011.8667%2019.8338%2012.0389L15.4214%2016.7266V0.929826C15.4214%200.706065%2015.2314%200.5%2014.9916%200.5Z'%20fill='black'/%3e%3c/svg%3e",vi="http://localhost:1000",uk=async(a,s,n)=>{try{const o=localStorage.getItem("token");return(await Oe.post(`${vi}/api/v1/event-leaders/save-leadership-role-by-event`,{eventId:a,userId:s,roleId:n},{headers:{Authorization:`Bearer ${o}`}})).data}catch(o){throw new Error(o.response?.data?.message||"Failed to save leadership role by event id")}},Pa=async a=>{try{const s=localStorage.getItem("token");return(await Oe.get(`${vi}/api/v1/event-leaders/get-leadership-roles-by-event/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to fetch leadership roles by event id")}},hk=async(a,s,n,o)=>{try{const l=localStorage.getItem("token");return(await Oe.patch(`${vi}/api/v1/event-leaders/update-leadership-role-by-event/${a}`,{eventId:s,roleId:n,userId:o},{headers:{Authorization:`Bearer ${l}`}})).data}catch(l){throw new Error(l.response?.data?.message||"Failed to update leadership role by event id")}},fk=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${vi}/api/v1/event-leaders/delete-leadership-role-by-event/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to delete leadership role by event id")}},mk=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.patch(`${vi}/api/v1/event-leaders/update-leadership-role-ranking-by-event/${a}`,{direction:s},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to update leadership role ranking by event id")}},wi="http://localhost:1000",gk=async(a,s,n,o)=>{try{const l=localStorage.getItem("token");return(await Oe.post(`${wi}/api/v1/general-documents/save-general-document`,{eventId:a,doc_type:s,title:n,file_url:o},{headers:{Authorization:`Bearer ${l}`}})).data}catch(l){throw new Error(l.response?.data?.message||"Failed to save general document")}},pk=async(a,s)=>{try{const n=localStorage.getItem("token"),o=new FormData;return o.append("eventId",a),o.append("file",s),(await Oe.post(`${wi}/api/v1/general-documents/upload-general-document`,o,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}})).data}catch(n){throw new Error(n.response.data.message)}},Xu=async a=>{try{const s=localStorage.getItem("token");return(await Oe.get(`${wi}/api/v1/general-documents/get-general-documents-by-event/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to fetch general documents")}},xk=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${wi}/api/v1/general-documents/delete-general-document/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to delete general document")}},_y=async a=>{try{const s=localStorage.getItem("token");return(await Oe.get(`${wi}/api/v1/general-documents/get-all-documents-by-event-Id/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to fetch general documents")}},yk=()=>{const{eventId:a}=ps(),s=Ct(),[n,o]=x.useState("Event Info"),[l,d]=x.useState(""),[u,m]=x.useState(""),[g,f]=x.useState(""),[y,b]=x.useState(""),[v,N]=x.useState(""),[w,S]=x.useState(""),[_,L]=x.useState(""),[D,M]=x.useState(""),[F,B]=x.useState(""),[q,ee]=x.useState([]),[le,he]=x.useState([]),[be,Te]=x.useState(""),[we,fe]=x.useState(""),[K,ye]=x.useState(""),[O,H]=x.useState(""),[se,W]=x.useState(""),[A,Q]=x.useState(""),[ne,ae]=x.useState(""),[ge,ve]=x.useState(""),[U,Ee]=x.useState(""),[Ce,Me]=x.useState(""),[me,_e]=x.useState(""),[Ye,st]=x.useState(""),[re,Se]=x.useState(""),[Ie,Fe]=x.useState(""),[Je,T]=x.useState(""),[je,te]=x.useState(""),[X,Le]=x.useState(""),[$,De]=x.useState(""),[Be,Pe]=x.useState(""),[P,C]=x.useState(!1),[Y,Ne]=x.useState([]),xe=["Event Info","Support Contact","Participation Info","Registration Info"];x.useEffect(()=>{const J=async()=>{try{const Ze=await Fh(a||"");Ze.success?(d(Ze.data[0].name),m(Ze.data[0].description),f(Ze.data[0].start_date),b(Ze.data[0].end_date),N(Ze.data[0].locality.name),S(Ze.data[0].fees_per_delegate),L(Ze.data[0].website),M(Ze.data[0].instagram),B(Ze.data[0].cover_image)):k.error("Failed to get event by id: "+Ze.message)}catch(Ze){k.error("Failed to get event by id: "+Ze.message)}},Ue=async()=>{try{const Ze=await Pa(a||"");Ze.success&&Ne(Ze.data)}catch(Ze){k.error("Failed to get event leader ship roles: "+Ze.message)}},He=async()=>{try{const Ze=await _y(a);if(Ze.success){const pt=Ze.data.filter(ft=>ft.doc_type==="general"),Ge=Ze.data.filter(ft=>ft.doc_type!=="general");ee(pt),he(Ge)}else k.error("Failed to get documents by id: "+Ze.message)}catch(Ze){k.error("Failed to get documents by id: "+Ze.message)}},ot=async()=>{try{const Ze=await ay(a),pt=Array.isArray(Ze?.data)?Ze.data[0]:Ze?.data;if(Ze?.success&&pt){const Ge=pt.user||pt.users||{},ft=Ge.school||{},vt=ft.locality||{};Te(Ge.id??""),fe(pt.registration_no??""),ye(Ge.username??""),H(Ge.fullname??Ge.name??""),W(Ge.birthday??""),Q(Ge.gender??""),ae(ft.name??""),ve(vt.name??""),Ee(Ge.grade??""),Me(Ge.email??""),_e(Ge.phone_e164??Ge.phone_number??""),st(pt.mun_experience??""),Se(pt.pref_committee_1.abbr??""),Fe(pt.pref_committee_2.abbr??""),T(pt.pref_committee_3.abbr??""),te(pt.food_pref??""),Le(pt.food_allergies??""),De(pt.emergency_name??""),Pe(pt.emergency_phone??"")}else k.error("No registration info found for this event")}catch(Ze){k.error("Failed to get registration info: "+Ze.message)}};Ue(),J(),He(),ot()},[a]);const Ve=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"w-[400px]",children:F&&t.jsx("img",{src:F,alt:"Event",className:"w-[400px] h-64 object-cover rounded-lg"})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Event Name"}),t.jsx("input",{type:"text",value:l,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Event Description"}),t.jsx("textarea",{value:u,readOnly:!0,rows:6,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700 resize-none"})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Date"}),t.jsx("input",{type:"text",value:g+" - "+y,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Locality"}),t.jsx("input",{type:"text",value:v,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Fees"}),t.jsx("input",{type:"text",value:w,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Website"}),t.jsx("input",{type:"text",value:_,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Instagram"}),t.jsx("input",{type:"text",value:D,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]})]})]}),V=()=>t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsxs("div",{className:"flex gap-4 mb-4 ",children:[t.jsx("div",{className:"bg-[#E3F2FD] rounded-lg text-center border border-gray-800",style:{width:"80px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{className:"text-sm font-medium text-[#1976D2]",children:"ABBR"})}),t.jsx("div",{className:"bg-[#E3F2FD] rounded-lg text-center border border-gray-800",style:{width:"150px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{className:"text-sm font-medium text-[#1976D2]",children:"Role"})}),t.jsx("div",{className:"bg-[#E3F2FD] rounded-lg text-center border border-gray-800",style:{width:"100px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{className:"text-sm font-medium text-[#1976D2]",children:"Username"})}),t.jsx("div",{className:"bg-[#E3F2FD] rounded-lg text-center border border-gray-800",style:{width:"200px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{className:"text-sm font-medium text-[#1976D2]",children:"Name"})}),t.jsx("div",{className:"bg-[#E3F2FD] rounded-lg text-center border border-gray-800",style:{width:"170px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{className:"text-sm font-medium text-[#1976D2]",children:"Mobile"})}),t.jsx("div",{className:"bg-[#E3F2FD] rounded-lg text-center border border-gray-800",style:{width:"260px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{className:"text-sm font-medium text-[#1976D2]",children:"Email"})})]}),Y.map((J,Ue)=>t.jsxs("div",{className:"flex gap-4 mb-3",children:[t.jsx("div",{className:"bg-white border border-gray-200 flex justify-center items-center rounded-lg text-center",style:{width:"80px",height:"60px"},children:t.jsx("span",{className:"text-sm text-gray-900",children:J.leadership_roles.abbr})}),t.jsx("div",{className:"bg-white border border-gray-200 flex justify-center items-center rounded-lg text-center",style:{width:"150px",height:"60px"},children:t.jsx("span",{className:"text-sm text-gray-900",children:J.leadership_roles.leadership_role})}),t.jsx("div",{className:"bg-white border border-gray-200 flex justify-center items-center rounded-lg text-center",style:{width:"100px",height:"60px"},children:t.jsx("span",{className:"text-sm text-gray-900",children:J.users.username})}),t.jsx("div",{className:"bg-white border border-gray-200 flex justify-center items-center rounded-lg text-center",style:{width:"200px",height:"60px"},children:t.jsx("span",{className:"text-sm text-gray-900",children:J.users.fullname})}),t.jsx("div",{className:"bg-white border border-gray-200 flex justify-center items-center rounded-lg text-center",style:{width:"170px",height:"60px"},children:t.jsx("span",{className:"text-sm text-gray-900",children:J.users.phone_e164})}),t.jsx("div",{className:"bg-white border border-gray-200 flex justify-center items-center rounded-lg text-center",style:{width:"260px",height:"60px"},children:t.jsx("span",{className:"text-sm text-gray-900",children:J.users.email})})]},Ue))]})}),I=()=>t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"flex items-center gap-6",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Committee"}),t.jsx("input",{type:"text",value:"",readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]})}),t.jsx("div",{className:"flex items-center gap-6",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Country"}),t.jsx("input",{type:"text",value:"",readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Documents"}),t.jsx("div",{className:"flex items-start gap-6",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-3",children:"General"}),t.jsx("div",{className:"space-y-3",children:q&&q.length>0?q.map((J,Ue)=>t.jsxs("div",{className:"w-[400px] flex items-center justify-between bg-white border border-gray-300 rounded-lg px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-900",children:J.title}),t.jsx("button",{onClick:()=>window.open(J.file_url,"_blank"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 transition-colors",children:t.jsx("img",{src:lc,alt:"Download",className:"w-4 h-4"})})]},Ue)):t.jsx("div",{className:"w-[400px] flex items-center justify-center bg-gray-50 border border-gray-300 rounded-lg px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:"No general documents available"})})})]})}),t.jsx("div",{className:"flex items-start gap-6",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-3",children:"Committee Related"}),t.jsx("div",{className:"space-y-3",children:le&&le.length>0?le.map((J,Ue)=>t.jsxs("div",{className:"w-[400px] flex items-center justify-between bg-white border border-gray-300 rounded-lg px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-900",children:J.title}),t.jsx("button",{onClick:()=>window.open(J.file_url,"_blank"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 transition-colors",children:t.jsx("img",{src:lc,alt:"Download",className:"w-4 h-4"})})]},Ue)):t.jsx("div",{className:"w-[400px] flex items-center justify-center bg-gray-50 border border-gray-300 rounded-lg px-4 py-3",children:t.jsx("span",{className:"text-sm text-gray-500",children:"No committee documents available"})})})]})})]})]}),R=()=>t.jsx("div",{className:"flex gap-8",children:t.jsxs("div",{className:"flex-1 space-y-6",children:[t.jsx("div",{className:"flex items-center gap-4 mb-8",children:t.jsx("div",{style:{width:"160px",height:"160px"},children:t.jsx(Ga,{size:"large",className:"w-[160px] h-[160px]"})})}),t.jsxs("div",{className:"w-[400px] gap-6",style:{display:"flex",flexDirection:"column",gap:"15px"},children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Registration No."}),t.jsx("input",{type:"text",value:we,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Username"}),t.jsx("input",{type:"text",value:K,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Name"}),t.jsx("input",{type:"text",value:O,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Date of Birth"}),t.jsx("input",{type:"text",value:se,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Gender"}),t.jsx("input",{type:"text",value:A,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"School Name"}),t.jsx("input",{type:"text",value:ne,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Locality of School"}),t.jsx("input",{type:"text",value:ge,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Grade or Year"}),t.jsx("input",{type:"text",value:U,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"text",value:Ce,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Mobile Number"}),t.jsx("input",{type:"text",value:me,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"MUN Experience in Years"}),t.jsx("input",{type:"text",value:Ye,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Preferred Committee - Choice 1"}),t.jsx("input",{type:"text",value:re,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Preferred Committee - Choice 2"}),t.jsx("input",{type:"text",value:Ie,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Preferred Committee - Choice 3"}),t.jsx("input",{type:"text",value:Je,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Food Preference"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{className:`px-6 py-3 rounded-full text-sm font-medium transition-colors ${je==="Vegetarian"?"bg-[#D9C7A1] text-gray-900":"bg-white text-gray-600 border border-gray-300"}`,children:"Vegetarian"}),t.jsx("button",{className:`px-6 py-3 rounded-full text-sm font-medium transition-colors ${je==="Non-Vegetarian"?"bg-[#D9C7A1] text-gray-900":"bg-white text-gray-600 border border-gray-300"}`,children:"Non-Vegetarian"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Food Allergies"}),t.jsx("input",{type:"text",value:X,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Emergency Contact Name"}),t.jsx("input",{type:"text",value:$,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Emergency Mobile Number"}),t.jsx("input",{type:"text",value:Be,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]})]}),t.jsx("div",{className:"mt-8",children:t.jsx("button",{onClick:()=>C(!P),className:"bg-[#D9C7A1] text-gray-900 px-6 py-3 rounded-full font-medium hover:bg-[#C5B595] transition-colors",children:"Cancel Registration"})})]})}),ie=()=>{switch(n){case"Event Info":return Ve();case"Support Contact":return V();case"Participation Info":return I();case"Registration Info":return R();default:return Ve()}};return t.jsx(xs,{loadingText:"Loading Delegate Page...",children:t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Wt,{}),t.jsxs("div",{className:"max-w-[80rem] px-6 py-8 flex flex-col items-left",style:{marginLeft:"13rem"},children:[t.jsx("div",{className:"flex items-center space-x-2 mb-8",children:xe.map((J,Ue)=>t.jsxs($e.Fragment,{children:[t.jsx("button",{className:`flex items-center border border-gray-800 justify-center w-[200px] h-[58px] p-[5px] rounded-[20px] text-sm font-medium transition-all ${n===J?"bg-[#1E395D] text-white":"bg-white text-gray-600 border border-gray-300"}`,onClick:()=>o(J),children:J}),Ue<xe.length-1&&t.jsx("span",{className:"mx-3 text-gray-600 text-sm",children:">"})]},J))}),t.jsx("div",{className:"",children:t.jsx("div",{children:ie()})})]}),P&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>C(!1)}),t.jsxs("div",{className:"relative bg-white border border-gray-800 rounded-lg p-6 shadow-xl w-[320px]",children:[t.jsx("div",{className:"mb-4",children:t.jsx("h4",{className:"font-semibold text-gray-900",children:"Confirm Cancel"})}),t.jsxs("div",{className:"flex items-center justify-end gap-4",children:[t.jsx("button",{onClick:async()=>{try{const J=await ny(be);J?.success?(k.success("Registration cancelled successfully"),s("/home")):k.error(J?.message||"Failed to cancel registration")}catch(J){k.error(J?.message||"Failed to cancel registration")}finally{C(!1)}},className:"text-red-600 font-medium hover:text-red-800 transition-colors",children:"Yes"}),t.jsx("button",{onClick:()=>C(!1),className:"text-gray-900 font-medium hover:text-gray-700 transition-colors",children:"No"})]})]})]})]})})},bk=()=>{const a=Ct(),{eventId:s}=ps(),{allLocalities:n}=Ot(),[o,l]=x.useState("personal"),[d,u]=x.useState(""),[m,g]=x.useState(""),[f,y]=x.useState(""),[b,v]=x.useState(""),[N,w]=x.useState(""),[S,_]=x.useState(""),[L,D]=x.useState(""),[M,F]=x.useState(""),[B,q]=x.useState(""),[ee,le]=x.useState(""),[he,be]=x.useState(""),[Te,we]=x.useState("");x.useEffect(()=>{(async()=>{try{const A=await Kn();A.success?(u(A.data.username||""),g(A.data.fullname||""),y(A.data.birthday||""),v(A.data.gender||""),_(A.data?.school?.name||""),D(A.data?.school?.locality_id||""),F(A.data.years_of_experience||""),q(A.data.email||""),le(A.data.phone_number||"")):k.error("Failed to get user by id: "+A.message)}catch(A){k.error("Failed to get user by id: "+A.message)}})()},[]),x.useEffect(()=>{if(n&&n.length>0&&L){const W=n.find(A=>{const Q=String(A.id||"").toLowerCase(),ne=String(L||"").toLowerCase();return Q===ne});w(W&&W.name||"")}},[n,L]);const fe=[{id:"personal",name:"Personal Info",active:o==="personal"},{id:"food",name:"Food Info",active:o==="food"}],K=()=>{switch(o){case"personal":l("food");break;case"food":se();break}},ye=()=>t.jsx("div",{className:"flex items-center justify-left mb-8",children:fe.map((W,A)=>t.jsxs($e.Fragment,{children:[t.jsx("div",{onClick:()=>l(W.id),style:{display:"flex",width:"200px",height:"58px",padding:"5px",justifyContent:"center",alignItems:"center",borderRadius:"20px",background:W.active?"#395579":"#fff",border:"1px solid #000"},className:`text-sm font-medium transition-colors ${W.active?"text-white":"text-gray-700"}`,children:W.name}),A<fe.length-1&&t.jsx("div",{className:"mx-2 text-gray-400",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]},W.id))}),O=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Food Preference"}),t.jsx("div",{className:"flex space-x-4",children:["Vegetarian","Non-Vegetarian"].map(W=>t.jsx("button",{onClick:()=>be(W),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${he===W?"bg-[#C2A46D] text-white":"text-gray-700 hover:bg-gray-300"}`,style:{border:"1px solid #000"},children:W},W))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Food Allergies"}),t.jsx("input",{type:"text",value:Te,onChange:W=>we(W.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent",placeholder:"E.g. Peanut"})]})]}),H=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-left mb-8",children:t.jsx("div",{className:"relative",children:t.jsx(Ga,{size:"large",className:"w-32 h-32 border-4 border-white shadow-lg",showBorder:!0})})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Username"}),t.jsx("input",{type:"text",value:d,disabled:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent",placeholder:"Enter username"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Username is system generated"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Name"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",disabled:!0,value:m,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter your name"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Date of Birth"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",disabled:!0,value:f,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter date of birth"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Gender"}),t.jsx("div",{className:"flex space-x-4",children:["male","female","other"].map(W=>t.jsx("button",{disabled:!0,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b.toLowerCase()===W.toLowerCase()?"bg-[#C2A46D] text-white":" text-gray-700 hover:bg-gray-300"}`,style:{border:"1px solid #000"},children:W},W))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Place of School"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",disabled:!0,value:N,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter place of school"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"School Name"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",disabled:!0,value:S,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter school name"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Years of Work Experience"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",disabled:!0,value:M,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter years of work experience"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Email"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"email",disabled:!0,value:B,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter email address"})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",style:{color:"#000",fontSize:"16px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Mobile"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"tel",disabled:!0,value:ee,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent pr-10",placeholder:"Enter mobile number"})})]})]})]}),se=async()=>{try{const W=await m4(s,he,Te);if(W.success){k.success("Registration completed successfully!");const A=await localStorage.getItem("userRole");a(A==="teacher"?`/teacher-registration-success/${s}`:`/student-registration-success/${s}`)}else k.error("Failed to register for event: "+W.message)}catch(W){k.error("Failed to register for event: "+W.message)}};return t.jsx(xs,{loadingText:"Loading Teacher Registration...",children:t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Wt,{}),t.jsxs("div",{className:"max-w-[85rem] mx-auto px-6 py-8",style:{paddingLeft:"10.5rem"},children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"mb-6",style:{color:"#000",fontSize:"18px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"Review Info"}),ye()]}),t.jsxs("div",{className:"max-w-2xl",children:[o==="personal"&&H(),o==="food"&&O()]}),t.jsx("div",{className:"flex justify-left mt-8",children:t.jsx("button",{onClick:K,className:"font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:"#C2A46D",borderRadius:"30px",display:"flex",width:"160px",height:"50px",padding:"10px",justifyContent:"center",alignItems:"center",gap:"10px",fontSize:"16px"},children:"Continue"})})]})]})})},vk=()=>{const a=Ct(),{eventId:s}=ps();return t.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#F8F8F8"},children:[t.jsx(Wt,{}),t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[70vh] px-6",children:[t.jsx("div",{className:"text-center mb-12",children:t.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",style:{color:"#000",fontSize:"48px",fontStyle:"normal",fontWeight:700,lineHeight:"150%"},children:"You are registered to GMA MUN 2025"})}),t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("button",{onClick:()=>a("/home"),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"30px",background:"#C2A46D",color:"#fff",fontWeight:500,fontSize:"16px",border:"none",cursor:"pointer",transition:"background 0.2s"},onMouseOver:n=>n.currentTarget.style.background="#B8945F",onMouseOut:n=>n.currentTarget.style.background="#C2A46D",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Home"]}),t.jsxs("button",{onClick:()=>a(`/teacher-delegate-page/${s}`),style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",borderRadius:"30px",background:"#C2A46D",color:"#fff",fontWeight:500,fontSize:"16px",border:"none",cursor:"pointer",transition:"background 0.2s"},onMouseOver:n=>n.currentTarget.style.background="#B8945F",onMouseOut:n=>n.currentTarget.style.background="#C2A46D",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Event"]})]})]})]})},wk=({eventName:a,eventStartDate:s,eventEndDate:n,locality:o,area:l,feesPerDelegate:d,numberOfSeats:u,totalRevenue:m,committees:g=[],registrations:f=[]})=>{const y=S=>{if(!S)return"N/A";const _=new Date(S),L=_.getDate().toString().padStart(2,"0"),D=(_.getMonth()+1).toString().padStart(2,"0"),M=_.getFullYear();return`${L}-${D}-${M}`},v=(()=>{const S=g.reduce((F,B)=>{const q=B.category||"open";return F[q]||(F[q]=[]),F[q].push(B),F},{}),_=Object.entries(S).map(([F,B])=>{const q=B.reduce((le,he)=>le+parseInt(he.seatsTotal||"0"),0);let ee=0;return B.map(le=>{let he=f.filter(be=>le.committeeId===be.assigned_committees).length;he>0&&(ee+=he)}),{category:F,count:B.length,seats:q,allocated:ee}}),L=g.length,D=g.reduce((F,B)=>F+parseInt(B.seatsTotal||"0"),0),M=_.reduce((F,B)=>F+B.allocated,0);return{total:{count:L,seats:D,allocated:M},country:_.find(F=>F.category==="country")||{category:"country",count:0,seats:0,allocated:0},crisis:_.find(F=>F.category==="crisis")||{category:"crisis",count:0,seats:0,allocated:0},role:_.find(F=>F.category==="role")||{category:"role",count:0,seats:0,allocated:0},open:_.find(F=>F.category==="open")||{category:"open",count:0,seats:0,allocated:0}}})(),w=g.map(S=>{const _=f.filter(B=>B.assigned_committees===S.committeeId).length,L=parseInt(S.seatsTotal||"0"),D=_;let M="Open",F="text-green-600";return D>=L?(M="Full",F="text-red-600"):D>L*.7&&(M="Filling",F="text-orange-600"),{committeeType:S.category||"open",committeeName:S.abbr,totalSeats:L,assignedSeats:D,status:M,statusColor:F}});return a?t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("div",{className:"flex justify-center items-center text-white border rounded-lg border border-gray-800",children:[t.jsx("div",{className:"bg-[#607DA3] text-sm font-medium px-2.5 py-2 h-full rounded-l-[5px] flex justify-center items-center",children:"Event"}),t.jsx("div",{className:"text-lg text-gray-800 p-[10px]  w-full",children:a})]}),t.jsxs("div",{className:"flex justify-center items-center text-white border rounded-lg border border-gray-800",children:[t.jsx("div",{className:"bg-[#607DA3] text-sm font-medium px-2.5 py-2 h-full rounded-l-[5px] flex justify-center items-center",children:"Date"}),t.jsxs("div",{className:"text-lg text-gray-800 p-[10px] w-full",children:[y(s)," - ",y(n)]})]}),t.jsxs("div",{className:"flex justify-center items-center text-white border rounded-lg border border-gray-800",children:[t.jsx("div",{className:"bg-[#607DA3] text-sm font-medium px-2.5 py-2 h-full rounded-l-[5px] flex justify-center items-center",children:"Locality"}),t.jsx("div",{className:"text-lg text-gray-800 p-[10px] w-full",children:o})]}),t.jsxs("div",{className:"flex justify-center items-center text-white border rounded-lg border border-gray-800",children:[t.jsx("div",{className:"bg-[#607DA3] text-sm font-medium px-2.5 py-2 h-full rounded-l-[5px] flex justify-center items-center",children:"Area"}),t.jsx("div",{className:"text-lg text-gray-800 p-[10px] w-full",children:l||"N/A"})]}),t.jsxs("div",{className:"flex justify-center items-center text-white border rounded-lg border border-gray-800",children:[t.jsx("div",{className:"bg-[#607DA3] text-sm font-medium px-2.5 py-2 h-full rounded-l-[5px] flex justify-center items-center",children:"Fees"}),t.jsxs("div",{className:"text-lg text-gray-800 p-[10px] w-full",children:["AED ",d]})]}),t.jsxs("div",{className:"flex justify-center items-center text-white border rounded-lg border border-gray-800",children:[t.jsx("div",{className:"bg-[#607DA3] text-sm font-medium px-2.5 py-2 h-full rounded-l-[5px] flex justify-center items-center",children:"Delegates"}),t.jsx("div",{className:"text-lg text-gray-800 p-[10px] w-full",children:u||"0"})]}),t.jsxs("div",{className:"flex justify-center items-center text-white border rounded-lg border border-gray-800",children:[t.jsx("div",{className:"bg-[#607DA3] text-sm font-medium px-2.5 py-2 h-full rounded-l-[5px] flex justify-center items-center",children:"Total Revenue"}),t.jsxs("div",{className:"text-lg text-gray-800 p-[10px] w-full",children:["AED ",m||"0"]})]})]})}),t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Allocation Summary"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-[800px] border border-gray-800 w-[570px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-[#607DA3] text-white ",children:[t.jsx("th",{className:"px-4 py-3 text-center border border-gray-800 w-[19%]"}),t.jsx("th",{className:"px-4 py-3 text-center border border-gray-800 w-[8%]",children:"Count"}),t.jsx("th",{className:"px-4 py-3 text-center border border-gray-800 w-[8%]",children:"Seats"}),t.jsx("th",{className:"px-4 py-3 text-center border border-gray-800 w-[8%]",children:"Allocated"})]})}),t.jsxs("tbody",{className:"divide-y divide-gray-800",children:[t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-3 text-center font-medium border border-gray-800",children:"Total"}),t.jsx("td",{className:"px-4 py-3 text-center border border-gray-800",children:v.total.count}),t.jsx("td",{className:"px-4 py-3 text-center border border-gray-800",children:v.total.seats}),t.jsx("td",{className:"px-4 py-3 text-center border border-gray-800",children:v.total.allocated})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-3  text-center font-medium border border-gray-800",children:"Country Committees"}),t.jsx("td",{className:"px-4 py-3  text-center border border-gray-800",children:v.country.count}),t.jsx("td",{className:"px-4 py-3  text-center border border-gray-800",children:v.country.seats}),t.jsx("td",{className:"px-4 py-3  text-center border border-gray-800",children:v.country.allocated})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-3  text-center font-medium border border-gray-800",children:"Crisis Committees"}),t.jsx("td",{className:"px-4 py-3  text-center border border-gray-800",children:v.crisis.count}),t.jsx("td",{className:"px-4 py-3  text-center border border-gray-800",children:v.crisis.seats}),t.jsx("td",{className:"px-4 py-3  text-center border border-gray-800",children:v.crisis.allocated})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-3 text-center font-medium border border-gray-800",children:"Role Committees"}),t.jsx("td",{className:"px-4 py-3 text-center border border-gray-800",children:v.role.count}),t.jsx("td",{className:"px-4 py-3 text-center border border-gray-800",children:v.role.seats}),t.jsx("td",{className:"px-4 py-3 text-center border border-gray-800",children:v.role.allocated})]}),t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-3 text-center font-medium border border-gray-800",children:"Open Committees"}),t.jsx("td",{className:"px-4 py-3 text-center border border-gray-800",children:v.open.count}),t.jsx("td",{className:"px-4 py-3 text-center border border-gray-800",children:v.open.seats}),t.jsx("td",{className:"px-4 py-3 text-center border border-gray-800",children:v.open.allocated})]})]})]})})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Allocation Status"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("div",{className:"grid grid-cols-5 gap-2 w-[840px]",children:[t.jsxs("div",{className:"bg-[#607DA3] text-white px-4 py-3 rounded-[5px] border border-gray-800 flex items-center justify-between",children:[t.jsx("span",{children:"Committee Type"}),t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{className:"bg-[#607DA3] text-white px-4 py-3 rounded-[5px] border border-gray-800 flex items-center justify-between",children:[t.jsx("span",{children:"Committees"}),t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsx("div",{className:"bg-[#607DA3] text-white px-4 py-3 rounded-[5px] border border-gray-800 flex items-center justify-between",children:t.jsx("span",{children:"Seats Total"})}),t.jsx("div",{className:"bg-[#607DA3] text-white px-4 py-3 rounded-[5px] border border-gray-800 flex items-center justify-between",children:t.jsx("span",{children:"Seats Assigned"})}),t.jsxs("div",{className:"bg-[#607DA3] text-white px-4 py-3 rounded-[5px] border border-gray-800 flex items-center justify-between",children:[t.jsx("span",{children:"Status"}),t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),w.length>0?w.map((S,_)=>t.jsxs($e.Fragment,{children:[t.jsx("div",{className:"bg-white px-4 py-3 rounded-[5px] border border-gray-800 flex items-center capitalize",children:S.committeeType}),t.jsx("div",{className:"bg-white px-4 py-3 rounded-[5px] border border-gray-800 flex items-center font-medium",children:S.committeeName}),t.jsx("div",{className:"bg-white px-4 py-3 rounded-[5px] border border-gray-800 flex items-center",children:S.totalSeats}),t.jsx("div",{className:"bg-white px-4 py-3 rounded-[5px] border border-gray-800 flex items-center",children:S.assignedSeats}),t.jsx("div",{className:"bg-white px-4 py-3 rounded-[5px] border border-gray-800 flex items-center",children:t.jsx("span",{className:`${S.statusColor} font-medium`,children:S.status})})]},`${S.committeeName}-${S.committeeType}-${_}`)):t.jsx("div",{className:"col-span-5 bg-white px-4 py-8 rounded-[5px] border border-gray-800 flex items-center justify-center text-gray-500",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-gray-400 mb-2",children:t.jsx("svg",{className:"w-8 h-8 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),t.jsx("p",{className:"text-sm",children:"No committees available"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Create committees to view allocation status"})]})})]})})]})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-gray-400 mb-4",children:t.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events available"}),t.jsx("p",{className:"text-gray-500",children:"Please create an event to view the dashboard."})]})},jk=({eventName:a,coverImage:s,eventDescription:n,eventStartDate:o,eventEndDate:l,school:d,locality:u,numberOfSeats:m,feesPerDelegate:g,totalRevenue:f,website:y,instagram:b,isUploadingCoverImage:v,editingField:N,tempValue:w,showDatePicker:S,onFieldEdit:_,onFieldChange:L,onCancelEdit:D,onCoverImageUpload:M,onDateRangeChange:F,onDatePickerToggle:B,onDatePickerClose:q,onUpdateEvent:ee,isSaving:le})=>{const he=x.useRef(null),be=(we,fe,K,ye="text",O,H=!0)=>{const se=N===fe,W=se?w:K;return t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:we}),t.jsxs("div",{className:"relative",children:[ye==="textarea"?t.jsx("textarea",{value:W,disabled:!se,onChange:A=>L(fe,A.target.value),rows:O||4,className:`w-[400px] px-4 py-3 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${se?"border-[#1E395D]":"border-gray-300 bg-gray-50"}`,placeholder:`Enter ${we.toLowerCase()}`}):t.jsx("input",{type:ye,value:W,disabled:!se,onChange:A=>L(fe,A.target.value),className:`w-[400px] px-4 py-3 border rounded-lg text-sm bg-white focus:outline-none focus:border-[#1E395D] focus:ring-2 focus:ring-[#1E395D] focus:ring-opacity-20 transition-all duration-200 ${se?"border-[#1E395D]":"border-gray-300 bg-gray-50"}`,placeholder:`Enter ${we.toLowerCase()}`}),!se&&H&&t.jsx("button",{onClick:()=>_(fe,K),className:"absolute top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",style:{right:"43.75rem"},children:t.jsx("img",{src:Ks,alt:"Edit",className:"w-4 h-4"})}),se&&H&&t.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 flex space-x-2",style:{right:"43rem"},children:t.jsx("button",{onClick:D,className:"text-red-600 hover:text-red-800 text-sm font-medium mr-2",children:"✕"})})]})]})},Te=(we,fe)=>{const K=N===fe;return t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:we}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{onClick:()=>K&&B(),className:`w-[400px] px-4 py-3 border rounded-lg transition-colors ${K?"border-[#1E395D] cursor-pointer hover:border-[#1E395D]":"border-gray-300 bg-gray-50 cursor-not-allowed"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Start Date"}),t.jsx("span",{className:"text-sm font-medium",children:o?new Date(o).toLocaleDateString("en-GB"):"DD / MM / YYYY"})]}),t.jsx("div",{className:"text-gray-400",children:"to"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"End Date"}),t.jsx("span",{className:"text-sm font-medium",children:l?new Date(l).toLocaleDateString("en-GB"):"DD / MM / YYYY"})]})]}),t.jsx("div",{className:"text-gray-400",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})}),S&&K&&t.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:t.jsx(Cy,{startDate:o,endDate:l,onDateRangeChange:F,onClose:q,maxDays:7})}),!K&&t.jsx("button",{onClick:()=>_(fe,`${o} - ${l}`),className:"absolute top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",style:{right:"43.75rem"},children:t.jsx("img",{src:Ks,alt:"Edit",className:"w-4 h-4"})}),K&&t.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 flex space-x-2",style:{right:"43rem"},children:t.jsx("button",{onClick:D,className:"text-red-600 hover:text-red-800 text-sm font-medium mr-2",children:"✕"})})]}),t.jsx("div",{className:"text-sm text-gray-500 mt-1",children:K?"Click on the date field to open calendar":"Select the start and end dates for your event"})]})};return a?t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Event Image"})}),t.jsxs("div",{className:"relative inline-block",children:[v?t.jsx("div",{className:"w-[400px] h-64 bg-gray-200 rounded-lg flex items-center justify-center",children:t.jsx(Fr,{size:"large",text:"Uploading..."})}):t.jsx("div",{className:"w-[400px] h-64 bg-gray-200 rounded-lg overflow-hidden",children:t.jsx("img",{src:s||"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=800&h=400&fit=crop",alt:a,className:"w-[400px] h-full object-cover"})}),t.jsx("button",{onClick:()=>!v&&he.current?.click(),disabled:v,className:`absolute bottom-2 right-2 w-8 h-8 rounded-full flex items-center justify-center transition-colors ${v?"bg-gray-300 cursor-not-allowed opacity-50":"hover:bg-gray-300"}`,style:{right:"-1.5rem",bottom:"-0.5rem"},children:t.jsx("img",{src:Ks,alt:"Edit Cover Image",className:"w-4 h-4"})}),t.jsx("input",{ref:he,type:"file",accept:"image/*",onChange:M,disabled:v,className:"hidden"})]})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Event Information"}),t.jsxs("div",{className:"flex flex-col gap-6",children:[be("Event Name","name",a||""),be("Event Description","description",n||"","textarea",4),Te("Date","date"),be("School","school_name",d||"","text",void 0,!1),be("Locality","locality",u||"","text",void 0,!1),be("Seats","number_of_seats",m||""),be("Fees","fees_per_delegate",g||""),t.jsxs("div",{className:"w-[400px] flex justify-between items-center py-3 border-b border-gray-200",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Revenue"}),t.jsxs("div",{className:"text-lg text-gray-800 font-medium",children:["AED ",f||"0"]})]}),be("Website","website",y||""),be("Instagram","instagram",b||"")]}),t.jsx("div",{className:"mt-8 flex justify-start",children:t.jsx("button",{onClick:()=>{ee(),D()},disabled:le,className:"text-white font-medium transition-colors",style:{width:"105px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",opacity:1,background:le?"#bdbdbd":"#C2A46D",cursor:le?"not-allowed":"pointer",border:"none",boxShadow:"none"},children:le?"Saving...":"Save"})})]})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No event selected"}),t.jsx("p",{className:"text-gray-500",children:"Please select an event to view details."})]})},Nk=()=>{const{eventId:a}=ps(),{allLeadershipRoles:s}=Ot(),[n,o]=x.useState([]),[l,d]=x.useState(!0),[u,m]=x.useState(null),[g,f]=x.useState(!1),[y,b]=x.useState(null),[v,N]=x.useState({abbr:"",role:"",username:"",name:"",selectedUserId:""}),[w,S]=x.useState({abbr:"",role:"",username:"",name:"",selectedUserId:"",id:""}),_=x.useRef({}),[L,D]=x.useState(!1),[M,F]=x.useState([]),[B,q]=x.useState([]),ee=x.useRef(null),[le,he]=x.useState(!1),[be,Te]=x.useState([]),we=x.useRef(null),[fe,K]=x.useState(!1),[ye,O]=x.useState(null),[H,se]=x.useState(new Set),[W,A]=x.useState(!1),[Q,ne]=x.useState(!1),[ae,ge]=x.useState(!1),ve=te=>{m(u===te?null:te)};x.useEffect(()=>{(async()=>{if(a){d(!0);try{const X=await Pa(a);if(X.success){const De=(X.data||[]).sort((Be,Pe)=>{const P=Be.ranking??0,C=Pe.ranking??0;return P-C});o(De)}const Le=await ry(a);console.log("allRegistrationsResponse",Le),Le.success&&q(Le.data)}catch(X){console.log("Error fetching data:",X),k.error("Failed to load leadership roles data")}finally{d(!1)}}})()},[a]);const U=(te,X)=>{if(te==="edit"){const Le=n.find($=>$.id===X);Le&&(S({abbr:Le.leadership_roles?.abbr||"",role:Le.leadership_roles?.leadership_role||"",username:Le.users?.username||"",name:Le.users?.fullname||"",selectedUserId:Le.users?.id?.toString()||"",id:Le.id.toString()}),b(X))}else te==="delete"?(O(X),K(!0)):te==="add_support"&&se(Le=>{const $=new Set(Le);return $.has(X)?$.delete(X):$.add(X),$});m(null)},Ee=async()=>{if(ye)try{ge(!0),console.log("roleToDelete",ye);const te=await fk(ye.toString());if(te.success){k.success("Leadership role deleted successfully");const X=await Pa(a||"");if(X.success){const $=(X.data||[]).sort((De,Be)=>{const Pe=De.ranking??0,P=Be.ranking??0;return Pe-P});o($)}}else k.error(te.message||"Failed to delete leadership role")}catch(te){k.error(te.message||"Failed to delete leadership role")}finally{ge(!1)}K(!1),O(null)},Ce=()=>{K(!1),O(null)},Me=async(te,X)=>{try{if((await mk(te.toString(),X)).success){k.success("Ranking updated successfully");const $=await Pa(a||"");if($.success){const Be=($.data||[]).sort((Pe,P)=>{const C=Pe.ranking??0,Y=P.ranking??0;return C-Y});o(Be)}}}catch(Le){k.error(Le.message||"Failed to update ranking")}},me=()=>{f(!0),N({abbr:"",role:"",username:"",name:"",selectedUserId:""})},_e=(te,X)=>{N(Le=>({...Le,[te]:X})),te==="role"&&(X.trim()?(D(!0),st(X.trim())):(D(!1),F([]))),te==="username"&&(X.trim()?(he(!0),re(X.trim())):(he(!1),Te([]),N(Le=>({...Le,name:"",selectedUserId:""}))))},Ye=(te,X)=>{S(Le=>({...Le,[te]:X})),te==="role"&&(X.trim()?(D(!0),st(X.trim())):(D(!1),F([]))),te==="username"&&(X.trim()?(he(!0),re(X.trim())):(he(!1),Te([]),S(Le=>({...Le,name:"",selectedUserId:""}))))},st=te=>{if(!s||s.length===0){F([]);return}const X=s.filter(Le=>{const $=Le.leadership_role||Le.role||"",De=Le.abbr||"";return $.toLowerCase().includes(te.toLowerCase())||De.toLowerCase().includes(te.toLowerCase())});F(X)},re=te=>{if(!B||B.length===0){Te([]);return}const X=B.filter(Le=>{const $=Le.user||Le,De=$.username||"",Be=$.fullname||"";return De.toLowerCase().includes(te.toLowerCase())||Be.toLowerCase().includes(te.toLowerCase())});Te(X)},Se=te=>{y?S(X=>({...X,role:te.leadership_role||te.role||"",abbr:te.abbr||""})):N(X=>({...X,role:te.leadership_role||te.role||"",abbr:te.abbr||""})),D(!1),F([])},Ie=te=>{const X=te.user||te;y?S(Le=>({...Le,username:X.username||"",name:X.fullname||"",selectedUserId:X.id||""})):N(Le=>({...Le,username:X.username||"",name:X.fullname||"",selectedUserId:X.id||""})),he(!1),Te([])},Fe=async()=>{if(!W)try{if(A(!0),console.log(v),!v.role||!v.username||!v.selectedUserId){k.error("Please fill in all required fields");return}const te=s.find(X=>(X.leadership_role||X.role)===v.role);if(te&&v.selectedUserId){const X=await uk(a||"",v.selectedUserId,te.id.toString());if(X.success){k.success("Leadership role added successfully"),f(!1),N({abbr:"",role:"",username:"",name:"",selectedUserId:""});const Le=await Pa(a||"");if(Le.success){const De=(Le.data||[]).sort((Be,Pe)=>{const P=Be.ranking??0,C=Pe.ranking??0;return P-C});o(De)}}else k.error(X.message)}else k.error("Unable to save leadership role. Please try again.")}catch(te){k.error("Failed to save leadership role: "+te.message)}finally{A(!1)}},Je=()=>{f(!1),N({abbr:"",role:"",username:"",name:"",selectedUserId:""}),D(!1),he(!1),F([]),Te([])},T=async()=>{if(!Q)try{if(ne(!0),!w.role||!w.username||!w.selectedUserId){k.error("Please fill in all required fields");return}const te=s.find(X=>(X.leadership_role||X.role)===w.role);if(te&&w.selectedUserId){console.log("eventId",a),console.log("selectedUserId",w.selectedUserId),console.log("roleId",te.id.toString()),console.log("id",w.id.toString());const X=await hk(w.id.toString(),a||"",te.id.toString(),w.selectedUserId);if(X.success){k.success("Leadership role updated successfully"),b(null),S({abbr:"",role:"",username:"",name:"",selectedUserId:"",id:""});const Le=await Pa(a||"");if(Le.success){const De=(Le.data||[]).sort((Be,Pe)=>{const P=Be.ranking??0,C=Pe.ranking??0;return P-C});o(De)}}else k.error(X.message)}else k.error("Unable to update leadership role. Please try again.")}catch(te){k.error("Failed to update leadership role: "+te.message)}finally{ne(!1)}},je=()=>{b(null),S({abbr:"",role:"",username:"",name:"",selectedUserId:"",id:""})};return x.useEffect(()=>{const te=X=>{Object.values(_.current).every($=>!$||!$.contains(X.target))&&m(null),ee.current&&!ee.current.contains(X.target)&&D(!1),we.current&&!we.current.contains(X.target)&&he(!1)};return document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te)}},[]),l?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading leadership roles..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-6 ",style:{marginBottom:"16px"},children:t.jsxs("div",{className:"grid grid-cols-[100px_200px_220px_280px_60px] gap-4",children:[t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-4 py-3 rounded-lg text-sm font-medium text-center border border-gray-800",children:"ABBR"}),t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-4 py-3 rounded-lg text-sm font-medium text-center border border-gray-800",children:"Leadership Role"}),t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-4 py-3 rounded-lg text-sm font-medium text-center border border-gray-800",children:"Username"}),t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-4 py-3 rounded-lg text-sm font-medium text-center border border-gray-800",children:"Name"}),t.jsx("div",{}),n.map(te=>t.jsxs($e.Fragment,{children:[y===te.id?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-gray-100 px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:w.abbr,readOnly:!0,placeholder:"Auto-filled",className:"w-full border-none outline-none text-gray-500 bg-transparent cursor-not-allowed"})}),t.jsxs("div",{ref:ee,className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200 relative",children:[t.jsx("input",{type:"text",value:w.role,onChange:X=>Ye("role",X.target.value),onFocus:()=>{w.role.trim()&&(D(!0),st(w.role.trim()))},placeholder:"Enter role name",className:"w-full border-none outline-none text-gray-900",autoComplete:"off"}),L&&M.length>0&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:M.map((X,Le)=>t.jsxs("button",{type:"button",onClick:()=>Se(X),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:[t.jsx("div",{className:"font-medium",children:X.leadership_role||X.role}),X.abbr&&t.jsxs("div",{className:"text-xs text-gray-500",children:["(",X.abbr,")"]})]},X.id||Le))})]}),t.jsxs("div",{ref:we,className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200 relative",children:[t.jsx("input",{type:"text",value:w.username,onChange:X=>Ye("username",X.target.value),onFocus:()=>{w.username.trim()&&(he(!0),re(w.username.trim()))},placeholder:"Enter username",className:"w-full border-none outline-none text-gray-900",autoComplete:"off"}),le&&be.length>0&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:be.map((X,Le)=>{const $=X.user||X;return t.jsxs("button",{type:"button",onClick:()=>Ie(X),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:[t.jsx("div",{className:"font-medium",children:$.username}),t.jsx("div",{className:"text-xs text-gray-500",children:$.fullname})]},$.id||Le)})})]}),t.jsx("div",{className:"bg-gray-100 px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:w.name,readOnly:!0,placeholder:"Auto-filled",className:"w-full border-none outline-none text-gray-500 bg-transparent cursor-not-allowed"})})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-4 py-3 flex items-center justify-center",children:t.jsx("div",{className:"text-sm text-gray-900 text-center w-full",children:te.leadership_roles?.abbr||"-"})}),t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-4 py-3 flex items-center",children:t.jsx("div",{className:"text-sm text-gray-900 w-full",children:te.leadership_roles?.leadership_role||"-"})}),t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-4 py-3 flex items-center",children:t.jsx("div",{className:"text-sm text-gray-900 w-full",children:te.users?.username||"-"})}),t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-4 py-3 flex items-center",children:t.jsx("div",{className:"text-sm text-gray-900 w-full",children:te.users?.fullname||"-"})})]}),t.jsx("div",{className:"bg-gray-50 px-0 py-2 text-sm font-medium relative",children:t.jsxs("div",{className:"relative flex items-center justify-center space-x-1",children:[t.jsx("button",{className:"text-yellow-600 hover:text-yellow-800 p-1",title:"Editing Mode",children:t.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}),t.jsxs("div",{className:"flex flex-col space-y-1",children:[t.jsx("button",{onClick:()=>Me(te.id,-1),disabled:n.findIndex(X=>X.id===te.id)===0,className:"text-gray-600 hover:text-gray-800 p-1 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:t.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M18 15l-6-6-6 6"})})}),t.jsx("button",{onClick:()=>Me(te.id,1),disabled:n.findIndex(X=>X.id===te.id)===n.length-1,className:"text-gray-600 hover:text-gray-800 p-1 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:t.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t.jsx("path",{d:"M6 9l6 6 6-6"})})})]}),H.has(te.id)&&t.jsx("button",{className:"text-blue-600 hover:text-blue-800 p-1",title:"Support Enabled",children:t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:[t.jsx("path",{d:"M3 14v3a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-3"}),t.jsx("path",{d:"M12 2a5 5 0 0 0-5 5v6a5 5 0 0 0 10 0V7a5 5 0 0 0-5-5z"}),t.jsx("path",{d:"M8 12h8",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round"})]})}),t.jsxs("div",{ref:X=>{_.current[te.id]=X},className:"relative",children:[t.jsx("button",{onClick:()=>ve(te.id),className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),u===te.id&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:t.jsxs("div",{className:"py-1",children:[t.jsx("button",{onClick:()=>U("edit",te.id),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900 transition-colors duration-200",children:"Edit"}),t.jsx("button",{onClick:()=>U("delete",te.id),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900 transition-colors duration-200",children:"Delete"}),t.jsx("button",{onClick:me,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900 transition-colors duration-200",children:"Add Role"}),t.jsx("button",{onClick:()=>U("add_support",te.id),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900 transition-colors duration-200",children:H.has(te.id)?"Remove Support":"Add as Support"})]})})]})]})})]},te.id)),g&&t.jsxs("div",{className:`col-span-${y!==null?"6":"5"} grid gap-4 ${y!==null?"grid-cols-[100px_200px_220px_280px_80px_80px]":"grid-cols-[100px_200px_220px_280px_80px]"}`,children:[t.jsx("div",{className:"bg-gray-100 px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:v.abbr,readOnly:!0,placeholder:"Auto-filled",className:"w-full border-none outline-none text-gray-500 bg-transparent cursor-not-allowed"})}),t.jsxs("div",{ref:ee,className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200 relative",children:[t.jsx("input",{type:"text",value:v.role,onChange:te=>_e("role",te.target.value),onFocus:()=>{v.role.trim()&&(D(!0),st(v.role.trim()))},placeholder:"Enter role name",className:"w-full border-none outline-none text-gray-900",autoComplete:"off"}),L&&M.length>0&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:M.map((te,X)=>t.jsxs("button",{type:"button",onClick:()=>Se(te),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:[t.jsx("div",{className:"font-medium",children:te.leadership_role||te.role}),te.abbr&&t.jsxs("div",{className:"text-xs text-gray-500",children:["(",te.abbr,")"]})]},te.id||X))})]}),t.jsxs("div",{ref:we,className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200 relative",children:[t.jsx("input",{type:"text",value:v.username,onChange:te=>_e("username",te.target.value),onFocus:()=>{v.username.trim()&&(he(!0),re(v.username.trim()))},placeholder:"Enter username",className:"w-full border-none outline-none text-gray-900",autoComplete:"off"}),le&&be.length>0&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:be.map((te,X)=>{const Le=te.user||te;return t.jsxs("button",{type:"button",onClick:()=>Ie(te),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:[t.jsx("div",{className:"font-medium",children:Le.username}),t.jsx("div",{className:"text-xs text-gray-500",children:Le.fullname})]},Le.id||X)})})]}),t.jsx("div",{className:"bg-gray-100 px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:v.name,readOnly:!0,placeholder:"Auto-filled",className:"w-full border-none outline-none text-gray-500 bg-transparent cursor-not-allowed"})}),t.jsx("div",{className:"bg-gray-50 px-3 py-2 text-sm font-medium relative",children:t.jsx("div",{className:"relative flex items-center justify-center",children:t.jsx("button",{className:"text-yellow-600 hover:text-yellow-800 p-1",title:"Adding New Role",children:t.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})})})}),y!==null&&t.jsx("div",{})]})]})}),t.jsxs("div",{className:"w-[925px] flex justify-between",children:[y!==null?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:je,className:"text-white font-medium transition-colors",style:{width:"105px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",opacity:1,background:"#C2A46D",cursor:"pointer",border:"none",boxShadow:"none"},children:"Cancel"}),t.jsx("button",{onClick:T,disabled:Q,className:"text-white font-medium transition-colors",style:{width:"105px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",opacity:Q?.6:1,background:Q?"#bdbdbd":"#607DA3",cursor:Q?"not-allowed":"pointer",border:"none",boxShadow:"none"},children:Q?"Saving...":"Save"})]}):t.jsxs(t.Fragment,{children:[g?t.jsx("button",{onClick:Je,className:"text-white font-medium transition-colors",style:{width:"105px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",opacity:1,background:"#C2A46D",cursor:"pointer",border:"none",boxShadow:"none"},children:"Close"}):t.jsx("button",{onClick:me,className:"text-white font-medium transition-colors",style:{width:"105px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",opacity:1,background:"#C2A46D",cursor:"pointer",border:"none",boxShadow:"none"},children:"Add Role"}),g&&t.jsx(t.Fragment,{children:t.jsx("button",{onClick:Fe,disabled:W,className:"text-white font-medium transition-colors",style:{width:"105px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",opacity:W?.6:1,background:W?"#bdbdbd":"#C2A46D",cursor:W?"not-allowed":"pointer",border:"none",boxShadow:"none"},children:W?"Saving...":"Save"})})]}),t.jsx($s,{isOpen:fe,onClose:Ce,onConfirm:Ee,title:"Confirm Delete",message:"Are you sure you want to delete this leadership role? This action cannot be undone.",confirmText:"Yes",cancelText:"No",confirmButtonColor:"text-red-600",isLoading:ae,loadingText:"Deleting..."})]})]})},gs=[];for(let a=0;a<256;++a)gs.push((a+256).toString(16).slice(1));function Sk(a,s=0){return(gs[a[s+0]]+gs[a[s+1]]+gs[a[s+2]]+gs[a[s+3]]+"-"+gs[a[s+4]]+gs[a[s+5]]+"-"+gs[a[s+6]]+gs[a[s+7]]+"-"+gs[a[s+8]]+gs[a[s+9]]+"-"+gs[a[s+10]]+gs[a[s+11]]+gs[a[s+12]]+gs[a[s+13]]+gs[a[s+14]]+gs[a[s+15]]).toLowerCase()}let Ju;const Ck=new Uint8Array(16);function kk(){if(!Ju){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ju=crypto.getRandomValues.bind(crypto)}return Ju(Ck)}const _k=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Hp={randomUUID:_k};function Ek(a,s,n){a=a||{};const o=a.random??a.rng?.()??kk();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,Sk(o)}function Ak(a,s,n){return Hp.randomUUID&&!a?Hp.randomUUID():Ek(a)}const Dk=()=>{const[a,s]=x.useState("country"),[n,o]=x.useState([]),[l,d]=x.useState([]),[u,m]=x.useState(null),[g,f]=x.useState(null),[y,b]=x.useState(!1),[v,N]=x.useState(!1),[w,S]=x.useState(!1),[_,L]=x.useState(!1),[D,M]=x.useState(!1),[F,B]=x.useState(!1),[q,ee]=x.useState({x:0,y:0}),[le,he]=x.useState(null),[be,Te]=x.useState(!1),[we,fe]=x.useState(!0),[K,ye]=x.useState(!1),O=x.useRef(!1),[H,se]=x.useState(!1),[W,A]=x.useState([]),[Q,ne]=x.useState(null),ae=x.useRef(null),[ge,ve]=x.useState(!1),[U,Ee]=x.useState([]),[Ce,Me]=x.useState(null),[me,_e]=x.useState(null),Ye=x.useRef(null),st=x.useRef(null),re=[{id:"country",name:"Country Committees"},{id:"role",name:"Role Committees"},{id:"crisis",name:"Crisis Committees"},{id:"open",name:"Open Committees"}],{eventId:Se}=ps(),{allCommittees:Ie,allRegistrations:Fe,refreshCommitteesData:Je,refreshRegistrationsData:T,isLoading:je}=Ot();x.useEffect(()=>{Je()},[]),x.useEffect(()=>{Se&&T(Se)},[Se]),x.useEffect(()=>{O.current=_},[_]),x.useEffect(()=>{if(!_){const V=n.filter(I=>I.category===a);d(V)}},[n,a,_]),x.useEffect(()=>{Se&&(async()=>{try{fe(!0);const I=await Hn(Se);if(!_){const ie=(I.data||[]).map(J=>{const Ue=J&&typeof J.committee=="object"?J.committee:null,He=Ue?Ue.committee??Ue.name??"":typeof J.committee=="string"?J.committee:"",ot=Ue?Ue.abbr??J.abbr??"":J.abbr??"",Ze=Ue?Ue.id:J.committee_id??J.committeeId??void 0,pt=Ue?Ue.category:J.category;return{id:String(J.id),committee:He,abbr:ot,committeeId:Ze,seatsTotal:String(J.seats??J.seatsTotal??""),chairUsername:J.chair_username??"",chairName:J.chair_name??"",deputyChair1Username:J.deputy_chair_1_username??"",deputyChair1Name:J.deputy_chair_1_name??"",deputyChair2Username:J.deputy_chair_2_username??"",deputyChair2Name:J.deputy_chair_2_name??"",isNew:!1,category:pt||"country"}});o(Array.isArray(ie)?ie:[])}}catch(I){console.log("Error fetching event committees:",I),k.error(I.message||"Failed to fetch event committees")}finally{fe(!1)}})()},[Se,a,_]),x.useEffect(()=>{const V=I=>{ae.current&&!ae.current.contains(I.target)&&(se(!1),A([]),ne(null)),Ye.current&&!Ye.current.contains(I.target)&&(ve(!1),Ee([]),Me(null),_e(null)),st.current&&!st.current.contains(I.target)&&(B(!1),he(null),M(!1))};return document.addEventListener("mousedown",V),()=>{document.removeEventListener("mousedown",V)}},[]);const te=async V=>{if(ye(!0),s(V),se(!1),A([]),ne(null),ve(!1),Ee([]),Me(null),_e(null),B(!1),he(null),m(null),f(null),M(!1),l.some(R=>R.isNew))d(R=>R.filter(ie=>ie.category===V));else{L(!1);const R=n.filter(ie=>ie.category===V);d(R)}setTimeout(()=>{ye(!1)},500)},X=(V,I)=>{const R=["committee","seatsTotal","chairUsername","deputyChair1Username","deputyChair2Username"];!l.find(Ue=>Ue.id===V)?.isNew&&!R.includes(I)||(m(V),f(I),I==="chairUsername"||I==="deputyChair1Username"||I==="deputyChair2Username"?(Me(V),_e(I),ve(!1),Ee([])):(ve(!1),Ee([]),Me(null),_e(null)),B(!1),he(null))},Le=(V,I)=>{u&&g&&I&&(d(R=>R.map(ie=>ie.id===I?{...ie,[g]:V}:ie)),L(!0)),g==="committee"&&(V.trim()?(se(!0),ne(I||null),$(V.trim())):(se(!1),A([]),ne(null))),(g==="chairUsername"||g==="deputyChair1Username"||g==="deputyChair2Username")&&(V.trim()?(ve(!0),Me(I||null),_e(g),De(V.trim())):(ve(!1),Ee([]),Me(null),_e(null)))},$=V=>{if(!Ie||Ie.length===0){A([]);return}const R=Ie.filter(ie=>ie.category===a).filter(ie=>{const J=ie.committee||"",Ue=ie.abbr||"";return J.toLowerCase().includes(V.toLowerCase())||Ue.toLowerCase().includes(V.toLowerCase())});A(R)},De=V=>{if(!Fe||Fe.length===0){Ee([]);return}const I=Fe.filter(R=>{const ie=R.user||R,J=ie.username||"",Ue=ie.fullname||"";return J.toLowerCase().includes(V.toLowerCase())||Ue.toLowerCase().includes(V.toLowerCase())});Ee(I)},Be=V=>{u&&g==="committee"&&(d(I=>I.map(R=>R.id===u?{...R,committee:V.committee||V.name||"",abbr:V.abbr||"Auto",committeeId:V.id}:R)),L(!0)),se(!1),A([]),ne(null),u&&f("seatsTotal")},Pe=V=>{const I=V&&V.user?V.user:V;u&&me&&(d(R=>R.map(ie=>{if(ie.id!==u)return ie;if(me==="chairUsername"||me==="deputyChair1Username"||me==="deputyChair2Username"){const J=me.replace("Username","Name");return{...ie,[me]:I?.username||"",[J]:I?.fullname||""}}if(me==="chairName"||me==="deputyChair1Name"||me==="deputyChair2Name"){const J=me.replace("Name","Username");return{...ie,[me]:I?.fullname||"",[J]:I?.username||""}}return ie})),L(!0)),ve(!1),Ee([]),Me(null),_e(null)},P=(V,I)=>{V.preventDefault(),V.stopPropagation();const R=V.currentTarget.getBoundingClientRect();ee({x:R.left,y:R.bottom}),he(I),B(!0)},C=()=>{if(l.some(ie=>ie.isNew))return;const I=Ak(),R={id:I,abbr:"Auto",committee:"",committeeId:void 0,seatsTotal:"",chairUsername:"",chairName:"",deputyChair1Username:"",deputyChair1Name:"",deputyChair2Username:"",deputyChair2Name:"",isNew:!0,category:a};m(null),f(null),M(!1),L(!0),d(ie=>[...ie,R]),setTimeout(()=>{m(I),f("committee"),se(!1),A([]),ne(null),ve(!1),Ee([]),Me(null),_e(null),B(!1),he(null)},0)},Y=async()=>{try{if(S(!0),!le)return;const V=l.find(R=>R.id===le);if(!V)return;if(V.isNew){d(R=>R.filter(ie=>ie.id!==le)),B(!1),he(null);return}if(!(await lk(String(le))).success){k.error("Failed to delete committee");return}try{const J=((await Hn(Se)).data||[]).map(Ue=>{const He=Ue&&typeof Ue.committee=="object"?Ue.committee:null,ot=He?He.committee??He.name??"":typeof Ue.committee=="string"?Ue.committee:"",Ze=He?He.abbr??Ue.abbr??"":Ue.abbr??"",pt=He?He.id:Ue.committee_id??Ue.committeeId??void 0,Ge=He?He.category:Ue.category;return{id:String(Ue.id),committee:ot,abbr:Ze,committeeId:pt,seatsTotal:String(Ue.seats??Ue.seatsTotal??""),chairUsername:Ue.chair_username??"",chairName:Ue.chair_name??"",deputyChair1Username:Ue.deputy_chair_1_username??"",deputyChair1Name:Ue.deputy_chair_1_name??"",deputyChair2Username:Ue.deputy_chair_2_username??"",deputyChair2Name:Ue.deputy_chair_2_name??"",isNew:!1,category:Ge||"country"}});o(Array.isArray(J)?J:[])}catch{d(ie=>ie.filter(J=>J.id!==le))}k.success("Committee deleted")}catch(V){console.log("Error deleting committee:",V),k.error(V.message||"Failed to delete committee")}finally{S(!1),B(!1),he(null)}},Ne=()=>{le&&l.find(I=>I.id===le)&&(M(!0),m(le),f("committee"),L(!0)),B(!1),he(null)},xe=async()=>{try{b(!0);const V=u&&l.find(ie=>ie.id===u)||l.find(ie=>ie.isNew)||null;if(!V){k.error("No row selected to save");return}if(!V.committee||V.committee===""){k.error("Please select a committee before saving");return}if(!V.seatsTotal||V.seatsTotal===""){k.error("Please enter a number of seats before saving");return}const I=V.committeeId;if(!I){k.error("Please select a committee from the dropdown before saving");return}if(!(await ok(I.toString(),Se,a,V.abbr,V.seatsTotal,V.chairUsername,V.chairName,V.deputyChair1Username,V.deputyChair1Name,V.deputyChair2Username,V.deputyChair2Name)).success){k.error(`Failed to save committee: ${V.committee}`);return}d(ie=>ie.map(J=>J.id===V.id?{...J,isNew:!1}:J)),k.success("Committees saved successfully"),L(!1)}catch(V){console.log("Error saving committees:",V),k.error(V.message||"Failed to save committees")}finally{b(!1)}},Ve=async()=>{try{N(!0);const V=u&&l.find(ie=>ie.id===u);if(!V){k.error("No row selected to update");return}if(!V.committee||V.committee===""){k.error("Please select a committee before updating");return}const I=V.committeeId;if(!I){k.error("Please select a committee from the dropdown before updating");return}if(console.log("[CommitteesPage] Updating committee with ID:",V.id,"identifier:",I),!(await ik(V.id,Se,I.toString(),a,V.seatsTotal,V.chairUsername,V.chairName,V.deputyChair1Username,V.deputyChair1Name,V.deputyChair2Username,V.deputyChair2Name)).success){k.error(`Failed to update committee: ${V.committee}`);return}k.success("Committee updated successfully"),L(!1),M(!1)}catch(V){console.log("Error updating committees:",V),k.error(V.message||"Failed to update committees")}finally{N(!1)}};return we||K?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-3 text-gray-600",children:K?"Loading committee data...":"Loading committees..."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex space-x-2",children:re.map(V=>t.jsx("button",{onClick:()=>te(V.id),disabled:K,className:`w-[200px] h-[58px] rounded-[20px] p-[5px] opacity-100 transition-colors text-sm font-medium ${a===V.id?"bg-[#6A8BAF] text-white":"bg-white text-black border border-gray-800"} ${K?"opacity-60 cursor-not-allowed":""}`,style:{transform:"rotate(0deg)"},children:K&&a===V.id?t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Loading..."]}):V.name},V.id))}),l.length===0&&!je&&!K&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 mb-4",children:t.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No committees available"}),t.jsx("p",{className:"text-gray-500 mb-4",children:'Click "Add Committee" to create your first committee.'})]}),l.length>0&&t.jsx("div",{className:"space-y-6 ",style:{marginBottom:"16px"},children:t.jsxs("div",{className:"grid grid-cols-[80px_200px_70px_100px_100px_100px_100px_100px_100px_0px] gap-4",children:[t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-3 py-2 rounded-lg text-sm font-medium text-center border border-gray-800",children:"ABBR"}),t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-3 py-2 rounded-lg text-sm font-medium text-center border border-gray-800",children:"Committee"}),t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-3 py-2 rounded-lg text-sm font-medium text-center border border-gray-800",children:"Seats Total"}),t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-3 py-2 rounded-lg text-sm font-medium text-center border border-gray-800",children:"Chair Username"}),t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-3 py-2 rounded-lg text-sm font-medium text-center border border-gray-800",children:"Chair Name"}),t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-3 py-2 rounded-lg text-sm font-medium text-center border border-gray-800",children:"Deputy Chair 1 Username"}),t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-3 py-2 rounded-lg text-sm font-medium text-center border border-gray-800",children:"Deputy Chair 1 Name"}),t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-3 py-2 rounded-lg text-sm font-medium text-center border border-gray-800",children:"Deputy Chair 2 Username"}),t.jsx("div",{className:"bg-[#C6DAF4] text-grey-800 px-3 py-2 rounded-lg text-sm font-medium text-center border border-gray-800",children:"Deputy Chair 2 Name"}),t.jsx("div",{}),l.map(V=>t.jsxs($e.Fragment,{children:[t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-3 py-2 flex items-center justify-center",children:t.jsx("div",{className:"text-sm text-gray-900 text-center w-full",children:V.abbr})}),t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-3 py-2 flex items-center",children:u===V.id&&g==="committee"?t.jsxs("div",{className:" text-sm rounded-md relative w-full",ref:ae,children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{className:"w-4 h-4 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",value:V.committee||"",onChange:I=>Le(I.target.value,V.id),placeholder:"E.g. United Nations Security Council",className:"w-full border-none outline-none text-gray-900",autoFocus:!0,autoComplete:"off"}),V.committee&&t.jsx("button",{onClick:()=>{Le("",V.id),se(!1),A([]),ne(null)},className:"text-gray-400 hover:text-gray-600 ml-2",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),H&&Q===V.id&&W.length>0&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:W.map((I,R)=>t.jsxs("button",{type:"button",onClick:()=>Be(I),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:[t.jsx("div",{className:"font-medium",children:I.committee||I.name}),I.abbr&&t.jsxs("div",{className:"text-xs text-gray-500",children:["ABBR: ",I.abbr]})]},I.id||R))})]}):t.jsx("div",{className:"text-sm text-gray-900 w-full",onClick:u===V.id?()=>X(V.id,"committee"):void 0,children:V.committee||"E.g. United Nations Security Council"})}),t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-3 py-2 flex items-center",children:u===V.id&&g==="seatsTotal"?t.jsx("div",{className:"text-sm relative w-full",children:t.jsx("input",{type:"text",value:V.seatsTotal||"",onChange:I=>Le(I.target.value,V.id),placeholder:"Enter number of seats",className:"w-full border-none outline-none text-gray-900",autoFocus:!0})}):t.jsx("div",{className:"text-sm text-gray-900 w-full",onClick:u===V.id?()=>X(V.id,"seatsTotal"):void 0,children:V.seatsTotal})}),t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-3 py-2 flex items-center",children:u===V.id&&g==="chairUsername"?t.jsxs("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200 relative w-full",ref:Ye,children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{className:"w-4 h-4 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",value:V.chairUsername||"",onChange:I=>Le(I.target.value,V.id),placeholder:"@username",className:"w-full border-none outline-none text-gray-900",autoFocus:!0,autoComplete:"off"}),V.chairUsername&&t.jsx("button",{onClick:()=>{Le("",V.id),ve(!1),Ee([]),Me(null),_e(null)},className:"text-gray-400 hover:text-gray-600 ml-2",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),ge&&Ce===V.id&&me==="chairUsername"&&U.length>0&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:U.map((I,R)=>{const ie=I&&I.user?I.user:I;return t.jsxs("button",{type:"button",onClick:()=>Pe(I),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:[t.jsxs("div",{className:"font-medium",children:["@",ie?.username]}),t.jsx("div",{className:"text-xs text-gray-500",children:ie?.fullname})]},ie?.id||R)})})]}):t.jsx("div",{className:"text-sm text-gray-900 w-full",onClick:u===V.id?()=>X(V.id,"chairUsername"):void 0,children:V.chairUsername||"-"})}),t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-3 py-2 flex items-center",children:t.jsx("div",{className:"text-sm text-gray-900 w-full",children:V.chairName||"-"})}),t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-3 py-2 flex items-center",children:u===V.id&&g==="deputyChair1Username"?t.jsxs("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200 relative w-full",ref:Ye,children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{className:"w-4 h-4 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",value:V.deputyChair1Username||"",onChange:I=>Le(I.target.value,V.id),placeholder:"@username",className:"w-full border-none outline-none text-gray-900",autoFocus:!0,autoComplete:"off"}),V.deputyChair1Username&&t.jsx("button",{onClick:()=>{Le("",V.id),ve(!1),Ee([]),Me(null),_e(null)},className:"text-gray-400 hover:text-gray-600 ml-2",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),ge&&Ce===V.id&&me==="deputyChair1Username"&&U.length>0&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:U.map((I,R)=>{const ie=I&&I.user?I.user:I;return t.jsxs("button",{type:"button",onClick:()=>Pe(I),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:[t.jsxs("div",{className:"font-medium",children:["@",ie?.username]}),t.jsx("div",{className:"text-xs text-gray-500",children:ie?.fullname})]},ie?.id||R)})})]}):t.jsx("div",{className:"text-sm text-gray-900 w-full",onClick:u===V.id?()=>X(V.id,"deputyChair1Username"):void 0,children:V.deputyChair1Username||"-"})}),t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-3 py-2 flex items-center",children:t.jsx("div",{className:"text-sm text-gray-900 w-full",children:V.deputyChair1Name||"-"})}),t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-3 py-2 flex items-center",children:u===V.id&&g==="deputyChair2Username"?t.jsxs("div",{className:"bg-white px-3 py-2 text-sm rounded-md border border-gray-200 relative w-full",ref:Ye,children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{className:"w-4 h-4 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),t.jsx("input",{type:"text",value:V.deputyChair2Username||"",onChange:I=>Le(I.target.value,V.id),placeholder:"@username",className:"w-full border-none outline-none text-gray-900",autoFocus:!0,autoComplete:"off"}),V.deputyChair2Username&&t.jsx("button",{onClick:()=>{Le("",V.id),ve(!1),Ee([]),Me(null),_e(null)},className:"text-gray-400 hover:text-gray-600 ml-2",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),ge&&Ce===V.id&&me==="deputyChair2Username"&&U.length>0&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-50 max-h-48 overflow-y-auto",children:U.map((I,R)=>{const ie=I&&I.user?I.user:I;return t.jsxs("button",{type:"button",onClick:()=>Pe(I),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-[#D9C7A1] hover:text-gray-900 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:[t.jsxs("div",{className:"font-medium",children:["@",ie?.username]}),t.jsx("div",{className:"text-xs text-gray-500",children:ie?.fullname})]},ie?.id||R)})})]}):t.jsx("div",{className:"text-sm text-gray-900 w-full",onClick:u===V.id?()=>X(V.id,"deputyChair2Username"):void 0,children:V.deputyChair2Username||"-"})}),t.jsx("div",{className:"bg-gray-50 border border-gray-800 rounded-lg px-3 py-2 flex items-center",children:t.jsx("div",{className:"text-sm text-gray-900 w-full",children:V.deputyChair2Name||"-"})}),t.jsx("div",{className:"bg-gray-50 px-3 py-2 text-sm font-medium relative",children:t.jsx("div",{className:"relative flex items-center justify-center space-x-3",children:!V.isNew&&t.jsx("button",{onClick:I=>P(I,V.id),className:"text-blue-600 hover:text-blue-800 p-1",title:"Actions",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})})})})]},V.id))]})}),F&&t.jsx("div",{ref:st,className:"fixed bg-gray-100 border border-black rounded-lg shadow-lg z-50 w-40",style:{left:`${q.x-100}px`,top:`${q.y}px`,minWidth:"150px",marginTop:"0px"},children:t.jsxs("div",{className:"py-1",children:[t.jsx("button",{onClick:Ne,className:"w-full px-4 py-2 text-left text-sm text-black hover:bg-yellow-200 transition-colors",children:"Edit"}),t.jsx("button",{onClick:()=>{Te(!0),B(!1)},className:"w-full px-4 py-2 text-left text-sm text-black hover:bg-yellow-200 transition-colors",children:"Delete"}),t.jsx("button",{onClick:C,className:"w-full px-4 py-2 text-left text-sm text-black hover:bg-yellow-200 transition-colors",children:"Add Committee"})]})}),t.jsx($s,{isOpen:be,onClose:()=>Te(!1),onConfirm:async()=>{await Y(),Te(!1)},title:"Delete committee?",message:"Are you sure you want to delete this committee from this event?",confirmText:"Yes",cancelText:"No",confirmButtonColor:"text-red-600",isLoading:w,loadingText:"Deleting..."}),t.jsxs("div",{className:"w-[925px] flex justify-between",children:[t.jsx("button",{onClick:C,className:"text-white font-medium transition-colors",style:{width:"105px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",opacity:1,background:y?"#bdbdbd":"#C2A46D",cursor:y?"not-allowed":"pointer",border:"none",boxShadow:"none"},children:"Add"}),(l.some(V=>V.isNew)||D)&&!y&&!v&&t.jsx("button",{onClick:D?Ve:xe,className:"text-white font-medium transition-colors",style:{width:"105px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",opacity:1,background:"#607DA3",cursor:"pointer",border:"none",boxShadow:"none"},children:D?"Update":"Save"}),(y||v)&&t.jsx("div",{className:"flex items-center justify-center",style:{width:"105px",height:"44px",borderRadius:"30px",background:"#bdbdbd",color:"#666",fontSize:"14px",fontWeight:"500"},children:y?"Saving...":"Updating..."})]})]})},ba="http://localhost:1000",Tk=async(a,s,n,o)=>{try{const l=localStorage.getItem("token");return(await Oe.post(`${ba}/api/v1/event-committees-agendas/save-agenda`,{eventId:a,event_committeeId:s,agenda_abbr:n,agenda_title:o},{headers:{Authorization:`Bearer ${l}`}})).data}catch(l){throw new Error(l.response?.data?.message||"Failed to save event committees agenda by event id")}},Hl=async a=>{try{const s=localStorage.getItem("token");return(await Oe.get(`${ba}/api/v1/event-committees-agendas/get-event-committees-agendas-by-event/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to fetch event committees agendas by event id")}},Rk=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.patch(`${ba}/api/v1/event-committees-agendas/update-event-committees-agendas-by-id/${a}`,{agenda_title:s},{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to update event committees agenda by id")}},Lk=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${ba}/api/v1/event-committees-agendas/delete-event-committees-agendas-by-id/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to delete event committees agenda by id")}},Ok=async(a,s,n,o,l)=>{try{const d=localStorage.getItem("token");return(await Oe.post(`${ba}/api/v1/event-committees-agendas/save-event-committee-document`,{eventId:a,committeeId:s,doc_type:n,title:o,file_url:l},{headers:{Authorization:`Bearer ${d}`}})).data}catch(d){throw new Error(d.response?.data?.message||"Failed to save event committee document")}},Uk=async(a,s,n)=>{try{const o=localStorage.getItem("token"),l=new FormData;return l.append("eventId",a),l.append("committeeId",s),l.append("file",n),(await Oe.post(`${ba}/api/v1/event-committees-agendas/upload-agenda-document`,l,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}})).data}catch(o){throw new Error(o.response.data.message)}},ql=async(a,s)=>{try{const n=localStorage.getItem("token");return(await Oe.get(`${ba}/api/v1/event-committees-agendas/get-agenda-documents-by-event/${a}/${s}`,{headers:{Authorization:`Bearer ${n}`}})).data}catch(n){throw new Error(n.response?.data?.message||"Failed to fetch agenda documents")}},Mk=async a=>{try{const s=localStorage.getItem("token");return(await Oe.delete(`${ba}/api/v1/event-committees-agendas/delete-event-committee-document/${a}`,{headers:{Authorization:`Bearer ${s}`}})).data}catch(s){throw new Error(s.response?.data?.message||"Failed to delete event committee document")}},Bk=()=>{const[a,s]=x.useState(null),[n,o]=x.useState(null),[l,d]=x.useState([]),[u,m]=x.useState([]),[g,f]=x.useState(!0),[y,b]=x.useState(!1),[v,N]=x.useState("country"),[w,S]=x.useState(""),[_,L]=x.useState([]),[D,M]=x.useState([]),[F,B]=x.useState([]),[q,ee]=x.useState(null),[le,he]=x.useState(null),[be,Te]=x.useState(""),[we,fe]=x.useState(!1),[K,ye]=x.useState(!1),[O,H]=x.useState(!1),[se,W]=x.useState(!1),[A,Q]=x.useState(!1),[ne,ae]=x.useState(""),[ge,ve]=x.useState(""),U=x.useRef(null),Ee=x.useRef(null),[Ce,Me]=x.useState(!1),[me,_e]=x.useState(null),[Ye,st]=x.useState(null),{eventId:re}=ps(),Se=[{id:"country",name:"Country Committees"},{id:"role",name:"Role Committees"},{id:"crisis",name:"Crisis Committees"},{id:"open",name:"Open Committees"}];x.useEffect(()=>{const I=R=>{U.current&&!U.current.contains(R.target)&&s(null),Ee.current&&!Ee.current.contains(R.target)&&o(null)};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[]),x.useEffect(()=>{(async()=>{if(re)try{f(!0);const J=((await Hn(re)).data||[]).map(He=>{const ot=He&&typeof He.committee=="object"?He.committee:null,Ze=ot?ot.committee??ot.name??"":typeof He.committee=="string"?He.committee:"",pt=ot?ot.abbr??He.abbr??"":He.abbr??"",Ge=ot?ot.id:He.committee_id??He.committeeId??void 0,ft=ot?ot.category:He.category;return{id:String(He.id),committee:Ze,abbr:pt,committeeId:Ge,seatsTotal:String(He.seats??He.seatsTotal??""),chairUsername:He.chair_username??"",chairName:He.chair_name??"",deputyChair1Username:He.deputy_chair_1_username??"",deputyChair1Name:He.deputy_chair_1_name??"",deputyChair2Username:He.deputy_chair_2_username??"",deputyChair2Name:He.deputy_chair_2_name??"",category:ft||"country"}});d(Array.isArray(J)?J:[]);const Ue=await Hl(re);if(Ue.success){const He=Ue.data||[];L(He)}}catch(R){console.log("Error fetching initial data:",R),k.error(R.message||"Failed to fetch data")}finally{f(!1)}})()},[re]),x.useEffect(()=>{(async()=>{if(!re||!w){B([]),b(!1);return}const ie=u.find(J=>J.abbr===w)?.id;if(!ie){b(!1);return}try{const J=await ql(re,ie);if(J.success){const Ue=J.data?.data||[];if(Array.isArray(Ue)){const He=Ue.filter(ot=>ot.doc_type===w).map(ot=>({id:ot.id,title:ot.title}));B(He)}else console.warn("Documents data is not an array:",Ue),B([])}else console.log("Failed to fetch documents:",J.error),B([])}catch(J){console.log("Error fetching documents:",J),B([])}finally{b(!1)}})()},[re,w,u]),x.useEffect(()=>{const I=l.filter(R=>R.category===v);if(m(I),I.length>0){const R=I.map(J=>J.abbr).filter(Boolean),ie=[...new Set(R)];ie.length>0&&S(ie[0])}},[l,v]),x.useEffect(()=>{if(!w){M([]);return}const I=_.filter(R=>R.agenda_abbr===w).map(R=>({id:R.id,title:R.agenda_title||""}));M(I)},[_,w]);const Ie=()=>{const I=u.map(R=>R.abbr).filter(Boolean);return[...new Set(I)]},Fe=async I=>{b(!0),B([]),S(I)},Je=async I=>{try{const R=I.target.files?.[0];if(R){W(!0);const J=u.find(He=>He.abbr===w)?.id,Ue=await Uk(re||"",J||"",R);if(Ue.success){k.success("Document uploaded successfully"),ae(Ue.documentUrl),ve(R.name);const He=await ql(re||"",J||"");if(He.success){const Ze=(He.data?.data||[]).filter(pt=>pt.doc_type===w).map(pt=>({id:pt.id,title:pt.title}));B(Ze)}b(!1)}else k.error(Ue.message),b(!1)}}catch(R){k.error(R.message)}finally{W(!1)}I.target.value=""},T=I=>{N(I)},je=(I,R)=>{ee(I),Te(R)},te=async(I,R)=>{if(q&&!K)try{if(!R.trim()){k.error("Agenda title cannot be empty");return}ye(!0);const ie=await Rk(I.toString(),R);if(ie.success){k.success("Agenda updated successfully");const J=await Hl(re||"");if(J.success){const Ue=J.data||[];L(Ue)}}else k.error(ie.message||"Failed to update agenda")}catch(ie){k.error(ie.message||"Failed to update agenda")}finally{ye(!1)}ee(null),Te("")},X=I=>{Te(I)},Le=async()=>{if(q&&!we)try{const R=u.find(He=>He.abbr===w)?.id,ie=w,J=be;if(!J.trim()){k.error("Agenda title cannot be empty");return}fe(!0);const Ue=await Tk(re||"",R,ie,J);if(Ue.success){k.success("Agenda saved successfully");const He=await Hl(re||"");if(He.success){const ot=He.data||[];L(ot)}}else k.error(Ue.message||"Failed to save agenda")}catch(I){k.error(I.message||"Failed to save agenda")}finally{fe(!1)}ee(null),Te("")},$=()=>{q&&D.find(I=>I.id===q)?.title==="New Agenda Item"&&M(I=>I.filter(R=>R.id!==q)),ee(null),Te("")},De=I=>{_e(I),Me(!0),s(null)},Be=async()=>{if(!(me===null||O))try{H(!0);const I=await Lk(me.toString());if(I.success){k.success("Agenda deleted successfully");const R=await Hl(re||"");if(R.success){const ie=R.data||[];L(ie)}}else k.error(I.message||"Failed to delete agenda")}catch(I){k.error(I.message||"Failed to delete agenda")}finally{H(!1),Me(!1),_e(null)}},Pe=()=>{Me(!1),_e(null),st(null)},P=()=>{const I=-Date.now(),R={id:I,title:"New Agenda Item"};M([...D,R]),ee(I),Te("New Agenda Item")},C=I=>{Te(I)},Y=()=>{le&&B(I=>I.map(R=>R.id===le?{...R,name:be}:R)),he(null),Te("")},Ne=()=>{he(null),Te("")},xe=async()=>{if(!(Ye===null||O))try{H(!0);const I=await Mk(Ye.toString());if(I.success){k.success("Document deleted successfully");const ie=u.find(J=>J.abbr===w)?.id;if(ie){const J=await ql(re||"",ie);if(J.success){const He=(J.data?.data||[]).filter(ot=>ot.doc_type===w).map(ot=>({id:ot.id,title:ot.title}));B(He)}}b(!1)}else k.error(I.message||"Failed to delete document"),b(!1)}catch(I){k.error(I.message||"Failed to delete document"),b(!1)}finally{H(!1),Me(!1),st(null)}},Ve=async()=>{if(A)return;if(!re){k.error("Event ID is missing. Please refresh the page and try again.");return}if(!w){k.error("Please select a committee first.");return}if(!ge||ge.trim()===""){k.error("Please enter a document name.");return}if(!ne||ne.trim()===""){k.error("Please select a file to upload.");return}const R=u.find(ie=>ie.abbr===w)?.id;if(!R){k.error("Committee ID not found. Please select a valid committee.");return}try{if(Q(!0),(await Ok(re,R,w,ge.trim(),ne.trim())).success){k.success("Document uploaded successfully");const J=await ql(re,R);if(J.success){const He=(J.data?.data||[]).filter(ot=>ot.doc_type===w).map(ot=>({id:ot.id,title:ot.title}));B(He)}b(!1),o(null),he(null),Te(""),ve(""),ae("")}}catch(ie){k.error(ie.message||"Failed to upload document. Please try again."),b(!1)}finally{Q(!1)}};if(g)return t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading data..."})]});const V=Ie();return t.jsxs(t.Fragment,{children:[t.jsx($s,{isOpen:Ce,onClose:Pe,onConfirm:me!==null?Be:xe,title:"Confirm Delete",message:`Are you sure you want to delete this ${me!==null?"agenda":"document"}? This action cannot be undone.`,confirmText:"Yes",cancelText:"No",confirmButtonColor:"text-red-600",isLoading:O,loadingText:"Deleting..."}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex space-x-2",children:Se.map(I=>t.jsx("button",{onClick:()=>T(I.id),className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm font-medium rounded-[20px] transition-colors duration-200 ${v===I.id?"bg-[#607DA3] text-white":"bg-white text-black border border-gray-800"}`,children:I.name},I.id))}),V.length>0&&t.jsx("div",{className:"flex space-x-2",children:V.map(I=>t.jsx("button",{onClick:()=>Fe(I),disabled:y,className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm font-medium rounded-[20px] transition-colors duration-200 ${w===I?"bg-[#84B5F3] text-white":"bg-white text-black border border-gray-800"} ${y?"opacity-60 cursor-not-allowed":""}`,children:I},I))}),u.length===0&&!g&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 mb-4",children:t.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No committees available"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"No committees found for the selected category."})]}),u.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Committee Agendas"}),D.length===0?t.jsx("div",{className:"text-red-500 font-medium text-sm",children:"None"}):D.map(I=>t.jsxs("div",{className:"w-[400px] flex items-center space-x-2",children:[t.jsx("div",{className:"flex-1",children:q===I.id?t.jsx("input",{type:"text",value:be,onChange:R=>X(R.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent",placeholder:"Enter agenda title",autoFocus:!0}):t.jsx("input",{type:"text",value:I.title,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50"})}),q!==I.id&&t.jsxs("div",{className:"relative",ref:a===I.id?U:null,children:[t.jsx("button",{onClick:()=>s(a===I.id?null:I.id),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),a===I.id&&t.jsx("div",{className:"absolute right-0 mt-2 w-36 bg-white rounded-lg shadow-xl z-50 border border-gray-200",children:t.jsxs("div",{className:"py-2",children:[t.jsx("button",{onClick:()=>{je(I.id,I.title),s(null)},className:"block w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Edit"}),t.jsx("button",{onClick:()=>De(I.id),className:"block w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Delete"})]})})]})]},I.id)),t.jsx("div",{className:"flex space-x-2",children:q!==null&&D.find(I=>I.id===q)?.title==="New Agenda Item"?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:Le,disabled:we,className:"text-white font-medium transition-colors hover:opacity-90",style:{width:"120px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",background:we?"#bdbdbd":"#C2A46D",cursor:we?"not-allowed":"pointer",border:"none",boxShadow:"none",opacity:we?.6:1},children:we?"Saving...":"Save"}),t.jsx("button",{onClick:()=>{$(),s(null)},className:"text-white font-medium transition-colors hover:opacity-90",style:{width:"120px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",background:"#84B5F3",cursor:"pointer",border:"none",boxShadow:"none"},children:"Cancel"})]}):q!==null&&D.find(I=>I.id===q)?.title!=="New Agenda Item"?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>te(q,be),disabled:K,className:"text-white font-medium transition-colors hover:opacity-90",style:{width:"120px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",background:K?"#bdbdbd":"#C2A46D",cursor:K?"not-allowed":"pointer",border:"none",boxShadow:"none",opacity:K?.6:1},children:K?"Updating...":"Update"}),t.jsx("button",{onClick:()=>{$(),s(null)},className:"text-white font-medium transition-colors hover:opacity-90",style:{width:"120px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",background:"#84B5F3",cursor:"pointer",border:"none",boxShadow:"none"},children:"Cancel"})]}):t.jsx(t.Fragment,{children:t.jsx("button",{onClick:P,className:`text-white font-medium transition-colors ${we?"opacity-50 cursor-not-allowed":"hover:opacity-90"}`,style:{width:"140px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",opacity:we?.5:1,background:we?"#bdbdbd":"#C2A46D",cursor:we?"not-allowed":"pointer",border:"none",boxShadow:"none"},disabled:we,children:"Add Agenda"})})})]}),u.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Committee Documents"}),t.jsx("div",{className:"space-y-3",children:y?t.jsxs("div",{className:"w-[400px] flex items-center justify-center py-8 bg-gray-50 border border-gray-200 rounded-lg",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#1E395D]"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading documents..."})]}):!Array.isArray(F)||F.length===0?t.jsx("div",{className:"w-[400px] text-red-500 font-medium text-sm py-3",children:"None"}):F.map(I=>t.jsxs("div",{className:"w-[400px] flex items-center space-x-2",children:[t.jsx("div",{className:"flex-1",children:le===I.id?t.jsx("input",{type:"text",value:be,onChange:R=>C(R.target.value),className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent",placeholder:"Enter document name",autoFocus:!0}):t.jsx("input",{type:"text",value:I.title,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50"})}),le===I.id&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:Y,className:"text-white font-medium transition-colors hover:opacity-90",style:{width:"120px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",background:"#C2A46D",cursor:"pointer",border:"none",boxShadow:"none"},children:"Update"}),t.jsx("button",{onClick:()=>{Ne(),o(null)},className:"text-white font-medium transition-colors hover:opacity-90",style:{width:"120px",height:"44px",borderRadius:"30px",padding:"10px",gap:"10px",background:"#84B5F3",cursor:"pointer",border:"none",boxShadow:"none"},children:"Cancel"})]}),le!==I.id&&t.jsxs("div",{className:"relative",ref:n===I.id?Ee:null,children:[t.jsx("button",{onClick:()=>o(n===I.id?null:I.id),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),n===I.id&&t.jsx("div",{className:"absolute right-0 mt-2 w-36 bg-white rounded-lg shadow-xl z-50 border border-gray-200",children:t.jsx("div",{className:"py-2",children:t.jsx("button",{onClick:()=>{st(I.id),Me(!0),o(null)},className:"block w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"Delete"})})})]})]},I.id))}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"text",placeholder:ge,className:"w-[350px] px-4 py-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent",readOnly:!0}),t.jsxs("label",{className:`ml-0 px-4 py-3 rounded-r-lg transition-colors duration-200 ${se?"bg-gray-400 cursor-not-allowed":"bg-[#C2A46D] text-white cursor-pointer hover:opacity-90"}`,style:{height:"50px",display:"flex",alignItems:"center",justifyContent:"center"},children:[se?t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),t.jsx("input",{type:"file",onChange:Je,disabled:se,className:"hidden",accept:".pdf,.doc,.docx,.txt"})]})]}),t.jsx("button",{onClick:Ve,className:`text-white font-medium transition-colors ${A?"opacity-50 cursor-not-allowed":"hover:opacity-90"}`,style:{width:"200px",height:"44px",borderRadius:"30px",paddingLeft:"10px",paddingRight:"10px",gap:"10px",opacity:A?.5:1,background:A?"#bdbdbd":"#C2A46D",cursor:A?"not-allowed":"pointer",border:"none",boxShadow:"none",display:"flex",alignItems:"center",justifyContent:"center"},disabled:A,children:A?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):"Upload Document"})]})]})]})]})},$k=()=>{const[a,s]=x.useState(!0),[n,o]=x.useState(""),{eventId:l}=ps(),{allRegistrations:d,refreshRegistrationsData:u}=Ot();x.useEffect(()=>{(async()=>{try{s(!0),l&&await u(l)}catch{k.error("Failed to load contact info")}finally{s(!1)}})()},[l,u]);const m=x.useMemo(()=>Array.isArray(d)?d.map(f=>{const y=f?.user||{};return{id:f?.id||0,uniqueId:String(f?.user_id||"").slice(0,12),name:y?.fullname||"",mobile:y?.phone_e164||"",email:y?.email||"",emergencyContact:f?.emergency_phone||""}}):[],[d]),g=x.useMemo(()=>{const f=n.trim().toLowerCase();return f?m.filter(y=>y.name&&y.name.toLowerCase().includes(f)||y.uniqueId&&y.uniqueId.includes(n)||y.email&&y.email.toLowerCase().includes(f)||y.mobile&&y.mobile.toLowerCase().includes(f)):m},[m,n]);return a?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#395579]"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search",value:n,onChange:f=>o(f.target.value),className:"min-w-[400px] pl-10 pr-4 py-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent"}),t.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})}),t.jsxs("div",{children:[t.jsx("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"100px 180px 150px 300px 170px"},children:["Unique ID","Name","Mobile","Email","Emergency Contact"].map(f=>f===" "?t.jsx("div",{},f):t.jsx("div",{className:"px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#C6DAF4] border border-[#4A5F7A] flex items-center",children:t.jsx("span",{style:{width:"100%",wordWrap:"break-word"},children:f})},f))}),g.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:n?"No delegates found matching your search":"No delegate contacts found"}):g.map(f=>t.jsxs("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"100px 180px 150px 300px 170px"},children:[t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:f.uniqueId.slice(0,8)}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200",children:f.name}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:f.mobile||"-"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:f.email||"-"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:f.emergencyContact||"-"})]},f.id))]})]})},Ik=()=>{const[a,s]=x.useState(!0),[n,o]=x.useState(""),{eventId:l}=ps(),{allRegistrations:d,refreshRegistrationsData:u}=Ot();x.useEffect(()=>{(async()=>{try{s(!0),l&&await u(l)}catch{k.error("Failed to load food info")}finally{s(!1)}})()},[l,u]);const m=x.useMemo(()=>Array.isArray(d)?d.map(f=>{const y=f?.user||{};return{id:f?.id||0,uniqueId:String(f?.user_id||"").slice(0,8),name:y?.fullname||"",mobile:y?.phone_e164||"",email:y?.email||"",food:f?.food_pref||"",allergies:f?.food_allergies||""}}):[],[d]),g=x.useMemo(()=>{const f=n.trim().toLowerCase();return f?m.filter(y=>y.name&&y.name.toLowerCase().includes(f)||y.uniqueId&&y.uniqueId.includes(n)||y.email&&y.email.toLowerCase().includes(f)||y.mobile&&y.mobile.toLowerCase().includes(f)||y.food&&y.food.toLowerCase().includes(f)||y.allergies&&y.allergies.toLowerCase().includes(f)):m},[m,n]);return a?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#395579]"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search",value:n,onChange:f=>o(f.target.value),className:"w-[400px] pl-10 pr-4 py-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent"}),t.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})}),t.jsxs("div",{children:[t.jsx("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"100px 180px 150px 250px 150px 150px"},children:["Unique ID","Name","Mobile","Email","Food","Allergies"].map(f=>f===" "?t.jsx("div",{},f):t.jsx("div",{className:"px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#C6DAF4] border border-[#4A5F7A] flex items-center",children:t.jsx("span",{style:{width:"100%",wordWrap:"break-word"},children:f})},f))}),g.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:n?"No delegates found matching your search":"No delegate food info found"}):g.map(f=>t.jsxs("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"100px 180px 150px 250px 150px 150px"},children:[t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:f.uniqueId.slice(0,8)}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200",children:f.name}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:f.mobile||"-"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:f.email||"-"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:f.food||"-"}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:f.allergies||"-"})]},f.id))]})]})},zk=({onActiveCommitteeChange:a,onActiveCommitteeTypeChange:s})=>{const[n,o]=x.useState(!0),[l,d]=x.useState(!1),[u,m]=x.useState("country"),[g,f]=x.useState(""),[y,b]=x.useState([]),[v,N]=x.useState(""),[w,S]=x.useState(null),[_,L]=x.useState([]),[D,M]=x.useState(!1),[F,B]=x.useState([]),[q,ee]=x.useState(!1),[le,he]=x.useState(!1),[be,Te]=x.useState(null),{eventId:we}=ps(),fe=Ct(),{allRegistrations:K,refreshRegistrationsData:ye,allCommittees:O,allCountries:H}=Ot(),se=async(C,Y,Ne)=>{try{if(!De.find(Ve=>Ve.id===C))return;L(Ve=>Ve.map(V=>V.id===C?{...V,assignedCommittees:Y}:V)),k.success(`Committee "${Ne}" assigned successfully`)}catch(xe){k.error(xe.message||"Failed to assign committee")}},W=async(C,Y,Ne)=>{try{if(!De.find(Ve=>Ve.id===C))return;L(Ve=>Ve.map(V=>V.id===C?{...V,assignedCountry:Y}:V)),k.success(`Country "${Ne}" assigned successfully`)}catch(xe){k.error(xe.message||"Failed to assign country")}},A=C=>{L(Y=>Y.map(Ne=>Ne.id===C?{...Ne,isLocked:!Ne.isLocked}:Ne))},Q=()=>{L(C=>C.map(Y=>({...Y,isLocked:!0}))),k.success("All delegates locked")},ne=()=>{L(C=>C.map(Y=>({...Y,isLocked:!1}))),k.success("All delegates unlocked")},ae=()=>{g==="FULL"?ve():ge()},ge=()=>{const Y={title:"Committee",subtitle:g,headers:["Unique ID","Name","Academic Level","School","MUN Experience","Preferred Committees","Assigned Committees","Assigned Country"],data:De.map(xe=>({uniqueId:xe.uniqueId||"N/A",name:xe.name||"N/A",academicLevel:xe.academicLevel||"N/A",school:xe.school||"N/A",munExperience:xe.munExperience?.toString()||"N/A",preferredCommittees:xe.preferredCommittees?.join(", ")||"N/A",assignedCommittees:xe.assignedCommittees||"N/A",assignedCountry:xe.assignedCountry||"N/A"}))},Ne=U(Y);Ce(Ne,`committee-${g.toLowerCase().replace(/\s+/g,"-")}-template.html`),k.success(`${g} template downloaded successfully`)},ve=()=>{const C={title:"Country Committees",subtitle:"Full List",headers:["Unique ID","Name","Academic Level","School","MUN Experience","Preferred Committees","Assigned Committees","Assigned Country"],data:De.map(Ne=>({uniqueId:Ne.uniqueId||"N/A",name:Ne.name||"N/A",academicLevel:Ne.academicLevel||"N/A",school:Ne.school||"N/A",munExperience:Ne.munExperience?.toString()||"N/A",preferredCommittees:Ne.preferredCommittees?.join(", ")||"N/A",assignedCommittees:Ne.assignedCommittees||"N/A",assignedCountry:Ne.assignedCountry||"N/A"}))},Y=Ee(C);Ce(Y,"full-list-template.html"),k.success("Full list template downloaded successfully")},U=C=>`
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>${C.title} ${C.subtitle}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: white;
        }
        .title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: black;
        }
        .subtitle {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            color: black;
        }
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
        }
        th {
            background-color: #E0F2F7;
            color: black;
            font-weight: bold;
            text-align: center;
            padding: 12px 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            margin: 2px;
        }
        td {
            background-color: white;
            color: black;
            text-align: left;
            padding: 12px 8px;
            border: 1px solid #ddd;
            white-space: pre-line;
        }
        tr:nth-child(even) td {
            background-color: #f9f9f9;
        }
        tr:first-child th:first-child {
            border-top-left-radius: 6px;
        }
        tr:first-child th:last-child {
            border-top-right-radius: 6px;
        }
    </style>
</head>
<body>
    <div class="title">${C.title}</div>
    <div class="subtitle">${C.subtitle}</div>
    <table>
        <thead>
            <tr>
                ${C.headers.map(Y=>`<th>${Y}</th>`).join("")}
            </tr>
        </thead>
        <tbody>
            ${C.data.map(Y=>`
                <tr>
                    <td>${Y.uniqueId}</td>
                    <td>${Y.name}</td>
                    <td>${Y.academicLevel}</td>
                    <td>${Y.school}</td>
                    <td>${Y.munExperience}</td>
                    <td>${Y.preferredCommittees}</td>
                    <td>${Y.assignedCommittees}</td>
                    <td>${Y.assignedCountry}</td>
                </tr>
            `).join("")}
        </tbody>
    </table>
</body>
</html>`,Ee=C=>`
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>${C.title} ${C.subtitle}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: white;
        }
        .title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: black;
        }
        .subtitle {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 20px;
            color: black;
        }
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 20px;
        }
        th {
            background-color: #E0F2F7;
            color: black;
            font-weight: bold;
            text-align: center;
            padding: 12px 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            margin: 2px;
        }
        td {
            background-color: white;
            color: black;
            text-align: left;
            padding: 12px 8px;
            border: 1px solid #ddd;
            white-space: pre-line;
        }
        tr:nth-child(even) td {
            background-color: #f9f9f9;
        }
        tr:first-child th:first-child {
            border-top-left-radius: 6px;
        }
        tr:first-child th:last-child {
            border-top-right-radius: 6px;
        }
    </style>
</head>
<body>
    <div class="title">${C.title}</div>
    <div class="subtitle">${C.subtitle}</div>
    <table>
        <thead>
            <tr>
                ${C.headers.map(Y=>`<th>${Y}</th>`).join("")}
            </tr>
        </thead>
        <tbody>
            ${C.data.map(Y=>`
                <tr>
                    <td>${Y.uniqueId}</td>
                    <td>${Y.name}</td>
                    <td>${Y.academicLevel}</td>
                    <td>${Y.school}</td>
                    <td>${Y.munExperience}</td>
                    <td>${Y.preferredCommittees}</td>
                    <td>${Y.assignedCommittees}</td>
                    <td>${Y.assignedCountry}</td>
                </tr>
            `).join("")}
        </tbody>
    </table>
</body>
</html>`,Ce=(C,Y)=>{const Ne=new Blob([C],{type:"text/html"}),xe=URL.createObjectURL(Ne),Ve=document.createElement("a");Ve.href=xe,Ve.download=Y,document.body.appendChild(Ve),Ve.click(),document.body.removeChild(Ve),URL.revokeObjectURL(xe)},Me=async C=>{try{S(null);const Y=_.find(Ve=>Ve.id===C);if(!Y){k.error("Delegate not found");return}const Ne=Y.assignedCommittees,xe=Y.assignedCountry;if(!Ne||!xe){k.error("Please select both committee and country before assigning");return}await oi(C.toString(),Ne,xe),k.success("Delegate assigned successfully")}catch(Y){k.error(Y.message||"Failed to assign delegate")}},me=async C=>{try{await oy(C.toString()),L(Y=>Y.map(Ne=>Ne.id===C?{...Ne,assignedCommittees:null,assignedCountry:null}:Ne)),S(null),k.success("Delegate unassigned successfully")}catch(Y){k.error(Y.message||"Failed to unassign delegate")}},_e=async C=>{try{S(null),await nc(C.toString()),L(Y=>Y.filter(Ne=>Ne.id!==C)),k.success("Delegate removed successfully")}catch(Y){k.error(Y.message||"Failed to remove delegate")}},Ye=C=>{S(null),fe(`/view-delegate-profile/${C}`)},st=async C=>{try{S(null);const Ne=!_.find(xe=>xe.id===C)?.flag;await iy(C.toString(),Ne),L(xe=>xe.map(Ve=>Ve.id===C?{...Ve,flag:Ne}:Ve)),k.success(Ne?"Delegate flagged":"Delegate unflagged")}catch(Y){k.error(Y.message||"Failed to toggle flag")}},re=C=>{S(null),M(!0),B([C])},Se=C=>{if(F.includes(C))B(Y=>Y.filter(Ne=>Ne!==C));else{if(F.length>=2){k.error("You can only merge exactly 2 delegates");return}B(Y=>[...Y,C])}},Ie=async()=>{try{if(F.length!==2){k.error("Please select exactly 2 delegates to merge");return}await nc(F[1].toString()),L(C=>C.filter(Y=>Y.id!==F[1])),M(!1),k.success("Delegates merged successfully")}catch(C){k.error(C.message||"Failed to merge delegates")}},Fe=()=>{M(!1),B([])},Je=async()=>{try{const C=_.filter(V=>!V.assignedCommittees&&!V.isLocked);if(C.length===0){k.info("All delegates are already assigned or locked");return}const Y=new Map;O.forEach(V=>{const I=_.filter(ie=>ie.assignedCommittees===V.id).length,R=V.seats||50;Y.set(V.id,R-I)});let Ne=0,xe=0;const Ve=[...C].sort((V,I)=>Number(I.munExperience)-Number(V.munExperience));for(const V of Ve)try{let I=null;for(const R of V.preferredCommittees){const ie=O.find(J=>J.abbr===R);if(ie&&Y.get(ie.id)>0){I=ie,Y.set(ie.id,Y.get(ie.id)-1);break}}if(!I){for(const[R,ie]of Y)if(ie>0){I=O.find(J=>J.id===R),Y.set(R,ie-1);break}}if(!I){console.warn(`No available committee for delegate ${V.name}`),xe++;continue}await oi(V.id.toString(),I.id,""),L(R=>R.map(ie=>ie.id===V.id?{...ie,assignedCommittees:I.id,assignedCountry:null}:ie)),Ne++}catch(I){console.log(`Failed to assign delegate ${V.name}:`,I),xe++}we&&await ye(we),Ne>0&&k.success(`Successfully allocated ${Ne} delegates`),xe>0&&k.error(`Failed to allocate ${xe} delegates`)}catch(C){console.log("Global allocation error:",C),k.error("Failed to perform global allocation")}},T=async(C,Y,Ne)=>{try{await oi(C.toString(),Y,Ne||""),L(xe=>xe.map(Ve=>Ve.id===C?{...Ve,assignedCommittees:Y,assignedCountry:Ne||null}:Ve)),N(""),ee(!1),k.success(`Delegate added to ${g} successfully`)}catch(xe){k.error(xe.message||"Failed to add delegate to committee")}},je=async()=>{if(be)try{const C=O.find(Ne=>Ne.abbr===be.toCommittee);if(!C){k.error("Committee not found");return}const Y=Be.find(Ne=>Ne.id===be.id);if(!Y){k.error("Delegate not found");return}await T(be.id,C.id,Y.assignedCountry)}catch(C){k.error(C.message||"Failed to move delegate")}finally{he(!1),Te(null)}},te=()=>{he(!1),Te(null)},X=async C=>{try{if(g==="FULL"){k.error("Please select a specific committee first");return}const Y=Be.find(xe=>xe.id===C);if(!Y){k.error("Delegate not found");return}if(Y.isLocked){k.error("This delegate is locked and cannot be assigned");return}const Ne=O.find(xe=>xe.abbr===g);if(!Ne){k.error("Committee not found");return}if(Y.assignedCommittees){const xe=O.find(Ve=>Ve.id===Y.assignedCommittees);if(xe&&xe.abbr!==g){Te({id:C,fromCommittee:xe.abbr,toCommittee:g}),he(!0);return}}await T(C,Ne.id,Y.assignedCountry)}catch(Y){k.error(Y.message||"Failed to add delegate to committee")}};x.useEffect(()=>{a&&a(g)},[a,g]),x.useEffect(()=>{s&&s(u)},[s,u]),x.useEffect(()=>{const C=Y=>{Y.target.closest(".action-menu")||S(null)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),x.useEffect(()=>{(async()=>{try{if(o(!0),we){await ye(we);const xe=((await Hn(we))?.data||[]).map(I=>{const R=I&&typeof I.committee=="object"?I.committee:null;return{id:String(I.id),abbr:R?R.abbr??I.abbr??"":I.abbr??"",committee:R?R.committee??R.name??"":I.committee??"",category:R?R.category:I.category||"country",seats:I?I.seats:0}}),Ve=Array.isArray(xe)?xe:[];b(Ve);const V=Ve.find(I=>I.category===u);V&&f(V.abbr)}}catch(Y){k.error(Y?.message||"Failed to load allocation data")}finally{o(!1)}})()},[we,ye]);const Le=x.useMemo(()=>{const C=y.filter(xe=>xe.category===u);let Y=0;return[...C.map(xe=>{const Ve=_.filter(V=>O.find(R=>R.id===V.assignedCommittees)?.abbr===xe.abbr).length;return Y+=Ve,{...xe,assignedCount:Ve}}),{id:"FULL",abbr:"FULL",committee:"Full",category:u,seats:C.reduce((xe,Ve)=>xe+parseInt(Ve.seats||"0"),0),assignedCount:Y}]},[y,u,_,O,g]),$=x.useMemo(()=>Array.isArray(K)?K.map(C=>{const Y=C?.user||{},Ne=[C?.pref_committee_1?.abbr,C?.pref_committee_2?.abbr,C?.pref_committee_3?.abbr].filter(Boolean);return{id:C?.id||0,uniqueId:String(C?.user_id||"").slice(0,8),name:Y?.fullname||"",academicLevel:Y?.grade||"N/A",school:Y?.school?.name||Y?.school_name||"",munExperience:C?.mun_experience??0,preferredCommittees:Ne,assignedCommittees:C?.assigned_committees||null,assignedCountry:C?.assigned_country||null,isLocked:C?.isLocked||!0,flag:C?.flag||!1}}):[],[K]);x.useEffect(()=>{L($)},[$]);const De=x.useMemo(()=>{let C=_;if(g&&g!=="FULL"){const Y=g,Ne=new Map(O.map(xe=>[xe.id,xe.abbr]));C=C.filter(xe=>xe.assignedCommittees&&Ne.get(xe.assignedCommittees)===Y)}return C},[_,g,O]),Be=x.useMemo(()=>{const C=v.trim().toLowerCase();return C?K.filter(Y=>Y.event_id===we).filter(Y=>{const Ne=Y?.user||{},xe=Ne?.fullname||"",Ve=Ne?.school?.name||Ne?.school_name||"",V=Ne?.grade||"",I=Y?.mun_experience||0;return xe.toLowerCase().includes(C)||Ve.toLowerCase().includes(C)||V.toLowerCase().includes(C)||I.toString().includes(C)}).map(Y=>{const Ne=Y?.user||{};return{id:Y?.id||0,name:Ne?.fullname||"",school:Ne?.school?.name||Ne?.school_name||"",grade:Ne?.grade||"N/A",munExperience:Y?.mun_experience||0,assignedCommittees:Y?.assigned_committees||null,assignedCountry:Y?.assigned_country||null,isLocked:Y?.isLocked||!1}}):[]},[v,K,we]),Pe=C=>{m(C),d(!0);const Y=y.find(Ne=>Ne.category===C);f(Y?Y.abbr:"FULL"),setTimeout(()=>d(!1),200)},P=C=>{d(!0),f(C),setTimeout(()=>d(!1),150)};return n?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#395579]"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex space-x-2",children:[{id:"country",name:"Country Committees"},{id:"role",name:"Role Committees"},{id:"crisis",name:"Crisis Committees"},{id:"open",name:"Open Committees"}].map(C=>t.jsx("button",{onClick:()=>Pe(C.id),className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm font-medium rounded-[20px] transition-colors duration-200 ${u===C.id?"bg-[#84B5F3]":"bg-white text-black border border-gray-800"}`,children:C.name},C.id))}),Le.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:Le.map(C=>t.jsxs("button",{onClick:()=>P(C.abbr),disabled:l,className:`w-[190px] h-[58px] px-[5px] py-[5px] text-sm font-medium rounded-[20px] transition-colors duration-200 ${g===C.abbr?"bg-[#C6DAF4]":"bg-white text-black border border-gray-800"} ${l?"opacity-60 cursor-not-allowed":""}`,style:{fontSize:"14px"},children:[C.abbr==="FULL"?"FULL LIST":C.abbr,t.jsxs("div",{className:"text-black flex items-center justify-center gap-2",style:{fontSize:"14px",fontWeight:300},children:[t.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Total:",t.jsx("span",{style:{fontSize:"14px",fontWeight:600},children:C.seats})]}),t.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Assigned:",t.jsx("span",{style:{fontSize:"14px",fontWeight:600},children:C.assignedCount||0})]})]})]},C.id))}),t.jsxs("div",{className:"flex items-center justify-start p-4 rounded-lg gap-8",children:[g==="FULL"?t.jsx("button",{onClick:Je,className:"w-[250px] text-white font-medium transition-colors hover:opacity-90",style:{height:"44px",borderRadius:"30px",paddingLeft:"16px",paddingRight:"16px",cursor:"pointer",border:"none",boxShadow:"none",background:"#4CAF50"},children:"Committee Allocations"}):"",t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search by name or MUN experience or school and assign",value:v,onChange:C=>{N(C.target.value),ee(C.target.value.trim().length>0)},onFocus:()=>ee(v.trim().length>0),onBlur:()=>setTimeout(()=>ee(!1),200),className:"min-w-[450px] pl-10 pr-4 py-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent"}),t.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),q&&Be.length>0&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 z-50 max-h-60 overflow-y-auto bg-white rounded-[5px]",children:Be.map(C=>t.jsxs("div",{className:"flex items-center justify-between px-1",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"text-xs text-gray-500",children:[C.name,", ",C.school,", ",C.grade,", MUN ",C.munExperience," Yrs"]})}),t.jsxs("button",{onClick:()=>X(C.id),disabled:C.isLocked,className:`flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium transition-colors ${C.isLocked?"cursor-not-allowed":""}`,children:[t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t.jsx("span",{children:"Add"})]})]},C.id))})]})})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 mt-0 mr-16",style:{marginTop:"0px"},children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("div",{className:"relative",children:t.jsx("h1",{style:{fontWeight:700,fontStyle:"normal",fontSize:"30px",lineHeight:"150%",letterSpacing:"0%",verticalAlign:"middle",margin:0},children:g})})}),t.jsx("button",{onClick:ae,className:"text-white font-medium transition-colors hover:opacity-90",style:{height:"44px",borderRadius:"30px",paddingLeft:"16px",paddingRight:"16px",background:"#C2A46D",cursor:"pointer",border:"none",boxShadow:"none"},children:"Download List"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"100px 120px 100px 140px 100px 170px 120px 100px 100px"},children:["Unique ID","Name","Academic Level","School","MUN Experience","Preferred Committees","Assigned Committees","Assigned Country"," "].map((C,Y)=>C===" "?t.jsx("div",{},C):t.jsxs("div",{className:`px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md ${Y<4?"bg-[#C6DAF4] border border-[#4A5F7A] flex items-center justify-between":"bg-[#C6DAF4] border border-[#4A5F7A] flex items-center"}`,children:[t.jsx("span",{style:{width:"100%",wordWrap:"break-word"},children:C}),Y<4&&t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]},C))}),l?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#1E395D]"}),t.jsx("span",{className:"ml-2 text-gray-600",children:"Loading..."})]}):De.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:v?"No delegates found matching your search":"No delegates found"}):De.map(C=>t.jsxs("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"100px 120px 100px 140px 100px 170px 120px 100px 100px"},children:[t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 text-wrap break-words",children:C.uniqueId}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200 break-words",children:C.name}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 text-wrap break-words",children:C.academicLevel}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 text-wrap break-words",children:C.school}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 text-wrap break-words",children:C.munExperience}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:C.preferredCommittees.join(", ")}),t.jsx(oc,{options:O.map(Y=>({id:Y.id,name:Y.abbr})),value:C.assignedCommittees||"",placeholder:"Committees",onSelect:(Y,Ne)=>se(C.id,Y,Ne),disabled:C.isLocked,className:"w-full"}),t.jsx(oc,{options:H.map(Y=>({id:Y.id,name:Y.name})),value:C.assignedCountry||"",placeholder:"Countries",onSelect:(Y,Ne)=>W(C.id,Y,Ne),disabled:C.isLocked,className:"w-full"}),t.jsx("div",{className:"px-2 py-3",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>A(C.id),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:C.isLocked?"Unlock delegate":"Lock delegate",children:C.isLocked?t.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}):t.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})})}),C.flag&&t.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M4 5V20",stroke:"#FF1616",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("path",{d:"M4 5H20V13H4",fill:"#FF1616"})]}),D&&t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("input",{type:"checkbox",checked:F.includes(C.id),onChange:()=>Se(C.id),className:"cursor-pointer w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"})}),F.includes(C.id)&&F.indexOf(C.id)===0&&t.jsx("div",{className:"ml-2 text-sm font-medium text-blue-600",children:"1"}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>S(w===C.id?null:C.id),className:"p-1 hover:bg-gray-100 rounded",children:t.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),w===C.id&&t.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:[t.jsx("button",{className:"action-menu w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 border-b border-gray-200",onClick:()=>Me(C.id),children:"Assign"}),t.jsx("button",{className:"action-menu w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 border-b border-gray-200",onClick:()=>me(C.id),children:"Unassign"}),t.jsx("button",{className:"action-menu w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 border-b border-gray-200",onClick:()=>_e(C.id),children:"Remove from Event"}),t.jsx("button",{className:"action-menu w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 border-b border-gray-200",onClick:()=>Ye(C.id),children:"View Profile"}),t.jsx("button",{className:"action-menu w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 border-b border-gray-200",onClick:()=>st(C.id),children:C.flag?"Unflag":"Flag"}),t.jsx("button",{className:"action-menu w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",onClick:()=>re(C.id),children:"Merge"})]})]})]})})]},C.id))]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:Q,className:"bg-[#C2A46D] text-white px-6 py-2 rounded-[20px] hover:opacity-90 transition-colors duration-200",children:"Lock All"}),t.jsx("button",{onClick:ne,className:"bg-[#C2A46D] text-white px-6 py-2 rounded-[20px] hover:opacity-90 transition-colors duration-200",children:"Unlock All"})]}),D&&t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:Fe,className:"bg-[#C2A46D] text-white px-6 py-2 rounded-[20px] hover:opacity-90 transition-colors duration-200",children:"Cancel"}),t.jsxs("button",{onClick:Ie,disabled:F.length!==2,className:`px-6 py-2 rounded-[20px] transition-colors duration-200 ${F.length===2?"bg-[#C2A46D] text-white hover:opacity-90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:["Merge (",F.length,")"]})]})]}),t.jsx($s,{isOpen:le,onClose:te,onConfirm:je,title:"Move Delegate",message:be?`This delegate is already assigned to ${be.fromCommittee}. Do you want to move them to ${be.toCommittee}?`:"",confirmText:"Move",cancelText:"Cancel",confirmButtonColor:"text-blue-600"})]})},Fk=({onSubSectionChange:a,onActiveCommitteeChange:s,onActiveCommitteeTypeChange:n})=>{const[o,l]=x.useState("key-info"),[d,u]=x.useState([]),[m,g]=x.useState(!0),[f,y]=x.useState(""),[b,v]=x.useState(null),N=x.useRef(null),[w,S]=x.useState(!1),[_,L]=x.useState(null),[D,M]=x.useState(!1),[F,B]=x.useState([]),{eventId:q}=ps(),ee=Ct(),{allRegistrations:le,refreshRegistrationsData:he,allCommittees:be,allCountries:Te}=Ot(),we=async(re,Se,Ie)=>{try{if(!d.find(Je=>Je.id===re))return;u(Je=>Je.map(T=>T.id===re?{...T,assignedCommittees:Se}:T)),k.success(`Committee "${Ie}" assigned successfully`)}catch(Fe){k.error(Fe.message||"Failed to assign committee")}},fe=async(re,Se,Ie)=>{try{if(!d.find(Je=>Je.id===re))return;u(Je=>Je.map(T=>T.id===re?{...T,assignedCountry:Se}:T)),k.success(`Country "${Ie}" assigned successfully`)}catch(Fe){k.error(Fe.message||"Failed to assign country")}},K=re=>{u(Se=>Se.map(Ie=>Ie.id===re?{...Ie,isLocked:!Ie.isLocked}:Ie))},ye=()=>{u(re=>re.map(Se=>({...Se,isLocked:!0}))),k.success("All delegates locked")},O=()=>{u(re=>re.map(Se=>({...Se,isLocked:!1}))),k.success("All delegates unlocked")},H=[{id:"key-info",name:"Key Info"},{id:"contact-info",name:"Contact Info"},{id:"food-info",name:"Food Info"},{id:"allocation",name:"Allocation"}];x.useEffect(()=>{q&&(async()=>{g(!0);try{await he(q)}catch{k.error("Failed to load delegates")}finally{g(!1)}})()},[q,he]),x.useEffect(()=>{if(le&&le.length>0){const re=le.map(Se=>({id:Se.id||0,uniqueId:Se.user_id?.slice(0,6)||"",registrationId:String(Se.id||"").slice(0,6)||"",name:Se.user?.fullname||"Unknown",academicLevel:Se.user?.grade||"N/A",school:Se.user?.school?.name||"N/A",munExperience:Se.mun_experience||0,preferredCommittees:[Se.pref_committee_1?.abbr,Se.pref_committee_2?.abbr,Se.pref_committee_3?.abbr].filter(Boolean),assignedCommittees:Se.assigned_committees||null,assignedCountry:Se.assigned_country||null,flag:Se.flag||null,isLocked:!0})).filter(Se=>Se.name!=="Unknown");u(re)}else u([])},[le]),x.useEffect(()=>{if(a){const re=H.find(Se=>Se.id===o)?.name||"Key Info";a(re)}},[o,a,H]),x.useEffect(()=>{const re=Se=>{Se.target.closest(".action-menu")||v(null)};return document.addEventListener("mousedown",re),()=>{document.removeEventListener("mousedown",re)}},[]);const se=re=>{y(re)},W=async()=>{try{g(!0);const re=d.filter(je=>!je.assignedCommittees&&!je.isLocked);if(re.length===0){k.info("All delegates are already assigned or locked");return}const Se=new Map,Ie=new Map;be.forEach(je=>{const te=d.filter(Le=>Le.assignedCommittees===je.id).length,X=je.seats||50;Se.set(je.id,X-te)}),Te.forEach(je=>{Ie.set(je.id,!d.some(te=>te.assignedCountry===je.id))});let Fe=0,Je=0;const T=[...re].sort((je,te)=>te.munExperience-je.munExperience);for(const je of T)try{let te=null;for(const $ of je.preferredCommittees){const De=be.find(Be=>Be.abbr===$);if(De&&Se.get(De.id)>0){te=De,Se.set(De.id,Se.get(De.id)-1);break}}if(!te){for(const[$,De]of Se)if(De>0){te=be.find(Be=>Be.id===$),Se.set($,De-1);break}}if(!te){console.warn(`No available committee for delegate ${je.name}`),Je++;continue}let X=null;const Le=_e(je.munExperience);for(const $ of Le)if(Ie.get($.id)){X=$,Ie.set($.id,!1);break}if(!X){for(const[$,De]of Ie)if(De){X=Te.find(Be=>Be.id===$),Ie.set($,!1);break}}await oi(je.id.toString(),te.id,X?.id||""),u($=>$.map(De=>De.id===je.id?{...De,assignedCommittees:te.id,assignedCountry:X?.id||null}:De)),Fe++}catch(te){console.log(`Failed to assign delegate ${je.name}:`,te),Je++}q&&await he(q),Fe>0&&k.success(`Successfully allocated ${Fe} delegates`),Je>0&&k.error(`Failed to allocate ${Je} delegates`)}catch(re){console.log("Global allocation error:",re),k.error("Failed to perform global allocation")}finally{g(!1)}},A=()=>{q?ee(`/upload-delegates/${q}`):k.error("Event ID not found")},Q=async re=>{try{v(null);const Se=d.find(Je=>Je.id===re);if(!Se){k.error("Delegate not found");return}const Ie=Se.assignedCommittees,Fe=Se.assignedCountry;if(!Ie||!Fe){k.error("Please select both committee and country before assigning");return}await oi(re.toString(),Ie,Fe),k.success("Delegate assigned successfully")}catch(Se){k.error(Se.message||"Failed to assign delegate")}},ne=async re=>{try{v(null),await oy(re.toString()),u(Se=>Se.map(Ie=>Ie.id===re?{...Ie,assignedCommittees:null,assignedCountry:null}:Ie)),k.success("Delegate unassigned successfully")}catch(Se){k.error(Se.message||"Failed to unassign delegate")}},ae=async re=>{v(null),await nc(re.toString()),L(re),S(!0)},ge=re=>{v(null),ee(`/view-delegate-profile/${re}`)},ve=async re=>{try{v(null);const Se=d.find(Fe=>Fe.id===re);if(!Se){k.error("Delegate not found");return}const Ie=!Se.flag;await iy(re.toString(),Ie),u(Fe=>Fe.map(Je=>Je.id===re?{...Je,flag:Ie}:Je)),k.success(Ie?"Delegate flagged":"Delegate unflagged")}catch(Se){u(Ie=>Ie.map(Fe=>Fe.id===re?{...Fe,flag:!Fe.flag}:Fe)),k.error(Se.message||"Failed to toggle flag")}},U=re=>{v(null),M(!0),B([re])},Ee=re=>{if(F.includes(re))B(Se=>Se.filter(Ie=>Ie!==re));else{if(F.length>=2){k.error("You can only merge exactly 2 delegates");return}B(Se=>[...Se,re])}},Ce=async()=>{try{if(F.length!==2){k.error("Please select exactly 2 delegates to merge");return}await nc(F[1].toString()),u(re=>re.filter(Se=>Se.id!==F[1])),M(!1),L(F[1]),k.success("Delegates merged successfully")}catch(re){k.error(re.message||"Failed to merge delegates")}},Me=()=>{M(!1),B([])},me=re=>re>=3?["S","A","B"]:re>=1?["A","B"]:["B"],_e=re=>{const Se=me(re);return Te.filter(Ie=>{const Fe=Ie.tier||"B";return Se.includes(Fe)})},Ye=async()=>{if(_)try{await new Promise(re=>setTimeout(re,1e3)),u(re=>re.filter(Se=>Se.id!==_)),k.success("Delegate removed successfully")}catch(re){console.log("Error removing delegate:",re),k.error("Failed to remove delegate")}finally{S(!1),L(null)}},st=d.filter(re=>re.name&&re.name.toLowerCase().includes(f.toLowerCase())||re.registrationId&&re.registrationId.includes(f)||re.school&&re.school.toLowerCase().includes(f.toLowerCase()));return m?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#395579]"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex space-x-2",children:H.map(re=>t.jsx("button",{onClick:()=>l(re.id),className:`w-[150px] h-[58px] rounded-[20px] p-[5px] opacity-100 transition-colors text-sm font-medium ${o===re.id?"bg-[#6A8BAF] text-white":"bg-white text-black border border-gray-800"} ${m?"opacity-60 cursor-not-allowed":""}`,style:{transform:"rotate(0deg)"},children:re.name},re.id))}),o==="contact-info"?t.jsx($k,{}):o==="food-info"?t.jsx(Ik,{}):o==="allocation"?t.jsx(zk,{onActiveCommitteeChange:s,onActiveCommitteeTypeChange:n}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search",value:f,onChange:re=>se(re.target.value),className:"w-[400px] pl-10 pr-4 py-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent"}),t.jsx("svg",{className:"absolute left-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("button",{onClick:W,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-[20px] hover:bg-green-700 transition-colors duration-200",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),t.jsx("span",{children:"Global Allocation"})]}),t.jsxs("button",{onClick:A,className:"flex items-center space-x-2 bg-[#C2A46D] text-white px-4 py-2 rounded-[20px] hover:opacity-90 transition-colors duration-200",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),t.jsx("span",{children:"Upload Delegates"})]})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"80px 80px 100px 90px 140px 80px 160px 140px 140px 135px"},children:["Unique ID","Registration ID","Name","Academic Level","School","MUN Experience","Preferred Committees","Assigned Committees","Assigned Country"," "].map((re,Se)=>re===" "?t.jsx("div",{},re):t.jsxs("div",{className:`px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md ${Se<4?"bg-[#C6DAF4] border border-[#4A5F7A] flex items-center justify-between":"bg-[#C6DAF4] border border-[#4A5F7A] flex items-center"}`,children:[t.jsx("span",{style:{width:"100%",wordWrap:"break-word"},children:re}),Se<4&&t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]},re))}),st.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:f?"No delegates found matching your search":"No delegates found"}):st.map(re=>t.jsxs("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"80px 80px 100px 90px 140px 80px 160px 140px 140px 135px"},children:[t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:re.uniqueId}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:re.registrationId}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200 break-words",children:re.name}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:re.academicLevel}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:re.school}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:re.munExperience}),t.jsx("div",{className:"bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:re.preferredCommittees.join(", ")||"-"}),t.jsx(oc,{options:be.map(Se=>({id:Se.id,name:Se.abbr})),value:re.assignedCommittees||"",placeholder:"Committees",onSelect:(Se,Ie)=>we(re.id,Se,Ie),disabled:re.isLocked,className:"w-full"}),t.jsx(oc,{options:Te.map(Se=>({id:Se.id,name:Se.name})),value:re.assignedCountry||"",placeholder:"Countries",onSelect:(Se,Ie)=>fe(re.id,Se,Ie),disabled:re.isLocked,className:"w-full"}),t.jsx("div",{className:"px-3 py-2",children:t.jsxs("div",{className:"flex items-center space-x-2",style:{marginLeft:"unset !important"},children:[t.jsx("button",{onClick:()=>K(re.id),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:re.isLocked?"Unlock delegate":"Lock delegate",children:re.isLocked?t.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}):t.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})})}),D&&t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("input",{type:"checkbox",checked:F.includes(re.id),onChange:()=>Ee(re.id),className:"cursor-pointer w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"})}),F.includes(re.id)&&F.indexOf(re.id)===0&&t.jsx("div",{className:"ml-2 text-sm font-medium text-blue-600",children:"1"}),re.flag&&t.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M4 5V20",stroke:"#FF1616",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("path",{d:"M4 5H20V13H4",fill:"#FF1616"})]}),t.jsxs("div",{className:"relative",style:{marginLeft:"unset !important"},ref:N,children:[t.jsx("button",{onClick:()=>v(b===re.id?null:re.id),className:"p-1 hover:bg-gray-100 rounded",children:t.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),b===re.id&&t.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:[t.jsx("button",{onClick:()=>Q(re.id),className:"action-menu w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 border-b border-gray-200",children:"Assign"}),t.jsx("button",{onClick:()=>ne(re.id),className:"action-menu w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 border-b border-gray-200",children:"Unassign"}),t.jsx("button",{onClick:()=>ae(re.id),className:"action-menu w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 border-b border-gray-200",children:"Remove from Event"}),t.jsx("button",{onClick:()=>ge(re.id),className:"action-menu w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 border-b border-gray-200",children:"View Profile"}),t.jsx("button",{onClick:()=>ve(re.id),className:"action-menu w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 border-b border-gray-200",children:re.flag?"Unflag":"Flag"}),t.jsx("button",{onClick:()=>U(re.id),className:"action-menu w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:"Merge"})]})]})]})})]},re.id))]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:ye,className:"bg-[#C2A46D] text-white px-6 py-2 rounded-[20px] hover:opacity-90 transition-colors duration-200",children:"Lock All"}),t.jsx("button",{onClick:O,className:"bg-[#C2A46D] text-white px-6 py-2 rounded-[20px] hover:opacity-90 transition-colors duration-200",children:"Unlock All"})]}),t.jsx("div",{className:"flex items-center space-x-4",children:D&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:Me,className:"bg-[#C2A46D] text-white px-6 py-2 rounded-[20px] hover:opacity-90 transition-colors duration-200",children:"Cancel"}),t.jsxs("button",{onClick:Ce,disabled:F.length!==2,className:`px-6 py-2 rounded-[20px] transition-colors duration-200 ${F.length===2?"bg-[#C2A46D] text-white hover:opacity-90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:["Merge (",F.length,")"]})]})})]}),t.jsx($s,{isOpen:w,onClose:()=>S(!1),onConfirm:Ye,title:"Remove Delegate",message:"Are you sure you want to remove this delegate from the event? This action cannot be undone.",confirmText:"Remove",cancelText:"Cancel",confirmButtonColor:"text-red-600"})]})]})},Pk=()=>{const{eventId:a}=ps(),[s,n]=x.useState(!1),[o,l]=x.useState(null),d=x.useRef(null),u=()=>{d.current&&(d.current.accept=".csv,.xlsx,.xls",d.current.click())},m=()=>{d.current&&(d.current.accept=".csv,.xlsx,.xls",d.current.click())},g=async f=>{const y=f.target.files?.[0];if(y){console.log("File selected:",y.name,"Type:",y.type,"Size:",y.size),n(!0),l(null);try{if(console.log("Starting delegate upload to backend..."),!a){k.error("Event ID is missing");return}const b=await p4(y,a);if(console.log("Upload response:",b),b.success&&b.data){const v={linked:b.data.linked||0,created:b.data.created||0,needsReview:b.data.needsReview||0,errors:b.data.errors||[]};l(v),v.errors.length===0?k.success(`Upload completed! Linked: ${v.linked}, Created: ${v.created}, Needs Review: ${v.needsReview}`):k.error(`Upload completed with ${v.errors.length} errors. Check details below.`)}else throw new Error(b.message||"Failed to process upload")}catch(b){console.error("Upload error:",b),k.error(b.message||"Failed to process upload. Please check file format and try again.")}finally{n(!1),d.current&&(d.current.value="")}}};return t.jsx(xs,{loadingText:"Loading Upload Delegates...",children:t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Wt,{maxWidth:"max-w-[88rem]"}),t.jsxs("div",{className:"max-w-[85rem] mx-auto px-6 py-8",style:{paddingLeft:"10.5rem"},children:[t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-[#C2A46D] mb-6",children:[t.jsx("span",{className:"text-2xl font-medium text-[#C2A46D]",children:"Organiser"}),t.jsx("span",{className:"text-2xl font-medium text-[#C2A46D]",children:">"}),t.jsx("span",{className:"text-2xl font-medium text-[#C2A46D]",children:"Delegates"}),t.jsx("span",{className:"text-2xl font-medium text-[#C2A46D]",children:">"}),t.jsx("span",{className:"text-2xl font-medium text-[#C2A46D]",children:"Key Info"}),t.jsx("span",{className:"text-2xl font-medium text-[#C2A46D]",children:">"}),t.jsx("span",{className:"text-2xl font-medium text-[#C2A46D]",children:"Upload Delegates"})]}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Upload Delegates"}),t.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[t.jsx("button",{onClick:u,disabled:s,className:"bg-[#C2A46D] w-[170px] text-white px-6 py-3 rounded-lg hover:opacity-90 transition-colors duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsxs("div",{children:[t.jsx("div",{children:"Upload"}),t.jsx("div",{children:"Google Sheets"})]})}),t.jsx("button",{onClick:m,disabled:s,className:"bg-[#C2A46D] w-[170px] text-white px-6 py-3 rounded-lg hover:opacity-90 transition-colors duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsxs("div",{children:[t.jsx("div",{children:"Upload"}),t.jsx("div",{children:"Google Form"})]})})]}),s&&t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#C2A46D] mr-3"}),t.jsx("span",{className:"text-gray-700",children:"Processing delegate upload..."})]})}),o&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Upload Results"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[t.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.linked}),t.jsx("div",{className:"text-sm text-green-700",children:"Linked to Existing"})]}),t.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.created}),t.jsx("div",{className:"text-sm text-blue-700",children:"New Users Created"})]}),t.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:o.needsReview}),t.jsx("div",{className:"text-sm text-yellow-700",children:"Needs Review"})]})]}),o.errors.length>0&&t.jsxs("div",{className:"mt-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Errors:"}),t.jsx("ul",{className:"list-disc list-inside text-sm text-red-600",children:o.errors.map((f,y)=>t.jsx("li",{children:f},y))})]})]}),t.jsx("input",{ref:d,type:"file",onChange:g,style:{display:"none"}})]})]})})},Hk=()=>{const[a,s]=x.useState([]),[n,o]=x.useState(!0),[l,d]=x.useState(!1),[u,m]=x.useState(null),[g,f]=x.useState(null),[y,b]=x.useState(""),[v,N]=x.useState(!1),[w,S]=x.useState(!1),[_,L]=x.useState(""),[D,M]=x.useState(""),{eventId:F}=ps(),B=x.useRef(null),[q,ee]=x.useState(!1),[le,he]=x.useState(null),be=x.useRef(null);x.useEffect(()=>{(async()=>{o(!0);try{const se=await Xu(F);if(se.success){const W=se.data?.data||[];s(W)}}catch(se){console.log("Error loading documents:",se),k.error("Failed to load documents")}finally{o(!1)}})()},[]),x.useEffect(()=>{const H=se=>{B.current&&!B.current.contains(se.target)&&m(null)};return document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[]);const Te=async H=>{try{const se=H.target.files?.[0];if(!se)return;const W=await pk(F,se);W.success?(k.success("Document uploaded successfully"),M(W.documentUrl),L(se.name)):k.error("Failed to upload document")}catch(se){console.log("Error uploading document:",se),k.error("Failed to upload document")}},we=async()=>{if(!l){if(!_.trim()){k.error("Please enter a document title");return}d(!0);try{if((await gk(F,"general",_,D)).success){k.success("Document saved successfully");const se=await Xu(F);if(se.success){const W=se.data?.data||[];s(W)}M(""),L("")}else k.error("Failed to save document")}catch(H){console.log("Error saving document:",H),k.error("Failed to save document")}finally{d(!1)}}},fe=async()=>{if(!y.trim()){k.error("Document title cannot be empty");return}N(!0);try{await new Promise(H=>setTimeout(H,1e3)),s(H=>H.map(se=>se.id===g?{...se,title:y.trim()}:se)),f(null),b(""),k.success("Document updated successfully")}catch(H){console.log("Error updating document:",H),k.error("Failed to update document")}finally{N(!1)}},K=()=>{f(null),b("")},ye=H=>{ee(!0),he(H),ee(!0),m(null)},O=async()=>{if(le)try{if((await xk(le.toString())).success){k.success("Document deleted successfully");const se=await Xu(F);if(se.success){const W=se.data?.data||[];s(W)}}else k.error("Failed to delete document");s(se=>se.filter(W=>W.id.toString()!==le))}catch(H){console.log("Error deleting document:",H),k.error("Failed to delete document")}finally{ee(!1),he(null)}};return n?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#395579]"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"space-y-4 w-full max-w-[500px]",children:a.length===0?t.jsx("div",{className:"text-red-500 font-medium text-[20px]",children:"None"}):a.map(H=>t.jsx("div",{className:"rounded-[16px] p-4 border border-gray-500 ",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex-1",children:g===H.id?t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"text",value:y,onChange:se=>b(se.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent",autoFocus:!0}),t.jsx("button",{onClick:fe,disabled:v,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:v?"Saving...":"Save"}),t.jsx("button",{onClick:K,disabled:v,className:"bg-gray-500 hover:bg-gray-600 disabled:bg-gray-400 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:"Cancel"})]}):t.jsx("div",{className:"flex items-center space-x-3",children:t.jsx("span",{className:"text-gray-900 font-medium",children:H.title})})}),g!==H.id&&t.jsxs("div",{className:"relative",ref:B,children:[t.jsx("button",{onClick:()=>m(u===H.id?null:H.id),className:"p-2 hover:bg-gray-100 rounded-md transition-colors duration-200",children:t.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),u===H.id&&t.jsx("div",{className:"absolute right-0 top-full mt-1 w-32 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:t.jsx("button",{onClick:()=>ye(H.id.toString()),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:"Delete"})})]})]})},H.id))}),t.jsx("div",{className:"w-full max-w-[400px]",children:w?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"text",placeholder:"Add document title",disabled:!0,value:_,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1E395D] focus:border-transparent"}),t.jsxs("label",{className:`flex items-center justify-center w-12 h-12 border border-gray-300 rounded-lg transition-colors duration-200 ${l?"bg-gray-400 cursor-not-allowed":"bg-white cursor-pointer hover:bg-gray-50"}`,children:[t.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),t.jsx("input",{ref:be,type:"file",accept:".pdf,.doc,.docx",onChange:Te,disabled:l,className:"hidden"})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("button",{onClick:we,disabled:l,className:`text-white font-medium transition-colors ${l?"opacity-50 cursor-not-allowed":"hover:opacity-90"}`,style:{height:"44px",borderRadius:"30px",paddingLeft:"20px",paddingRight:"20px",background:l?"#bdbdbd":"#C2A46D",cursor:l?"not-allowed":"pointer",border:"none",boxShadow:"none"},children:l?"Uploading...":"Save Document"}),t.jsx("button",{onClick:()=>{S(!1),L(""),M(""),be.current&&(be.current.value="")},className:"text-white font-medium transition-colors hover:opacity-90",style:{height:"44px",borderRadius:"30px",paddingLeft:"20px",paddingRight:"20px",background:"#84B5F3",cursor:"pointer",border:"none",boxShadow:"none"},children:"Cancel"})]})]}):t.jsx("button",{onClick:()=>S(!0),className:"text-white font-medium transition-colors hover:opacity-90",style:{width:"200px",height:"44px",borderRadius:"30px",gap:"10px",background:"#C2A46D",cursor:"pointer",border:"none",boxShadow:"none"},children:"Upload Document"})}),t.jsx($s,{isOpen:q,onClose:()=>ee(!1),onConfirm:O,title:"Delete Document",message:"Are you sure you want to delete this document? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",confirmButtonColor:"text-red-600"})]})},qk=({steps:a,activeStep:s,onStepChange:n})=>t.jsx("div",{className:"flex items-center space-x-2",children:a.map(o=>t.jsx("button",{onClick:()=>n(o.id),className:`w-[160px] h-[58px] px-[5px] py-[5px] text-sm font-medium rounded-[20px] transition-colors duration-200 ${s===o.id?"bg-[#395579] text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:o.name},o.id))}),Vk=()=>{const a=Ct(),{eventId:s}=ps(),[n,o]=x.useState("dashboard"),[l,d]=x.useState(""),[u,m]=x.useState(""),[g,f]=x.useState(""),[y,b]=x.useState(""),[v,N]=x.useState(""),[w,S]=x.useState(""),[_,L]=x.useState(""),[D,M]=x.useState(""),[F,B]=x.useState(""),[q,ee]=x.useState(""),[le,he]=x.useState(""),[be,Te]=x.useState(""),[we,fe]=x.useState(""),[K,ye]=x.useState(""),[O,H]=x.useState(""),[se,W]=x.useState(""),[A,Q]=x.useState(""),[ne,ae]=x.useState(""),[ge,ve]=x.useState(""),[U,Ee]=x.useState(!1),[Ce,Me]=x.useState(!1),[me,_e]=x.useState([]),[Ye,st]=x.useState([]),{allRegistrations:re,refreshRegistrationsData:Se}=Ot(),Ie=async()=>{if(s)try{const et=await Hn(s);if(et.success){const We=et.data.map(qe=>{const Vt=qe&&typeof qe.committee=="object"?qe.committee:null;return{id:String(qe.id),committee:Vt?Vt.committee??Vt.name??"":qe.committee??"",abbr:Vt?Vt.abbr??qe.abbr??"":qe.abbr??"",category:Vt?Vt.category:qe.category||"country",seatsTotal:String(qe.seats??qe.seatsTotal??"0"),committeeId:Vt?Vt.id:qe.committee_id??qe.committeeId??void 0}});_e(We)}await Se(s)}catch(et){console.log("Error fetching dashboard data:",et),k.error("Failed to load dashboard data")}},[Fe,Je]=x.useState(null),[T,je]=x.useState(""),[te,X]=x.useState(!1),[Le,$]=x.useState(!1),[De,Be]=x.useState(!1),[Pe,P]=x.useState(null),[C,Y]=x.useState({eventName:"",eventDescription:"",eventStartDate:"",eventEndDate:"",school:"",locality:"",numberOfSeats:"",feesPerDelegate:"",website:"",instagram:"",coverImage:""});x.useEffect(()=>{(async()=>{try{const We=await Fh(s||"");if(We.success){if(We.data&&We.data.length>0){const qe=We.data[0];b(qe.name),N(qe.cover_image),S(qe.description),L(qe.start_date),M(qe.end_date),B(qe.locality.name),ee(qe.school.name),he(qe.school.name),Te(qe.fees_per_delegate),fe(qe.number_of_seats),ye(qe.website),H(qe.instagram),W(qe.locality.id),Q(qe.school.id),ae(qe.school.area_id),Y({eventName:qe.name,eventDescription:qe.description,eventStartDate:qe.start_date,eventEndDate:qe.end_date,school:qe.school.name,locality:qe.locality.name,numberOfSeats:qe.number_of_seats,feesPerDelegate:qe.fees_per_delegate,website:qe.website,instagram:qe.instagram,coverImage:qe.cover_image}),Ue(qe.number_of_seats,qe.fees_per_delegate)}}else k.error(We.message)}catch(We){console.log("Error fetching events:",We),k.error(We.message)}})()},[s,a]),x.useEffect(()=>{Ie()},[s]),x.useEffect(()=>{st(re||[])},[re]);const Ne=et=>{if(Le&&n==="event-details"&&et!=="event-details"){P(et),Be(!0);return}o(et)},xe=(et,We)=>{Je(et),je(We)},Ve=(et,We)=>{switch(je(We),$(!0),et){case"name":b(We);break;case"description":S(We);break;case"date":break;case"school_name":ee(We);break;case"locality":B(We);break;case"number_of_seats":fe(We),Ue(We,be);break;case"fees_per_delegate":Te(We),Ue(we,We);break;case"website":ye(We);break;case"instagram":H(We);break}},V=()=>{if(Fe)switch(Fe){case"name":b(y);break;case"description":S(w);break;case"date":break;case"school_name":ee(q);break;case"locality":B(F);break;case"number_of_seats":fe(we),Ue(we,be);break;case"fees_per_delegate":Te(be),Ue(we,be);break;case"website":ye(K);break;case"instagram":H(O);break}Je(null),je(""),Me(!1),$(!1)},I=async et=>{try{const We=et.target.files;if(We){Ee(!0);const qe=await Lx(We?.[0]);qe.success?(k.success(qe.message),N(qe.imageUrl),$(!0)):k.error(qe.message)}}catch(We){k.error(We.message)}finally{Ee(!1)}},R=(et,We)=>{L(et),M(We),$(!0)},ie=()=>{Me(!Ce)},J=()=>{Me(!1)},Ue=(et,We)=>{const qe=Number(et),Vt=Number(We);!isNaN(qe)&&!isNaN(Vt)&&qe>0&&Vt>0?ve((qe*Vt).toString()):ve("")},He=async()=>{try{X(!0),Ue(we,be);const et=await Xj(s||"",y,w,_,D,v,se,A,ne,we,be,ge,K,O);if(et.success){const We=et.registeredUsersNotified>0?` Notifications sent to ${et.registeredUsersNotified} registered users.`:"";k.success(et.message+We),$(!1),Y({eventName:y,eventDescription:w,eventStartDate:_,eventEndDate:D,school:q,locality:F,numberOfSeats:we,feesPerDelegate:be,website:K,instagram:O,coverImage:v})}else k.error(et.message)}catch(et){k.error("Failed to update event: "+et.message)}finally{X(!1)}},ot=()=>{Be(!1),P(null)},Ze=()=>{b(C.eventName),S(C.eventDescription),L(C.eventStartDate),M(C.eventEndDate),ee(C.school),B(C.locality),fe(C.numberOfSeats),Te(C.feesPerDelegate),ye(C.website),H(C.instagram),N(C.coverImage),Ue(C.numberOfSeats,C.feesPerDelegate),Je(null),je(""),Me(!1),$(!1),Be(!1),Pe&&(o(Pe),P(null))},pt=[{id:"dashboard",name:"Dashboard"},{id:"event-details",name:"Event Details"},{id:"leadership-roles",name:"Leadership Roles"},{id:"committees",name:"Committees"},{id:"agendas",name:"Agendas"},{id:"delegates",name:"Delegates"},{id:"general-documents",name:"General Documents"}],Ge=()=>{let et="";switch(u){case"country":et="Country Committees";break;case"role":et="Role Committees";break;case"crisis":et="Crisis Committees";break;default:et="Open Committees";break}const We=pt.find(qe=>qe.id===n);return n==="delegates"&&l?`Organiser > ${We?.name} > ${l} > ${et} > ${g}`:`Organiser > ${We?.name||"Dashboard"}`},ft=()=>t.jsx(Nk,{}),vt=()=>t.jsx(Dk,{}),Ut=()=>t.jsx(Bk,{}),Is=()=>t.jsx(wk,{eventName:y,eventStartDate:_,eventEndDate:D,locality:F,area:le,feesPerDelegate:be,numberOfSeats:we,totalRevenue:ge,committees:me,registrations:Ye}),Ht=()=>t.jsx(jk,{eventName:y,coverImage:v,eventDescription:w,eventStartDate:_,eventEndDate:D,school:q,locality:F,numberOfSeats:we,feesPerDelegate:be,totalRevenue:ge,website:K,instagram:O,isUploadingCoverImage:U,editingField:Fe,tempValue:T,showDatePicker:Ce,onFieldEdit:xe,onFieldChange:Ve,onCancelEdit:V,onCoverImageUpload:I,onDateRangeChange:R,onDatePickerToggle:ie,onDatePickerClose:J,onUpdateEvent:He,isSaving:te}),It=()=>{switch(n){case"dashboard":return Is();case"event-details":return Ht();case"leadership-roles":return ft();case"committees":return vt();case"agendas":return Ut();case"delegates":return t.jsx(Fk,{onSubSectionChange:d,onActiveCommitteeChange:f,onActiveCommitteeTypeChange:m});case"general-documents":return t.jsx(Hk,{});default:return Is()}};return t.jsxs(xs,{loadingText:"Loading Organiser Dashboard...",children:[t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Wt,{maxWidth:"max-w-[88rem]"}),t.jsxs("div",{className:"max-w-[85rem] mx-auto px-6 py-8",style:{paddingLeft:"10.5rem"},children:[t.jsx("div",{className:"flex items-center justify-between mb-8",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-medium text-[#C2A46D] mb-6",children:Ge()}),t.jsx(qk,{steps:pt,activeStep:n,onStepChange:Ne})]})}),It()]})]}),t.jsx(vC,{isOpen:De,onKeepEditing:ot,onDiscardChanges:Ze})]})},Yk=({users:a,onAction:s,isSuperUser:n=!1})=>{const[o,l]=x.useState(null),[d,u]=x.useState(null),[m,g]=x.useState(""),[f,y]=x.useState(!1),[b,v]=x.useState(null),[N,w]=x.useState([]),[S,_]=x.useState(!1),[L,D]=x.useState(""),[M,F]=x.useState(""),[B,q]=x.useState(null),[ee,le]=x.useState(!1),[he,be]=x.useState(!1),[Te,we]=x.useState(!1),[fe,K]=x.useState(!1),[ye,O]=x.useState([]),[H,se]=x.useState([]),{refreshUserData:W,allOrganisers:A,allUsers:Q}=Ot(),ne=x.useRef(null),ae=x.useRef(null),ge=x.useRef(null),ve=T=>A.some(je=>je.userid===T),U=T=>{switch(T?.toLowerCase()){case"active":return"text-green-600";case"flagged":return"text-yellow-600";case"blocked":return"text-red-600";case"deleted":return"text-red-600";default:return"text-gray-600"}};x.useEffect(()=>{let T=a;if(n&&(T=a.filter(je=>je?.global_role==="superuser")),!m.trim())w(T);else{const je=T.filter(te=>{const X=m.toLowerCase(),Le=te?.username||"",$=te?.fullname||"",De=te?.school?.code||"",Be=te?.school?.name||"",Pe=te?.global_role||"";return Le.toLowerCase().includes(X)||$.toLowerCase().includes(X)||De.toLowerCase().includes(X)||Be.toLowerCase().includes(X)||Pe.toLowerCase().includes(X)});w(je)}},[m,a,n]),x.useEffect(()=>{const T=je=>{ne.current&&!ne.current.contains(je.target)&&l(null),ae.current&&!ae.current.contains(je.target)&&we(!1),ge.current&&!ge.current.contains(je.target)&&K(!1)};return(o||Te||fe)&&document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[o,Te,fe]);const Ee=T=>{l(o===T?null:T)},Ce=T=>{if(!T.trim()){O([]);return}const je=Q.filter(te=>{if(te?.global_role==="superuser")return!1;const X=T.toLowerCase(),Le=te?.username||"",$=te?.fullname||"";return Le.toLowerCase().includes(X)||$.toLowerCase().includes(X)});O(je.slice(0,5))},Me=T=>{if(!T.trim()){se([]);return}const je=Q.filter(te=>{if(te?.global_role==="superuser")return!1;const X=T.toLowerCase(),Le=te?.email||"",$=te?.username||"";return Le.toLowerCase().includes(X)||$.toLowerCase().includes(X)});se(je.slice(0,5))},me=T=>{if(he)return;const je=T.target.value;D(je),Ce(je),we(je.trim().length>0)},_e=T=>{if(he)return;const je=T.target.value;F(je),Me(je),K(je.trim().length>0)},Ye=T=>{D(T.fullname||T.username),F(T.email||""),we(!1),O([])},st=T=>{F(T.email||T.username),D(T.fullname||T.username),K(!1),se([])},re=async()=>{if(b)try{if(n)await Fe("delete",b.username,b.email);else{u(b.username);const T=await up(b.username,"delete");T.success?(k.success(T.message),await W(),s("delete",b.username,b.email)):k.error(T.message)}}catch(T){console.log("Error deleting user:",T),k.error("Failed to delete user")}finally{u(null),y(!1),v(null)}},Se=()=>{y(!1),v(null)},Ie=async()=>{if(!L.trim()||!M.trim()){k.error("Please fill in both name and email fields");return}be(!0);try{const T=await Ej(L,M);T.success?(k.success(T.message),await W(),D(""),F(""),_(!1)):k.error(T.message)}catch(T){console.log("Error sending invite:",T),k.error("Failed to send invitation")}finally{be(!1)}},Fe=async(T,je,te)=>{l(null);try{if(T==="delete"){const X=await Aj(je,te);X.success?(k.success(X.message),await W()):k.error(X.message)}s(T,je,te),le(!1)}catch(X){console.log("Error updating user:",X),k.error("Failed to update user")}finally{u(null),le(!1)}},Je=async(T,je,te)=>{try{if(T==="delete")v({username:je,email:te}),y(!0);else{u(je);const X=await up(je,T);X.success?(k.success(X.message),await W(),s(T,je,te)):k.error(X.message)}le(!1),l(null)}catch(X){console.log("Error updating user:",X),k.error("Failed to update user")}finally{u(null),le(!1)}};return t.jsxs("div",{children:[t.jsx("div",{className:"mb-4",style:{display:"none"},children:t.jsx("input",{type:"text",placeholder:"Search users...",value:m,onChange:T=>g(T.target.value),className:"w-full max-w-md px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),t.jsx("div",{className:`grid gap-2 mb-2 ${n?"grid-cols-12":"grid-cols-10"}`,children:(n?[{label:"UserID",span:"col-span-1"},{label:"Username",span:"col-span-1"},{label:"Name",span:"col-span-2"},{label:"Email",span:"col-span-3"},{label:"Global Role",span:"col-span-1"},{label:" ",span:"col-span-1"}]:[{label:"Student ID",span:"col-span-1"},{label:"Username",span:"col-span-1"},{label:"Name",span:"col-span-1"},{label:"Email",span:"col-span-1"},{label:"Academic Level",span:"col-span-1"},{label:"School",span:"col-span-1"},{label:"MUN Experience",span:"col-span-1"},{label:"Global Role",span:"col-span-1"},{label:"User Status",span:"col-span-1"},{label:" ",span:"col-span-1"}]).map((T,je)=>T.label===" "?t.jsx("div",{className:T.span},T.label):t.jsxs("div",{className:`${T.span} px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md ${je<(n?4:8)?"bg-[#C6DAF4] border border-[#4A5F7A] flex items-center justify-between":"bg-[#C6DAF4] border border-[#4A5F7A] flex items-center"}`,children:[t.jsx("span",{children:T.label}),je<(n?4:8)&&t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]},T.label))}),N.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:m?"No users found matching your search":"No users found"}):N.length>0?N.map(T=>t.jsxs("div",{className:`grid gap-2 mb-2 ${n?"grid-cols-12":"grid-cols-10"}`,children:[n?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"col-span-1 bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200",children:T?.id?.split("-")[0]||"N/A"}),t.jsx("div",{className:"col-span-1 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:T?.username||"N/A"}),t.jsx("div",{className:"col-span-2 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:T?.fullname||"N/A"}),t.jsx("div",{className:"col-span-3 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:T?.email||"N/A"}),t.jsx("div",{className:"col-span-1 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:T?.global_role||"N/A"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"col-span-1 bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200",children:T?.student_id||T?.id?.split("-")[0]||"N/A"}),t.jsx("div",{className:"col-span-1 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:T?.username?`@${T.username}`:"N/A"}),t.jsx("div",{className:"col-span-1 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:T?.fullname||"N/A"}),t.jsx("div",{className:"col-span-1 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:T?.email||"N/A"}),t.jsx("div",{className:"col-span-1 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:T?.academic_level||T?.grade||"N/A"}),t.jsx("div",{className:"col-span-1 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:T?.school?.name||"N/A"}),t.jsx("div",{className:"col-span-1 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:T?.mun_experience||T?.years_of_experience||"N/A"}),t.jsx("div",{className:"col-span-1 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200",children:T?.global_role==="superuser"?"Super User":"User"}),t.jsx("div",{className:"col-span-1 bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("span",{className:`font-medium ${U(T?.user_status||T?.status||"active")}`,children:T?.user_status||T?.status||"Active"})})]}),B===T?.id&&ee?t.jsx("div",{className:"col-span-1 px-3 py-2 text-sm font-medium relative",children:t.jsx("div",{className:"relative flex items-center justify-left",children:t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"})})}):t.jsx("div",{className:"col-span-1 px-3 py-2 text-sm font-medium relative",children:t.jsxs("div",{className:"relative flex items-center justify-left",children:[ve(T?.id)&&t.jsx("div",{className:"ml-2",children:t.jsx("img",{src:ky,alt:"Organiser",className:"w-5 h-5",title:"This user is an organizer"})}),t.jsx("button",{onClick:()=>Ee(T?.id||""),className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),o===T?.id&&t.jsx("div",{ref:ne,className:"absolute top-full right-0 mt-1 w-48 bg-white rounded-md shadow-lg z-50 border-2",children:t.jsx("div",{className:"py-1",children:n?t.jsx("button",{onClick:()=>{l(null),v({username:T?.username||"",email:T?.email||""}),y(!0)},disabled:d===T?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===T?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Remove Super User"}):t.jsxs(t.Fragment,{children:[ve(T?.id)?t.jsx("button",{onClick:async()=>{l(null),le(!0),q(T?.id);const je=await Bj(T?.id);je.success?(k.success(je.message),q(null),le(!1),await W(),s("remove-organiser",T?.id,T?.email),await W()):(k.error(je.message),q(null),le(!1))},disabled:d===T?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===T?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Remove Organiser"}):t.jsx("button",{onClick:async()=>{l(null),le(!0),q(T?.id);const je=await Mj(T?.id);je.success?(s("assign-organiser",T?.id,T?.email),k.success(je.message),q(null),le(!1),await W(),await W()):(k.error(je.message),q(null),le(!1))},disabled:d===T?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===T?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Assign Organiser"}),(T?.user_status?.toLowerCase()==="flagged"||T?.user_status?.toLowerCase()==="blocked")&&t.jsx("button",{onClick:()=>{l(null),le(!0),q(T?.id),Je("active",T?.id,T?.email)},disabled:d===T?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===T?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Active"}),T?.user_status?.toLowerCase()!=="flagged"&&t.jsx("button",{onClick:()=>{l(null),le(!0),q(T?.id),Je("flagged",T?.id,T?.email)},disabled:d===T?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===T?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Flag"}),T?.user_status?.toLowerCase()!=="blocked"&&t.jsx("button",{onClick:()=>{l(null),le(!0),q(T?.id),Je("blocked",T?.id,T?.email)},disabled:d===T?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===T?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Block"}),t.jsx("button",{onClick:()=>{l(null),v({username:T?.username||"",email:T?.email||""}),y(!0)},disabled:d===T?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===T?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Delete"}),t.jsx("button",{onClick:()=>{l(null),le(!0),q(T?.id),Je("invite",T?.id,T?.email),console.log("Invite non-user:",T?.id)},disabled:d===T?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${d===T?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Invite Non-user"})]})})})]})})]},T?.id||Math.random())):null,n&&t.jsxs("div",{className:"mt-6",children:[t.jsx("button",{onClick:()=>{_(!S),S||(D(""),F(""),be(!1))},className:"px-6 py-3 bg-[#C4A35A] hover:bg-[#B8973F] text-white font-medium rounded-[20px] transition-colors duration-200 shadow-md",children:"Invite a Superuser"}),S&&t.jsxs("div",{className:"mt-6 p-6 max-w-md flex items-end justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"mb-4 relative",ref:ae,children:[t.jsx("label",{htmlFor:"invite-name",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Name"}),t.jsx("input",{id:"invite-name",type:"text",value:L,onChange:me,placeholder:"E.g. Ivy Grace Turner",disabled:he,className:`w-full px-4 py-2 border border-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-[#C4A35A] focus:border-transparent text-gray-700 ${he?"bg-gray-100 cursor-not-allowed":""}`}),Te&&ye.length>0&&!he&&t.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-hidden",children:t.jsx("div",{className:"max-h-48 overflow-y-auto",children:ye.map(T=>t.jsxs("div",{className:"px-3 py-2 text-sm text-gray-900 cursor-pointer hover:bg-gray-100 flex items-center justify-between",onClick:()=>Ye(T),children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:T.fullname||T.username}),t.jsxs("div",{className:"text-xs text-gray-500",children:["@",T.username]})]}),t.jsx("div",{className:"text-xs text-gray-400",children:T.email})]},T.id))})})]}),t.jsxs("div",{className:"relative",ref:ge,children:[t.jsx("label",{htmlFor:"invite-email",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Email"}),t.jsx("input",{id:"invite-email",type:"email",value:M,onChange:_e,placeholder:"E.g. ivy.grace@example.com",disabled:he,className:`w-full px-4 py-2 border border-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-[#C4A35A] focus:border-transparent text-gray-700 ${he?"bg-gray-100 cursor-not-allowed":""}`}),fe&&H.length>0&&!he&&t.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-hidden",children:t.jsx("div",{className:"max-h-48 overflow-y-auto",children:H.map(T=>t.jsxs("div",{className:"px-3 py-2 text-sm text-gray-900 cursor-pointer hover:bg-gray-100 flex items-center justify-between",onClick:()=>st(T),children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:T.email}),t.jsx("div",{className:"text-xs text-gray-500",children:T.fullname||T.username})]}),t.jsxs("div",{className:"text-xs text-gray-400",children:["@",T.username]})]},T.id))})})]})]}),t.jsx("div",{children:t.jsx("button",{onClick:Ie,disabled:he,className:`w-[150px] px-6 py-3 text-white font-semibold rounded-[20px] transition-colors duration-200 ${he?"bg-gray-400 cursor-not-allowed":"bg-[#7FB539] hover:bg-[#6FA329]"}`,children:he?t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):"Send Invite"})})]})]}),t.jsx($s,{isOpen:f,onClose:Se,onConfirm:re,title:"Confirm Delete",message:"Are you sure you want to delete this user? This action cannot be undone.",confirmText:"Yes",cancelText:"No",confirmButtonColor:"text-red-600"})]})},Vl=({type:a="students",isSuperUser:s=!1})=>{const[n,o]=x.useState(""),{allUsers:l}=Ot(),d=()=>{if(s){const g=l.filter(f=>f.global_role==="superuser")||[];switch(console.log("allUsers",l),console.log("superUsers",g),a){case"students":return g.filter(f=>f.role==="student")||[];case"teachers":return g.filter(f=>f.role==="teacher")||[];default:return g||[]}}else{const g=l.filter(f=>f.global_role==="user"||!f.global_role)||[];switch(a){case"students":return g.filter(f=>f.role==="student")||[];case"teachers":return g.filter(f=>f.role==="teacher")||[];default:return g||[]}}},u=x.useMemo(()=>{const g=d();if(!g||g.length===0)return[];if(!n.trim())return g;const f=n.toLowerCase();return g.filter(y=>{const b=y?.fullname?.toLowerCase()||"",v=y?.username?.toLowerCase()||"",N=y?.school?.name?.toLowerCase()||y?.school?.toLowerCase()||"",w=y?.id?.toString().toLowerCase()||"",S=y?.role?.toLowerCase()||"",_=y?.school_location?.toLowerCase()||"";return b.includes(f)||v.includes(f)||N.includes(f)||w.includes(f)||S.includes(f)||_.includes(f)})},[a,l,n]),m=g=>{};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-left",children:t.jsxs("div",{className:"relative w-full max-w-md",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.jsx("input",{type:"text",placeholder:"Search",value:n,onChange:g=>o(g.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-800 rounded-[10px] leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})}),t.jsx(Yk,{users:u,onAction:m,userType:a,isSuperUser:s})]})},Gk=["school","college","academy","international","private","high","primary","secondary","the","al","of","for","and","dubai"],Wk={dubai:"DU","abu dhabi":"AD",sharjah:"SHJ",ajman:"AJM",rak:"RAK",fujairah:"FUJ","umm al quwain":"UAQ","al ain":"AAN"},Kk={"al barsha":"ALB","al quoz":"ALQ","nad al sheba":"NAS","jebel ali":"JAL",mirdif:"MRD","umm suqeim":"UQS","al warqa":"ALW","al garhoud":"ALG","oud metha":"OMT"},Qk=(a,s,n,o=[])=>{if(!a||!s||!n)return"";const l=s.name.toLowerCase().trim(),d=Wk[l]||s.code||l.substring(0,3).toUpperCase(),u=Xk(a),m=n.name.toLowerCase().trim(),g=Kk[m]||n.code||m.replace(/\s+/g,"").substring(0,3).toUpperCase();let f=`${d}_${u}_${g}`,y=f,b=1;for(;o.includes(y);)y=`${f}_${b.toString().padStart(3,"0")}`,b++;return y},Xk=a=>{if(!a)return"";const n=a.toLowerCase().trim().split(/\s+/).filter(l=>!Gk.includes(l.replace(/[^\w]/g,"")));if(n.length===0)return a.replace(/[^\w]/g,"").substring(0,3).toUpperCase();let o=n[0].replace(/[^\w]/g,"");if(o.length>=3)return o.substring(0,3).toUpperCase();if(n.length>1){const l=n[1].replace(/[^\w]/g,"");return(o+l).substring(0,3).toUpperCase()}return o.padEnd(3,o[0]||"X").toUpperCase()},Jk=({schools:a,onAction:s})=>{const[n,o]=x.useState(null),[l,d]=x.useState(null),[u,m]=x.useState(""),[g,f]=x.useState(!1),[y,b]=x.useState(null),[v,N]=x.useState([]),[w,S]=x.useState(!1),[_,L]=x.useState(!1),[D,M]=x.useState({schoolCode:"",schoolName:"",locality:"",locality_id:"",area:"",area_id:"",status:"Active"}),[F,B]=x.useState(null),[q,ee]=x.useState(null),[le,he]=x.useState({}),[be,Te]=x.useState([]),[we,fe]=x.useState([]),{allSchools:K}=Ot(),[ye,O]=x.useState(!1),[H,se]=x.useState([]),[W,A]=x.useState(null),[Q,ne]=x.useState([]),[ae,ge]=x.useState(""),[ve,U]=x.useState(1),[Ee]=x.useState(7),{refreshSchoolsData:Ce,allLocalities:Me,allAreas:me,refreshLocalitiesData:_e,refreshAreasData:Ye}=Ot(),st=x.useRef(null);x.useEffect(()=>{Me.length===0&&_e(),me.length===0&&Ye()},[Me.length,me.length,_e,Ye]),x.useEffect(()=>{if(w&&D.schoolName&&D.locality_id&&D.area_id){const R=Me.find(J=>J.id===Number(D.locality_id)),ie=be.find(J=>J.id===Number(D.area_id));if(R&&ie){const J=K.map(He=>He.code).filter(Boolean),Ue=Qk(D.schoolName,R,ie,J);M(He=>({...He,schoolCode:Ue}))}}},[D.schoolName,D.locality_id,D.area_id,Me,be,K,w]);const re=R=>{if(!R){Te([]);return}const ie=me.filter(J=>J.locality_id==R);Te(ie)},Se=R=>{if(!R){fe([]);return}const ie=me.filter(J=>J.locality_id==R);fe(ie)};x.useEffect(()=>{if(!u.trim())N(a);else{const R=a.filter(ie=>{const J=u.toLowerCase(),Ue=ie?.id?.toString()||"",He=ie?.code||"",ot=ie?.name||"",Ze=ie?.locality?.name||"",pt=ie?.area?.name||"",Ge=ie?.status||"";return Ue.toLowerCase().includes(J)||He.toLowerCase().includes(J)||ot.toLowerCase().includes(J)||Ze.toLowerCase().includes(J)||pt.toLowerCase().includes(J)||Ge.toLowerCase().includes(J)});N(R)}U(1)},[u,a]);const Ie=Math.ceil(v.length/Ee),Fe=(ve-1)*Ee,Je=Fe+Ee,T=v.slice(Fe,Je),je=R=>{R>=1&&R<=Ie&&U(R)},te=()=>{ve>1&&U(ve-1)},X=()=>{ve<Ie&&U(ve+1)};x.useEffect(()=>{const R=ie=>{st.current&&!st.current.contains(ie.target)&&o(null)};return n&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[n]),x.useEffect(()=>{const R=ie=>{const J=ie.target;F&&!J.closest(".edit-row-container")&&!J.closest(".edit-buttons-container")&&xe()};return F&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[F]);const Le=R=>{o(n===R?null:R)},$=()=>{y&&(Be("delete",y),f(!1),b(null))},De=()=>{f(!1),b(null)},Be=async(R,ie)=>{try{if(o(null),d(ie),R==="delete"){const J=await Hj(ie);J.success?(k.success(J.message||"School deleted successfully"),await Ce(),s(R,ie)):k.error(J.message||"Failed to delete school")}else{const J=await Pj(ie,R);J.success?(k.success(J.message||`School ${R} successfully`),await Ce(),s(R,ie)):k.error(J.message||"Failed to update school")}}catch(J){console.log("Error updating school:",J),k.error(J.message||"Failed to update school")}finally{d(null)}},Pe=async()=>{try{if(!D.schoolCode.trim()||!D.schoolName.trim()||!D.locality_id.trim()||!D.area_id.trim()){k.error("Please fill in all required fields");return}const R=await Vj(D.schoolCode.trim(),D.schoolName.trim(),D.locality_id.trim(),D.area_id.trim());R.success?(k.success("New school added successfully"),S(!1),L(!1),M({schoolCode:"",schoolName:"",locality:"",locality_id:"",area:"",area_id:"",status:"Active"}),await Ce()):k.error(R.message||"Failed to save new school")}catch(R){console.log("Error saving new school:",R),k.error(R.message||"Failed to save new school")}},P=R=>{if(!R)return"text-gray-600";switch(R.toLowerCase()){case"active":return"text-green-600";case"blocked":return"text-red-600";case"flagged":return"text-yellow-500";case"unlisted":return"text-red-500";default:return"text-gray-600"}},C=()=>{S(!0),L(!0),M({schoolCode:"",schoolName:"",locality:"",locality_id:"",area:"",area_id:"",status:"Active"})},Y=R=>{B(R?.id),ee({id:R?.id,code:R?.code||"",name:R?.name||"",locality:R?.locality?.name||"",locality_id:R?.locality_id||"",area:R?.area?.name||"",area_id:R?.area_id||"",status:R?.status||"Active"}),he({}),o(null),Se(R?.locality_id||"")},Ne=async()=>{try{const R=await qj(q?.id,q?.code,q?.name,q?.locality_id,q?.area_id);R.success?(k.success("School updated successfully"),B(null),ee(null),he({}),await Ce()):k.error(R.message||"Failed to update school")}catch(R){console.log("Error updating school:",R),k.error(R.message||"Failed to update school")}},xe=()=>{B(null),ee(null),he({})},Ve=()=>{ye?(O(!1),se([]),A(null),ne([]),ge("")):(O(!0),se([]),A(null),ne([]),ge(""))},V=R=>{if(Q.includes(R)){ge("Unlock to merge"),setTimeout(()=>ge(""),3e3);return}if(H.includes(R))se(ie=>ie.filter(J=>J!==R)),W===R&&A(null);else{if(H.length>=2){k.warning("Merge happens one pair at a time.");return}se(ie=>[...ie,R]),(H.length===0||!W)&&A(R)}},I=async()=>{if(H.length!==2||!W){k.warning("Please select exactly two schools and ensure primary is set.");return}try{const R=H.find(Ue=>Ue!==W);let ie=await Yj(W||"",R||"");ie.success?k.success("Schools merged successfully"):k.error(ie.message||"Failed to merge schools"),se([]),A(null),ne([]),ge(""),await Ce(),window.confirm("Merge another duplicate?")||O(!1)}catch(R){console.log("Error merging schools:",R),k.error("Failed to merge schools")}};return t.jsxs("div",{children:[t.jsx("div",{className:"mb-4",style:{display:"none"},children:t.jsx("input",{type:"text",placeholder:"Search schools...",value:u,onChange:R=>m(R.target.value),className:"w-full max-w-md px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),t.jsxs("div",{className:"flex gap-2 mb-2 w-full",children:[t.jsxs("div",{className:"w-24 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between",children:[t.jsx("span",{children:"School ID"}),t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{className:"w-32 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between",children:[t.jsx("span",{children:"School Code"}),t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{className:"flex-1 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between",children:[t.jsx("span",{children:"School Name"}),t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsx("div",{className:"w-28 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center",children:t.jsx("span",{children:"Locality"})}),t.jsx("div",{className:"w-28 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center",children:t.jsx("span",{children:"Area"})}),t.jsx("div",{className:"w-24 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center",children:t.jsx("span",{children:"Status"})}),t.jsx("div",{className:"w-16 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md flex items-center",children:t.jsx("span",{})}),ye&&t.jsx("div",{className:"w-8 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider",children:t.jsx("span",{})})]}),t.jsx("div",{className:"w-full",children:T.length>0?T.map(R=>{const ie=F===R?.id;return t.jsxs("div",{className:`flex gap-2 mb-2 ${ie?"edit-row-container":""}`,children:[t.jsx("div",{className:"w-24 bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200 break-words",children:R?.id?String(R.id).split("-")[0]:"N/A"}),t.jsx("div",{className:"w-32 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:ie?t.jsx("div",{children:t.jsx("input",{type:"text",value:q?.code||"",className:"w-full text-sm text-gray-500 focus:outline-none border-0 p-0 bg-transparent cursor-not-allowed",placeholder:"Auto-generated",readOnly:!0,disabled:!0})}):R?.code||"N/A"}),t.jsx("div",{className:"flex-1 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:ie?t.jsxs("div",{children:[t.jsx("input",{type:"text",value:q?.name||"",onChange:J=>ee({...q,name:J.target.value}),className:`w-full text-sm text-gray-900 focus:outline-none border-0 p-0 ${le.name?"border-red-500":""}`,placeholder:"Enter school name"}),le.name&&t.jsx("div",{className:"text-xs text-red-500 mt-1",children:le.name})]}):R?.name||"N/A"}),t.jsx("div",{className:"w-28 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:ie?t.jsxs("div",{children:[t.jsxs("select",{value:q?.locality_id||"",onChange:J=>{const Ue=Me.find(He=>He.id===J.target.value);ee({...q,locality_id:J.target.value,locality:Ue?.locality?.name||Ue?.name||"",area_id:"",area:""}),Se(J.target.value)},className:`w-full text-sm text-gray-900 focus:outline-none border-0 p-0 ${le.locality_id?"border-red-500":""}`,children:[t.jsx("option",{value:"",children:"Select locality"}),Me.map(J=>t.jsx("option",{value:J.id,children:J.locality?.name},J.id))]}),le.locality_id&&t.jsx("div",{className:"text-xs text-red-500 mt-1",children:le.locality_id})]}):R?.locality?.name||"N/A"}),t.jsx("div",{className:"w-28 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:ie?t.jsxs("div",{children:[t.jsxs("select",{value:q?.area_id||"",onChange:J=>{const Ue=we.find(He=>He.id===J.target.value);ee({...q,area_id:J.target.value,area:Ue?.area?.name||Ue?.name||""})},className:`w-full text-sm text-gray-900 focus:outline-none border-0 p-0 ${le.area_id?"border-red-500":""}`,disabled:!q?.locality_id,children:[t.jsx("option",{value:"",children:"Select area"}),we.map(J=>t.jsx("option",{value:J.id,children:J.area?.name||J.name},J.id))]}),le.area_id&&t.jsx("div",{className:"text-xs text-red-500 mt-1",children:le.area_id})]}):R?.area?.code||"N/A"}),t.jsx("div",{className:"w-24 bg-white px-3 py-2 text-sm rounded-md border border-gray-200 break-words",children:l===R?.id?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}),t.jsx("span",{className:"text-gray-500",children:"Updating"})]}):t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("span",{className:`font-medium ${P(R.status)}`,children:R.status})})}),ye&&t.jsx("div",{className:"w-8 px-3 py-2 text-sm font-medium text-gray-900 flex items-center justify-center",children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("input",{type:"checkbox",checked:H.includes(R?.id),onChange:()=>V(R?.id),disabled:Q.includes(R?.id),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",title:Q.includes(R?.id)?"Unlock to merge":"Select for merge"}),W===R?.id&&t.jsx("svg",{className:"w-3 h-3 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})]})}),t.jsx("div",{className:"w-16 px-3 py-2 text-sm font-medium flex items-center justify-left",children:t.jsxs("div",{className:"relative flex items-center justify-left",children:[ie?t.jsxs("div",{className:"flex space-x-1 edit-buttons-container",children:[t.jsx("button",{onClick:Ne,className:"text-green-600 hover:text-green-800 focus:outline-none",title:"Save changes",children:t.jsx("img",{src:Pn})}),t.jsx("button",{onClick:xe,className:"text-red-600 hover:text-red-800 focus:outline-none",title:"Cancel editing",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):t.jsx("button",{onClick:()=>Le(R?.id||""),className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),n===R?.id&&!ie&&t.jsx("div",{className:"absolute top-full right-0 mt-1 w-48 bg-white rounded-md shadow-lg z-50 border-2",children:t.jsxs("div",{className:"py-1",children:[t.jsx("button",{onClick:()=>Y(R),disabled:l===R?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===R?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Edit"}),t.jsx("button",{onClick:()=>{o(null),C()},disabled:l===R?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===R?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Add"}),t.jsx("button",{disabled:l===R?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===R?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,onClick:()=>{Be("active",R?.id||"")},children:"List"}),t.jsx("button",{onClick:()=>{o(null),Ve()},disabled:l===R?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===R?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:ye?"Cancel Merge":"Merge"}),R?.status?.toLowerCase()!=="active"&&t.jsx("button",{onClick:()=>Be("active",R?.id||""),disabled:l===R?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===R?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Active"}),R?.status?.toLowerCase()!=="flagged"&&t.jsx("button",{onClick:()=>Be("flagged",R?.id||""),disabled:l===R?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===R?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Flag"}),R?.status?.toLowerCase()!=="blocked"&&t.jsx("button",{onClick:()=>Be("blocked",R?.id||""),disabled:l===R?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===R?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Block"}),t.jsx("button",{onClick:()=>{b(R?.id||""),f(!0)},disabled:l===R?.id,className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===R?.id?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Delete"})]})})]})})]},R?.id||Math.random())}):w?null:t.jsx("div",{className:"text-center py-8 text-gray-500",children:u?"No schools found matching your search":"No schools found"})}),w&&t.jsxs("div",{className:"flex gap-2 mb-2",children:[t.jsx("div",{className:"w-24 bg-gray-100 px-3 py-2 text-sm text-gray-500 rounded-md border border-gray-200",children:K.length+1}),t.jsx("div",{className:"w-32 bg-gray-100 px-3 py-2 text-sm text-gray-500 rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:D.schoolCode,readOnly:!0,placeholder:"Auto-generated",className:"w-full text-sm text-gray-500 focus:outline-none bg-transparent"})}),t.jsx("div",{className:"flex-1 bg-white px-3 py-2 rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:D.schoolName,onChange:R=>M({...D,schoolName:R.target.value}),placeholder:"Enter school name",className:"w-full text-sm text-gray-900 focus:outline-none"})}),t.jsx("div",{className:"w-28 bg-white px-3 py-2 rounded-md border border-gray-200",children:t.jsxs("select",{value:D.locality_id||"",onChange:R=>{const ie=Me.find(J=>J.id===R.target.value);M({...D,locality_id:R.target.value,locality:ie?.locality?.name||ie?.name||"",area_id:"",area:""}),re(R.target.value)},className:"w-full text-sm text-gray-900 focus:outline-none",children:[t.jsx("option",{value:"",children:"Select locality"}),Me.map(R=>t.jsx("option",{value:R.id,children:R.name},R.id))]})}),t.jsx("div",{className:"w-28 bg-white px-3 py-2 rounded-md border border-gray-200",children:t.jsxs("select",{value:D.area_id||"",onChange:R=>{const ie=be.find(J=>J.id===R.target.value);M({...D,area_id:R.target.value,area:ie?.area?.name||ie?.name||""})},className:"w-full text-sm text-gray-900 focus:outline-none",disabled:!D.locality_id,children:[t.jsx("option",{value:"",children:"Select area"}),be.map(R=>t.jsx("option",{value:R.id,children:R.name},R.id))]})}),t.jsx("div",{className:"w-24 bg-white px-3 py-2 rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:"Active",placeholder:"Enter status",className:"w-full text-sm text-gray-900 focus:outline-none",readOnly:!0})}),t.jsx("div",{className:"w-16 px-3 py-2 text-sm font-medium",children:t.jsx("span",{})}),ye&&t.jsx("div",{className:"w-8 bg-gray-100 px-3 py-2 text-sm text-gray-500 rounded-md border border-gray-200 flex items-center justify-center",children:"-"})]}),v.length>0&&t.jsxs("div",{className:"flex items-center justify-between mt-6 px-4",children:[t.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Fe+1," to ",Math.min(Je,v.length)," of ",v.length," schools"]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:te,disabled:ve===1,className:`px-3 py-1 rounded-md border ${ve===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300"}`,children:"Previous"}),t.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Ie},(R,ie)=>ie+1).map(R=>R===1||R===Ie||R>=ve-1&&R<=ve+1?t.jsx("button",{onClick:()=>je(R),className:`px-3 py-1 rounded-md border ${ve===R?"bg-[#C2A46D] text-white border-[#C2A46D]":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300"}`,children:R},R):R===ve-2&&R>1||R===ve+2&&R<Ie?t.jsx("span",{className:"px-2 text-gray-400",children:"..."},R):null)}),t.jsx("button",{onClick:X,disabled:ve===Ie,className:`px-3 py-1 rounded-md border ${ve===Ie?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300"}`,children:"Next"})]})]}),ye&&ae&&t.jsx("div",{className:"mt-4 p-2 bg-yellow-100 border border-yellow-300 rounded text-yellow-800",children:ae}),t.jsxs("div",{className:"flex justify-between items-center mt-6 mr-[110px]",children:[t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{onClick:C,disabled:_,className:`bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] transition-colors duration-200 ${_?"opacity-50 cursor-not-allowed":"hover:bg-[#9a7849]"}`,children:"Add"}),t.jsx("button",{onClick:Pe,disabled:!_,className:`bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] transition-colors duration-200 ${_?"hover:bg-[#b89a6a]":"opacity-50 cursor-not-allowed"}`,children:"Save"})]}),ye&&t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{onClick:()=>Ve(),className:"bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] transition-colors duration-200 hover:bg-[#9a7849]",children:"Cancel"}),t.jsxs("button",{onClick:I,disabled:H.length!==2||!W,className:`bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] transition-colors duration-200 flex items-center justify-center ${H.length!==2||!W?"opacity-50 cursor-not-allowed":"hover:bg-[#9a7849]"}`,children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),"Merge"]})]})]}),t.jsx($s,{isOpen:g,onClose:De,onConfirm:$,title:"Confirm Delete",message:"Are you sure you want to delete this school? This action cannot be undone.",confirmText:"Yes",cancelText:"No",confirmButtonColor:"text-red-600"})]})},Zk=({localities:a,onAction:s})=>{const[n,o]=x.useState(null),[l,d]=x.useState(null),[u,m]=x.useState(""),[g,f]=x.useState(!1),[y,b]=x.useState(null),[v,N]=x.useState([]),[w,S]=x.useState(!1),[_,L]=x.useState(!1),[D,M]=x.useState({localityCode:"",localityName:"",areaCode:"",areaName:"",linkedSchools:"",linkedStudents:"",status:"Active"}),[F,B]=x.useState(null),[q,ee]=x.useState(null),[le,he]=x.useState({}),[be,Te]=x.useState(!1),[we,fe]=x.useState([]),[K,ye]=x.useState(null),[O,H]=x.useState([]),[se,W]=x.useState(""),[A,Q]=x.useState(1),[ne]=x.useState(7),{refreshAreasData:ae,refreshLocalitiesData:ge,refreshSchoolsData:ve}=Ot();x.useEffect(()=>{const P=C=>{const Y=C.target;n&&!Y.closest(".dropdown-container")&&o(null)};return n&&document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[n]),x.useEffect(()=>{const P=C=>{const Y=C.target;F&&!Y.closest(".edit-row-container")&&!Y.closest(".edit-buttons-container")&&Le()};return F&&document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[F]),x.useEffect(()=>{if(!a||!Array.isArray(a)){N([]);return}if(!u.trim())N(a);else{const P=a.filter(C=>{const Y=u.toLowerCase(),Ne=C?.id?.toString()||"",xe=C.locality?.code||"",Ve=C.locality?.name||"",V=C.area?.code||"",I=C.area?.id||"",R=C.area?.name||"",ie=C?.linkedSchoolsCount?.toString()||"",J=C?.linkedStudentsCount?.toString()||"",Ue=C?.status||"";return Ne.toLowerCase().includes(Y)||xe.toLowerCase().includes(Y)||Ve.toLowerCase().includes(Y)||V.toLowerCase().includes(Y)||I.toLowerCase().includes(Y)||R.toLowerCase().includes(Y)||ie.includes(Y)||J.includes(Y)||Ue.toLowerCase().includes(Y)});N(P)}Q(1)},[u,a]);const U=Math.ceil(v.length/ne),Ee=(A-1)*ne,Ce=Ee+ne,Me=v.slice(Ee,Ce),me=P=>{P>=1&&P<=U&&Q(P)},_e=()=>{A>1&&Q(A-1)},Ye=()=>{A<U&&Q(A+1)},st=P=>{o(n===P?null:P)},re=()=>{if(y){o(null);const P=v.find(C=>(C?.area?.id||C?.id)===y);P&&Ie("delete",P?.id||"",P?.area?.id||""),f(!1),b(null)}},Se=()=>{f(!1),b(null)},Ie=async(P,C,Y)=>{try{if(o(null),d(Y||C),P==="delete"){const Ne=await Kj(Y),xe=await zj(C);Ne.success&&xe.success?(k.success(Ne.message||"Locality deleted successfully"),await Promise.all([ae(),ge(),ve()]),s(P,C)):k.error(Ne.message||xe.message||"Failed to delete locality")}else{const Ne=await Wj(Y,P);Ne.success?(k.success(Ne.message||`Locality ${P} successfully`),await Promise.all([ae(),ge(),ve()]),s(P,C)):k.error(Ne.message||"Failed to update locality")}}catch(Ne){console.log("Error updating locality:",Ne),k.error(Ne.message||"Failed to update locality")}finally{d(null)}},Fe=()=>{S(!0),L(!0),M({localityCode:"Auto generated",localityName:"",areaCode:"Auto generated",areaName:"",linkedSchools:"",linkedStudents:"",status:"Active"})},Je=()=>{Fe()},T=(P,C)=>{M(Y=>({...Y,[P]:C}))},je=async()=>{try{if(!D.localityName.trim()||!D.areaName.trim()){k.error("Please fill in all required fields");return}k.success("New area added successfully"),S(!1),L(!1),M({localityCode:"",localityName:"",areaCode:"",areaName:"",linkedSchools:"",linkedStudents:"",status:"Active"}),await Promise.all([ae(),ge(),ve()])}catch(P){console.log("Error saving new row:",P),k.error("Failed to save new area")}},te=()=>{je()},X=P=>{B(P?.area?.id||P?.id),ee({id:P?.area?.id||P?.id,localityCode:P?.locality?.code||"",localityName:P?.locality?.name||"",areaCode:P?.area?.code||"",areaName:P?.area?.name||"",status:P?.status||"Active"}),he({}),o(null)},Le=()=>{B(null),ee(null),he({})},$=()=>{be?(Te(!1),fe([]),ye(null),H([]),W("")):(Te(!0),fe([]),ye(null),H([]),W(""))},De=P=>{if(O.includes(P)){W("Unlock to merge"),setTimeout(()=>W(""),3e3);return}if(we.includes(P))fe(C=>C.filter(Y=>Y!==P)),K===P&&ye(null);else{if(we.length>=2){k.warning("Merge happens one pair at a time.");return}fe(C=>[...C,P]),(we.length===0||!K)&&ye(P)}},Be=async()=>{if(we.length!==2||!K){W("Please select exactly two localities and ensure primary is set."),k.warning("Please select exactly two localities and ensure primary is set.");return}try{const P=we.find(Ne=>Ne!==K);let C=await Ij(K||"",P||"");C.success?k.success("Localities merged successfully"):k.error(C.message||"Failed to merge localities"),fe([]),ye(null),H([]),W(""),await Promise.all([ae(),ge(),ve()]),window.confirm("Merge another duplicate?")||Te(!1)}catch(P){console.log("Error merging localities:",P),k.error("Failed to merge localities")}},Pe=P=>{if(!P)return"text-gray-600";switch(P.toLowerCase()){case"active":return"text-green-600";case"blocked":return"text-red-600";case"flagged":return"text-yellow-500";default:return"text-gray-600"}};return t.jsxs("div",{children:[t.jsx("div",{className:"mb-4",style:{display:"none"},children:t.jsx("input",{type:"text",placeholder:"Search localities...",value:u,onChange:P=>m(P.target.value),className:"w-full max-w-md px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),t.jsxs("div",{className:"flex gap-2 mb-2 w-full",children:[t.jsxs("div",{className:"w-32 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between",children:[t.jsx("span",{children:"Locality Code"}),t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{className:"w-40 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between",children:[t.jsx("span",{children:"Locality Name"}),t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{className:"w-32 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between",children:[t.jsx("span",{children:"Area Code"}),t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{className:"w-40 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between",children:[t.jsx("span",{children:"Area Name"}),t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{className:"w-36 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between",children:[t.jsx("span",{children:"Linked Schools (Area)"}),t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{className:"w-36 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center justify-between",children:[t.jsx("span",{children:"Linked Students (Area)"}),t.jsx("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsx("div",{className:"w-24 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md bg-[#F0F7FF] border border-[#4A5F7A] flex items-center",children:t.jsx("span",{children:"Status"})}),t.jsx("div",{className:"w-16 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider rounded-md flex items-center",children:t.jsx("span",{})}),be&&t.jsx("div",{className:"w-8 px-3 py-2 text-xs font-medium text-gray-900 uppercase tracking-wider",children:t.jsx("span",{})})]}),t.jsx("div",{className:"w-full",children:!Me||Me.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:u?"No localities found matching your search":"No localities found"}):Me.length>0?Me.map(P=>{const C=F===(P?.area?.id||P?.id);return t.jsxs("div",{className:`flex gap-2 mb-2 ${C?"edit-row-container":""}`,children:[t.jsx("div",{className:"w-32 bg-white px-3 py-2 text-sm font-medium text-gray-900 rounded-md border border-gray-200 break-words",children:P?.locality?.code||"N/A"}),t.jsx("div",{className:"w-40 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:C?t.jsx("div",{children:t.jsx("input",{type:"text",value:q?.localityName||"",className:"w-full text-sm text-gray-500 focus:outline-none border-0 p-0 bg-transparent cursor-not-allowed",placeholder:"Read-only",readOnly:!0,disabled:!0})}):P?.locality?.name||"N/A"}),t.jsx("div",{className:"w-32 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:P?.area?.code||"N/A"}),t.jsx("div",{className:"w-40 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:C?t.jsxs("div",{children:[t.jsx("input",{type:"text",value:q?.areaName||"",onChange:Y=>ee({...q,areaName:Y.target.value}),className:`w-full text-sm text-gray-900 focus:outline-none border-0 p-0 ${le.areaName?"border-red-500":""}`,placeholder:"Enter area name"}),le.areaName&&t.jsx("div",{className:"text-xs text-red-500 mt-1",children:le.areaName})]}):P?.area?.name||"N/A"}),t.jsx("div",{className:"w-36 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:P?.linkedSchoolsCount||"-"}),t.jsx("div",{className:"w-36 bg-white px-3 py-2 text-sm text-gray-900 rounded-md border border-gray-200 break-words",children:P?.linkedStudentsCount||"-"}),t.jsx("div",{className:"w-24 bg-white px-3 py-2 text-sm rounded-md border border-gray-200 break-words",children:l===(P?.area?.id||P?.id)?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"}),t.jsx("span",{className:"text-gray-500",children:"Updating"})]}):t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("span",{className:`font-medium ${Pe(P.status)}`,children:P.status})})}),be&&t.jsx("div",{className:"w-8 px-3 py-2 text-sm font-medium text-gray-900 flex items-center justify-center",children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("input",{type:"checkbox",checked:we.includes(P?.area?.id||P?.id),onChange:()=>De(P?.area?.id||P?.id),disabled:O.includes(P?.area?.id||P?.id),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",title:O.includes(P?.area?.id||P?.id)?"Unlock to merge":"Select for merge"}),K===(P?.area?.id||P?.id)&&t.jsx("svg",{className:"w-3 h-3 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})]})}),t.jsx("div",{className:"w-16 px-3 py-2 text-sm font-medium flex items-center justify-left",children:t.jsxs("div",{className:"relative flex items-center justify-left dropdown-container",children:[C?t.jsx("div",{className:"flex space-x-1 edit-buttons-container",children:t.jsx("button",{onClick:Le,className:"text-red-600 hover:text-red-800 focus:outline-none",title:"Cancel editing",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}):t.jsx("button",{onClick:()=>st(P?.area?.id||P?.id||""),className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),n===(P?.area?.id||P?.id)&&!C&&t.jsx("div",{className:"absolute top-full right-0 mt-1 w-48 bg-white rounded-md shadow-lg z-[9999] border border-gray-300 dropdown-container",children:t.jsxs("div",{className:"py-1",children:[t.jsx("button",{onClick:()=>X(P),disabled:l===(P?.area?.id||P?.id),className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===(P?.area?.id||P?.id)?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Edit"}),t.jsx("button",{disabled:l===(P?.area?.id||P?.id),className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===(P?.area?.id||P?.id)?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Add"}),t.jsx("button",{disabled:l===(P?.area?.id||P?.id),className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===(P?.area?.id||P?.id)?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"List"}),t.jsx("button",{onClick:()=>{o(null),$()},disabled:l===(P?.area?.id||P?.id),className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===(P?.area?.id||P?.id)?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:be?"Cancel Merge":"Merge"}),P?.status?.toLowerCase()!=="active"&&t.jsx("button",{onClick:()=>Ie("active",P?.id||"",P?.area?.id||""),disabled:l===(P?.area?.id||P?.id),className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===(P?.area?.id||P?.id)?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Active"}),P?.status?.toLowerCase()!=="flagged"&&t.jsx("button",{onClick:()=>Ie("flagged",P?.id||"",P?.area?.id||""),disabled:l===(P?.area?.id||P?.id),className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===(P?.area?.id||P?.id)?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Flag"}),P?.status?.toLowerCase()!=="blocked"&&t.jsx("button",{onClick:()=>Ie("blocked",P?.id||"",P?.area?.id||""),disabled:l===(P?.area?.id||P?.id),className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===(P?.area?.id||P?.id)?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Block"}),t.jsx("button",{onClick:()=>{b(P?.area?.id||P?.id||""),f(!0)},disabled:l===(P?.area?.id||P?.id),className:`block w-full text-left px-4 py-2 text-sm transition-colors duration-200 ${l===(P?.area?.id||P?.id)?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-[#C6DAF4] hover:text-gray-900"}`,children:"Delete"})]})})]})})]},P?.id||Math.random())}):null}),w&&t.jsxs("div",{className:"flex gap-2 mb-2",children:[t.jsx("div",{className:"w-32 bg-white px-3 py-2 text-sm text-gray-500 rounded-md border border-gray-200",children:D.localityCode}),t.jsx("div",{className:"w-40 bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:D.localityName,onChange:P=>T("localityName",P.target.value),placeholder:"Enter locality name",className:"w-full border-none outline-none text-gray-900"})}),t.jsx("div",{className:"w-32 bg-white px-3 py-2 text-sm text-gray-500 rounded-md border border-gray-200",children:D.areaCode}),t.jsx("div",{className:"w-40 bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsx("input",{type:"text",value:D.areaName,onChange:P=>T("areaName",P.target.value),placeholder:"Add area",className:"w-full border-none outline-none text-gray-900"})}),t.jsx("div",{className:"w-36 bg-white px-3 py-2 text-sm text-gray-500 rounded-md border border-gray-200",children:"-"}),t.jsx("div",{className:"w-36 bg-white px-3 py-2 text-sm text-gray-500 rounded-md border border-gray-200",children:"-"}),t.jsx("div",{className:"w-24 bg-white px-3 py-2 text-sm rounded-md border border-gray-200",children:t.jsxs("select",{value:D.status,onChange:P=>T("status",P.target.value),className:"w-full border-none outline-none text-gray-900 bg-transparent",children:[t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"})]})}),t.jsx("div",{className:"w-16 px-3 py-2 text-sm font-medium relative",children:t.jsx("div",{className:"relative flex items-center justify-left",children:t.jsx("button",{className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})})})}),be&&t.jsx("div",{className:"w-8 bg-gray-100 px-3 py-2 text-sm text-gray-500 rounded-md border border-gray-200 flex items-center justify-center",children:"-"})]}),v.length>0&&t.jsxs("div",{className:"flex items-center justify-between mt-6 px-4",children:[t.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",Ee+1," to ",Math.min(Ce,v.length)," of ",v.length," localities"]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:_e,disabled:A===1,className:`px-3 py-1 rounded-md border ${A===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300"}`,children:"Previous"}),t.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:U},(P,C)=>C+1).map(P=>P===1||P===U||P>=A-1&&P<=A+1?t.jsx("button",{onClick:()=>me(P),className:`px-3 py-1 rounded-md border ${A===P?"bg-[#C2A46D] text-white border-[#C2A46D]":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300"}`,children:P},P):P===A-2&&P>1||P===A+2&&P<U?t.jsx("span",{className:"px-2 text-gray-400",children:"..."},P):null)}),t.jsx("button",{onClick:Ye,disabled:A===U,className:`px-3 py-1 rounded-md border ${A===U?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border-gray-300"}`,children:"Next"})]})]}),be&&se&&t.jsx("div",{className:"mt-4 p-2 bg-yellow-100 border border-yellow-300 rounded text-yellow-800",children:se}),t.jsxs("div",{className:"flex justify-between items-center mt-6 mr-[110px]",children:[t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{onClick:Je,disabled:_,className:`bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] transition-colors duration-200 ${_?"opacity-50 cursor-not-allowed":"hover:bg-[#9a7849]"}`,children:"Add"}),t.jsx("button",{onClick:te,disabled:!_,className:`bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] transition-colors duration-200 ${_?"hover:bg-[#b89a6a]":"opacity-50 cursor-not-allowed"}`,children:"Save"})]}),be&&t.jsxs("div",{className:"flex space-x-4",children:[t.jsx("button",{onClick:$,className:"bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] transition-colors duration-200 hover:bg-[#9a7849]",children:"Cancel"}),t.jsxs("button",{onClick:Be,disabled:we.length!==2||!K,className:`bg-[#C2A46D] text-white font-medium rounded-[30px] w-[105px] h-[44px] px-[10px] py-[10px] transition-colors duration-200 flex items-center justify-center ${we.length!==2||!K?"opacity-50 cursor-not-allowed":"hover:bg-[#9a7849]"}`,children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),"Merge"]})]})]}),t.jsx($s,{isOpen:g,onClose:Se,onConfirm:re,title:"Confirm Delete",message:"Are you sure you want to delete this locality? This action cannot be undone.",confirmText:"Yes",cancelText:"No",confirmButtonColor:"text-red-600"})]})},qp=({type:a="schools",selectedLocality:s=0})=>{const[n,o]=x.useState(""),{allSchools:l,allLocalities:d,allUsers:u,refreshLocalitiesData:m,refreshAreasData:g}=Ot(),f=["Dubai","Abu Dhabi","Al Ain","Sharjah","Ajman","Ras Al Khaimah","Umm Al Quwain","Other"];x.useEffect(()=>{m(),g()},[m,g]);const y=x.useMemo(()=>{let v=[];if(a==="localities"){if(l&&l.length>0){console.log(l);const _=new Map;l.forEach(L=>{const D=L?.locality?.name||"Unknown",M=L?.area_id||"Unknown",F=L?.area?.name||"Unknown",B=L?.locality?.code||D.substring(0,2).toUpperCase(),q=L?.area?.code||F.substring(0,3).toUpperCase(),ee=L?.area?.status||"Active",le=`${D}-${F}`;_.has(le)||_.set(le,{id:le,locality:{code:B,name:D},area:{code:q,id:M,name:F},linkedSchoolsCount:0,linkedStudentsCount:0,status:ee}),_.get(le).linkedSchoolsCount+=1}),v=Array.from(_.values()),u&&u.length>0&&v.forEach(L=>{const D=L.area.code,M=L.locality.code,F=L.status,B=l.filter(ee=>ee.area&&ee.area.code===D&&ee.locality&&ee.locality.code===M),q=u.filter(ee=>!ee.school||typeof ee.school!="object"?!1:B.some(le=>ee.school.id===le.id&&ee.school.area_id===le.area_id&&ee.school.locality_id===le.locality_id)).length;L.linkedStudentsCount=q,L.status=F})}}else{if(!l||l.length===0)return[];v=l}const N=f[s];if(N&&N!=="Other")v=v.filter(_=>{const L=a==="localities"?_?.locality?.name:_?.locality?.name||"";return L&&L.toLowerCase()===N.toLowerCase()});else if(N==="Other"){const _=["Dubai","Abu Dhabi","Al Ain","Sharjah","Ajman","Ras Al Khaimah","Umm Al Quwain"];v=v.filter(L=>{const D=a==="localities"?L?.locality?.name:L?.locality?.name||"";return!_.some(F=>D&&D.toLowerCase()===F.toLowerCase())})}if(!n.trim())return v;const w=n.toLowerCase();return v.filter(_=>{if(a==="localities"){const L=_?.localityCode||_?.code||"",D=_?.localityName||_?.locality?.name||"",M=_?.areaCode||_?.area?.code||"",F=_?.areaName||_?.area?.name||"",B=_?.linkedSchools||_?.schoolsCount||"",q=_?.linkedStudents||_?.studentsCount||"",ee=_?.status||"";return L&&L.toLowerCase().includes(w)||D&&D.toLowerCase().includes(w)||M&&M.toLowerCase().includes(w)||F&&F.toLowerCase().includes(w)||B.toString().includes(w)||q.toString().includes(w)||ee&&ee.toLowerCase().includes(w)}else{const L=_?.id?.toString()||"",D=_?.code||"",M=_?.name||"",F=_?.locality?.name||"",B=_?.area?.name||"",q=_?.status||"";return L&&L.toLowerCase().includes(w)||D&&D.toLowerCase().includes(w)||M&&M.toLowerCase().includes(w)||F&&F.toLowerCase().includes(w)||B&&B.toLowerCase().includes(w)||q&&q.toLowerCase().includes(w)}})},[a,l,d,n,s]),b=v=>{};return t.jsxs("div",{className:"w-[1000px] space-y-6",children:[t.jsx("div",{className:"flex justify-left",children:t.jsxs("div",{className:"relative w-full max-w-md",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.jsx("input",{type:"text",placeholder:"Search",value:n,onChange:v=>o(v.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-800 rounded-[10px] leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})}),a==="localities"?t.jsx(Zk,{localities:y,onAction:b,localityType:a}):t.jsx(Jk,{schools:y,onAction:b,schoolType:a})]})},e_=()=>{const[a,s]=x.useState("dashboard"),[n,o]=x.useState(!0),[l,d]=x.useState(0),{allUsers:u,allOrganisers:m,allEvents:g,allSchools:f}=Ot(),y=[{title:"Events Upcoming",value:g.filter(S=>S.status==="pending").length.toString()},{title:"Events Completed",value:g.filter(S=>S.status==="completed").length.toString()},{title:"Users",value:u.length.toString()},{title:"Organisers",value:m.filter(S=>S.status==="approved").length.toString()},{title:"Pending Approvals",value:m.filter(S=>S.status==="pending").length.toString()},{title:"Schools",value:f.length.toString()}],b=()=>{if(a==="users"&&n)return"Masterlists > Users Related > Users > Students";if(a==="users"&&!n)return"Masterlists > Users Related > Users > Teachers";if(a==="superusers"&&n)return"Masterlists > Users Related > Superusers > Students";if(a==="superusers"&&!n)return"Masterlists > Users Related > Superusers > Teachers";if(a==="schools"&&l===0)return"Masterlists > Schools Related > Schools > Dubai";if(a==="schools"&&l===1)return"Masterlists > Schools Related > Schools > Abu Dhabi";if(a==="schools"&&l===2)return"Masterlists > Schools Related > Schools > Al Ain";if(a==="schools"&&l===3)return"Masterlists > Schools Related > Schools > Sharjah";if(a==="schools"&&l===4)return"Masterlists > Schools Related > Schools > Ajman";if(a==="schools"&&l===5)return"Masterlists > Schools Related > Schools > Ras Al Khaimah";if(a==="schools"&&l===6)return"Masterlists > Schools Related > Schools > Umm Al Quwain";if(a==="schools"&&l===7)return"Masterlists > Schools Related > Schools > Other";if(a==="localities"&&l===0)return"Masterlists > Schools Related > Localities > Dubai";if(a==="localities"&&l===1)return"Masterlists > Schools Related > Localities > Abu Dhabi";if(a==="localities"&&l===2)return"Masterlists > Schools Related > Localities > Al Ain";if(a==="localities"&&l===3)return"Masterlists > Schools Related > Localities > Sharjah";if(a==="localities"&&l===4)return"Masterlists > Schools Related > Localities > Ajman";if(a==="localities"&&l===5)return"Masterlists > Schools Related > Localities > Ras Al Khaimah";if(a==="localities"&&l===6)return"Masterlists > Schools Related > Localities > Umm Al Quwain";if(a==="localities"&&l===7)return"Masterlists > Schools Related > Localities > Other";switch(a){case"dashboard":return"Dashboard";case"masterlists":return"Masterlists";case"events-related":return"Masterlists > Events Related";case"events":return"Masterlists > Events Related > Events";case"organisers":return"Masterlists > Events Related > Organisers";case"leadership-roles":return"Masterlists > Events Related > Leadership Roles";case"committees":return"Masterlists > Events Related > Committees";case"students":return"Masterlists > Events Related > Organisers > Students";case"teachers":return"Masterlists > Events Related > Organisers > Teachers";case"users-related":return"Masterlists > Users Related";case"users":return"Masterlists > Users Related > Users";case"superusers":return"Masterlists > Users Related > Superusers";case"schools-related":return"Masterlists > Schools Related";case"schools":return"Masterlists > Schools Related > Schools";case"localities":return"Masterlists > Schools Related > Localities";default:return"Dashboard"}},v=()=>t.jsx("div",{className:"space-y-8",children:t.jsx("div",{className:"grid grid-cols-6 gap-6",children:y.map((S,_)=>t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"bg-[#607DA3] px-4 py-3",children:t.jsx("h3",{className:"text-white font-semibold text-sm text-center",children:S.title})}),t.jsx("div",{className:"bg-white px-4 py-6",children:t.jsx("div",{className:"text-3xl font-bold text-gray-900 text-center",children:S.value})})]},_))})}),N=()=>t.jsxs("div",{className:"space-y-6",children:[a==="events"&&t.jsx(LC,{}),a==="organisers"&&t.jsx(Qu,{type:"students"}),a==="students"&&t.jsx(Qu,{type:"students"}),a==="teachers"&&t.jsx(Qu,{type:"teachers"}),a==="leadership-roles"&&t.jsx(MC,{}),a==="committees"&&t.jsx($C,{})]}),w=()=>{if(a==="users"&&n)return t.jsx(Vl,{type:"students",isSuperUser:!1});if(a==="users"&&!n)return t.jsx(Vl,{type:"teachers",isSuperUser:!1});if(a==="superusers"&&n)return t.jsx(Vl,{type:"students",isSuperUser:!0});if(a==="superusers"&&!n)return t.jsx(Vl,{type:"teachers",isSuperUser:!0});if(a==="schools")return t.jsx(qp,{type:"schools",selectedLocality:l});if(a==="localities")return t.jsx(qp,{type:"localities",selectedLocality:l});switch(a){case"dashboard":return v();case"masterlists":return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Masterlists"}),t.jsx("p",{className:"text-gray-500 mt-2",children:"Select a category to manage..."})]});case"events-related":return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Events Related"}),t.jsx("p",{className:"text-gray-500 mt-2",children:"Select a specific category to manage..."})]});case"users-related":return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Users Related"}),t.jsx("p",{className:"text-gray-500 mt-2",children:"Users management coming soon..."})]});case"schools-related":return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Schools Related"}),t.jsx("p",{className:"text-gray-500 mt-2",children:"Select a specific category to manage..."})]});case"events":case"organisers":case"students":case"teachers":case"leadership-roles":case"committees":return N();default:return v()}};return t.jsx(xs,{loadingText:"Loading Super User Dashboard...",children:t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Wt,{maxWidth:"max-w-[88rem]"}),t.jsxs("div",{className:"max-w-[85rem] mx-auto px-6 py-8",style:{paddingLeft:"10.5rem"},children:[t.jsx("div",{className:"text-left mb-8",children:t.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:b()})}),t.jsx("div",{className:"flex justify-left mb-8",children:t.jsx(RC,{activeSection:a,onSectionChange:s,usersSubSection:n,setUsersSubSection:o,schoolsSubSection:l,setSchoolsSubSection:d})}),w()]})]})})},t_=()=>{const{eventId:a}=ps(),s=Ct(),[n,o]=x.useState("Event Info"),[l,d]=x.useState(""),[u,m]=x.useState(""),[g,f]=x.useState(""),[y,b]=x.useState(""),[v,N]=x.useState(""),[w,S]=x.useState(""),[_,L]=x.useState(""),[D,M]=x.useState(""),[F,B]=x.useState(""),[q,ee]=x.useState([]),[le,he]=x.useState([]),[be,Te]=x.useState([]),[we,fe]=x.useState(""),[K,ye]=x.useState(""),[O,H]=x.useState(""),[se,W]=x.useState(""),[A,Q]=x.useState(""),[ne,ae]=x.useState(""),[ge,ve]=x.useState(""),[U,Ee]=x.useState(""),[Ce,Me]=x.useState(""),[me,_e]=x.useState(""),[Ye,st]=x.useState(""),[re,Se]=x.useState(""),[Ie,Fe]=x.useState(""),[Je,T]=x.useState(""),[je,te]=x.useState(!1),X=["Event Info","Support Contact","Participation Info","Registration Info"];x.useEffect(()=>{const P=async()=>{try{const xe=await ay(a),Ve=Array.isArray(xe?.data)?xe.data[0]:xe?.data;console.log("getRegistrationInfoByEventIdAndUserIdApi",xe.data);const V=Ve.user||Ve.users||{},I=V.school||{},R=I.locality||{};fe(V.id??""),ye(Ve.registration_no??""),H(V.username??""),W(V.fullname??V.name??""),Q(V.birthday??""),ae(V.gender??""),ve(I.name??""),Ee(R.name??""),Me(V.years_of_experience??""),_e(V.email??""),st(V.phone_e164??V.phone_number??""),Se(Ve.mun_experience??""),Fe(Ve.food_pref??""),T(Ve.food_allergies??"")}catch(xe){k.error("Failed to get registration info: "+xe.message)}},C=async()=>{try{const xe=await Fh(a||"");console.log("getEventByIdApi",xe.data),xe.success?(d(xe.data[0].name),m(xe.data[0].description),f(xe.data[0].start_date),b(xe.data[0].end_date),N(xe.data[0].locality.name),S(xe.data[0].fees_per_delegate),L(xe.data[0].website),M(xe.data[0].instagram),B(xe.data[0].cover_image)):k.error("Failed to get event by id: "+xe.message)}catch(xe){k.error("Failed to get event by id: "+xe.message)}},Y=async()=>{try{const xe=await Pa(a||"");console.log("getLeadershipRolesByEventIdApi",xe.data),xe.success&&Te(xe.data)}catch(xe){k.error("Failed to get event leader ship roles: "+xe.message)}},Ne=async()=>{try{const xe=await _y(a);if(console.log("getDocumentsByEventId",xe.data),xe.success){const Ve=xe.data.filter(I=>I.doc_type==="general"),V=xe.data.filter(I=>I.doc_type!=="general");ee(Ve),he(V)}else k.error("Failed to get documents by id: "+xe.message)}catch(xe){k.error("Failed to get documents by id: "+xe.message)}};C(),Ne(),Y(),P()},[a]);const Le=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"w-[400px]",children:t.jsx("img",{src:F,alt:"Event",className:"w-[400px] h-64 object-cover rounded-lg"})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Event Name"}),t.jsx("input",{type:"text",value:l,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Event Description"}),t.jsx("textarea",{value:u,readOnly:!0,rows:6,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700 resize-none"})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Date"}),t.jsx("input",{type:"text",value:g+" - "+y,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Locality"}),t.jsx("input",{type:"text",value:v,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Fees"}),t.jsx("input",{type:"text",value:w,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Website"}),t.jsx("input",{type:"text",value:_,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-base font-bold text-gray-700 mb-2",children:"Instagram"}),t.jsx("input",{type:"text",value:D,readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]})]})]}),$=()=>t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsxs("div",{className:"flex gap-4 mb-4 ",children:[t.jsx("div",{className:"bg-[#E3F2FD] rounded-lg text-center border border-gray-800",style:{width:"80px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{className:"text-sm font-medium text-[#1976D2]",children:"ABBR"})}),t.jsx("div",{className:"bg-[#E3F2FD] rounded-lg text-center border border-gray-800",style:{width:"200px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{className:"text-sm font-medium text-[#1976D2]",children:"Role"})}),t.jsx("div",{className:"bg-[#E3F2FD] rounded-lg text-center border border-gray-800",style:{width:"140px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{className:"text-sm font-medium text-[#1976D2]",children:"Username"})}),t.jsx("div",{className:"bg-[#E3F2FD] rounded-lg text-center border border-gray-800",style:{width:"200px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{className:"text-sm font-medium text-[#1976D2]",children:"Name"})}),t.jsx("div",{className:"bg-[#E3F2FD] rounded-lg text-center border border-gray-800",style:{width:"120px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{className:"text-sm font-medium text-[#1976D2]",children:"Mobile"})}),t.jsx("div",{className:"bg-[#E3F2FD] rounded-lg text-center border border-gray-800",style:{width:"220px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{className:"text-sm font-medium text-[#1976D2]",children:"Email"})})]}),be.map((P,C)=>t.jsxs("div",{className:"flex gap-4 mb-3",children:[t.jsx("div",{className:"bg-white border border-gray-200 flex justify-center items-center rounded-lg text-center",style:{width:"80px",height:"60px"},children:t.jsx("span",{className:"text-sm text-gray-900",children:P.leadership_roles.abbr})}),t.jsx("div",{className:"bg-white border border-gray-200 flex justify-center items-center rounded-lg text-center",style:{width:"150px",height:"60px"},children:t.jsx("span",{className:"text-sm text-gray-900",children:P.leadership_roles.leadership_role})}),t.jsx("div",{className:"bg-white border border-gray-200 flex justify-center items-center rounded-lg text-center",style:{width:"100px",height:"60px"},children:t.jsx("span",{className:"text-sm text-gray-900",children:P.users.username})}),t.jsx("div",{className:"bg-white border border-gray-200 flex justify-center items-center rounded-lg text-center",style:{width:"200px",height:"60px"},children:t.jsx("span",{className:"text-sm text-gray-900",children:P.users.fullname})}),t.jsx("div",{className:"bg-white border border-gray-200 flex justify-center items-center rounded-lg text-center",style:{width:"170px",height:"60px"},children:t.jsx("span",{className:"text-sm text-gray-900",children:P.users.phone_e164})}),t.jsx("div",{className:"bg-white border border-gray-200 flex justify-center items-center rounded-lg text-center",style:{width:"260px",height:"60px"},children:t.jsx("span",{className:"text-sm text-gray-900",children:P.users.email})})]},C))]})}),De=()=>t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"flex items-center gap-6",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Committee"}),t.jsx("input",{type:"text",value:"",readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]})}),t.jsx("div",{className:"flex items-center gap-6",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Country"}),t.jsx("input",{type:"text",value:"",readOnly:!0,className:"w-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Documents"}),t.jsx("div",{className:"flex items-start gap-6",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-3",children:"General"}),t.jsx("div",{className:"space-y-3",children:q.map((P,C)=>t.jsxs("div",{className:"w-[400px] w-[400px] flex items-center justify-between bg-white border border-gray-300 rounded-lg px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-900",children:P.title}),t.jsx("button",{onClick:()=>window.open(P.file_url,"_blank"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 transition-colors",children:t.jsx("img",{src:lc,alt:"Download",className:"w-4 h-4"})})]},C))})]})}),t.jsx("div",{className:"flex items-start gap-6",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"text-base font-semibold text-gray-800 mb-3",children:"Committee Related"}),t.jsx("div",{className:"space-y-3",children:le.map((P,C)=>t.jsxs("div",{className:"w-[400px] flex items-center justify-between bg-white border border-gray-300 rounded-lg px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-900",children:P.title}),t.jsx("button",{onClick:()=>window.open(P.file_url,"_blank"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 transition-colors",children:t.jsx("img",{src:lc,alt:"Download",className:"w-4 h-4"})})]},C))})]})})]})]}),Be=()=>t.jsx("div",{className:"flex gap-8",children:t.jsxs("div",{className:"flex-1 space-y-6",children:[t.jsx("div",{className:"flex items-center gap-4 mb-8",children:t.jsx("div",{style:{width:"160px",height:"160px"},children:t.jsx(Ga,{size:"large",className:"w-[160px] h-[160px]"})})}),t.jsxs("div",{className:"w-[400px] gap-6",style:{display:"flex",flexDirection:"column",gap:"15px"},children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Registration No."}),t.jsx("input",{type:"text",value:K,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Username"}),t.jsx("input",{type:"text",value:O,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Name"}),t.jsx("input",{type:"text",value:se,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Date of Birth"}),t.jsx("input",{type:"text",value:A,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Gender"}),t.jsx("input",{type:"text",value:ne,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"School Name"}),t.jsx("input",{type:"text",value:ge,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Locality of School"}),t.jsx("input",{type:"text",value:U,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Year of Working Experience"}),t.jsx("input",{type:"text",value:Ce,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"text",value:me,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Mobile Number"}),t.jsx("input",{type:"text",value:Ye,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"MUN Experience in Years"}),t.jsx("input",{type:"text",value:re,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Food Preference"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{className:`px-6 py-3 rounded-full text-sm font-medium transition-colors ${Ie==="Vegetarian"?"bg-[#D9C7A1] text-gray-900":"bg-white text-gray-600 border border-gray-300"}`,children:"Vegetarian"}),t.jsx("button",{className:`px-6 py-3 rounded-full text-sm font-medium transition-colors ${Ie==="Non-Vegetarian"?"bg-[#D9C7A1] text-gray-900":"bg-white text-gray-600 border border-gray-300"}`,children:"Non-Vegetarian"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Food Allergies"}),t.jsx("input",{type:"text",value:Je,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700"})]})]}),t.jsxs("div",{className:"mt-8 relative",children:[t.jsx("button",{onClick:()=>te(!je),className:"bg-[#D9C7A1] text-gray-900 px-6 py-3 rounded-full font-medium hover:bg-[#C5B595] transition-colors",children:"Cancel Registration"}),je&&t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>te(!1)}),t.jsxs("div",{className:"relative bg-white border border-gray-800 rounded-lg p-6 shadow-xl w-[320px]",children:[t.jsx("div",{className:"mb-4",children:t.jsx("h4",{className:"font-semibold text-gray-900",children:"Confirm Cancel"})}),t.jsxs("div",{className:"flex items-center justify-end gap-4",children:[t.jsx("button",{onClick:async()=>{try{const P=await ny(we);P?.success?(k.success("Registration cancelled successfully"),s("/home")):k.error(P?.message||"Failed to cancel registration")}catch(P){k.error(P?.message||"Failed to cancel registration")}finally{te(!1)}},className:"text-red-600 font-medium hover:text-red-800 transition-colors",children:"Yes"}),t.jsx("button",{onClick:()=>te(!1),className:"text-gray-900 font-medium hover:text-gray-700 transition-colors",children:"No"})]})]})]})]})]})}),Pe=()=>{switch(n){case"Event Info":return Le();case"Support Contact":return $();case"Participation Info":return De();case"Registration Info":return Be();default:return Le()}};return t.jsx(xs,{loadingText:"Loading Delegate Page...",children:t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Wt,{}),t.jsxs("div",{className:"max-w-[80rem] px-6 py-8 flex flex-col items-left",style:{marginLeft:"13rem"},children:[t.jsx("div",{className:"flex items-center space-x-2 mb-8",children:X.map((P,C)=>t.jsxs($e.Fragment,{children:[t.jsx("button",{className:`flex items-center border border-gray-800 justify-center w-[200px] h-[58px] p-[5px] rounded-[20px] text-sm font-medium transition-all ${n===P?"bg-[#1E395D] text-white":"bg-white text-gray-600 border border-gray-300"}`,onClick:()=>o(P),children:P}),C<X.length-1&&t.jsx("span",{className:"mx-3 text-gray-600 text-sm",children:">"})]},P))}),t.jsx("div",{className:"",children:t.jsx("div",{children:Pe()})})]})]})})},s_=()=>{const{delegateId:a}=ps(),s=Ct(),{allRegistrations:n}=Ot(),[o,l]=x.useState(null),[d,u]=x.useState(!0);x.useEffect(()=>{(async()=>{try{if(u(!0),!a){k.error("Delegate ID not found"),s("/organiser");return}const y=n?.find(v=>v.id.toString()===a);if(!y){k.error("Delegate not found"),s("/organiser");return}const b={id:y.id,username:y.user?.username||"",fullname:y.user?.fullname||"",birthday:y.user?.birthday||"",gender:y.user?.gender||"",school_location:y.user?.school?.locality?.name||"",school_name:y.user?.school?.name||"",grade:y.user?.grade||"",email:y.user?.email||"",phone_number:y.user?.phone_number||"",country_code:y.user?.country_code||"+971",role:y.user?.role||"",year_of_work_experience:y.user?.year_of_work_experience||null,avatar:y.user?.avatar||""};l(b)}catch(y){console.log("Error loading delegate profile:",y),k.error("Failed to load delegate profile"),s("/organiser")}finally{u(!1)}})()},[a,n,s]);const m=(f,y)=>f?`${y} ${f}`:"",g=f=>{if(!f)return"";try{return new Date(f).toLocaleDateString()}catch{return f}};return d?t.jsx(xs,{loadingText:"Loading delegate profile...",children:t.jsx("div",{})}):o?t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Wt,{}),t.jsxs("div",{className:"mx-auto py-8",style:{maxWidth:"65rem"},children:[t.jsxs("div",{className:"text-left mb-8",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("button",{onClick:()=>s("/organiser"),className:"flex items-center text-[#C2A46D] hover:text-[#A68B5B] transition-colors",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Organiser"]})}),t.jsx("div",{className:"relative inline-block",children:o.avatar?t.jsx("img",{src:o.avatar,alt:"Delegate Avatar",className:"w-32 h-32 border-4 border-white shadow-lg rounded-full object-cover"}):t.jsx(Ga,{size:"large",className:"w-32 h-32 border-4 border-white shadow-lg",showBorder:!0})}),t.jsxs("h1",{className:"font-bold text-gray-900 mt-4",style:{fontSize:"30px"},children:[o.role==="teacher"?"Teacher":"Student"," Profile"]}),t.jsxs("p",{className:"text-gray-600 mt-2",children:["Viewing profile for: ",o.fullname]})]}),t.jsxs("div",{className:"rounded-lg shadow-sm p-6 bg-white",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Username"}),t.jsx("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700",children:o.username})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Name"}),t.jsx("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700",children:o.fullname})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Date of Birth"}),t.jsx("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700",children:g(o.birthday)})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Gender"}),t.jsx("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700",children:o.gender?o.gender.charAt(0).toUpperCase()+o.gender.slice(1):""})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"School Location"}),t.jsx("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700",children:o.school_location})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"School Name"}),t.jsx("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700",children:o.school_name})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:o.role==="teacher"?"Years of Work Experience":"Grade/Year/Programme"}),t.jsx("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700",children:o.role==="teacher"?o.year_of_work_experience||"Not specified":o.grade||"Not specified"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Email"}),t.jsx("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700",children:o.email})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-base font-bold text-black mb-2",children:"Mobile"}),t.jsx("div",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm bg-gray-50 text-gray-700",children:m(o.phone_number,o.country_code||"+971")})]})]}),t.jsx("div",{className:"flex justify-end mt-8 space-x-4",children:t.jsx("button",{onClick:()=>s("/organiser"),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Close"})})]})]})]}):t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Delegate Not Found"}),t.jsx("button",{onClick:()=>s("/organiser"),className:"px-4 py-2 bg-[#C2A46D] text-white rounded-lg hover:bg-[#A68B5B] transition-colors",children:"Back to Organiser"})]})})};function r_(){return t.jsx(d4,{children:t.jsx(rw,{children:t.jsx(b4,{children:t.jsx(gC,{children:t.jsxs("div",{className:"App",children:[t.jsxs(L2,{children:[t.jsx(_t,{path:"/",element:t.jsx(HC,{})}),t.jsx(_t,{path:"/signup",element:t.jsx(IC,{})}),t.jsx(_t,{path:"/login",element:t.jsx(zC,{})}),t.jsx(_t,{path:"/email-verification",element:t.jsx(FC,{})}),t.jsx(_t,{path:"/email-confirmation",element:t.jsx(PC,{})}),t.jsx(_t,{path:"/test-email-confirmation",element:t.jsx(qC,{})}),t.jsx(_t,{path:"/profile-page",element:t.jsx(Ft,{children:t.jsx(Jh,{userType:"student"})})}),t.jsx(_t,{path:"/home",element:t.jsx(Ft,{children:t.jsx(VC,{})})}),t.jsx(_t,{path:"/dashboard",element:t.jsx(Ft,{children:t.jsx(YC,{})})}),t.jsx(_t,{path:"/request-approval",element:t.jsx(Ft,{children:t.jsx(GC,{})})}),t.jsx(_t,{path:"/request-under-verification",element:t.jsx(Ft,{children:t.jsx(WC,{})})}),t.jsx(_t,{path:"/event-create",element:t.jsx(Ft,{children:t.jsx(KC,{})})}),t.jsx(_t,{path:"/event-create-success",element:t.jsx(Ft,{children:t.jsx(QC,{})})}),t.jsx(_t,{path:"/organiser",element:t.jsx(Ft,{children:t.jsx(XC,{})})}),t.jsx(_t,{path:"/event-dashboard/:eventId",element:t.jsx(Ft,{children:t.jsx(Vk,{})})}),t.jsx(_t,{path:"/upload-delegates/:eventId",element:t.jsx(Ft,{children:t.jsx(Pk,{})})}),t.jsx(_t,{path:"/view-delegate-profile/:delegateId",element:t.jsx(Ft,{children:t.jsx(s_,{})})}),t.jsx(_t,{path:"/super-user",element:t.jsx(Ft,{children:t.jsx(e_,{})})}),t.jsx(_t,{path:"/student-profile",element:t.jsx(Ft,{children:t.jsx(ek,{})})}),t.jsx(_t,{path:"/student-profile-page",element:t.jsx(Ft,{children:t.jsx(sk,{})})}),t.jsx(_t,{path:"/student-home",element:t.jsx(Ft,{children:t.jsx(ak,{})})}),t.jsx(_t,{path:"/student-registration/:eventId",element:t.jsxs(Ft,{children:[t.jsx(ck,{})," "]})}),t.jsx(_t,{path:"/student-registration-success/:eventId",element:t.jsx(Ft,{children:t.jsx(dk,{})})}),t.jsx(_t,{path:"/student-delegate-page/:eventId",element:t.jsx(Ft,{children:t.jsx(yk,{})})}),t.jsx(_t,{path:"/teacher-profile",element:t.jsx(Ft,{children:t.jsx(tk,{})})}),t.jsx(_t,{path:"/teacher-profile-page",element:t.jsx(Ft,{children:t.jsx(rk,{})})}),t.jsx(_t,{path:"/teacher-home",element:t.jsx(Ft,{children:t.jsx(nk,{})})}),t.jsx(_t,{path:"/teacher-registration/:eventId",element:t.jsx(Ft,{children:t.jsx(bk,{})})}),t.jsx(_t,{path:"/teacher-registration-success/:eventId",element:t.jsx(Ft,{children:t.jsx(vk,{})})}),t.jsx(_t,{path:"/teacher-delegate-page/:eventId",element:t.jsx(Ft,{children:t.jsx(t_,{})})})]}),t.jsx(Pw,{position:"bottom-right",richColors:!0})]})})})})})}Hv.createRoot(document.getElementById("root")).render(t.jsx(x.StrictMode,{children:t.jsx(r_,{})}));
